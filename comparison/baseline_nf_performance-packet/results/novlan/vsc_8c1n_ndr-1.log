2018-11-29 10:22:58,135 INFO Loading configuration file: /tmp/nfvbench/nfvbench_config.cfg
2018-11-29 10:22:58,173 INFO EXT chain with OpenStack mode disabled
2018-11-29 10:22:58,173 INFO -c /tmp/nfvbench/nfvbench_config.cfg --rate ndr --flow-count 1024 --duration 30 --json /tmp/nfvbench/vsc_8c1n_ndr-1.json
2018-11-29 10:22:58,175 INFO Connecting to TRex (127.0.0.1)...


2018-11-29 10:22:58 - [local][warning]   - [1mCPU util. is high: 98.9%[22m
2018-11-29 10:22:58,204 INFO Connected to TRex
2018-11-29 10:22:58,204 INFO    Port 0: Ethernet Controller X710 for 10GbE SFP+ speed=10Gbps mac=e4:43:4b:2e:b1:d1 pci=0000:1a:00.1 driver=net_i40e
2018-11-29 10:22:58,204 INFO    Port 1: Ethernet Controller X710 for 10GbE SFP+ speed=10Gbps mac=e4:43:4b:2e:b1:d2 pci=0000:1a:00.2 driver=net_i40e
2018-11-29 10:22:58,205 INFO ChainRunner initialized
2018-11-29 10:22:58,206 INFO Starting 8xEXT benchmark...
2018-11-29 10:22:58,310 INFO Polling ARP until successful...
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=0 src IP=172.16.10.100 dst IP=172.16.10.10 -> MAC=52:54:00:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=1 src IP=172.16.10.101 dst IP=172.16.10.11 -> MAC=52:54:01:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=2 src IP=172.16.10.102 dst IP=172.16.10.12 -> MAC=52:54:02:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=3 src IP=172.16.10.103 dst IP=172.16.10.13 -> MAC=52:54:03:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=4 src IP=172.16.10.104 dst IP=172.16.10.14 -> MAC=52:54:04:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=5 src IP=172.16.10.105 dst IP=172.16.10.15 -> MAC=52:54:05:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=6 src IP=172.16.10.106 dst IP=172.16.10.16 -> MAC=52:54:06:00:00:aa
2018-11-29 10:22:58,525 INFO    ARP: port=0 chain=7 src IP=172.16.10.107 dst IP=172.16.10.17 -> MAC=52:54:07:00:00:aa
2018-11-29 10:22:58,526 INFO ARP resolved successfully for port 0
2018-11-29 10:22:58,740 INFO    ARP: port=1 chain=0 src IP=172.16.20.100 dst IP=172.16.20.10 -> MAC=52:54:00:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=1 src IP=172.16.20.101 dst IP=172.16.20.11 -> MAC=52:54:01:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=2 src IP=172.16.20.102 dst IP=172.16.20.12 -> MAC=52:54:02:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=3 src IP=172.16.20.103 dst IP=172.16.20.13 -> MAC=52:54:03:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=4 src IP=172.16.20.104 dst IP=172.16.20.14 -> MAC=52:54:04:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=5 src IP=172.16.20.105 dst IP=172.16.20.15 -> MAC=52:54:05:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=6 src IP=172.16.20.106 dst IP=172.16.20.16 -> MAC=52:54:06:00:00:bb
2018-11-29 10:22:58,741 INFO    ARP: port=1 chain=7 src IP=172.16.20.107 dst IP=172.16.20.17 -> MAC=52:54:07:00:00:bb
2018-11-29 10:22:58,741 INFO ARP resolved successfully for port 1
2018-11-29 10:22:58,865 INFO Port 0: dst MAC ['52:54:00:00:00:aa', '52:54:01:00:00:aa', '52:54:02:00:00:aa', '52:54:03:00:00:aa', '52:54:04:00:00:aa', '52:54:05:00:00:aa', '52:54:06:00:00:aa', '52:54:07:00:00:aa']
2018-11-29 10:22:58,866 INFO Port 1: dst MAC ['52:54:00:00:00:bb', '52:54:01:00:00:bb', '52:54:02:00:00:bb', '52:54:03:00:00:bb', '52:54:04:00:00:bb', '52:54:05:00:00:bb', '52:54:06:00:00:bb', '52:54:07:00:00:bb']
2018-11-29 10:22:58,866 INFO Starting traffic generator to ensure end-to-end connectivity
2018-11-29 10:22:58,911 INFO Created 8 traffic streams for port 0.
2018-11-29 10:22:58,916 INFO Created 8 traffic streams for port 1.
2018-11-29 10:22:59,030 INFO Captured unique src mac 0/16, capturing return packets (retry 1/100)...
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:01:00:00:bb (chain=1, port=1)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:02:00:00:aa (chain=2, port=0)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:02:00:00:bb (chain=2, port=1)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:06:00:00:aa (chain=6, port=0)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:07:00:00:aa (chain=7, port=0)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:00:00:00:bb (chain=0, port=1)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:00:00:00:aa (chain=0, port=0)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:06:00:00:bb (chain=6, port=1)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:05:00:00:bb (chain=5, port=1)
2018-11-29 10:23:01,155 INFO Received packet from mac: 52:54:01:00:00:aa (chain=1, port=0)
2018-11-29 10:23:01,156 INFO Received packet from mac: 52:54:03:00:00:aa (chain=3, port=0)
2018-11-29 10:23:01,156 INFO Received packet from mac: 52:54:03:00:00:bb (chain=3, port=1)
2018-11-29 10:23:01,156 INFO Received packet from mac: 52:54:07:00:00:bb (chain=7, port=1)
2018-11-29 10:23:01,156 INFO Received packet from mac: 52:54:04:00:00:aa (chain=4, port=0)
2018-11-29 10:23:01,156 INFO Received packet from mac: 52:54:04:00:00:bb (chain=4, port=1)
2018-11-29 10:23:01,156 INFO Received packet from mac: 52:54:05:00:00:aa (chain=5, port=0)
2018-11-29 10:23:01,156 INFO End-to-end connectivity established
2018-11-29 10:23:01,176 INFO Cleared all existing streams
2018-11-29 10:23:01,235 INFO Created 16 traffic streams for port 0.
2018-11-29 10:23:01,249 INFO Created 16 traffic streams for port 1.
2018-11-29 10:23:01,249 INFO *** Searching NDR for 64 (Bidirectional)...
2018-11-29 10:23:01,249 INFO Range search [0.0 .. 200.0] targets: {'ndr': 0.001}
2018-11-29 10:23:01,250 INFO Modified traffic stream for port 0, new rate=100.0%.
2018-11-29 10:23:01,250 INFO Modified traffic stream for port 1, new rate=100.0%.
2018-11-29 10:23:01,250 INFO Running traffic generator


2018-11-29 10:23:06 - [local][warning]   - [1mCPU util. is high: 86.8%[22m
2018-11-29 10:23:11,287 INFO TX: 259552257; RX: 11739857; Est. Dropped: 247812400; Est. Drop rate: 95.4769%
2018-11-29 10:23:21,310 INFO TX: 520564094; RX: 23492651; Est. Dropped: 497071443; Est. Drop rate: 95.4871%
2018-11-29 10:23:31,300 INFO TX: 780595776; RX: 35203133; Est. Dropped: 745392643; Est. Drop rate: 95.4902%
2018-11-29 10:23:33,312 INFO WARNING: There is a significant difference between requested TX rate (29761904) and actual TX rate (26019859). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
2018-11-29 10:23:33,312 INFO Average drop rate: 95.489919
2018-11-29 10:23:33,312 INFO Range search [0.0 .. 100.0] targets: {'ndr': 0.001}
2018-11-29 10:23:33,313 INFO Modified traffic stream for port 0, new rate=50.0%.
2018-11-29 10:23:33,313 INFO Modified traffic stream for port 1, new rate=50.0%.
2018-11-29 10:23:33,313 INFO Running traffic generator
2018-11-29 10:23:43,354 INFO TX: 148951456; RX: 11768787; Est. Dropped: 137182669; Est. Drop rate: 92.0989%
2018-11-29 10:23:53,376 INFO TX: 298079720; RX: 23559860; Est. Dropped: 274519860; Est. Drop rate: 92.0961%
2018-11-29 10:24:03,366 INFO TX: 446428560; RX: 35295429; Est. Dropped: 411133131; Est. Drop rate: 92.0938%
2018-11-29 10:24:05,379 INFO Average drop rate: 92.093594
2018-11-29 10:24:05,379 INFO Range search [0.0 .. 50.0] targets: {'ndr': 0.001}
2018-11-29 10:24:05,379 INFO Modified traffic stream for port 0, new rate=25.0%.
2018-11-29 10:24:05,379 INFO Modified traffic stream for port 1, new rate=25.0%.
2018-11-29 10:24:05,379 INFO Running traffic generator
2018-11-29 10:24:15,422 INFO TX: 74482744; RX: 10259442; Est. Dropped: 64223302; Est. Drop rate: 86.2257%
2018-11-29 10:24:25,445 INFO TX: 149051864; RX: 20526574; Est. Dropped: 128525290; Est. Drop rate: 86.2286%
2018-11-29 10:24:35,434 INFO TX: 223214240; RX: 30742607; Est. Dropped: 192471633; Est. Drop rate: 86.2273%
2018-11-29 10:24:37,447 INFO Average drop rate: 86.227064
2018-11-29 10:24:37,447 INFO Range search [0.0 .. 25.0] targets: {'ndr': 0.001}
2018-11-29 10:24:37,447 INFO Modified traffic stream for port 0, new rate=12.5%.
2018-11-29 10:24:37,447 INFO Modified traffic stream for port 1, new rate=12.5%.
2018-11-29 10:24:37,447 INFO Running traffic generator
2018-11-29 10:24:47,487 INFO TX: 37235420; RX: 5796608; Est. Dropped: 31438812; Est. Drop rate: 84.4325%
2018-11-29 10:24:57,510 INFO TX: 74522904; RX: 11599275; Est. Dropped: 62923629; Est. Drop rate: 84.4353%
2018-11-29 10:25:07,496 INFO TX: 111607168; RX: 17372682; Est. Dropped: 94234486; Est. Drop rate: 84.4341%
2018-11-29 10:25:09,510 INFO Average drop rate: 84.432952
2018-11-29 10:25:09,510 INFO Range search [0.0 .. 12.5] targets: {'ndr': 0.001}
2018-11-29 10:25:09,510 INFO Modified traffic stream for port 0, new rate=6.25%.
2018-11-29 10:25:09,510 INFO Modified traffic stream for port 1, new rate=6.25%.
2018-11-29 10:25:09,510 INFO Running traffic generator
2018-11-29 10:25:19,554 INFO TX: 18619864; RX: 3542012; Est. Dropped: 15077852; Est. Drop rate: 80.9772%
2018-11-29 10:25:29,577 INFO TX: 37262576; RX: 7088700; Est. Dropped: 30173876; Est. Drop rate: 80.9764%
2018-11-29 10:25:39,564 INFO TX: 55803568; RX: 10618502; Est. Dropped: 45185066; Est. Drop rate: 80.9716%
2018-11-29 10:25:41,578 INFO Average drop rate: 80.969808
2018-11-29 10:25:41,578 INFO Range search [0.0 .. 6.25] targets: {'ndr': 0.001}
2018-11-29 10:25:41,578 INFO Modified traffic stream for port 0, new rate=3.125%.
2018-11-29 10:25:41,578 INFO Modified traffic stream for port 1, new rate=3.125%.
2018-11-29 10:25:41,578 INFO Running traffic generator
2018-11-29 10:25:51,625 INFO TX: 9309080; RX: 2402679; Est. Dropped: 6906401; Est. Drop rate: 74.1899%
2018-11-29 10:26:01,649 INFO TX: 18631272; RX: 4824373; Est. Dropped: 13806899; Est. Drop rate: 74.1060%
2018-11-29 10:26:11,635 INFO TX: 27901792; RX: 7221963; Est. Dropped: 20679829; Est. Drop rate: 74.1165%
2018-11-29 10:26:13,649 INFO Average drop rate: 74.113688
2018-11-29 10:26:13,649 INFO Range search [0.0 .. 3.125] targets: {'ndr': 0.001}
2018-11-29 10:26:13,649 INFO Modified traffic stream for port 0, new rate=1.5625%.
2018-11-29 10:26:13,649 INFO Modified traffic stream for port 1, new rate=1.5625%.
2018-11-29 10:26:13,649 INFO Running traffic generator
2018-11-29 10:26:23,692 INFO TX: 4654640; RX: 1841672; Est. Dropped: 2812968; Est. Drop rate: 60.4336%
2018-11-29 10:26:33,716 INFO TX: 9315664; RX: 3697804; Est. Dropped: 5617860; Est. Drop rate: 60.3055%
2018-11-29 10:26:43,701 INFO TX: 13950896; RX: 5538634; Est. Dropped: 8412262; Est. Drop rate: 60.2991%
2018-11-29 10:26:45,716 INFO Average drop rate: 60.292988
2018-11-29 10:26:45,716 INFO Range search [0.0 .. 1.5625] targets: {'ndr': 0.001}
2018-11-29 10:26:45,716 INFO Modified traffic stream for port 0, new rate=0.78125%.
2018-11-29 10:26:45,716 INFO Modified traffic stream for port 1, new rate=0.78125%.
2018-11-29 10:26:45,716 INFO Running traffic generator
2018-11-29 10:26:55,762 INFO TX: 2327232; RX: 1568932; Est. Dropped: 758300; Est. Drop rate: 32.5838%
2018-11-29 10:27:05,786 INFO TX: 4657880; RX: 3132496; Est. Dropped: 1525384; Est. Drop rate: 32.7485%
2018-11-29 10:27:15,773 INFO TX: 6975456; RX: 4689448; Est. Dropped: 2286008; Est. Drop rate: 32.7722%
2018-11-29 10:27:17,787 INFO Average drop rate: 32.765557
2018-11-29 10:27:17,788 INFO Range search [0.0 .. 0.78125] targets: {'ndr': 0.001}
2018-11-29 10:27:17,788 INFO Modified traffic stream for port 0, new rate=0.390625%.
2018-11-29 10:27:17,788 INFO Modified traffic stream for port 1, new rate=0.390625%.
2018-11-29 10:27:17,788 INFO Running traffic generator
2018-11-29 10:27:27,835 INFO TX: 1163672; RX: 1139290; Est. Dropped: 24382; Est. Drop rate: 2.0953%
2018-11-29 10:27:37,859 INFO TX: 2329040; RX: 2282320; Est. Dropped: 46720; Est. Drop rate: 2.0060%
2018-11-29 10:27:47,845 INFO TX: 3487728; RX: 3417704; Est. Dropped: 70024; Est. Drop rate: 2.0077%
2018-11-29 10:27:49,860 INFO Average drop rate: 2.003052
2018-11-29 10:27:49,861 INFO Range search [0.0 .. 0.390625] targets: {'ndr': 0.001}
2018-11-29 10:27:49,861 INFO Modified traffic stream for port 0, new rate=0.1953125%.
2018-11-29 10:27:49,861 INFO Modified traffic stream for port 1, new rate=0.1953125%.
2018-11-29 10:27:49,861 INFO Running traffic generator
2018-11-29 10:27:59,901 INFO TX: 581792; RX: 581085; Est. Dropped: 707; Est. Drop rate: 0.1215%
2018-11-29 10:28:09,925 INFO TX: 1164472; RX: 1163769; Est. Dropped: 703; Est. Drop rate: 0.0604%
2018-11-29 10:28:19,911 INFO TX: 1743872; RX: 1743730; Est. Dropped: 142; Est. Drop rate: 0.0081%
2018-11-29 10:28:21,926 INFO Average drop rate: 0.001147
2018-11-29 10:28:21,926 INFO Range search [0.0 .. 0.1953125] targets: {'ndr': 0.001}
2018-11-29 10:28:21,926 INFO Modified traffic stream for port 0, new rate=0.09765625%.
2018-11-29 10:28:21,926 INFO Modified traffic stream for port 1, new rate=0.09765625%.
2018-11-29 10:28:21,926 INFO Running traffic generator
2018-11-29 10:28:31,974 INFO TX: 290952; RX: 290585; Est. Dropped: 367; Est. Drop rate: 0.1261%
2018-11-29 10:28:41,999 INFO TX: 582296; RX: 581903; Est. Dropped: 393; Est. Drop rate: 0.0675%
2018-11-29 10:28:51,984 INFO TX: 871936; RX: 871911; Est. Dropped: 25; Est. Drop rate: 0.0029%
2018-11-29 10:28:54,000 INFO Average drop rate: 0.000000
2018-11-29 10:28:54,000 INFO Range search [0.09765625 .. 0.1953125] targets: {'ndr': 0.001}
2018-11-29 10:28:54,000 INFO Found ndr (0.001) load: 0.09765625
2018-11-29 10:28:54,000 INFO NDR load: 0.1953125
2018-11-29 10:28:54,021 INFO Cleared all existing streams
2018-11-29 10:28:54,022 INFO Clean up skipped.
2018-11-29 10:28:54,043 ERROR {'status': 'ERROR', 'error_message': 'Traceback (most recent call last):\n  File "/nfvbench/nfvbench/nfvbench.py", line 613, in main\n    raise Exception(result[\'error_message\'])\nException: Traceback (most recent call last):\n  File "/nfvbench/nfvbench/nfvbench.py", line 111, in run\n    "service_chain": self.chain_runner.run(),\n  File "/nfvbench/nfvbench/chain_runner.py", line 160, in run\n    results[self.chain_name] = {\'result\': self.__get_chain_result()}\n  File "/nfvbench/nfvbench/chain_runner.py", line 134, in __get_chain_result\n    self.config.traffic.bidirectional))\n  File "/nfvbench/nfvbench/chain_runner.py", line 99, in __get_result_per_frame_size\n    self.traffic_client.set_traffic(actual_frame_size, bidirectional)\n  File "/nfvbench/nfvbench/traffic_client.py", line 565, in set_traffic\n    self.gen.create_traffic(frame_size, self.run_config[\'rates\'], bidirectional, latency=True)\n  File "/nfvbench/nfvbench/traffic_gen/trex.py", line 539, in create_traffic\n    load=r[\'rate_percent\']))\nTrafficGeneratorException: Required rate in total is at least one of: \n16016pps \n48923541bps \n0.244617706667%.\n\n'}
Traceback (most recent call last):
  File "/nfvbench/nfvbench/nfvbench.py", line 111, in run
    "service_chain": self.chain_runner.run(),
  File "/nfvbench/nfvbench/chain_runner.py", line 160, in run
    results[self.chain_name] = {'result': self.__get_chain_result()}
  File "/nfvbench/nfvbench/chain_runner.py", line 134, in __get_chain_result
    self.config.traffic.bidirectional))
  File "/nfvbench/nfvbench/chain_runner.py", line 99, in __get_result_per_frame_size
    self.traffic_client.set_traffic(actual_frame_size, bidirectional)
  File "/nfvbench/nfvbench/traffic_client.py", line 565, in set_traffic
    self.gen.create_traffic(frame_size, self.run_config['rates'], bidirectional, latency=True)
  File "/nfvbench/nfvbench/traffic_gen/trex.py", line 539, in create_traffic
    load=r['rate_percent']))
TrafficGeneratorException: Required rate in total is at least one of:
16016pps
48923541bps
0.244617706667%.

