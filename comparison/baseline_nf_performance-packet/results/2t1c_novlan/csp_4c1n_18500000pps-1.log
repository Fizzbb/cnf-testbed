2018-11-28 14:41:27,073 INFO Loading configuration file: /tmp/nfvbench/nfvbench_config.cfg
2018-11-28 14:41:27,111 INFO EXT chain with OpenStack mode disabled
2018-11-28 14:41:27,111 INFO -c /tmp/nfvbench/nfvbench_config.cfg --rate 18500000pps --flow-count 1024 --duration 30 --json /tmp/nfvbench/csp_4c1n_18500000pps-1.json
2018-11-28 14:41:27,113 INFO Connecting to TRex (127.0.0.1)...
2018-11-28 14:41:27,253 INFO Connected to TRex
2018-11-28 14:41:27,253 INFO    Port 0: Ethernet Controller X710 for 10GbE SFP+ speed=10Gbps mac=e4:43:4b:2e:b1:d1 pci=0000:1a:00.1 driver=net_i40e
2018-11-28 14:41:27,253 INFO    Port 1: Ethernet Controller X710 for 10GbE SFP+ speed=10Gbps mac=e4:43:4b:2e:b1:d2 pci=0000:1a:00.2 driver=net_i40e
2018-11-28 14:41:27,254 INFO ChainRunner initialized
2018-11-28 14:41:27,255 INFO Starting 4xEXT benchmark...
2018-11-28 14:41:27,359 INFO Polling ARP until successful...
2018-11-28 14:41:27,491 INFO    ARP: port=0 chain=0 src IP=172.16.10.100 dst IP=172.16.10.10 -> MAC=52:54:00:00:00:aa
2018-11-28 14:41:27,491 INFO    ARP: port=0 chain=1 src IP=172.16.10.101 dst IP=172.16.10.11 -> MAC=52:54:01:00:00:aa
2018-11-28 14:41:27,491 INFO    ARP: port=0 chain=2 src IP=172.16.10.102 dst IP=172.16.10.12 -> MAC=52:54:02:00:00:aa
2018-11-28 14:41:27,491 INFO    ARP: port=0 chain=3 src IP=172.16.10.103 dst IP=172.16.10.13 -> MAC=52:54:03:00:00:aa
2018-11-28 14:41:27,491 INFO ARP resolved successfully for port 0
2018-11-28 14:41:27,621 INFO    ARP: port=1 chain=0 src IP=172.16.20.100 dst IP=172.16.20.10 -> MAC=52:54:00:00:00:bb
2018-11-28 14:41:27,621 INFO    ARP: port=1 chain=1 src IP=172.16.20.101 dst IP=172.16.20.11 -> MAC=52:54:01:00:00:bb
2018-11-28 14:41:27,622 INFO    ARP: port=1 chain=2 src IP=172.16.20.102 dst IP=172.16.20.12 -> MAC=52:54:02:00:00:bb
2018-11-28 14:41:27,622 INFO    ARP: port=1 chain=3 src IP=172.16.20.103 dst IP=172.16.20.13 -> MAC=52:54:03:00:00:bb
2018-11-28 14:41:27,622 INFO ARP resolved successfully for port 1
2018-11-28 14:41:27,723 INFO Port 0: dst MAC ['52:54:00:00:00:aa', '52:54:01:00:00:aa', '52:54:02:00:00:aa', '52:54:03:00:00:aa']
2018-11-28 14:41:27,723 INFO Port 1: dst MAC ['52:54:00:00:00:bb', '52:54:01:00:00:bb', '52:54:02:00:00:bb', '52:54:03:00:00:bb']
2018-11-28 14:41:27,723 INFO Starting traffic generator to ensure end-to-end connectivity
2018-11-28 14:41:27,746 INFO Created 4 traffic streams for port 0.
2018-11-28 14:41:27,749 INFO Created 4 traffic streams for port 1.
2018-11-28 14:41:27,861 INFO Captured unique src mac 0/8, capturing return packets (retry 1/100)...
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:02:00:00:aa (chain=2, port=0)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:01:00:00:bb (chain=1, port=1)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:02:00:00:bb (chain=2, port=1)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:03:00:00:bb (chain=3, port=1)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:00:00:00:aa (chain=0, port=0)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:00:00:00:bb (chain=0, port=1)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:01:00:00:aa (chain=1, port=0)
2018-11-28 14:41:29,984 INFO Received packet from mac: 52:54:03:00:00:aa (chain=3, port=0)
2018-11-28 14:41:29,984 INFO End-to-end connectivity established
2018-11-28 14:41:30,002 INFO Cleared all existing streams
2018-11-28 14:41:30,032 INFO Created 8 traffic streams for port 0.
2018-11-28 14:41:30,038 INFO Created 8 traffic streams for port 1.
2018-11-28 14:41:30,042 INFO Starting to generate traffic...
2018-11-28 14:41:30,042 INFO Running traffic generator
2018-11-28 14:41:40,071 INFO TX: 185195292; RX: 49388872; Est. Dropped: 135806420; Est. Drop rate: 73.3315%
2018-11-28 14:41:50,089 INFO TX: 370511696; RX: 98679880; Est. Dropped: 271831816; Est. Drop rate: 73.3666%
2018-11-28 14:42:00,082 INFO TX: 555000048; RX: 147691926; Est. Dropped: 407308122; Est. Drop rate: 73.3888%
2018-11-28 14:42:00,082 INFO ...traffic generating ended.
2018-11-28 14:42:00,115 INFO Cleared all existing streams
2018-11-28 14:42:00,203 INFO Created 16 traffic streams for port 0.
2018-11-28 14:42:00,213 INFO Created 16 traffic streams for port 1.
2018-11-28 14:42:00,217 INFO Starting to generate traffic...
2018-11-28 14:42:00,218 INFO Running traffic generator


2018-11-28 14:42:03 - [local][warning]   - [1mCPU util. is high: 86.1%[22m
2018-11-28 14:42:10,247 INFO TX: 65543448; RX: 29791803; Est. Dropped: 35751645; Est. Drop rate: 54.5465%
2018-11-28 14:42:20,265 INFO TX: 131134231; RX: 59584939; Est. Dropped: 71549292; Est. Drop rate: 54.5619%
2018-11-28 14:42:30,261 INFO TX: 196510948; RX: 89280590; Est. Dropped: 107230358; Est. Drop rate: 54.5671%
2018-11-28 14:42:30,261 INFO ...traffic generating ended.
2018-11-28 14:42:30,268 INFO WARNING: There is a significant difference between requested TX rate (18500000.0) and actual TX rate (6550364). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
2018-11-28 14:42:30,268 INFO Service chain 'EXT' run completed.
2018-11-28 14:42:30,268 INFO Clean up skipped.
2018-11-28 14:42:30,300 INFO Saving results in json file: /tmp/nfvbench/csp_4c1n_18500000pps-1.json...
2018-11-28 14:42:30,314 INFO 
========== NFVBench Summary ==========
Date: 2018-11-28 14:41:27
NFVBench version 2.0.4
Openstack Neutron:
  vSwitch: 
  Encapsulation: 
Benchmarks:
> Networks:
  > Components:
    > Traffic Generator:
        Profile: trex-local
        Tool: TRex
    > Versions:
      > Traffic_Generator:
          build_date: Nov 13 2017
          version: v2.32
          built_by: hhaim
          mode: STL
          build_time: 10:58:17
  > Service chain:
    > EXT:
      > Traffic:
          Profile: traffic_profile_2sizes
          Bidirectional: True
          Flow count: 1024
          Service chains count: 4
          Compute nodes: []
            
            Run Summary:
            
              +-----------------+-------------+----------------------+----------------------+----------------------+
              |  L2 Frame Size  |  Drop Rate  |  Avg Latency (usec)  |   Min Latency (usec) |  Max Latency (usec)  |
              +=================+=============+======================+======================+======================+
              |       64        |  73.3888%   |         614          |                   10 |         795          |
              +-----------------+-------------+----------------------+----------------------+----------------------+
              |      IMIX       |  54.5671%   |        1,049         |                   80 |        1,424         |
              +-----------------+-------------+----------------------+----------------------+----------------------+
              
            
            L2 frame size: 64
            
            Run Config:
            
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |  Direction  |  Requested TX Rate (bps)  |  Actual TX Rate (bps)  |  RX Rate (bps)  |  Requested TX Rate (pps)  |  Actual TX Rate (pps)  |  RX Rate (pps)  |
              +=============+===========================+========================+=================+===========================+========================+=================+
              |   Forward   |        6.2160 Gbps        |      6.2160 Gbps       |   1.6549 Gbps   |       9,250,000 pps       |     9,250,000 pps      |  2,462,584 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |   Reverse   |        6.2160 Gbps        |      6.2160 Gbps       |   1.6534 Gbps   |       9,250,000 pps       |     9,250,000 pps      |  2,460,479 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |    Total    |       12.4320 Gbps        |      12.4320 Gbps      |   3.3083 Gbps   |      18,500,000 pps       |     18,500,000 pps     |  4,923,063 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              
            Forward Chain Packet Counters and Latency:
            
              +---------+--------------+--------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p0  |        TRex.RX.p1        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+==========================+============+============+============+
              |    0    |  69,375,006  | -50,905,901 (-73.3779%)  |  615 usec  |  20 usec   |  760 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    1    |  69,375,006  | -50,905,746 (-73.3776%)  |  617 usec  |  20 usec   |  765 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    2    |  69,375,006  | -50,905,522 (-73.3773%)  |  621 usec  |  20 usec   |  769 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    3    |  69,375,006  | -50,905,320 (-73.3770%)  |  627 usec  |  10 usec   |  772 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |  total  | 277,500,024  | -203,622,489 (-73.3775%) |  620 usec  |  10 usec   |  772 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              
            Reverse Chain Packet Counters and Latency:
            
              +---------+--------------+--------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p1  |        TRex.RX.p0        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+==========================+============+============+============+
              |    0    |  69,375,006  | -50,921,133 (-73.3998%)  |  604 usec  |  500 usec  |  795 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    1    |  69,375,006  | -50,921,674 (-73.4006%)  |  609 usec  |  500 usec  |  772 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    2    |  69,375,006  | -50,921,162 (-73.3999%)  |  613 usec  |  500 usec  |  750 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    3    |  69,375,006  | -50,921,664 (-73.4006%)  |  616 usec  |  500 usec  |  781 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |  total  | 277,500,024  | -203,685,633 (-73.4002%) |  611 usec  |  500 usec  |  795 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              
            
            L2 frame size: IMIX
            
            Run Config:
            
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |  Direction  |  Requested TX Rate (bps)  |  Actual TX Rate (bps)  |  RX Rate (bps)  |  Requested TX Rate (pps)  |  Actual TX Rate (pps)  |  RX Rate (pps)  |
              +=============+===========================+========================+=================+===========================+========================+=================+
              |   Forward   |       28.2557 Gbps        |      10.0050 Gbps      |   5.5311 Gbps   |       9,250,000 pps       |     3,275,301 pps      |  1,810,721 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |   Reverse   |       28.2557 Gbps        |      10.0042 Gbps      |   3.5596 Gbps   |       9,250,000 pps       |     3,275,063 pps      |  1,165,298 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |    Total    |       56.5113 Gbps        |      20.0092 Gbps      |   9.0907 Gbps   |      18,500,000 pps       |     6,550,364 pps      |  2,976,019 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              
              WARNING: There is a significant difference between requested TX rate (18500000.0) and actual TX rate (6550364). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
              
            Forward Chain Packet Counters and Latency:
            
              +---------+--------------+-------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p0  |       TRex.RX.p1        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+=========================+============+============+============+
              |    0    |  24,564,763  | -10,994,866 (-44.7587%) |  903 usec  |  200 usec  | 1,113 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    1    |  24,564,763  | -11,002,359 (-44.7892%) |  908 usec  |  100 usec  | 1,110 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    2    |  24,564,763  | -10,968,524 (-44.6515%) |  915 usec  |  200 usec  | 1,131 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    3    |  24,564,763  | -10,971,671 (-44.6643%) |  920 usec  |  200 usec  | 1,149 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |  total  |  98,259,052  | -43,937,420 (-44.7159%) |  912 usec  |  100 usec  | 1,149 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              
            Reverse Chain Packet Counters and Latency:
            
              +---------+--------------+-------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p1  |       TRex.RX.p0        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+=========================+============+============+============+
              |    0    |  24,562,974  | -15,822,387 (-64.4156%) | 1,122 usec |  100 usec  | 1,370 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    1    |  24,562,974  | -15,822,542 (-64.4162%) | 1,131 usec |  80 usec   | 1,390 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    2    |  24,562,974  | -15,824,210 (-64.4230%) | 1,141 usec |  200 usec  | 1,407 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    3    |  24,562,974  | -15,823,799 (-64.4213%) | 1,158 usec |  200 usec  | 1,424 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |  total  |  98,251,896  | -63,292,938 (-64.4190%) | 1,138 usec |  80 usec   | 1,424 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              

