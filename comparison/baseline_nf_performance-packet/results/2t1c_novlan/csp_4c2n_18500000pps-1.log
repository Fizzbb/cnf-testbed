2018-11-28 14:55:55,494 INFO Loading configuration file: /tmp/nfvbench/nfvbench_config.cfg
2018-11-28 14:55:55,531 INFO EXT chain with OpenStack mode disabled
2018-11-28 14:55:55,532 INFO -c /tmp/nfvbench/nfvbench_config.cfg --rate 18500000pps --flow-count 1024 --duration 30 --json /tmp/nfvbench/csp_4c2n_18500000pps-1.json
2018-11-28 14:55:55,533 INFO Connecting to TRex (127.0.0.1)...
2018-11-28 14:55:55,672 INFO Connected to TRex
2018-11-28 14:55:55,672 INFO    Port 0: Ethernet Controller X710 for 10GbE SFP+ speed=10Gbps mac=e4:43:4b:2e:b1:d1 pci=0000:1a:00.1 driver=net_i40e
2018-11-28 14:55:55,672 INFO    Port 1: Ethernet Controller X710 for 10GbE SFP+ speed=10Gbps mac=e4:43:4b:2e:b1:d2 pci=0000:1a:00.2 driver=net_i40e
2018-11-28 14:55:55,673 INFO ChainRunner initialized
2018-11-28 14:55:55,674 INFO Starting 4xEXT benchmark...
2018-11-28 14:55:55,789 INFO Polling ARP until successful...
2018-11-28 14:55:55,943 INFO    ARP: port=0 chain=0 src IP=172.16.10.100 dst IP=172.16.10.10 -> MAC=52:54:00:00:00:aa
2018-11-28 14:55:55,943 INFO    ARP: port=0 chain=1 src IP=172.16.10.101 dst IP=172.16.10.11 -> MAC=52:54:01:00:00:aa
2018-11-28 14:55:55,943 INFO    ARP: port=0 chain=2 src IP=172.16.10.102 dst IP=172.16.10.12 -> MAC=52:54:02:00:00:aa
2018-11-28 14:55:55,943 INFO    ARP: port=0 chain=3 src IP=172.16.10.103 dst IP=172.16.10.13 -> MAC=52:54:03:00:00:aa
2018-11-28 14:55:55,943 INFO ARP resolved successfully for port 0
2018-11-28 14:55:56,074 INFO    ARP: port=1 chain=0 src IP=172.16.20.100 dst IP=172.16.20.10 -> MAC=52:54:00:00:00:bb
2018-11-28 14:55:56,074 INFO    ARP: port=1 chain=1 src IP=172.16.20.101 dst IP=172.16.20.11 -> MAC=52:54:01:00:00:bb
2018-11-28 14:55:56,074 INFO    ARP: port=1 chain=2 src IP=172.16.20.102 dst IP=172.16.20.12 -> MAC=52:54:02:00:00:bb
2018-11-28 14:55:56,074 INFO    ARP: port=1 chain=3 src IP=172.16.20.103 dst IP=172.16.20.13 -> MAC=52:54:03:00:00:bb
2018-11-28 14:55:56,074 INFO ARP resolved successfully for port 1
2018-11-28 14:55:56,198 INFO Port 0: dst MAC ['52:54:00:00:00:aa', '52:54:01:00:00:aa', '52:54:02:00:00:aa', '52:54:03:00:00:aa']
2018-11-28 14:55:56,198 INFO Port 1: dst MAC ['52:54:00:00:00:bb', '52:54:01:00:00:bb', '52:54:02:00:00:bb', '52:54:03:00:00:bb']
2018-11-28 14:55:56,198 INFO Starting traffic generator to ensure end-to-end connectivity
2018-11-28 14:55:56,220 INFO Created 4 traffic streams for port 0.
2018-11-28 14:55:56,223 INFO Created 4 traffic streams for port 1.
2018-11-28 14:55:56,335 INFO Captured unique src mac 0/8, capturing return packets (retry 1/100)...
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:01:00:00:bb (chain=1, port=1)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:02:00:00:bb (chain=2, port=1)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:03:00:00:bb (chain=3, port=1)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:00:00:00:bb (chain=0, port=1)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:03:00:00:aa (chain=3, port=0)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:00:00:00:aa (chain=0, port=0)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:01:00:00:aa (chain=1, port=0)
2018-11-28 14:55:58,458 INFO Received packet from mac: 52:54:02:00:00:aa (chain=2, port=0)
2018-11-28 14:55:58,458 INFO End-to-end connectivity established
2018-11-28 14:55:58,476 INFO Cleared all existing streams
2018-11-28 14:55:58,507 INFO Created 8 traffic streams for port 0.
2018-11-28 14:55:58,512 INFO Created 8 traffic streams for port 1.
2018-11-28 14:55:58,518 INFO Starting to generate traffic...
2018-11-28 14:55:58,518 INFO Running traffic generator
2018-11-28 14:56:08,545 INFO TX: 185195311; RX: 48354144; Est. Dropped: 136841167; Est. Drop rate: 73.8902%
2018-11-28 14:56:18,563 INFO TX: 370500779; RX: 96517472; Est. Dropped: 273983307; Est. Drop rate: 73.9495%
2018-11-28 14:56:28,558 INFO TX: 555000048; RX: 144467951; Est. Dropped: 410532097; Est. Drop rate: 73.9697%
2018-11-28 14:56:28,558 INFO ...traffic generating ended.
2018-11-28 14:56:28,583 INFO Cleared all existing streams
2018-11-28 14:56:28,671 INFO Created 16 traffic streams for port 0.
2018-11-28 14:56:28,681 INFO Created 16 traffic streams for port 1.
2018-11-28 14:56:28,687 INFO Starting to generate traffic...
2018-11-28 14:56:28,687 INFO Running traffic generator


2018-11-28 14:56:32 - [local][warning]   - [1mCPU util. is high: 87.7%[22m
2018-11-28 14:56:38,716 INFO TX: 65544188; RX: 27593679; Est. Dropped: 37950509; Est. Drop rate: 57.9006%
2018-11-28 14:56:48,734 INFO TX: 131134552; RX: 55209558; Est. Dropped: 75924994; Est. Drop rate: 57.8985%
2018-11-28 14:56:58,729 INFO TX: 196508632; RX: 82678337; Est. Dropped: 113830295; Est. Drop rate: 57.9264%
2018-11-28 14:56:58,729 INFO ...traffic generating ended.
2018-11-28 14:56:58,735 INFO WARNING: There is a significant difference between requested TX rate (18500000.0) and actual TX rate (6550287). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
2018-11-28 14:56:58,735 INFO Service chain 'EXT' run completed.
2018-11-28 14:56:58,736 INFO Clean up skipped.
2018-11-28 14:56:58,763 INFO Saving results in json file: /tmp/nfvbench/csp_4c2n_18500000pps-1.json...
2018-11-28 14:56:58,778 INFO 
========== NFVBench Summary ==========
Date: 2018-11-28 14:55:55
NFVBench version 2.0.4
Openstack Neutron:
  vSwitch: 
  Encapsulation: 
Benchmarks:
> Networks:
  > Components:
    > Traffic Generator:
        Profile: trex-local
        Tool: TRex
    > Versions:
      > Traffic_Generator:
          build_date: Nov 13 2017
          version: v2.32
          built_by: hhaim
          mode: STL
          build_time: 10:58:17
  > Service chain:
    > EXT:
      > Traffic:
          Profile: traffic_profile_2sizes
          Bidirectional: True
          Flow count: 1024
          Service chains count: 4
          Compute nodes: []
            
            Run Summary:
            
              +-----------------+-------------+----------------------+----------------------+----------------------+
              |  L2 Frame Size  |  Drop Rate  |  Avg Latency (usec)  |   Min Latency (usec) |  Max Latency (usec)  |
              +=================+=============+======================+======================+======================+
              |       64        |  73.9697%   |         663          |                   60 |         781          |
              +-----------------+-------------+----------------------+----------------------+----------------------+
              |      IMIX       |  57.9264%   |        1,054         |                  400 |        1,355         |
              +-----------------+-------------+----------------------+----------------------+----------------------+
              
            
            L2 frame size: 64
            
            Run Config:
            
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |  Direction  |  Requested TX Rate (bps)  |  Actual TX Rate (bps)  |  RX Rate (bps)  |  Requested TX Rate (pps)  |  Actual TX Rate (pps)  |  RX Rate (pps)  |
              +=============+===========================+========================+=================+===========================+========================+=================+
              |   Forward   |        6.2160 Gbps        |      6.2160 Gbps       |   1.6163 Gbps   |       9,250,000 pps       |     9,250,000 pps      |  2,405,191 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |   Reverse   |        6.2160 Gbps        |      6.2160 Gbps       |   1.6198 Gbps   |       9,250,000 pps       |     9,250,000 pps      |  2,410,406 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |    Total    |       12.4320 Gbps        |      12.4320 Gbps      |   3.2361 Gbps   |      18,500,000 pps       |     18,500,000 pps     |  4,815,597 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              
            Forward Chain Packet Counters and Latency:
            
              +---------+--------------+--------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p0  |        TRex.RX.p1        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+==========================+============+============+============+
              |    0    |  69,375,006  | -51,336,290 (-73.9982%)  |  671 usec  |  100 usec  |  770 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    1    |  69,375,006  | -51,336,120 (-73.9980%)  |  672 usec  |  100 usec  |  773 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    2    |  69,375,006  | -51,335,747 (-73.9975%)  |  669 usec  |  90 usec   |  778 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    3    |  69,375,006  | -51,336,116 (-73.9980%)  |  659 usec  |  60 usec   |  760 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |  total  | 277,500,024  | -205,344,273 (-73.9979%) |  668 usec  |  60 usec   |  778 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              
            Reverse Chain Packet Counters and Latency:
            
              +---------+--------------+--------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p1  |        TRex.RX.p0        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+==========================+============+============+============+
              |    0    |  69,375,006  | -51,296,943 (-73.9415%)  |  666 usec  |  500 usec  |  767 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    1    |  69,375,006  | -51,297,146 (-73.9418%)  |  668 usec  |  400 usec  |  775 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    2    |  69,375,006  | -51,297,008 (-73.9416%)  |  657 usec  |  400 usec  |  781 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |    3    |  69,375,006  | -51,296,727 (-73.9412%)  |  651 usec  |  400 usec  |  763 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              |  total  | 277,500,024  | -205,187,824 (-73.9416%) |  661 usec  |  400 usec  |  781 usec  |
              +---------+--------------+--------------------------+------------+------------+------------+
              
            
            L2 frame size: IMIX
            
            Run Config:
            
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |  Direction  |  Requested TX Rate (bps)  |  Actual TX Rate (bps)  |  RX Rate (bps)  |  Requested TX Rate (pps)  |  Actual TX Rate (pps)  |  RX Rate (pps)  |
              +=============+===========================+========================+=================+===========================+========================+=================+
              |   Forward   |       28.2557 Gbps        |      10.0045 Gbps      |   4.2386 Gbps   |       9,250,000 pps       |     3,275,158 pps      |  1,387,578 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |   Reverse   |       28.2557 Gbps        |      10.0044 Gbps      |   4.1799 Gbps   |       9,250,000 pps       |     3,275,129 pps      |  1,368,366 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              |    Total    |       56.5113 Gbps        |      20.0089 Gbps      |   8.4185 Gbps   |      18,500,000 pps       |     6,550,287 pps      |  2,755,944 pps  |
              +-------------+---------------------------+------------------------+-----------------+---------------------------+------------------------+-----------------+
              
              WARNING: There is a significant difference between requested TX rate (18500000.0) and actual TX rate (6550287). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
              
            Forward Chain Packet Counters and Latency:
            
              +---------+--------------+-------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p0  |       TRex.RX.p1        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+=========================+============+============+============+
              |    0    |  24,563,688  | -14,139,201 (-57.5614%) | 1,079 usec |  700 usec  | 1,279 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    1    |  24,563,688  | -14,175,723 (-57.7101%) | 1,061 usec |  700 usec  | 1,300 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    2    |  24,563,688  | -14,141,338 (-57.5701%) | 1,040 usec |  700 usec  | 1,344 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    3    |  24,563,688  | -14,171,146 (-57.6914%) | 1,026 usec |  700 usec  | 1,348 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |  total  |  98,254,752  | -56,627,408 (-57.6333%) | 1,052 usec |  700 usec  | 1,348 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              
            Reverse Chain Packet Counters and Latency:
            
              +---------+--------------+-------------------------+------------+------------+------------+
              |  Chain  |  TRex.TX.p1  |       TRex.RX.p0        |  Avg lat.  |  Min lat.  |  Max lat.  |
              +=========+==============+=========================+============+============+============+
              |    0    |  24,563,470  | -14,301,177 (-58.2213%) | 1,083 usec |  400 usec  | 1,300 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    1    |  24,563,470  | -14,301,023 (-58.2207%) | 1,066 usec |  400 usec  | 1,314 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    2    |  24,563,470  | -14,300,581 (-58.2189%) | 1,043 usec |  400 usec  | 1,315 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |    3    |  24,563,470  | -14,300,106 (-58.2170%) | 1,040 usec |  400 usec  | 1,355 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              |  total  |  98,253,880  | -57,202,887 (-58.2195%) | 1,058 usec |  400 usec  | 1,355 usec |
              +---------+--------------+-------------------------+------------+------------+------------+
              

