2018-11-29 08:56:48,190 INFO Loading configuration file: /tmp/nfvbench/nfvbench_config.cfg
2018-11-29 08:56:48,224 INFO EXT chain with OpenStack mode disabled
2018-11-29 08:56:48,224 INFO -c /tmp/nfvbench/nfvbench_config.cfg --rate ndr --flow-count 1024 --duration 30 --json /tmp/nfvbench/vsc_8c1n_ndr-1.json
2018-11-29 08:56:48,225 INFO Connecting to TRex (127.0.0.1)...


2018-11-29 08:56:48 - [local][warning]   - [1mCPU util. is high: 98.2%[22m
2018-11-29 08:56:48,361 INFO Connected to TRex
2018-11-29 08:56:48,362 INFO    Port 0: Device 158b speed=25Gbps mac=3c:fd:fe:bd:f8:60 pci=0000:3b:00.0 driver=net_i40e
2018-11-29 08:56:48,362 INFO    Port 1: Device 158b speed=25Gbps mac=3c:fd:fe:bd:f8:61 pci=0000:3b:00.1 driver=net_i40e
2018-11-29 08:56:48,363 INFO ChainRunner initialized
2018-11-29 08:56:48,363 INFO Starting 8xEXT benchmark...
2018-11-29 08:56:48,472 INFO Polling ARP until successful...
2018-11-29 08:56:48,687 INFO    ARP: port=0 chain=0 src IP=172.16.10.100 dst IP=172.16.10.10 -> MAC=52:54:00:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=1 src IP=172.16.10.101 dst IP=172.16.10.11 -> MAC=52:54:01:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=2 src IP=172.16.10.102 dst IP=172.16.10.12 -> MAC=52:54:02:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=3 src IP=172.16.10.103 dst IP=172.16.10.13 -> MAC=52:54:03:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=4 src IP=172.16.10.104 dst IP=172.16.10.14 -> MAC=52:54:04:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=5 src IP=172.16.10.105 dst IP=172.16.10.15 -> MAC=52:54:05:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=6 src IP=172.16.10.106 dst IP=172.16.10.16 -> MAC=52:54:06:00:00:aa
2018-11-29 08:56:48,688 INFO    ARP: port=0 chain=7 src IP=172.16.10.107 dst IP=172.16.10.17 -> MAC=52:54:07:00:00:aa
2018-11-29 08:56:48,688 INFO ARP resolved successfully for port 0
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=0 src IP=172.16.20.100 dst IP=172.16.20.10 -> MAC=52:54:00:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=1 src IP=172.16.20.101 dst IP=172.16.20.11 -> MAC=52:54:01:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=2 src IP=172.16.20.102 dst IP=172.16.20.12 -> MAC=52:54:02:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=3 src IP=172.16.20.103 dst IP=172.16.20.13 -> MAC=52:54:03:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=4 src IP=172.16.20.104 dst IP=172.16.20.14 -> MAC=52:54:04:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=5 src IP=172.16.20.105 dst IP=172.16.20.15 -> MAC=52:54:05:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=6 src IP=172.16.20.106 dst IP=172.16.20.16 -> MAC=52:54:06:00:00:bb
2018-11-29 08:56:48,903 INFO    ARP: port=1 chain=7 src IP=172.16.20.107 dst IP=172.16.20.17 -> MAC=52:54:07:00:00:bb
2018-11-29 08:56:48,903 INFO ARP resolved successfully for port 1
2018-11-29 08:56:49,005 INFO Port 0: dst MAC ['52:54:00:00:00:aa', '52:54:01:00:00:aa', '52:54:02:00:00:aa', '52:54:03:00:00:aa', '52:54:04:00:00:aa', '52:54:05:00:00:aa', '52:54:06:00:00:aa', '52:54:07:00:00:aa']
2018-11-29 08:56:49,005 INFO Port 1: dst MAC ['52:54:00:00:00:bb', '52:54:01:00:00:bb', '52:54:02:00:00:bb', '52:54:03:00:00:bb', '52:54:04:00:00:bb', '52:54:05:00:00:bb', '52:54:06:00:00:bb', '52:54:07:00:00:bb']
2018-11-29 08:56:49,005 INFO Starting traffic generator to ensure end-to-end connectivity
2018-11-29 08:56:49,051 INFO Created 8 traffic streams for port 0.
2018-11-29 08:56:49,058 INFO Created 8 traffic streams for port 1.
2018-11-29 08:56:49,174 INFO Captured unique src mac 0/16, capturing return packets (retry 1/100)...
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:03:00:00:bb (chain=3, port=1)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:06:00:00:bb (chain=6, port=1)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:05:00:00:aa (chain=5, port=0)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:07:00:00:aa (chain=7, port=0)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:01:00:00:bb (chain=1, port=1)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:02:00:00:bb (chain=2, port=1)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:04:00:00:aa (chain=4, port=0)
2018-11-29 08:56:51,303 INFO Received packet from mac: 52:54:02:00:00:aa (chain=2, port=0)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:05:00:00:bb (chain=5, port=1)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:04:00:00:bb (chain=4, port=1)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:06:00:00:aa (chain=6, port=0)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:00:00:00:aa (chain=0, port=0)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:00:00:00:bb (chain=0, port=1)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:07:00:00:bb (chain=7, port=1)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:01:00:00:aa (chain=1, port=0)
2018-11-29 08:56:51,304 INFO Received packet from mac: 52:54:03:00:00:aa (chain=3, port=0)
2018-11-29 08:56:51,304 INFO End-to-end connectivity established
2018-11-29 08:56:51,323 INFO Cleared all existing streams
2018-11-29 08:56:51,382 INFO Created 16 traffic streams for port 0.
2018-11-29 08:56:51,391 INFO Created 16 traffic streams for port 1.
2018-11-29 08:56:51,391 INFO *** Searching NDR for 64 (Bidirectional)...
2018-11-29 08:56:51,391 INFO Range search [0.0 .. 200.0] targets: {'ndr': 0.001}
2018-11-29 08:56:51,391 INFO Modified traffic stream for port 0, new rate=100.0%.
2018-11-29 08:56:51,391 INFO Modified traffic stream for port 1, new rate=100.0%.
2018-11-29 08:56:51,392 INFO Running traffic generator


2018-11-29 08:56:56 - [local][warning]   - [1mCPU util. is high: 86.3%[22m
2018-11-29 08:57:01,424 INFO TX: 380465912; RX: 13433024; Est. Dropped: 367032888; Est. Drop rate: 96.4693%
2018-11-29 08:57:11,443 INFO TX: 763629054; RX: 26881247; Est. Dropped: 736747807; Est. Drop rate: 96.4798%
2018-11-29 08:57:21,439 INFO TX: 1145585777; RX: 40277997; Est. Dropped: 1105307780; Est. Drop rate: 96.4841%
2018-11-29 08:57:23,450 INFO WARNING: There is a significant difference between requested TX rate (74404760) and actual TX rate (38186192). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
2018-11-29 08:57:23,450 INFO Average drop rate: 96.483885
2018-11-29 08:57:23,450 INFO Range search [0.0 .. 100.0] targets: {'ndr': 0.001}
2018-11-29 08:57:23,450 INFO Modified traffic stream for port 0, new rate=50.0%.
2018-11-29 08:57:23,450 INFO Modified traffic stream for port 1, new rate=50.0%.
2018-11-29 08:57:23,450 INFO Running traffic generator


2018-11-29 08:57:28 - [local][warning]   - [1mCPU util. is high: 88.0%[22m
2018-11-29 08:57:33,491 INFO TX: 372387507; RX: 13433206; Est. Dropped: 358954301; Est. Drop rate: 96.3927%
2018-11-29 08:57:43,511 INFO TX: 745156302; RX: 26884880; Est. Dropped: 718271422; Est. Drop rate: 96.3920%
2018-11-29 08:57:53,501 INFO TX: 1116072096; RX: 40265400; Est. Dropped: 1075806696; Est. Drop rate: 96.3922%
2018-11-29 08:57:55,513 INFO Average drop rate: 96.392131
2018-11-29 08:57:55,513 INFO Range search [0.0 .. 50.0] targets: {'ndr': 0.001}
2018-11-29 08:57:55,513 INFO Modified traffic stream for port 0, new rate=25.0%.
2018-11-29 08:57:55,513 INFO Modified traffic stream for port 1, new rate=25.0%.
2018-11-29 08:57:55,513 INFO Running traffic generator
2018-11-29 08:58:05,547 INFO TX: 186203072; RX: 13570222; Est. Dropped: 172632850; Est. Drop rate: 92.7121%
2018-11-29 08:58:15,568 INFO TX: 372594136; RX: 27155145; Est. Dropped: 345438991; Est. Drop rate: 92.7119%
2018-11-29 08:58:25,557 INFO TX: 558036304; RX: 40669471; Est. Dropped: 517366833; Est. Drop rate: 92.7120%
2018-11-29 08:58:27,569 INFO Average drop rate: 92.711855
2018-11-29 08:58:27,569 INFO Range search [0.0 .. 25.0] targets: {'ndr': 0.001}
2018-11-29 08:58:27,570 INFO Modified traffic stream for port 0, new rate=12.5%.
2018-11-29 08:58:27,570 INFO Modified traffic stream for port 1, new rate=12.5%.
2018-11-29 08:58:27,570 INFO Running traffic generator
2018-11-29 08:58:37,614 INFO TX: 93099176; RX: 12576953; Est. Dropped: 80522223; Est. Drop rate: 86.4908%
2018-11-29 08:58:47,635 INFO TX: 186300760; RX: 25163137; Est. Dropped: 161137623; Est. Drop rate: 86.4933%
2018-11-29 08:58:57,624 INFO TX: 279017696; RX: 37683965; Est. Dropped: 241333731; Est. Drop rate: 86.4941%
2018-11-29 08:58:59,637 INFO Average drop rate: 86.493692
2018-11-29 08:58:59,637 INFO Range search [0.0 .. 12.5] targets: {'ndr': 0.001}
2018-11-29 08:58:59,637 INFO Modified traffic stream for port 0, new rate=6.25%.
2018-11-29 08:58:59,637 INFO Modified traffic stream for port 1, new rate=6.25%.
2018-11-29 08:58:59,637 INFO Running traffic generator
2018-11-29 08:59:09,676 INFO TX: 46550192; RX: 6911740; Est. Dropped: 39638452; Est. Drop rate: 85.1521%
2018-11-29 08:59:19,698 INFO TX: 93153896; RX: 13835484; Est. Dropped: 79318412; Est. Drop rate: 85.1477%
2018-11-29 08:59:29,686 INFO TX: 139508944; RX: 20734174; Est. Dropped: 118774770; Est. Drop rate: 85.1377%
2018-11-29 08:59:31,700 INFO Average drop rate: 85.137012
2018-11-29 08:59:31,700 INFO Range search [0.0 .. 6.25] targets: {'ndr': 0.001}
2018-11-29 08:59:31,700 INFO Modified traffic stream for port 0, new rate=3.125%.
2018-11-29 08:59:31,700 INFO Modified traffic stream for port 1, new rate=3.125%.
2018-11-29 08:59:31,700 INFO Running traffic generator
2018-11-29 08:59:41,742 INFO TX: 23274512; RX: 4169817; Est. Dropped: 19104695; Est. Drop rate: 82.0842%
2018-11-29 08:59:51,764 INFO TX: 46577480; RX: 8346921; Est. Dropped: 38230559; Est. Drop rate: 82.0795%
2018-11-29 09:00:01,752 INFO TX: 69754464; RX: 12506594; Est. Dropped: 57247870; Est. Drop rate: 82.0705%
2018-11-29 09:00:03,765 INFO Average drop rate: 82.069790
2018-11-29 09:00:03,766 INFO Range search [0.0 .. 3.125] targets: {'ndr': 0.001}
2018-11-29 09:00:03,766 INFO Modified traffic stream for port 0, new rate=1.5625%.
2018-11-29 09:00:03,766 INFO Modified traffic stream for port 1, new rate=1.5625%.
2018-11-29 09:00:03,766 INFO Running traffic generator
2018-11-29 09:00:13,805 INFO TX: 11637624; RX: 2712053; Est. Dropped: 8925571; Est. Drop rate: 76.6958%
2018-11-29 09:00:23,826 INFO TX: 23286840; RX: 5419072; Est. Dropped: 17867768; Est. Drop rate: 76.7290%
2018-11-29 09:00:33,816 INFO TX: 34877248; RX: 8107369; Est. Dropped: 26769879; Est. Drop rate: 76.7546%
2018-11-29 09:00:35,830 INFO Average drop rate: 76.753117
2018-11-29 09:00:35,830 INFO Range search [0.0 .. 1.5625] targets: {'ndr': 0.001}
2018-11-29 09:00:35,830 INFO Modified traffic stream for port 0, new rate=0.78125%.
2018-11-29 09:00:35,830 INFO Modified traffic stream for port 1, new rate=0.78125%.
2018-11-29 09:00:35,830 INFO Running traffic generator
2018-11-29 09:00:45,872 INFO TX: 5818512; RX: 1944236; Est. Dropped: 3874276; Est. Drop rate: 66.5853%
2018-11-29 09:00:55,894 INFO TX: 11644432; RX: 3889597; Est. Dropped: 7754835; Est. Drop rate: 66.5969%
2018-11-29 09:01:05,881 INFO TX: 17438624; RX: 5825293; Est. Dropped: 11613331; Est. Drop rate: 66.5955%
2018-11-29 09:01:07,893 INFO Average drop rate: 66.592467
2018-11-29 09:01:07,893 INFO Range search [0.0 .. 0.78125] targets: {'ndr': 0.001}
2018-11-29 09:01:07,893 INFO Modified traffic stream for port 0, new rate=0.390625%.
2018-11-29 09:01:07,893 INFO Modified traffic stream for port 1, new rate=0.390625%.
2018-11-29 09:01:07,894 INFO Running traffic generator
2018-11-29 09:01:17,938 INFO TX: 2908816; RX: 1643872; Est. Dropped: 1264944; Est. Drop rate: 43.4866%
2018-11-29 09:01:27,960 INFO TX: 5821656; RX: 3290537; Est. Dropped: 2531119; Est. Drop rate: 43.4776%
2018-11-29 09:01:37,946 INFO TX: 8719312; RX: 4931162; Est. Dropped: 3788150; Est. Drop rate: 43.4455%
2018-11-29 09:01:39,960 INFO Average drop rate: 43.439459
2018-11-29 09:01:39,960 INFO Range search [0.0 .. 0.390625] targets: {'ndr': 0.001}
2018-11-29 09:01:39,960 INFO Modified traffic stream for port 0, new rate=0.1953125%.
2018-11-29 09:01:39,960 INFO Modified traffic stream for port 1, new rate=0.1953125%.
2018-11-29 09:01:39,960 INFO Running traffic generator
2018-11-29 09:01:49,995 INFO TX: 1453552; RX: 1447304; Est. Dropped: 6248; Est. Drop rate: 0.4298%
2018-11-29 09:02:00,017 INFO TX: 2909968; RX: 2899764; Est. Dropped: 10204; Est. Drop rate: 0.3507%
2018-11-29 09:02:10,009 INFO TX: 4359664; RX: 4348640; Est. Dropped: 11024; Est. Drop rate: 0.2529%
2018-11-29 09:02:12,023 INFO Average drop rate: 0.247175
2018-11-29 09:02:12,023 INFO Range search [0.0 .. 0.1953125] targets: {'ndr': 0.001}
2018-11-29 09:02:12,023 INFO Modified traffic stream for port 0, new rate=0.09765625%.
2018-11-29 09:02:12,023 INFO Modified traffic stream for port 1, new rate=0.09765625%.
2018-11-29 09:02:12,023 INFO Running traffic generator
2018-11-29 09:02:22,060 INFO TX: 726952; RX: 726165; Est. Dropped: 787; Est. Drop rate: 0.1083%
2018-11-29 09:02:32,073 INFO TX: 1454440; RX: 1453645; Est. Dropped: 795; Est. Drop rate: 0.0547%
2018-11-29 09:02:42,077 INFO TX: 2179840; RX: 2179803; Est. Dropped: 37; Est. Drop rate: 0.0017%
2018-11-29 09:02:44,092 INFO Average drop rate: 0.000000
2018-11-29 09:02:44,093 INFO Range search [0.09765625 .. 0.1953125] targets: {'ndr': 0.001}
2018-11-29 09:02:44,093 INFO Found ndr (0.001) load: 0.09765625
2018-11-29 09:02:44,093 INFO NDR load: 0.1953125
2018-11-29 09:02:44,119 INFO Cleared all existing streams
2018-11-29 09:02:44,120 INFO Clean up skipped.
2018-11-29 09:02:44,141 ERROR {'status': 'ERROR', 'error_message': 'Traceback (most recent call last):\n  File "/nfvbench/nfvbench/nfvbench.py", line 614, in main\n    raise Exception(result[\'error_message\'])\nException: Traceback (most recent call last):\n  File "/nfvbench/nfvbench/nfvbench.py", line 112, in run\n    "service_chain": self.chain_runner.run(),\n  File "/nfvbench/nfvbench/chain_runner.py", line 154, in run\n    results[self.chain_name] = {\'result\': self.__get_chain_result()}\n  File "/nfvbench/nfvbench/chain_runner.py", line 128, in __get_chain_result\n    self.config.traffic.bidirectional))\n  File "/nfvbench/nfvbench/chain_runner.py", line 99, in __get_result_per_frame_size\n    self.traffic_client.set_traffic(frame_size, bidirectional)\n  File "/nfvbench/nfvbench/traffic_client.py", line 565, in set_traffic\n    self.gen.create_traffic(frame_size, self.run_config[\'rates\'], bidirectional, latency=True)\n  File "/nfvbench/nfvbench/traffic_gen/trex.py", line 550, in create_traffic\n    load=r[\'rate_percent\']))\nTrafficGeneratorException: Required rate in total is at least one of: \n16016pps \n48923541bps \n0.0978470826667%.\n\n'}
Traceback (most recent call last):
  File "/nfvbench/nfvbench/nfvbench.py", line 112, in run
    "service_chain": self.chain_runner.run(),
  File "/nfvbench/nfvbench/chain_runner.py", line 154, in run
    results[self.chain_name] = {'result': self.__get_chain_result()}
  File "/nfvbench/nfvbench/chain_runner.py", line 128, in __get_chain_result
    self.config.traffic.bidirectional))
  File "/nfvbench/nfvbench/chain_runner.py", line 99, in __get_result_per_frame_size
    self.traffic_client.set_traffic(frame_size, bidirectional)
  File "/nfvbench/nfvbench/traffic_client.py", line 565, in set_traffic
    self.gen.create_traffic(frame_size, self.run_config['rates'], bidirectional, latency=True)
  File "/nfvbench/nfvbench/traffic_gen/trex.py", line 550, in create_traffic
    load=r['rate_percent']))
TrafficGeneratorException: Required rate in total is at least one of: 
16016pps 
48923541bps 
0.0978470826667%.

