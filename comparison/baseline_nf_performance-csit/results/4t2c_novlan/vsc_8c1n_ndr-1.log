2018-12-01 17:21:50,691 INFO Loading configuration file: /tmp/nfvbench/nfvbench_config.cfg
2018-12-01 17:21:50,726 INFO EXT chain with OpenStack mode disabled
2018-12-01 17:21:50,726 INFO -c /tmp/nfvbench/nfvbench_config.cfg --rate ndr --flow-count 1024 --duration 30 --json /tmp/nfvbench/vsc_8c1n_ndr-1.json
2018-12-01 17:21:50,727 INFO Connecting to TRex (127.0.0.1)...
2018-12-01 17:21:50,862 INFO Connected to TRex
2018-12-01 17:21:50,862 INFO    Port 0: Device 158b speed=25Gbps mac=3c:fd:fe:bd:f8:60 pci=0000:3b:00.0 driver=net_i40e
2018-12-01 17:21:50,863 INFO    Port 1: Device 158b speed=25Gbps mac=3c:fd:fe:bd:f8:61 pci=0000:3b:00.1 driver=net_i40e
2018-12-01 17:21:50,864 INFO ChainRunner initialized
2018-12-01 17:21:50,864 INFO Starting 8xEXT benchmark...
2018-12-01 17:21:50,970 INFO Polling ARP until successful...
2018-12-01 17:21:51,184 INFO    ARP: port=0 chain=0 src IP=172.16.10.100 dst IP=172.16.10.10 -> MAC=52:54:00:00:00:aa
2018-12-01 17:21:51,184 INFO    ARP: port=0 chain=1 src IP=172.16.10.101 dst IP=172.16.10.11 -> MAC=52:54:01:00:00:aa
2018-12-01 17:21:51,185 INFO    ARP: port=0 chain=2 src IP=172.16.10.102 dst IP=172.16.10.12 -> MAC=52:54:02:00:00:aa
2018-12-01 17:21:51,185 INFO    ARP: port=0 chain=3 src IP=172.16.10.103 dst IP=172.16.10.13 -> MAC=52:54:03:00:00:aa
2018-12-01 17:21:51,185 INFO    ARP: port=0 chain=4 src IP=172.16.10.104 dst IP=172.16.10.14 -> MAC=52:54:04:00:00:aa
2018-12-01 17:21:51,185 INFO    ARP: port=0 chain=5 src IP=172.16.10.105 dst IP=172.16.10.15 -> MAC=52:54:05:00:00:aa
2018-12-01 17:21:51,185 INFO    ARP: port=0 chain=6 src IP=172.16.10.106 dst IP=172.16.10.16 -> MAC=52:54:06:00:00:aa
2018-12-01 17:21:51,185 INFO    ARP: port=0 chain=7 src IP=172.16.10.107 dst IP=172.16.10.17 -> MAC=52:54:07:00:00:aa
2018-12-01 17:21:51,185 INFO ARP resolved successfully for port 0
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=0 src IP=172.16.20.100 dst IP=172.16.20.10 -> MAC=52:54:00:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=1 src IP=172.16.20.101 dst IP=172.16.20.11 -> MAC=52:54:01:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=2 src IP=172.16.20.102 dst IP=172.16.20.12 -> MAC=52:54:02:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=3 src IP=172.16.20.103 dst IP=172.16.20.13 -> MAC=52:54:03:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=4 src IP=172.16.20.104 dst IP=172.16.20.14 -> MAC=52:54:04:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=5 src IP=172.16.20.105 dst IP=172.16.20.15 -> MAC=52:54:05:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=6 src IP=172.16.20.106 dst IP=172.16.20.16 -> MAC=52:54:06:00:00:bb
2018-12-01 17:21:51,400 INFO    ARP: port=1 chain=7 src IP=172.16.20.107 dst IP=172.16.20.17 -> MAC=52:54:07:00:00:bb
2018-12-01 17:21:51,400 INFO ARP resolved successfully for port 1
2018-12-01 17:21:51,502 INFO Port 0: dst MAC ['52:54:00:00:00:aa', '52:54:01:00:00:aa', '52:54:02:00:00:aa', '52:54:03:00:00:aa', '52:54:04:00:00:aa', '52:54:05:00:00:aa', '52:54:06:00:00:aa', '52:54:07:00:00:aa']
2018-12-01 17:21:51,502 INFO Port 1: dst MAC ['52:54:00:00:00:bb', '52:54:01:00:00:bb', '52:54:02:00:00:bb', '52:54:03:00:00:bb', '52:54:04:00:00:bb', '52:54:05:00:00:bb', '52:54:06:00:00:bb', '52:54:07:00:00:bb']
2018-12-01 17:21:51,502 INFO Starting traffic generator to ensure end-to-end connectivity
2018-12-01 17:21:51,548 INFO Created 8 traffic streams for port 0.
2018-12-01 17:21:51,553 INFO Created 8 traffic streams for port 1.
2018-12-01 17:21:51,668 INFO Captured unique src mac 0/16, capturing return packets (retry 1/100)...
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:03:00:00:bb (chain=3, port=1)
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:07:00:00:aa (chain=7, port=0)
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:01:00:00:aa (chain=1, port=0)
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:02:00:00:bb (chain=2, port=1)
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:01:00:00:bb (chain=1, port=1)
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:03:00:00:aa (chain=3, port=0)
2018-12-01 17:21:53,792 INFO Received packet from mac: 52:54:05:00:00:bb (chain=5, port=1)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:04:00:00:aa (chain=4, port=0)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:00:00:00:bb (chain=0, port=1)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:06:00:00:aa (chain=6, port=0)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:06:00:00:bb (chain=6, port=1)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:02:00:00:aa (chain=2, port=0)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:00:00:00:aa (chain=0, port=0)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:04:00:00:bb (chain=4, port=1)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:05:00:00:aa (chain=5, port=0)
2018-12-01 17:21:53,793 INFO Received packet from mac: 52:54:07:00:00:bb (chain=7, port=1)
2018-12-01 17:21:53,793 INFO End-to-end connectivity established
2018-12-01 17:21:53,813 INFO Cleared all existing streams
2018-12-01 17:21:53,871 INFO Created 16 traffic streams for port 0.
2018-12-01 17:21:53,879 INFO Created 16 traffic streams for port 1.
2018-12-01 17:21:53,880 INFO *** Searching NDR for 64 (Bidirectional)...
2018-12-01 17:21:53,880 INFO Range search [0.0 .. 200.0] targets: {'ndr': 0.001}
2018-12-01 17:21:53,880 INFO Modified traffic stream for port 0, new rate=100.0%.
2018-12-01 17:21:53,880 INFO Modified traffic stream for port 1, new rate=100.0%.
2018-12-01 17:21:53,880 INFO Running traffic generator


2018-12-01 17:21:59 - [local][warning]   - [1mCPU util. is high: 86.1%[22m
2018-12-01 17:22:03,916 INFO TX: 382206394; RX: 25328303; Est. Dropped: 356878091; Est. Drop rate: 93.3731%
2018-12-01 17:22:13,936 INFO TX: 767512968; RX: 50656413; Est. Dropped: 716856555; Est. Drop rate: 93.3999%
2018-12-01 17:22:23,930 INFO TX: 1151343840; RX: 75942523; Est. Dropped: 1075401317; Est. Drop rate: 93.4040%
2018-12-01 17:22:25,941 INFO WARNING: There is a significant difference between requested TX rate (74404760) and actual TX rate (38378128). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
2018-12-01 17:22:25,942 INFO Average drop rate: 93.403804
2018-12-01 17:22:25,942 INFO Range search [0.0 .. 100.0] targets: {'ndr': 0.001}
2018-12-01 17:22:25,942 INFO Modified traffic stream for port 0, new rate=50.0%.
2018-12-01 17:22:25,942 INFO Modified traffic stream for port 1, new rate=50.0%.
2018-12-01 17:22:25,942 INFO Running traffic generator


2018-12-01 17:22:31 - [local][warning]   - [1mCPU util. is high: 87.4%[22m
2018-12-01 17:22:35,981 INFO TX: 372381107; RX: 25268036; Est. Dropped: 347113071; Est. Drop rate: 93.2145%
2018-12-01 17:22:45,996 INFO TX: 744936486; RX: 50530846; Est. Dropped: 694405640; Est. Drop rate: 93.2168%
2018-12-01 17:22:55,991 INFO TX: 1116072112; RX: 75740172; Est. Dropped: 1040331940; Est. Drop rate: 93.2137%
2018-12-01 17:22:58,004 INFO Average drop rate: 93.213593
2018-12-01 17:22:58,004 INFO Range search [0.0 .. 50.0] targets: {'ndr': 0.001}
2018-12-01 17:22:58,004 INFO Modified traffic stream for port 0, new rate=25.0%.
2018-12-01 17:22:58,004 INFO Modified traffic stream for port 1, new rate=25.0%.
2018-12-01 17:22:58,004 INFO Running traffic generator
2018-12-01 17:23:08,045 INFO TX: 186203507; RX: 23420597; Est. Dropped: 162782910; Est. Drop rate: 87.4220%
2018-12-01 17:23:18,066 INFO TX: 372605056; RX: 46843470; Est. Dropped: 325761586; Est. Drop rate: 87.4281%
2018-12-01 17:23:28,050 INFO TX: 558035648; RX: 70095415; Est. Dropped: 487940233; Est. Drop rate: 87.4389%
2018-12-01 17:23:30,062 INFO Average drop rate: 87.438623
2018-12-01 17:23:30,062 INFO Range search [0.0 .. 25.0] targets: {'ndr': 0.001}
2018-12-01 17:23:30,062 INFO Modified traffic stream for port 0, new rate=12.5%.
2018-12-01 17:23:30,062 INFO Modified traffic stream for port 1, new rate=12.5%.
2018-12-01 17:23:30,063 INFO Running traffic generator
2018-12-01 17:23:40,106 INFO TX: 93101952; RX: 12640319; Est. Dropped: 80461633; Est. Drop rate: 86.4231%
2018-12-01 17:23:50,131 INFO TX: 186410832; RX: 25309066; Est. Dropped: 161101766; Est. Drop rate: 86.4230%
2018-12-01 17:24:00,116 INFO TX: 279017888; RX: 37884415; Est. Dropped: 241133473; Est. Drop rate: 86.4222%
2018-12-01 17:24:02,128 INFO Average drop rate: 86.421943
2018-12-01 17:24:02,128 INFO Range search [0.0 .. 12.5] targets: {'ndr': 0.001}
2018-12-01 17:24:02,129 INFO Modified traffic stream for port 0, new rate=6.25%.
2018-12-01 17:24:02,129 INFO Modified traffic stream for port 1, new rate=6.25%.
2018-12-01 17:24:02,129 INFO Running traffic generator
2018-12-01 17:24:12,166 INFO TX: 46549776; RX: 6951838; Est. Dropped: 39597938; Est. Drop rate: 85.0658%
2018-12-01 17:24:22,188 INFO TX: 93154824; RX: 13910539; Est. Dropped: 79244285; Est. Drop rate: 85.0673%
2018-12-01 17:24:32,176 INFO TX: 139508960; RX: 20833860; Est. Dropped: 118675100; Est. Drop rate: 85.0663%
2018-12-01 17:24:34,189 INFO Average drop rate: 85.065924
2018-12-01 17:24:34,189 INFO Range search [0.0 .. 6.25] targets: {'ndr': 0.001}
2018-12-01 17:24:34,190 INFO Modified traffic stream for port 0, new rate=3.125%.
2018-12-01 17:24:34,190 INFO Modified traffic stream for port 1, new rate=3.125%.
2018-12-01 17:24:34,190 INFO Running traffic generator
2018-12-01 17:24:44,231 INFO TX: 23275056; RX: 4111090; Est. Dropped: 19163966; Est. Drop rate: 82.3369%
2018-12-01 17:24:54,253 INFO TX: 46578040; RX: 8225443; Est. Dropped: 38352597; Est. Drop rate: 82.3405%
2018-12-01 17:25:04,243 INFO TX: 69754496; RX: 12320012; Est. Dropped: 57434484; Est. Drop rate: 82.3380%
2018-12-01 17:25:06,256 INFO Average drop rate: 82.337140
2018-12-01 17:25:06,256 INFO Range search [0.0 .. 3.125] targets: {'ndr': 0.001}
2018-12-01 17:25:06,257 INFO Modified traffic stream for port 0, new rate=1.5625%.
2018-12-01 17:25:06,257 INFO Modified traffic stream for port 1, new rate=1.5625%.
2018-12-01 17:25:06,257 INFO Running traffic generator
2018-12-01 17:25:16,299 INFO TX: 11636768; RX: 2708924; Est. Dropped: 8927844; Est. Drop rate: 76.7210%
2018-12-01 17:25:26,316 INFO TX: 23282640; RX: 5417295; Est. Dropped: 17865345; Est. Drop rate: 76.7325%
2018-12-01 17:25:36,301 INFO TX: 34877264; RX: 8113369; Est. Dropped: 26763895; Est. Drop rate: 76.7374%
2018-12-01 17:25:38,314 INFO Average drop rate: 76.732579
2018-12-01 17:25:38,314 INFO Range search [0.0 .. 1.5625] targets: {'ndr': 0.001}
2018-12-01 17:25:38,314 INFO Modified traffic stream for port 0, new rate=0.78125%.
2018-12-01 17:25:38,314 INFO Modified traffic stream for port 1, new rate=0.78125%.
2018-12-01 17:25:38,314 INFO Running traffic generator
2018-12-01 17:25:48,357 INFO TX: 5818184; RX: 2007991; Est. Dropped: 3810193; Est. Drop rate: 65.4877%
2018-12-01 17:25:58,380 INFO TX: 11644440; RX: 4019085; Est. Dropped: 7625355; Est. Drop rate: 65.4849%
2018-12-01 17:26:08,367 INFO TX: 17438640; RX: 6021824; Est. Dropped: 11416816; Est. Drop rate: 65.4685%
2018-12-01 17:26:10,382 INFO Average drop rate: 65.464417
2018-12-01 17:26:10,382 INFO Range search [0.0 .. 0.78125] targets: {'ndr': 0.001}
2018-12-01 17:26:10,382 INFO Modified traffic stream for port 0, new rate=0.390625%.
2018-12-01 17:26:10,382 INFO Modified traffic stream for port 1, new rate=0.390625%.
2018-12-01 17:26:10,382 INFO Running traffic generator
2018-12-01 17:26:20,424 INFO TX: 2909392; RX: 1623677; Est. Dropped: 1285715; Est. Drop rate: 44.1919%
2018-12-01 17:26:30,446 INFO TX: 5822208; RX: 3251874; Est. Dropped: 2570334; Est. Drop rate: 44.1471%
2018-12-01 17:26:40,433 INFO TX: 8719328; RX: 4871853; Est. Dropped: 3847475; Est. Drop rate: 44.1258%
2018-12-01 17:26:42,448 INFO Average drop rate: 44.123182
2018-12-01 17:26:42,448 INFO Range search [0.0 .. 0.390625] targets: {'ndr': 0.001}
2018-12-01 17:26:42,448 INFO Modified traffic stream for port 0, new rate=0.1953125%.
2018-12-01 17:26:42,448 INFO Modified traffic stream for port 1, new rate=0.1953125%.
2018-12-01 17:26:42,448 INFO Running traffic generator
2018-12-01 17:26:52,491 INFO TX: 1454672; RX: 1451113; Est. Dropped: 3559; Est. Drop rate: 0.2447%
2018-12-01 17:27:02,514 INFO TX: 2911168; RX: 2899286; Est. Dropped: 11882; Est. Drop rate: 0.4082%
2018-12-01 17:27:12,501 INFO TX: 4359680; RX: 4343292; Est. Dropped: 16388; Est. Drop rate: 0.3759%
2018-12-01 17:27:14,516 INFO Average drop rate: 0.374408
2018-12-01 17:27:14,516 INFO Range search [0.0 .. 0.1953125] targets: {'ndr': 0.001}
2018-12-01 17:27:14,516 INFO Modified traffic stream for port 0, new rate=0.09765625%.
2018-12-01 17:27:14,516 INFO Modified traffic stream for port 1, new rate=0.09765625%.
2018-12-01 17:27:14,516 INFO Running traffic generator
2018-12-01 17:27:24,554 INFO TX: 727248; RX: 726466; Est. Dropped: 782; Est. Drop rate: 0.1075%
2018-12-01 17:27:34,571 INFO TX: 1455088; RX: 1454245; Est. Dropped: 843; Est. Drop rate: 0.0579%
2018-12-01 17:27:44,567 INFO TX: 2179856; RX: 2179821; Est. Dropped: 35; Est. Drop rate: 0.0016%
2018-12-01 17:27:46,581 INFO Average drop rate: 0.000000
2018-12-01 17:27:46,581 INFO Range search [0.09765625 .. 0.1953125] targets: {'ndr': 0.001}
2018-12-01 17:27:46,581 INFO Found ndr (0.001) load: 0.09765625
2018-12-01 17:27:46,581 INFO NDR load: 0.1953125
2018-12-01 17:27:46,604 INFO Cleared all existing streams
2018-12-01 17:27:46,604 INFO Clean up skipped.
2018-12-01 17:27:46,626 ERROR {'status': 'ERROR', 'error_message': 'Traceback (most recent call last):\n  File "/nfvbench/nfvbench/nfvbench.py", line 614, in main\n    raise Exception(result[\'error_message\'])\nException: Traceback (most recent call last):\n  File "/nfvbench/nfvbench/nfvbench.py", line 112, in run\n    "service_chain": self.chain_runner.run(),\n  File "/nfvbench/nfvbench/chain_runner.py", line 154, in run\n    results[self.chain_name] = {\'result\': self.__get_chain_result()}\n  File "/nfvbench/nfvbench/chain_runner.py", line 128, in __get_chain_result\n    self.config.traffic.bidirectional))\n  File "/nfvbench/nfvbench/chain_runner.py", line 99, in __get_result_per_frame_size\n    self.traffic_client.set_traffic(frame_size, bidirectional)\n  File "/nfvbench/nfvbench/traffic_client.py", line 565, in set_traffic\n    self.gen.create_traffic(frame_size, self.run_config[\'rates\'], bidirectional, latency=True)\n  File "/nfvbench/nfvbench/traffic_gen/trex.py", line 550, in create_traffic\n    load=r[\'rate_percent\']))\nTrafficGeneratorException: Required rate in total is at least one of: \n16016pps \n48923541bps \n0.0978470826667%.\n\n'}
Traceback (most recent call last):
  File "/nfvbench/nfvbench/nfvbench.py", line 112, in run
    "service_chain": self.chain_runner.run(),
  File "/nfvbench/nfvbench/chain_runner.py", line 154, in run
    results[self.chain_name] = {'result': self.__get_chain_result()}
  File "/nfvbench/nfvbench/chain_runner.py", line 128, in __get_chain_result
    self.config.traffic.bidirectional))
  File "/nfvbench/nfvbench/chain_runner.py", line 99, in __get_result_per_frame_size
    self.traffic_client.set_traffic(frame_size, bidirectional)
  File "/nfvbench/nfvbench/traffic_client.py", line 565, in set_traffic
    self.gen.create_traffic(frame_size, self.run_config['rates'], bidirectional, latency=True)
  File "/nfvbench/nfvbench/traffic_gen/trex.py", line 550, in create_traffic
    load=r['rate_percent']))
TrafficGeneratorException: Required rate in total is at least one of: 
16016pps 
48923541bps 
0.0978470826667%.

