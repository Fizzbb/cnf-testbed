2018-11-12 10:05:11,310 INFO Loading configuration file: /tmp/nfvbench/nfvbench_config.cfg
2018-11-12 10:05:11,342 INFO EXT chain with OpenStack mode disabled
2018-11-12 10:05:11,342 INFO -c /tmp/nfvbench/nfvbench_config.cfg --rate ndr --flow-count 1000 --duration 30 --json /tmp/nfvbench/2vsc_4_ndr-1.log
2018-11-12 10:05:11,344 INFO Connecting to TRex (127.0.0.1)...
2018-11-12 10:05:11,373 INFO Connected to TRex
2018-11-12 10:05:11,373 INFO    Port 0: Device 158b speed=25Gbps mac=3c:fd:fe:bd:f8:60 pci=0000:3b:00.0 driver=net_i40e
2018-11-12 10:05:11,374 INFO    Port 1: Device 158b speed=25Gbps mac=3c:fd:fe:bd:f8:61 pci=0000:3b:00.1 driver=net_i40e
2018-11-12 10:05:11,374 INFO Port 0: VLANs (1070, 1071)
2018-11-12 10:05:11,374 INFO Port 1: VLANs (1064, 1065)
2018-11-12 10:05:11,375 INFO ChainRunner initialized
2018-11-12 10:05:11,375 INFO Adjusting frame size 64 Bytes to minimum size 68 Bytes due to traffic generator restriction
2018-11-12 10:05:11,375 INFO Starting 2xEXT benchmark...
2018-11-12 10:05:11,481 INFO Polling ARP until successful...
2018-11-12 10:05:11,593 INFO    ARP: port=0 chain=0 src IP=172.16.10.100 dst IP=172.16.10.10 -> MAC=52:54:00:00:00:aa
2018-11-12 10:05:11,593 INFO    ARP: port=0 chain=1 src IP=172.16.10.101 dst IP=172.16.10.11 -> MAC=52:54:00:00:00:aa
2018-11-12 10:05:11,593 INFO ARP resolved successfully for port 0
2018-11-12 10:05:11,802 INFO    ARP: port=1 chain=0 src IP=172.16.20.100 dst IP=172.16.20.10 -> MAC=52:54:00:00:00:bb
2018-11-12 10:05:11,802 INFO    ARP: port=1 chain=1 src IP=172.16.20.101 dst IP=172.16.20.11 -> MAC=52:54:00:00:00:bb
2018-11-12 10:05:11,802 INFO ARP resolved successfully for port 1
2018-11-12 10:05:11,904 INFO Port 0: dst MAC ['52:54:00:00:00:aa', '52:54:00:00:00:aa']
2018-11-12 10:05:11,904 INFO Port 1: dst MAC ['52:54:00:00:00:bb', '52:54:00:00:00:bb']
2018-11-12 10:05:11,904 INFO Starting traffic generator to ensure end-to-end connectivity
2018-11-12 10:05:11,916 INFO Created 2 traffic streams for port 0.
2018-11-12 10:05:11,918 INFO Created 2 traffic streams for port 1.
2018-11-12 10:05:12,029 INFO Captured unique src mac 0/2, capturing return packets (retry 1/100)...
2018-11-12 10:05:14,150 INFO Received packet from mac: 52:54:00:00:00:bb (chain=1, port=1)
2018-11-12 10:05:14,150 INFO Received packet from mac: 52:54:00:00:00:aa (chain=1, port=0)
2018-11-12 10:05:14,150 INFO End-to-end connectivity established
2018-11-12 10:05:14,167 INFO Cleared all existing streams
2018-11-12 10:05:14,183 INFO Created 4 traffic streams for port 0.
2018-11-12 10:05:14,186 INFO Created 4 traffic streams for port 1.
2018-11-12 10:05:14,186 INFO *** Searching NDR for 68 (Bidirectional)...
2018-11-12 10:05:14,186 INFO Range search [0.0 .. 200.0] targets: {'ndr': 0.001}
2018-11-12 10:05:14,186 INFO Modified traffic stream for port 0, new rate=100.0%.
2018-11-12 10:05:14,187 INFO Modified traffic stream for port 1, new rate=100.0%.
2018-11-12 10:05:14,187 INFO Running traffic generator


2018-11-12 10:05:20 - [local][warning]   - [1mCPU util. is high: 86.2%[22m
2018-11-12 10:05:24,209 INFO TX: 413371013; RX: 16974410; Est. Dropped: 396396603; Est. Drop rate: 95.8937%
2018-11-12 10:05:34,223 INFO TX: 830810161; RX: 33951020; Est. Dropped: 796859141; Est. Drop rate: 95.9135%
2018-11-12 10:05:44,222 INFO TX: 1247011296; RX: 50883724; Est. Dropped: 1196127572; Est. Drop rate: 95.9195%
2018-11-12 10:05:46,228 INFO WARNING: There is a significant difference between requested TX rate (71022726) and actual TX rate (41567043). The traffic generator may not have sufficient CPU to achieve the requested TX rate.
2018-11-12 10:05:46,229 INFO Average drop rate: 95.919546
2018-11-12 10:05:46,229 INFO Range search [0.0 .. 100.0] targets: {'ndr': 0.001}
2018-11-12 10:05:46,229 INFO Modified traffic stream for port 0, new rate=50.0%.
2018-11-12 10:05:46,229 INFO Modified traffic stream for port 1, new rate=50.0%.
2018-11-12 10:05:46,229 INFO Running traffic generator
2018-11-12 10:05:56,260 INFO TX: 355460501; RX: 17023599; Est. Dropped: 338436902; Est. Drop rate: 95.2108%
2018-11-12 10:06:06,275 INFO TX: 711076909; RX: 34056431; Est. Dropped: 677020478; Est. Drop rate: 95.2106%
2018-11-12 10:06:16,271 INFO TX: 1065302328; RX: 51024177; Est. Dropped: 1014278151; Est. Drop rate: 95.2104%
2018-11-12 10:06:18,278 INFO Average drop rate: 95.210357
2018-11-12 10:06:18,278 INFO Range search [0.0 .. 50.0] targets: {'ndr': 0.001}
2018-11-12 10:06:18,278 INFO Modified traffic stream for port 0, new rate=25.0%.
2018-11-12 10:06:18,278 INFO Modified traffic stream for port 1, new rate=25.0%.
2018-11-12 10:06:18,278 INFO Running traffic generator
2018-11-12 10:06:28,311 INFO TX: 177737258; RX: 17225567; Est. Dropped: 160511691; Est. Drop rate: 90.3084%
2018-11-12 10:06:38,325 INFO TX: 355558509; RX: 34456480; Est. Dropped: 321102029; Est. Drop rate: 90.3092%
2018-11-12 10:06:48,321 INFO TX: 532671860; RX: 51628831; Est. Dropped: 481043029; Est. Drop rate: 90.3076%
2018-11-12 10:06:50,328 INFO Average drop rate: 90.307573
2018-11-12 10:06:50,328 INFO Range search [0.0 .. 25.0] targets: {'ndr': 0.001}
2018-11-12 10:06:50,328 INFO Modified traffic stream for port 0, new rate=12.5%.
2018-11-12 10:06:50,328 INFO Modified traffic stream for port 1, new rate=12.5%.
2018-11-12 10:06:50,328 INFO Running traffic generator
2018-11-12 10:07:00,360 INFO TX: 88871408; RX: 17251584; Est. Dropped: 71619824; Est. Drop rate: 80.5882%
2018-11-12 10:07:10,374 INFO TX: 177782666; RX: 34514112; Est. Dropped: 143268554; Est. Drop rate: 80.5863%
2018-11-12 10:07:20,370 INFO TX: 266336988; RX: 51704368; Est. Dropped: 214632620; Est. Drop rate: 80.5869%
2018-11-12 10:07:22,376 INFO Average drop rate: 80.586862
2018-11-12 10:07:22,376 INFO Range search [0.0 .. 12.5] targets: {'ndr': 0.001}
2018-11-12 10:07:22,376 INFO Modified traffic stream for port 0, new rate=6.25%.
2018-11-12 10:07:22,377 INFO Modified traffic stream for port 1, new rate=6.25%.
2018-11-12 10:07:22,377 INFO Running traffic generator
2018-11-12 10:07:32,409 INFO TX: 44433684; RX: 16912399; Est. Dropped: 27521285; Est. Drop rate: 61.9379%
2018-11-12 10:07:42,425 INFO TX: 88887815; RX: 33831407; Est. Dropped: 55056408; Est. Drop rate: 61.9392%
2018-11-12 10:07:52,420 INFO TX: 133167136; RX: 50679372; Est. Dropped: 82487764; Est. Drop rate: 61.9430%
2018-11-12 10:07:54,426 INFO Average drop rate: 61.943034
2018-11-12 10:07:54,426 INFO Range search [0.0 .. 6.25] targets: {'ndr': 0.001}
2018-11-12 10:07:54,426 INFO Modified traffic stream for port 0, new rate=3.125%.
2018-11-12 10:07:54,427 INFO Modified traffic stream for port 1, new rate=3.125%.
2018-11-12 10:07:54,427 INFO Running traffic generator
2018-11-12 10:08:04,454 INFO TX: 22216728; RX: 16609348; Est. Dropped: 5607380; Est. Drop rate: 25.2395%
2018-11-12 10:08:14,469 INFO TX: 44443928; RX: 33219660; Est. Dropped: 11224268; Est. Drop rate: 25.2549%
2018-11-12 10:08:24,464 INFO TX: 66583828; RX: 49759002; Est. Dropped: 16824826; Est. Drop rate: 25.2686%
2018-11-12 10:08:26,471 INFO Average drop rate: 25.268637
2018-11-12 10:08:26,471 INFO Range search [0.0 .. 3.125] targets: {'ndr': 0.001}
2018-11-12 10:08:26,471 INFO Modified traffic stream for port 0, new rate=1.5625%.
2018-11-12 10:08:26,471 INFO Modified traffic stream for port 1, new rate=1.5625%.
2018-11-12 10:08:26,471 INFO Running traffic generator
2018-11-12 10:08:36,501 INFO TX: 11107704; RX: 11107487; Est. Dropped: 217; Est. Drop rate: 0.0020%
2018-11-12 10:08:46,516 INFO TX: 22221290; RX: 22221290; Est. Dropped: 0; Est. Drop rate: 0.0000%
2018-11-12 10:08:56,512 INFO TX: 33291876; RX: 33291876; Est. Dropped: 0; Est. Drop rate: 0.0000%
2018-11-12 10:08:58,518 INFO Average drop rate: 0.000000
2018-11-12 10:08:58,518 INFO Range search [1.5625 .. 3.125] targets: {'ndr': 0.001}
2018-11-12 10:08:58,518 INFO Modified traffic stream for port 0, new rate=2.34375%.
2018-11-12 10:08:58,518 INFO Modified traffic stream for port 1, new rate=2.34375%.
2018-11-12 10:08:58,519 INFO Running traffic generator
2018-11-12 10:09:08,550 INFO TX: 16661948; RX: 16476315; Est. Dropped: 185633; Est. Drop rate: 1.1141%
2018-11-12 10:09:18,565 INFO TX: 33332580; RX: 32962756; Est. Dropped: 369824; Est. Drop rate: 1.1095%
2018-11-12 10:09:28,563 INFO TX: 49937872; RX: 49381317; Est. Dropped: 556555; Est. Drop rate: 1.1145%
2018-11-12 10:09:30,570 INFO Average drop rate: 1.114495
2018-11-12 10:09:30,570 INFO Range search [1.5625 .. 2.34375] targets: {'ndr': 0.001}
2018-11-12 10:09:30,570 INFO Modified traffic stream for port 0, new rate=1.953125%.
2018-11-12 10:09:30,570 INFO Modified traffic stream for port 1, new rate=1.953125%.
2018-11-12 10:09:30,570 INFO Running traffic generator
2018-11-12 10:09:40,602 INFO TX: 13885346; RX: 13885072; Est. Dropped: 274; Est. Drop rate: 0.0020%
2018-11-12 10:09:50,614 INFO TX: 27773876; RX: 27773696; Est. Dropped: 180; Est. Drop rate: 0.0006%
2018-11-12 10:10:00,613 INFO TX: 41614888; RX: 41614888; Est. Dropped: 0; Est. Drop rate: 0.0000%
2018-11-12 10:10:02,619 INFO Average drop rate: 0.000000
2018-11-12 10:10:02,620 INFO Range search [1.953125 .. 2.34375] targets: {'ndr': 0.001}
2018-11-12 10:10:02,620 INFO Modified traffic stream for port 0, new rate=2.1484375%.
2018-11-12 10:10:02,620 INFO Modified traffic stream for port 1, new rate=2.1484375%.
2018-11-12 10:10:02,620 INFO Running traffic generator
2018-11-12 10:10:12,650 INFO TX: 15273662; RX: 15273278; Est. Dropped: 384; Est. Drop rate: 0.0025%
2018-11-12 10:10:22,665 INFO TX: 30554932; RX: 30554681; Est. Dropped: 251; Est. Drop rate: 0.0008%
2018-11-12 10:10:32,661 INFO TX: 45776308; RX: 45776308; Est. Dropped: 0; Est. Drop rate: 0.0000%
2018-11-12 10:10:34,668 INFO Average drop rate: 0.000000
2018-11-12 10:10:34,668 INFO Range search [2.1484375 .. 2.34375] targets: {'ndr': 0.001}
2018-11-12 10:10:34,668 INFO Modified traffic stream for port 0, new rate=2.24609375%.
2018-11-12 10:10:34,668 INFO Modified traffic stream for port 1, new rate=2.24609375%.
2018-11-12 10:10:34,668 INFO Running traffic generator
2018-11-12 10:10:44,700 INFO TX: 15967430; RX: 15966925; Est. Dropped: 505; Est. Drop rate: 0.0032%
2018-11-12 10:10:54,715 INFO TX: 31943494; RX: 31942794; Est. Dropped: 700; Est. Drop rate: 0.0022%
2018-11-12 10:11:04,710 INFO TX: 47857176; RX: 47856892; Est. Dropped: 284; Est. Drop rate: 0.0006%
2018-11-12 10:11:06,717 INFO Average drop rate: 0.000593
2018-11-12 10:11:06,717 INFO Range search [2.24609375 .. 2.34375] targets: {'ndr': 0.001}
2018-11-12 10:11:06,717 INFO Found ndr (0.001) load: 2.24609375
2018-11-12 10:11:06,718 INFO NDR load: 4.4921875
2018-11-12 10:11:06,718 INFO Service chain 'EXT' run completed.
2018-11-12 10:11:06,718 INFO Clean up skipped.
2018-11-12 10:11:06,750 INFO Saving results in json file: /tmp/nfvbench/2vsc_4_ndr-1.log...
2018-11-12 10:11:06,753 INFO 
========== NFVBench Summary ==========
Date: 2018-11-12 10:05:11
NFVBench version 2.0.3
Openstack Neutron:
  vSwitch: 
  Encapsulation: 
Benchmarks:
> Networks:
  > Components:
    > Traffic Generator:
        Profile: trex-local
        Tool: TRex
    > Versions:
      > Traffic_Generator:
          build_date: Nov 13 2017
          version: v2.32
          built_by: hhaim
          mode: STL
          build_time: 10:58:17
  > Measurement Parameters:
      NDR: 0.001
  > Service chain:
    > EXT:
      > Traffic:
          Profile: traffic_profile_64B
          Bidirectional: True
          Flow count: 1000
          Service chains count: 2
          Compute nodes: []
            
            Run Summary:
            
              +-----+-----------------+------------------+------------------+-----------------+----------------------+----------------------+----------------------+
              |  -  |   L2 Frame Size |  Rate (fwd+rev)  |  Rate (fwd+rev)  |  Avg Drop Rate  |   Avg Latency (usec) |   Min Latency (usec) |   Max Latency (usec) |
              +=====+=================+==================+==================+=================+======================+======================+======================+
              | NDR |              64 |   1.1230 Gbps    |  1,595,236 pps   |     0.0006%     |                  329 |                   30 |                  666 |
              +-----+-----------------+------------------+------------------+-----------------+----------------------+----------------------+----------------------+
              
            
            L2 frame size: 64
            Actual l2 frame size: 68
            NDR search duration: 353 seconds
            

