fatal: [139.178.70.138]: FAILED! => {
"changed": true, "cmd": ["chef-client", "-z", "-E", "multinode", "-r", "role[multinode-controller]"], "delta": "0:05:41.177857", 
"end": "2019-04-23 15:44:04.358816", "msg": "non-zero return code", "rc": 1, "start": "2019-04-23 15:38:23.180959", "stderr": "", "stderr_lines": [], 
"stdout": 
"[2019-04-23T15:38:24+00:00] WARN: No config file found or specified on command line, using command line options.
Starting Chef Client, version 14.4.56\u001b[0m
resolving cookbooks for run list: [\"build-essential\", \"openstack-common\", \"openstack-common::logging\", \"openstack-common::sysctl\", \"openstack-common::python\", \"openstack-common::client\", \"openstack-ops-database::server\", \"openstack-ops-database::openstack-db\", \"openstack-ops-messaging::rabbitmq-server\", \"openstack-identity::server-apache\", \"openstack-identity::registration\", \"openstack-identity::openrc\", \"openstack-image::api\", \"openstack-image::registry\", \"openstack-image::identity_registration\", \"openstack-network\", \"openstack-network::server\", \"openstack-network::ml2_core_plugin\", \"openstack-network::dhcp_agent\", \"openstack-network::metadata_agent\", \"openstack-compute::nova-setup\", \"openstack-compute::identity_registration\", \"openstack-compute::conductor\", \"openstack-compute::api-os-compute\", \"openstack-compute::api-metadata\", \"openstack-compute::placement_api\", \"openstack-compute::scheduler\", \"openstack-compute::vncproxy\", \"openstack-orchestration::engine\", \"openstack-orchestration::api\", \"openstack-orchestration::api-cfn\", \"openstack-orchestration::identity_registration\", \"openstack-image::image_upload\", \"openstack-dashboard::horizon\"]\u001b[0m
Synchronizing Cookbooks:\u001b[0m
  - build-essential (8.2.1)\u001b[0m
  - openstack-common (18.0.0)\u001b[0m
  - openstack-ops-database (18.0.0)\u001b[0m
  - openstack-ops-messaging (18.0.0)\u001b[0m
  - openstack-identity (18.0.0)\u001b[0m
  - openstack-image (18.0.0)\u001b[0m
  - openstack-network (18.0.0)\u001b[0m
  - openstack-compute (18.0.0)\u001b[0m
  - openstack-orchestration (18.0.0)\u001b[0m
  - openstack-dashboard (18.0.0)\u001b[0m
  - seven_zip (3.1.0)\u001b[0m
  - mingw (2.1.0)\u001b[0m
  - etcd (5.6.0)\u001b[0m
  - mariadb (1.5.4)\u001b[0m
  - memcached (4.1.0)\u001b[0m
  - mysql (8.5.1)\u001b[0m
  - poise-python (1.7.0)\u001b[0m
  - selinux (2.1.1)\u001b[0m
  - mysql2_chef_gem (2.1.0)\u001b[0m
  - rabbitmq (5.8.0)\u001b[0m
  - openstackclient (18.0.0)\u001b[0m
  - apache2 (5.0.1)\u001b[0m
  - windows (5.3.0)\u001b[0m
  - docker (4.9.2)\u001b[0m
  - apt (7.1.1)\u001b[0m
  - selinux_policy (2.3.4)\u001b[0m
  - yum (5.1.0)\u001b[0m
  - yum-epel (3.3.0)\u001b[0m
  - yum-scl (0.2.0)\u001b[0m
  - runit (5.0.1)\u001b[0m
  - poise (2.8.2)\u001b[0m
  - poise-languages (2.1.2)\u001b[0m
  - erlang (7.0.0)\u001b[0m
  - yum-erlang_solutions (2.0.0)\u001b[0m
  - dpkg_autostart (0.2.0)\u001b[0m
  - logrotate (2.2.0)\u001b[0m
  - inifile_chef_gem (0.1.0)\u001b[0m
  - packagecloud (1.0.1)\u001b[0m
  - poise-archive (1.5.0)\u001b[0m
Installing Cookbook Gems:\u001b[0m
Compiling Cookbooks...\u001b[0m
Converging 388 resources\u001b[0m
Recipe: build-essential::default\u001b[0m
  * build_essential[install_packages] action install
    * apt_package[autoconf, binutils-doc, bison, build-essential, flex, gettext, ncurses-dev] action install
      \u001b[32m- install version 2.69-9 of package autoconf\u001b[0m
      \u001b[32m- install version 2.26.1-1ubuntu1~16.04.8 of package binutils-doc\u001b[0m
      \u001b[32m- install version 2:3.0.4.dfsg-1 of package bison\u001b[0m
      \u001b[32m- install version 2.6.0-11 of package flex\u001b[0m
      \u001b[32m- install version 0.19.7-2ubuntu3.1 of package gettext\u001b[0m
      \u001b[32m- install version 6.0+20160213-1ubuntu1 of package ncurses-dev\u001b[0m
\u001b[0m  
\u001b[0mRecipe: openstack-common::default\u001b[0m
  * apt_update[default] action update
    \u001b[32m- force update new lists of packages\u001b[0m
    * directory[/var/lib/apt/periodic] action create (up to date)
    * directory[/etc/apt/apt.conf.d] action create (up to date)
    * file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing
      \u001b[32m- create new file /etc/apt/apt.conf.d/15update-stamp\u001b[0m
      \u001b[32m- update content in file /etc/apt/apt.conf.d/15update-stamp from none to 174cdb\u001b[0m
      \u001b[37m--- /etc/apt/apt.conf.d/15update-stamp\t2019-04-23 15:39:21.311945773 +0000\u001b[0m
      \u001b[37m+++ /etc/apt/apt.conf.d/.chef-15update-stamp20190423-11189-y5fkxc\t2019-04-23 15:39:21.311945773 +0000\u001b[0m
      \u001b[37m@@ -1 +1,2 @@\u001b[0m
      \u001b[37m+APT::Update::Post-Invoke-Success {\"touch /var/lib/apt/periodic/update-success-stamp 2>/dev/null || true\";};\u001b[0m
\u001b[0m    * execute[apt-get -q update] action run
      \u001b[32m- execute [\"apt-get\", \"-q\", \"update\"]\u001b[0m
\u001b[0m  
\u001b[0m  * file[/etc/apt/apt.conf.d/confdef] action create
    \u001b[32m- create new file /etc/apt/apt.conf.d/confdef\u001b[0m
    \u001b[32m- update content in file /etc/apt/apt.conf.d/confdef from none to af5564\u001b[0m
    \u001b[37m--- /etc/apt/apt.conf.d/confdef\t2019-04-23 15:39:22.788059273 +0000\u001b[0m
    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-confdef20190423-11189-1shmiza\t2019-04-23 15:39:22.788059273 +0000\u001b[0m
    \u001b[37m@@ -1 +1,5 @@\u001b[0m
    \u001b[37m+Dpkg::Options {\u001b[0m
    \u001b[37m+      \"--force-confdef\";\u001b[0m
    \u001b[37m+      \"--force-confold\";\u001b[0m
    \u001b[37m+      }\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * apt_package[ubuntu-cloud-keyring] action upgrade
    \u001b[32m- upgrade package ubuntu-cloud-keyring from uninstalled to 2012.08.14\u001b[0m
\u001b[0m  * python_runtime[2] action install
    * poise_languages_system[python2.7] action install
       (up to date)
    * apt_package[python2.7, python2.7-dev] action nothing (skipped due to action :nothing)
     (up to date)
  * python_runtime_pip[2] action install
    * python_package[pip] action upgrade
      \u001b[32m- upgrade(allow_downgrade) package pip from 8.1.1 to 18.0\u001b[0m
\u001b[0m  
\u001b[0m  * python_package[setuptools] action install
    \u001b[32m- install version 40.0.0 of package setuptools\u001b[0m
\u001b[0m  * python_package[wheel] action install
    \u001b[32m- install version 0.31.1 of package wheel\u001b[0m
\u001b[0m  * python_package[virtualenv] action install
    \u001b[32m- install version 16.4.3 of package virtualenv\u001b[0m
\u001b[0m
\u001b[0mRecipe: openstack-common::logging\u001b[0m
  * directory[/etc/openstack] action create
    \u001b[32m- create new directory /etc/openstack\u001b[0m
    \u001b[32m- change mode from '' to '0755'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * template[/etc/openstack/logging.conf] action create
    \u001b[32m- create new file /etc/openstack/logging.conf\u001b[0m
    \u001b[32m- update content in file /etc/openstack/logging.conf from none to d41178\u001b[0m
    \u001b[37m--- /etc/openstack/logging.conf\t2019-04-23 15:39:40.233396994 +0000\u001b[0m
    \u001b[37m+++ /etc/openstack/.chef-logging20190423-11189-1xie8a7.conf\t2019-04-23 15:39:40.233396994 +0000\u001b[0m
    \u001b[37m@@ -1 +1,135 @@\u001b[0m
    \u001b[37m+[loggers]\u001b[0m
    \u001b[37m+keys=root,ceilometer,cinder,glance,horizon,keystone,nova,neutron,trove,amqplib,sqlalchemy,boto,suds,eventletwsgi,nova_api_openstack_wsgi,nova_osapi_compute_wsgi_server\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[formatters]\u001b[0m
    \u001b[37m+keys=normal,normal_with_name,debug,syslog_with_name,syslog_debug\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[handlers]\u001b[0m
    \u001b[37m+keys=stderr,devel,prod,debug\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+## LOGGERS ##\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_root]\u001b[0m
    \u001b[37m+level=NOTSET\u001b[0m
    \u001b[37m+handlers=devel\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_ceilometer]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=ceilometer\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_cinder]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=cinder\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_glance]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=glance\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_horizon]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=horizon\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_keystone]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=keystone\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_nova]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=nova\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_neutron]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=neutron\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_trove]\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=trove\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_amqplib]\u001b[0m
    \u001b[37m+level=WARNING\u001b[0m
    \u001b[37m+handlers=stderr\u001b[0m
    \u001b[37m+qualname=amqplib\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_sqlalchemy]\u001b[0m
    \u001b[37m+level=WARNING\u001b[0m
    \u001b[37m+handlers=stderr\u001b[0m
    \u001b[37m+qualname=sqlalchemy\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_boto]\u001b[0m
    \u001b[37m+level=WARNING\u001b[0m
    \u001b[37m+handlers=stderr\u001b[0m
    \u001b[37m+qualname=boto\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_suds]\u001b[0m
    \u001b[37m+level=INFO\u001b[0m
    \u001b[37m+handlers=stderr\u001b[0m
    \u001b[37m+qualname=suds\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_eventletwsgi]\u001b[0m
    \u001b[37m+level=WARNING\u001b[0m
    \u001b[37m+handlers=stderr\u001b[0m
    \u001b[37m+qualname=eventlet.wsgi.server\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_nova_api_openstack_wsgi]\u001b[0m
    \u001b[37m+level=WARNING\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=nova.api.openstack.wsgi\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[logger_nova_osapi_compute_wsgi_server]\u001b[0m
    \u001b[37m+level=WARNING\u001b[0m
    \u001b[37m+handlers=prod,debug\u001b[0m
    \u001b[37m+qualname=nova.osapi_compute.wsgi.server\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+## FORMATTERS ##\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[formatter_normal]\u001b[0m
    \u001b[37m+format=%(asctime)s %(levelname)s %(message)s\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[formatter_normal_with_name]\u001b[0m
    \u001b[37m+format=[%(name)s]: %(asctime)s %(levelname)s %(message)s\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[formatter_debug]\u001b[0m
    \u001b[37m+format=[%(name)s]: %(asctime)s %(levelname)s %(module)s.%(funcName)s %(message)s\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[formatter_syslog_with_name]\u001b[0m
    \u001b[37m+format=%(name)s: %(levelname)s %(message)s\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[formatter_syslog_debug]\u001b[0m
    \u001b[37m+format=%(name)s: %(levelname)s %(module)s.%(funcName)s %(message)s\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+## HANDLERS ##\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[handler_stderr]\u001b[0m
    \u001b[37m+args=(sys.stderr,)\u001b[0m
    \u001b[37m+class=StreamHandler\u001b[0m
    \u001b[37m+formatter=debug\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[handler_devel]\u001b[0m
    \u001b[37m+args=(sys.stdout,)\u001b[0m
    \u001b[37m+class=StreamHandler\u001b[0m
    \u001b[37m+formatter=debug\u001b[0m
    \u001b[37m+level=NOTSET\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[handler_prod]\u001b[0m
    \u001b[37m+args=(('/dev/log'), handlers.SysLogHandler.LOG_LOCAL0)\u001b[0m
    \u001b[37m+class=handlers.SysLogHandler\u001b[0m
    \u001b[37m+formatter=syslog_with_name\u001b[0m
    \u001b[37m+level=INFO\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[handler_debug]\u001b[0m
    \u001b[37m+args=(('/dev/log'), handlers.SysLogHandler.LOG_LOCAL1)\u001b[0m
    \u001b[37m+class=handlers.SysLogHandler\u001b[0m
    \u001b[37m+formatter=syslog_debug\u001b[0m
    \u001b[37m+level=DEBUG\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0mRecipe: openstack-common::sysctl\u001b[0m
  * directory[/etc/sysctl.d] action create (up to date)
  * template[/etc/sysctl.d/60-openstack.conf] action create
    \u001b[32m- create new file /etc/sysctl.d/60-openstack.conf\u001b[0m
    \u001b[32m- update content in file /etc/sysctl.d/60-openstack.conf from none to 8fa39c\u001b[0m
    \u001b[37m--- /etc/sysctl.d/60-openstack.conf\t2019-04-23 15:39:40.245397911 +0000\u001b[0m
    \u001b[37m+++ /etc/sysctl.d/.chef-60-openstack20190423-11189-hxg0h4.conf\t2019-04-23 15:39:40.245397911 +0000\u001b[0m
    \u001b[37m@@ -1 +1,6 @@\u001b[0m
    \u001b[37m+# Managed by Chef\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+net.ipv4.conf.all.rp_filter = 0\u001b[0m
    \u001b[37m+net.ipv4.conf.default.rp_filter = 0\u001b[0m
    \u001b[37m+net.ipv4.ip_forward = 1\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * execute[sysctl -p /etc/sysctl.d/60-openstack.conf] action run
    \u001b[32m- execute sysctl -p /etc/sysctl.d/60-openstack.conf\u001b[0m
\u001b[0m  * execute[sysctl -p /etc/sysctl.d/60-openstack.conf] action nothing (skipped due to action :nothing)
Recipe: openstack-common::python\u001b[0m
  * python_runtime[3.5] action install
    * poise_languages_system[python3.5] action install
       (up to date)
    * apt_package[python3.5, python3.5-dev] action nothing (skipped due to action :nothing)
     (up to date)
  * python_runtime_pip[3.5] action install (up to date)
  * python_package[setuptools] action install
    \u001b[32m- install version 40.0.0 of package setuptools\u001b[0m
\u001b[0m  * python_package[wheel] action install
    \u001b[32m- install version 0.31.1 of package wheel\u001b[0m
\u001b[0m
\u001b[0mRecipe: openstack-common::client\u001b[0m
  * apt_package[python-openstackclient] action upgrade
    \u001b[32m- upgrade package python-openstackclient from uninstalled to 2.3.1-0ubuntu1\u001b[0m
\u001b[0mRecipe: apt::default\u001b[0m
  * file[/var/lib/apt/periodic/update-success-stamp] action nothing (skipped due to action :nothing)
  * apt_update[periodic] action periodic (up to date)
  * execute[apt-get update] action nothing (skipped due to action :nothing)
  * execute[apt-get autoremove] action nothing (skipped due to action :nothing)
  * execute[apt-get autoclean] action nothing (skipped due to action :nothing)
  * directory[/var/cache/local] action create
    \u001b[32m- create new directory /var/cache/local\u001b[0m
    \u001b[32m- change mode from '' to '0755'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * directory[/var/cache/local/preseeding] action create
    \u001b[32m- create new directory /var/cache/local/preseeding\u001b[0m
    \u001b[32m- change mode from '' to '0755'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * template[/etc/apt/apt.conf.d/10dpkg-options] action create
    \u001b[32m- create new file /etc/apt/apt.conf.d/10dpkg-options\u001b[0m
    \u001b[32m- update content in file /etc/apt/apt.conf.d/10dpkg-options from none to c918ac\u001b[0m
    \u001b[37m--- /etc/apt/apt.conf.d/10dpkg-options\t2019-04-23 15:40:10.815726779 +0000\u001b[0m
    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-10dpkg-options20190423-11189-11l51es\t2019-04-23 15:40:10.815726779 +0000\u001b[0m
    \u001b[37m@@ -1 +1,4 @@\u001b[0m
    \u001b[37m+# Managed by Chef\u001b[0m
    \u001b[37m+DPkg::Options {\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * template[/etc/apt/apt.conf.d/10recommends] action create
    \u001b[32m- create new file /etc/apt/apt.conf.d/10recommends\u001b[0m
    \u001b[32m- update content in file /etc/apt/apt.conf.d/10recommends from none to f41e1d\u001b[0m
    \u001b[37m--- /etc/apt/apt.conf.d/10recommends\t2019-04-23 15:40:10.819727082 +0000\u001b[0m
    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-10recommends20190423-11189-re7he5\t2019-04-23 15:40:10.819727082 +0000\u001b[0m
    \u001b[37m@@ -1 +1,4 @@\u001b[0m
    \u001b[37m+# Managed by Chef\u001b[0m
    \u001b[37m+APT::Install-Recommends \"1\";\u001b[0m
    \u001b[37m+APT::Install-Suggests \"0\";\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * apt_package[apt-transport-https, gnupg, dirmngr] action install
    \u001b[32m- install version 2.1.11-6ubuntu2.1 of package dirmngr\u001b[0m
\u001b[0mRecipe: mariadb::repository\u001b[0m
  * apt_repository[mariadb-10.0] action add
    * execute[install-key F1656F24C74CD1D8] action run
      \u001b[32m- execute apt-key adv --recv --keyserver hkp://keyserver.ubuntu.com:80 F1656F24C74CD1D8\u001b[0m
\u001b[0m    * execute[apt-cache gencaches] action run
      \u001b[32m- execute [\"apt-cache\", \"gencaches\"]\u001b[0m
\u001b[0m    * execute[apt-cache gencaches] action nothing (skipped due to action :nothing)
    * apt_update[mariadb-10.0] action nothing (skipped due to action :nothing)
    * file[/etc/apt/sources.list.d/mariadb-10.0.list] action create
      \u001b[32m- create new file /etc/apt/sources.list.d/mariadb-10.0.list\u001b[0m
      \u001b[32m- update content in file /etc/apt/sources.list.d/mariadb-10.0.list from none to 30fa24\u001b[0m
      \u001b[37m--- /etc/apt/sources.list.d/mariadb-10.0.list\t2019-04-23 15:40:18.696324196 +0000\u001b[0m
      \u001b[37m+++ /etc/apt/sources.list.d/.chef-mariadb-1020190423-11189-zsh4hj.0.list\t2019-04-23 15:40:18.696324196 +0000\u001b[0m
      \u001b[37m@@ -1 +1,2 @@\u001b[0m
      \u001b[37m+deb      \"http://ftp.igh.cnrs.fr/pub/mariadb/repo/10.0/ubuntu\" xenial main\u001b[0m
      \u001b[32m- change mode from '' to '0644'\u001b[0m
      \u001b[32m- change owner from '' to 'root'\u001b[0m
      \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m    * execute[apt-cache gencaches] action run
      \u001b[32m- execute [\"apt-cache\", \"gencaches\"]\u001b[0m
\u001b[0m    * apt_update[mariadb-10.0] action update
      \u001b[32m- force update new lists of packages\u001b[0m
      * directory[/var/lib/apt/periodic] action create (up to date)
      * directory[/etc/apt/apt.conf.d] action create (up to date)
      * file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing (up to date)
      * execute[apt-get -q update] action run
        \u001b[32m- execute [\"apt-get\", \"-q\", \"update\"]\u001b[0m
\u001b[0m    
\u001b[0m  
\u001b[0mRecipe: mariadb::client\u001b[0m
  * apt_package[MariaDB-client] action install
    \u001b[32m- install version 10.0.38+maria-1~xenial of package mariadb-client-10.0\u001b[0m
\u001b[0mRecipe: mariadb::devel\u001b[0m
  * apt_package[MariaDB-devel] action install
    \u001b[32m- install version 10.0.38+maria-1~xenial of package libmariadbclient-dev\u001b[0m
\u001b[0mRecipe: openstack-ops-database::mariadb-client\u001b[0m
  * mysql2_chef_gem_mysql2_chef_gem_mariadb[default] action install
    \u001b[32m- evaluate block and run any associated actions\u001b[0m
    \u001b[32m- evaluate block and run any associated actions\u001b[0m
    * gem_package[mysql2] action install
      \u001b[32m- install version 0.4.9 of package mysql2\u001b[0m
\u001b[0m  
\u001b[0m  * apt_package[python-mysqldb] action install
    \u001b[32m- install version 1.3.7-1build2 of package python-mysqldb\u001b[0m
\u001b[0mRecipe: mariadb::_debian_server_preinstall\u001b[0m
  * apt_package[debconf-utils] action install
    \u001b[32m- install version 1.5.58ubuntu1 of package debconf-utils\u001b[0m
\u001b[0m  * template[/var/cache/local/preseeding/mariadb-server.seed] action create
    \u001b[32m- create new file /var/cache/local/preseeding/mariadb-server.seed\u001b[0m
    \u001b[32m- update content in file /var/cache/local/preseeding/mariadb-server.seed from none to cb6df4\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0600'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * execute[preseed mariadb-server] action run
    \u001b[32m- execute /usr/bin/debconf-set-selections /var/cache/local/preseeding/mariadb-server.seed\u001b[0m
\u001b[0m  * execute[preseed mariadb-server] action nothing (skipped due to action :nothing)
Recipe: mariadb::server\u001b[0m
  * apt_package[MariaDB-server] action install
    \u001b[32m- install version 10.0.38+maria-1~xenial of package mariadb-server-10.0\u001b[0m
\u001b[0m  * ruby_block[restart_mysql] action run
    \u001b[32m- execute the ruby block restart_mysql\u001b[0m
\u001b[0mRecipe: mariadb::config\u001b[0m
  * template[/root/.my.cnf] action create (skipped due to only_if)
  * template[/etc/mysql/my.cnf] action create
    \u001b[32m- update content in file /etc/mysql/my.cnf from fa1a1c to 39b39f\u001b[0m
    \u001b[37m--- /etc/mysql/my.cnf\t2019-01-29 22:07:03.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/mysql/.chef-my20190423-11189-1ljpqni.cnf\t2019-04-23 15:41:30.437714850 +0000\u001b[0m
    \u001b[37m@@ -1,9 +1,10 @@\u001b[0m
    \u001b[37m+# DEPLOYED BY CHEF\u001b[0m
    \u001b[37m # MariaDB database server configuration file.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # You can copy this file to one of:\u001b[0m
    \u001b[37m # - \"/etc/mysql/my.cnf\" to set global options,\u001b[0m
    \u001b[37m # - \"~/.my.cnf\" to set user-specific options.\u001b[0m
    \u001b[37m-# \u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m # One can use all long options that the program supports.\u001b[0m
    \u001b[37m # Run program with --help to get a list of available options and with\u001b[0m
    \u001b[37m # --print-defaults to see which it would actually understand and use.\u001b[0m
    \u001b[37m@@ -37,18 +38,18 @@\u001b[0m
    \u001b[37m port\t\t= 3306\u001b[0m
    \u001b[37m basedir\t\t= /usr\u001b[0m
    \u001b[37m datadir\t\t= /var/lib/mysql\u001b[0m
    \u001b[37m-tmpdir\t\t= /tmp\u001b[0m
    \u001b[37m+tmpdir\t\t= /var/tmp\u001b[0m
    \u001b[37m lc_messages_dir\t= /usr/share/mysql\u001b[0m
    \u001b[37m lc_messages\t= en_US\u001b[0m
    \u001b[37m skip-external-locking\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # Instead of skip-networking the default is now to listen only on\u001b[0m
    \u001b[37m # localhost which is more compatible and is not less secure.\u001b[0m
    \u001b[37m-bind-address\t\t= 127.0.0.1\u001b[0m
    \u001b[37m+bind-address\t\t= 139.178.70.138\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # * Fine Tuning\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-max_connections\t\t= 100\u001b[0m
    \u001b[37m+max_connections\t\t= 307\u001b[0m
    \u001b[37m connect_timeout\t\t= 5\u001b[0m
    \u001b[37m wait_timeout\t\t= 600\u001b[0m
    \u001b[37m max_allowed_packet\t= 16M\u001b[0m
    \u001b[37m@@ -64,7 +65,6 @@\u001b[0m
    \u001b[37m # the first time they are touched. On error, make copy and try a repair.\u001b[0m
    \u001b[37m myisam_recover          = BACKUP\u001b[0m
    \u001b[37m key_buffer_size\t\t= 128M\u001b[0m
    \u001b[37m-#open-files-limit\t= 2000\u001b[0m
    \u001b[37m table_open_cache\t= 400\u001b[0m
    \u001b[37m myisam_sort_buffer_size\t= 512M\u001b[0m
    \u001b[37m concurrent_insert\t= 2\u001b[0m
    \u001b[37m@@ -84,8 +84,8 @@\u001b[0m
    \u001b[37m # Both location gets rotated by the cronjob.\u001b[0m
    \u001b[37m # Be aware that this log type is a performance killer.\u001b[0m
    \u001b[37m # As of 5.1 you can enable the log at runtime!\u001b[0m
    \u001b[37m-#general_log_file        = /var/log/mysql/mysql.log\u001b[0m
    \u001b[37m-#general_log             = 1\u001b[0m
    \u001b[37m+general_log_file        = /var/log/mysql/mysql.log\u001b[0m
    \u001b[37m+general_log             = 0\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # Error logging goes to syslog due to /etc/mysql/conf.d/mysqld_safe_syslog.cnf.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m@@ -94,10 +94,13 @@\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # Enable the slow query log to see queries with especially long duration\u001b[0m
    \u001b[37m #slow_query_log[={0|1}]\u001b[0m
    \u001b[37m+slow_query_log = 0\u001b[0m
    \u001b[37m slow_query_log_file\t= /var/log/mysql/mariadb-slow.log\u001b[0m
    \u001b[37m long_query_time = 10\u001b[0m
    \u001b[37m-#log_slow_rate_limit\t= 1000\u001b[0m
    \u001b[37m+log_slow_rate_limit\t= 1000\u001b[0m
    \u001b[37m log_slow_verbosity\t= query_plan\u001b[0m
    \u001b[37m+# Logging output type\u001b[0m
    \u001b[37m+log_output = FILE\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #log-queries-not-using-indexes\u001b[0m
    \u001b[37m #log_slow_admin_statements\u001b[0m
    \u001b[37m@@ -105,16 +108,11 @@\u001b[0m
    \u001b[37m # The following can be used as easy to replay backup logs or for replication.\u001b[0m
    \u001b[37m # note: if you are setting up a replication slave, see README.Debian about\u001b[0m
    \u001b[37m #       other settings you may need to change.\u001b[0m
    \u001b[37m-#server-id\t\t= 1\u001b[0m
    \u001b[37m #report_host\t\t= master1\u001b[0m
    \u001b[37m #auto_increment_increment = 2\u001b[0m
    \u001b[37m #auto_increment_offset\t= 1\u001b[0m
    \u001b[37m-log_bin\t\t\t= /var/log/mysql/mariadb-bin\u001b[0m
    \u001b[37m-log_bin_index\t\t= /var/log/mysql/mariadb-bin.index\u001b[0m
    \u001b[37m # not fab for performance, but safer\u001b[0m
    \u001b[37m #sync_binlog\t\t= 1\u001b[0m
    \u001b[37m-expire_logs_days\t= 10\u001b[0m
    \u001b[37m-max_binlog_size         = 100M\u001b[0m
    \u001b[37m # slaves\u001b[0m
    \u001b[37m #relay_log\t\t= /var/log/mysql/relay-bin\u001b[0m
    \u001b[37m #relay_log_index\t= /var/log/mysql/relay-bin.index\u001b[0m
    \u001b[37m@@ -125,20 +123,9 @@\u001b[0m
    \u001b[37m # If applications support it, this stricter sql_mode prevents some\u001b[0m
    \u001b[37m # mistakes like inserting invalid dates etc.\u001b[0m
    \u001b[37m #sql_mode\t\t= NO_ENGINE_SUBSTITUTION,TRADITIONAL\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# * InnoDB\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\u001b[0m
    \u001b[37m-# Read the manual for more InnoDB related options. There are many!\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m default_storage_engine\t= InnoDB\u001b[0m
    \u001b[37m-# you can't just change log file size, requires special procedure\u001b[0m
    \u001b[37m-#innodb_log_file_size\t= 50M\u001b[0m
    \u001b[37m-innodb_buffer_pool_size\t= 256M\u001b[0m
    \u001b[37m-innodb_log_buffer_size\t= 8M\u001b[0m
    \u001b[37m-innodb_file_per_table\t= 1\u001b[0m
    \u001b[37m-innodb_open_files\t= 400\u001b[0m
    \u001b[37m-innodb_io_capacity\t= 400\u001b[0m
    \u001b[37m-innodb_flush_method\t= O_DIRECT\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # * Security Features\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m@@ -152,10 +139,11 @@\u001b[0m
    \u001b[37m # ssl-key=/etc/mysql/server-key.pem\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# * Plugins Options\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [mysqldump]\u001b[0m
    \u001b[37m-quick\u001b[0m
    \u001b[37m-quote-names\u001b[0m
    \u001b[37m max_allowed_packet\t= 16M\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [mysql]\u001b[0m
\u001b[0m  * directory[/etc/mysql/conf.d] action create (skipped due to not_if)
  * mariadb_configuration[20-innodb] action add
    * template[/etc/mysql/conf.d/20-innodb.cnf] action create
      \u001b[32m- create new file /etc/mysql/conf.d/20-innodb.cnf\u001b[0m
      \u001b[32m- update content in file /etc/mysql/conf.d/20-innodb.cnf from none to 36e5ec\u001b[0m
      \u001b[32m- suppressed sensitive resource\u001b[0m
      \u001b[32m- change mode from '' to '0640'\u001b[0m
      \u001b[32m- change owner from '' to 'root'\u001b[0m
      \u001b[32m- change group from '' to 'mysql'\u001b[0m
\u001b[0m  
\u001b[0m  * mariadb_configuration[30-replication] action add
    * template[/etc/mysql/conf.d/30-replication.cnf] action create
      \u001b[32m- create new file /etc/mysql/conf.d/30-replication.cnf\u001b[0m
      \u001b[32m- update content in file /etc/mysql/conf.d/30-replication.cnf from none to b2d844\u001b[0m
      \u001b[32m- suppressed sensitive resource\u001b[0m
      \u001b[32m- change mode from '' to '0640'\u001b[0m
      \u001b[32m- change owner from '' to 'root'\u001b[0m
      \u001b[32m- change group from '' to 'mysql'\u001b[0m
\u001b[0m  
\u001b[0mRecipe: mariadb::server\u001b[0m
  * directory[/var/log/mysql] action create
    \u001b[32m- change mode from '02750' to '0755'\u001b[0m
    \u001b[32m- change group from 'adm' to 'mysql'\u001b[0m
\u001b[0m  * execute[mariadb-service-restart-needed] action run
    \u001b[32m- execute true\u001b[0m
\u001b[0m  * ruby_block[restart_mysql] action run
    \u001b[32m- execute the ruby block restart_mysql\u001b[0m
\u001b[0m  * service[mysql] action enable (up to date)
  * service[mysql] action restart
    \u001b[32m- restart service service[mysql]\u001b[0m
\u001b[0m  * ruby_block[restart_mysql] action nothing (skipped due to action :nothing)
Recipe: mariadb::_mariadb_postinstall\u001b[0m
  * file[/etc/mysql_root_change] action create
    \u001b[32m- create new file /etc/mysql_root_change\u001b[0m
    \u001b[32m- update content in file /etc/mysql_root_change from none to f8cd5c\u001b[0m
    \u001b[37m--- /etc/mysql_root_change\t2019-04-23 15:41:31.737811823 +0000\u001b[0m
    \u001b[37m+++ /etc/.chef-mysql_root_change20190423-11189-18rbz0t\t2019-04-23 15:41:31.737811823 +0000\u001b[0m
    \u001b[37m@@ -1 +1,2 @@\u001b[0m
    \u001b[37m+a029d0df84eb5549c641e04a9ef389e5\u001b[0m
\u001b[0m  * execute[install-grants] action run (skipped due to only_if)
  * execute[install-grants] action nothing (skipped due to action :nothing)
  * template[/etc/mariadb_grants] action create
    \u001b[32m- create new file /etc/mariadb_grants\u001b[0m
    \u001b[32m- update content in file /etc/mariadb_grants from none to b25da0\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0600'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * execute[install-grants] action run
    \u001b[32m- execute sensitive resource\u001b[0m
\u001b[0mRecipe: openstack-ops-database::mariadb-server\u001b[0m
  * template[/etc/mysql/conf.d/openstack.cnf] action create
    \u001b[32m- create new file /etc/mysql/conf.d/openstack.cnf\u001b[0m
    \u001b[32m- update content in file /etc/mysql/conf.d/openstack.cnf from none to 3f1fa5\u001b[0m
    \u001b[37m--- /etc/mysql/conf.d/openstack.cnf\t2019-04-23 15:41:31.789815702 +0000\u001b[0m
    \u001b[37m+++ /etc/mysql/conf.d/.chef-openstack20190423-11189-167tcq3.cnf\t2019-04-23 15:41:31.789815702 +0000\u001b[0m
    \u001b[37m@@ -1 +1,19 @@\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# This file is automatically generated by Chef\u001b[0m
    \u001b[37m+# Any changes will be overwritten\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[mysqld]\u001b[0m
    \u001b[37m+default-storage-engine = InnoDB\u001b[0m
    \u001b[37m+innodb_autoinc_lock_mode = 1\u001b[0m
    \u001b[37m+innodb_file_per_table = OFF\u001b[0m
    \u001b[37m+innodb_thread_concurrency = 0\u001b[0m
    \u001b[37m+innodb_commit_concurrency = 0\u001b[0m
    \u001b[37m+innodb_read_io_threads = 4\u001b[0m
    \u001b[37m+innodb_flush_log_at_trx_commit = 1\u001b[0m
    \u001b[37m+innodb_buffer_pool_size = 134217728\u001b[0m
    \u001b[37m+innodb_log_file_size = 5242880\u001b[0m
    \u001b[37m+innodb_log_buffer_size = 8388608\u001b[0m
    \u001b[37m+character-set-server = latin1\u001b[0m
    \u001b[37m+query_cache_size = 0\u001b[0m
    \u001b[37m+max_connections = 307\u001b[0m
    \u001b[32m- change owner from '' to 'mysql'\u001b[0m
    \u001b[32m- change group from '' to 'mysql'\u001b[0m
\u001b[0mRecipe: openstack-ops-database::openstack-db\u001b[0m
  * log[No databag item containing the database password for aodh was found, so no database was created] action write
  
\u001b[0m  * openstack_common_database[bare_metal] action create
    * database[create database ironic] action create
      \u001b[32m- Creating schema 'ironic'\u001b[0m
\u001b[0m    * database_user[create database user ironic] action create
      \u001b[32m- Creating user 'ironic'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user ironic] action grant
      \u001b[32m- Granting privs for 'ironic'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[block_storage] action create
    * database[create database cinder] action create
      \u001b[32m- Creating schema 'cinder'\u001b[0m
\u001b[0m    * database_user[create database user cinder] action create
      \u001b[32m- Creating user 'cinder'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user cinder] action grant
      \u001b[32m- Granting privs for 'cinder'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[compute] action create
    * database[create database nova] action create
      \u001b[32m- Creating schema 'nova'\u001b[0m
\u001b[0m    * database_user[create database user nova] action create
      \u001b[32m- Creating user 'nova'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user nova] action grant
      \u001b[32m- Granting privs for 'nova'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[compute_api] action create
    * database[create database nova_api] action create
      \u001b[32m- Creating schema 'nova_api'\u001b[0m
\u001b[0m    * database_user[create database user nova_api] action create
      \u001b[32m- Creating user 'nova_api'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user nova_api] action grant
      \u001b[32m- Granting privs for 'nova_api'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[compute_cell0] action create
    * database[create database nova_cell0] action create
      \u001b[32m- Creating schema 'nova_cell0'\u001b[0m
\u001b[0m    * database_user[create database user nova_cell0] action create
      \u001b[32m- Creating user 'nova_cell0'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user nova_cell0] action grant
      \u001b[32m- Granting privs for 'nova_cell0'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[dashboard] action create
    * database[create database horizon] action create
      \u001b[32m- Creating schema 'horizon'\u001b[0m
\u001b[0m    * database_user[create database user horizon] action create
      \u001b[32m- Creating user 'horizon'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user horizon] action grant
      \u001b[32m- Granting privs for 'horizon'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * log[No databag item containing the database password for trove was found, so no database was created] action write
  
\u001b[0m  * openstack_common_database[dns] action create
    * database[create database designate] action create
      \u001b[32m- Creating schema 'designate'\u001b[0m
\u001b[0m    * database_user[create database user designate] action create
      \u001b[32m- Creating user 'designate'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user designate] action grant
      \u001b[32m- Granting privs for 'designate'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[identity] action create
    * database[create database keystone] action create
      \u001b[32m- Creating schema 'keystone'\u001b[0m
\u001b[0m    * database_user[create database user keystone] action create
      \u001b[32m- Creating user 'keystone'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user keystone] action grant
      \u001b[32m- Granting privs for 'keystone'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[image] action create
    * database[create database glance] action create
      \u001b[32m- Creating schema 'glance'\u001b[0m
\u001b[0m    * database_user[create database user glance] action create
      \u001b[32m- Creating user 'glance'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user glance] action grant
      \u001b[32m- Granting privs for 'glance'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[network] action create
    * database[create database neutron] action create
      \u001b[32m- Creating schema 'neutron'\u001b[0m
\u001b[0m    * database_user[create database user neutron] action create
      \u001b[32m- Creating user 'neutron'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user neutron] action grant
      \u001b[32m- Granting privs for 'neutron'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * log[No databag item containing the database password for swift was found, so no database was created] action write
  
\u001b[0m  * openstack_common_database[orchestration] action create
    * database[create database heat] action create
      \u001b[32m- Creating schema 'heat'\u001b[0m
\u001b[0m    * database_user[create database user heat] action create
      \u001b[32m- Creating user 'heat'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user heat] action grant
      \u001b[32m- Granting privs for 'heat'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[telemetry] action create
    * database[create database ceilometer] action create
      \u001b[32m- Creating schema 'ceilometer'\u001b[0m
\u001b[0m    * database_user[create database user ceilometer] action create
      \u001b[32m- Creating user 'ceilometer'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user ceilometer] action grant
      \u001b[32m- Granting privs for 'ceilometer'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * openstack_common_database[telemetry_metric] action create
    * database[create database gnocchi] action create
      \u001b[32m- Creating schema 'gnocchi'\u001b[0m
\u001b[0m    * database_user[create database user gnocchi] action create
      \u001b[32m- Creating user 'gnocchi'@'localhost'\u001b[0m
\u001b[0m    * database_user[grant database user gnocchi] action grant
      \u001b[32m- Granting privs for 'gnocchi'@'%'\u001b[0m
\u001b[0m  
\u001b[0m  * log[No databag item containing the database password for murano was found, so no database was created] action write
  
\u001b[0mRecipe: erlang::package\u001b[0m
  * apt_package[erlang-nox] action install
    \u001b[32m- install version 1:18.3-dfsg-1ubuntu3.1 of package erlang-nox\u001b[0m
\u001b[0m  * apt_package[erlang-dev] action install
    \u001b[32m- install version 1:18.3-dfsg-1ubuntu3.1 of package erlang-dev\u001b[0m
\u001b[0mRecipe: rabbitmq::default\u001b[0m
  * directory[/etc/rabbitmq] action create
    \u001b[32m- create new directory /etc/rabbitmq\u001b[0m
    \u001b[32m- change mode from '' to '0755'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * template[/etc/apt/apt.conf.d/90forceyes] action create
    \u001b[32m- create new file /etc/apt/apt.conf.d/90forceyes\u001b[0m
    \u001b[32m- update content in file /etc/apt/apt.conf.d/90forceyes from none to 2f21e4\u001b[0m
    \u001b[37m--- /etc/apt/apt.conf.d/90forceyes\t2019-04-23 15:41:47.454982345 +0000\u001b[0m
    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-90forceyes20190423-11189-clncjg\t2019-04-23 15:41:47.454982345 +0000\u001b[0m
    \u001b[37m@@ -1 +1,3 @@\u001b[0m
    \u001b[37m+APT::Get::Assume-Yes \"false\";\u001b[0m
    \u001b[37m+APT::Get::force-yes \"false\";\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * apt_package[logrotate] action install (up to date)
  * apt_package[socat] action install (up to date)
Recipe: <Dynamically Defined Resource>\u001b[0m
  * dpkg_autostart[bin_file] action create
    * template[dpkg_autostart_file] action create
      \u001b[32m- update content in file /usr/sbin/policy-rc.d from c2bcd9 to 13cff7\u001b[0m
      \u001b[37m--- /usr/sbin/policy-rc.d\t2019-01-22 22:48:14.000000000 +0000\u001b[0m
      \u001b[37m+++ /usr/sbin/.chef-policy-rc20190423-11189-1wn38l3.d\t2019-04-23 15:41:49.083103414 +0000\u001b[0m
      \u001b[37m@@ -1,3 +1,83 @@\u001b[0m
      \u001b[37m-#!/bin/sh\u001b[0m
      \u001b[37m-exit 101\u001b[0m
      \u001b[37m+#!/bin/bash\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+DISABLE_ACTIONS=( start restart )\u001b[0m
      \u001b[37m+DISABLED_SERVICES=( rabbitmq-server )\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+longoptions='quiet,force,try-anyway,disclose-deny,query,no-fallback,help'\u001b[0m
      \u001b[37m+getopt=$(getopt -o '' --longoptions $longoptions -- \"$@\")\u001b[0m
      \u001b[37m+if [ $? != 0 ]; then\u001b[0m
      \u001b[37m+   echo \"ERROR!\"\u001b[0m
      \u001b[37m+   exit 1;\u001b[0m
      \u001b[37m+fi\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+eval set -- \"$getopt\"\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+while true; do\u001b[0m
      \u001b[37m+      case \"$1\" in\u001b[0m
      \u001b[37m+      --quiet)\u001b[0m
      \u001b[37m+        QUIET=1\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      --force)\u001b[0m
      \u001b[37m+        FORCE=1\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      --try-anyway)\u001b[0m
      \u001b[37m+        TRY_ANYWAY=1\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      --disclose-deny)\u001b[0m
      \u001b[37m+        DISCLOSE_DENY=1\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      --query)\u001b[0m
      \u001b[37m+        QUERY=1\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      --no-fallback)\u001b[0m
      \u001b[37m+        NO_FALLBACK=1\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      --)\u001b[0m
      \u001b[37m+        shift\u001b[0m
      \u001b[37m+        break\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      *)\u001b[0m
      \u001b[37m+        echo \"There should probably be some help text here!\"\u001b[0m
      \u001b[37m+        exit 1\u001b[0m
      \u001b[37m+      ;;\u001b[0m
      \u001b[37m+      esac\u001b[0m
      \u001b[37m+done\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+SRV_NAME=$1\u001b[0m
      \u001b[37m+shift\u001b[0m
      \u001b[37m+SRV_ACTION=$1\u001b[0m
      \u001b[37m+SRV_ARGS=$*\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+SRV_DISABLED=0\u001b[0m
      \u001b[37m+ACT_DISABLED=0\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+if [ ! -x \"/etc/init.d/${SRV_NAME}\" ] && [ ! -f \"/etc/init/${SRV_NAME}.conf\" ]; then\u001b[0m
      \u001b[37m+    exit 100\u001b[0m
      \u001b[37m+fi\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+for i in \"${DISABLED_SERVICES[@]}\"\u001b[0m
      \u001b[37m+do\u001b[0m
      \u001b[37m+    if [ $i = $SRV_NAME ]; then\u001b[0m
      \u001b[37m+        SRV_DISABLED=1\u001b[0m
      \u001b[37m+    fi\u001b[0m
      \u001b[37m+done\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+for i in \"${DISABLE_ACTIONS[@]}\"\u001b[0m
      \u001b[37m+do\u001b[0m
      \u001b[37m+    if [ $i = $SRV_ACTION ]; then\u001b[0m
      \u001b[37m+        ACT_DISABLED=1\u001b[0m
      \u001b[37m+    fi\u001b[0m
      \u001b[37m+done\u001b[0m
      \u001b[37m+\u001b[0m
      \u001b[37m+if [ $SRV_DISABLED -eq 1 -a $ACT_DISABLED -eq 1 ]; then\u001b[0m
      \u001b[37m+    exit 101\u001b[0m
      \u001b[37m+else\u001b[0m
      \u001b[37m+    exit 104\u001b[0m
      \u001b[37m+fi\u001b[0m
\u001b[0m     (up to date)
Recipe: rabbitmq::default\u001b[0m
  * dpkg_autostart[rabbitmq-server] action nothing (skipped due to action :nothing)
  * apt_package[rabbitmq-server] action install
    \u001b[32m- install version 3.5.7-1ubuntu0.16.04.2 of package rabbitmq-server\u001b[0m
\u001b[0m  * directory[/var/lib/rabbitmq/mnesia] action create
    \u001b[32m- change mode from '0755' to '0775'\u001b[0m
\u001b[0m  * template[/etc/rabbitmq/rabbitmq-env.conf] action create
    \u001b[32m- update content in file /etc/rabbitmq/rabbitmq-env.conf from 383102 to 80ea5d\u001b[0m
    \u001b[37m--- /etc/rabbitmq/rabbitmq-env.conf\t2019-04-23 15:41:54.011469685 +0000\u001b[0m
    \u001b[37m+++ /etc/rabbitmq/.chef-rabbitmq-env20190423-11189-1ogr344.conf\t2019-04-23 15:41:54.347494645 +0000\u001b[0m
    \u001b[37m@@ -1,14 +1,13 @@\u001b[0m
    \u001b[37m-# Defaults to rabbit. This can be useful if you want to run more than one node\u001b[0m
    \u001b[37m-# per machine - RABBITMQ_NODENAME should be unique per erlang-node-and-machine\u001b[0m
    \u001b[37m-# combination. See the clustering on a single machine guide for details:\u001b[0m
    \u001b[37m-# http://www.rabbitmq.com/clustering.html#single-machine\u001b[0m
    \u001b[37m-#NODENAME=rabbit\u001b[0m
    \u001b[37m+###\u001b[0m
    \u001b[37m+# Generated by Chef\u001b[0m
    \u001b[37m+###\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# By default RabbitMQ will bind to all interfaces, on IPv4 and IPv6 if\u001b[0m
    \u001b[37m-# available. Set this if you only want to bind to one network interface or#\u001b[0m
    \u001b[37m-# address family.\u001b[0m
    \u001b[37m-#NODE_IP_ADDRESS=127.0.0.1\u001b[0m
    \u001b[37m+NODE_IP_ADDRESS=139.178.70.138\u001b[0m
    \u001b[37m+NODENAME=admin@openstack-mstr1\u001b[0m
    \u001b[37m+NODE_PORT=5672\u001b[0m
    \u001b[37m+CONFIG_FILE=/etc/rabbitmq/rabbitmq.config\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Defaults to 5672.\u001b[0m
    \u001b[37m-#NODE_PORT=5672\u001b[0m
    \u001b[37m+MNESIA_BASE=/var/lib/rabbitmq/mnesia\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[32m- change owner from 'rabbitmq' to 'root'\u001b[0m
    \u001b[32m- change group from 'rabbitmq' to 'root'\u001b[0m
\u001b[0m  * template[/etc/rabbitmq/rabbitmq.config] action create
    \u001b[32m- create new file /etc/rabbitmq/rabbitmq.config\u001b[0m
    \u001b[32m- update content in file /etc/rabbitmq/rabbitmq.config from none to 3870dc\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * template[/etc/default/rabbitmq-server] action create
    \u001b[32m- update content in file /etc/default/rabbitmq-server from 554eee to 2b28a9\u001b[0m
    \u001b[37m--- /etc/default/rabbitmq-server\t2016-01-18 14:05:55.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/default/.chef-rabbitmq-server20190423-11189-1nq75r8\t2019-04-23 15:41:54.359495537 +0000\u001b[0m
    \u001b[37m@@ -1,10 +1,12 @@\u001b[0m
    \u001b[37m+###\u001b[0m
    \u001b[37m+# Generated by Chef\u001b[0m
    \u001b[37m+###\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m # This file is sourced by /etc/init.d/rabbitmq-server. Its primary\u001b[0m
    \u001b[37m-# reason for existing is to allow adjustment of system limits for the\u001b[0m
    \u001b[37m+# reason for existing is to allow minor system and environment adjustment for the\u001b[0m
    \u001b[37m # rabbitmq-server process.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-# Maximum number of open file handles. This will need to be increased\u001b[0m
    \u001b[37m-# to handle many simultaneous connections. Refer to the system\u001b[0m
    \u001b[37m-# documentation for ulimit (in man bash) for more information.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#ulimit -n 1024\u001b[0m
    \u001b[37m+# On modern distributions system limits are managed by systemd, see rabbitmq:systemd_limits and\u001b[0m
    \u001b[37m+# https://www.rabbitmq.com/networking.html#open-file-handle-limit.\u001b[0m
    \u001b[37m+\u001b[0m
\u001b[0m  * service[rabbitmq-server] action enable (up to date)
  * service[rabbitmq-server] action start
    \u001b[32m- start service service[rabbitmq-server]\u001b[0m
\u001b[0m  * ohai[reload_packages] action reload
    \u001b[32m- re-run ohai and merge results into node attributes\u001b[0m
\u001b[0mRecipe: rabbitmq::management_ui\u001b[0m
  * rabbitmq_plugin[rabbitmq_management] action enable
    * execute[rabbitmq-plugins enable rabbitmq_management] action run
      \u001b[32m- execute rabbitmq-plugins enable rabbitmq_management\u001b[0m
\u001b[0m  
\u001b[0mRecipe: rabbitmq::default\u001b[0m
  * service[rabbitmq-server] action restart
    \u001b[32m- restart service service[rabbitmq-server]\u001b[0m
\u001b[0mRecipe: openstack-ops-messaging::rabbitmq-server\u001b[0m
  * rabbitmq_user[add openstack rabbit user] action add
    * execute[rabbitmqctl -q add_user admin] action run
      \u001b[32m- execute sensitive resource\u001b[0m
\u001b[0m  
\u001b[0m  * rabbitmq_user[change openstack rabbit user password] action change_password
    * execute[rabbitmqctl -q change_password admin] action run
      \u001b[32m- execute sensitive resource\u001b[0m
\u001b[0m  
\u001b[0m  * rabbitmq_vhost[add openstack rabbit vhost] action add (up to date)
  * rabbitmq_user[set openstack user permissions] action set_permissions
    * execute[rabbitmqctl -q set_permissions -p / admin \".*\" \".*\" \".*\"] action run
      \u001b[32m- execute rabbitmqctl -q set_permissions -p / admin \".*\" \".*\" \".*\"\u001b[0m
\u001b[0m  
\u001b[0m  * rabbitmq_user[set rabbit administrator tag] action set_tags
    * execute[rabbitmqctl -q set_user_tags admin administrator] action run
      \u001b[32m- execute rabbitmqctl -q set_user_tags admin administrator\u001b[0m
\u001b[0m  
\u001b[0mRecipe: openstack-identity::server-apache\u001b[0m
  * execute[set-selinux-permissive] action run (skipped due to only_if)
  * apt_package[identity cookbook package python-mysqldb] action upgrade (up to date)
  * apt_package[identity cookbook package python-memcache] action upgrade
    \u001b[32m- upgrade package python-memcache from uninstalled to 1.57-1\u001b[0m
\u001b[0m  * apt_package[identity cookbook package keystone] action upgrade
    \u001b[32m- upgrade package keystone from uninstalled to 2:9.3.0-0ubuntu3.2\u001b[0m
\u001b[0m  * service[keystone] action stop
    \u001b[32m- stop service service[keystone]\u001b[0m
\u001b[0m  * service[keystone] action disable
    \u001b[32m- disable service service[keystone]\u001b[0m
\u001b[0m  * directory[/etc/keystone] action create (up to date)
  * directory[/etc/keystone/domains] action create (skipped due to only_if)
  * file[/var/lib/keystone/keystone.db] action delete
    \u001b[32m- delete file /var/lib/keystone/keystone.db\u001b[0m
\u001b[0mRecipe: openstack-identity::_credential_tokens\u001b[0m
  * directory[/etc/keystone/credential-tokens] action create
    \u001b[32m- create new directory /etc/keystone/credential-tokens\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'keystone'\u001b[0m
    \u001b[32m- change group from '' to 'keystone'\u001b[0m
\u001b[0m  * file[/etc/keystone/credential-tokens/0] action create
    \u001b[32m- create new file /etc/keystone/credential-tokens/0\u001b[0m
    \u001b[32m- update content in file /etc/keystone/credential-tokens/0 from none to 2e2f33\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0400'\u001b[0m
    \u001b[32m- change owner from '' to 'keystone'\u001b[0m
    \u001b[32m- change group from '' to 'keystone'\u001b[0m
\u001b[0m  * file[/etc/keystone/credential-tokens/1] action create
    \u001b[32m- create new file /etc/keystone/credential-tokens/1\u001b[0m
    \u001b[32m- update content in file /etc/keystone/credential-tokens/1 from none to 2e2f33\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0400'\u001b[0m
    \u001b[32m- change owner from '' to 'keystone'\u001b[0m
    \u001b[32m- change group from '' to 'keystone'\u001b[0m
\u001b[0mRecipe: openstack-identity::_fernet_tokens\u001b[0m
  * directory[/etc/keystone/fernet-tokens] action create
    \u001b[32m- create new directory /etc/keystone/fernet-tokens\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'keystone'\u001b[0m
    \u001b[32m- change group from '' to 'keystone'\u001b[0m
\u001b[0m  * file[/etc/keystone/fernet-tokens/0] action create
    \u001b[32m- create new file /etc/keystone/fernet-tokens/0\u001b[0m
    \u001b[32m- update content in file /etc/keystone/fernet-tokens/0 from none to 2e2f33\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0400'\u001b[0m
    \u001b[32m- change owner from '' to 'keystone'\u001b[0m
    \u001b[32m- change group from '' to 'keystone'\u001b[0m
\u001b[0m  * file[/etc/keystone/fernet-tokens/1] action create
    \u001b[32m- create new file /etc/keystone/fernet-tokens/1\u001b[0m
    \u001b[32m- update content in file /etc/keystone/fernet-tokens/1 from none to 2e2f33\u001b[0m
    \u001b[32m- suppressed sensitive resource\u001b[0m
    \u001b[32m- change mode from '' to '0400'\u001b[0m
    \u001b[32m- change owner from '' to 'keystone'\u001b[0m
    \u001b[32m- change group from '' to 'keystone'\u001b[0m
\u001b[0mRecipe: openstack-identity::server-apache\u001b[0m
  * template[/etc/keystone/keystone-paste.ini] action create
    \u001b[32m- update content in file /etc/keystone/keystone-paste.ini from 745f66 to d5e29a\u001b[0m
    \u001b[37m--- /etc/keystone/keystone-paste.ini\t2017-02-01 14:54:39.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/keystone/.chef-keystone-paste20190423-11189-1cxb14k.ini\t2019-04-23 15:42:35.302526966 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,8 @@\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# This file is automatically generated by Chef\u001b[0m
    \u001b[37m+# Any changes will be overwritten\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m # Keystone PasteDeploy configuration file.\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [filter:debug]\u001b[0m
    \u001b[37m@@ -12,11 +17,6 @@\u001b[0m
    \u001b[37m [filter:token_auth]\u001b[0m
    \u001b[37m use = egg:keystone#token_auth\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-[filter:admin_token_auth]\u001b[0m
    \u001b[37m-# This is deprecated in the M release and will be removed in the O release.\u001b[0m
    \u001b[37m-# Use `keystone-manage bootstrap` and remove this from the pipelines below.\u001b[0m
    \u001b[37m-use = egg:keystone#admin_token_auth\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m [filter:json_body]\u001b[0m
    \u001b[37m use = egg:keystone#json_body\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -24,6 +24,12 @@\u001b[0m
    \u001b[37m use = egg:oslo.middleware#cors\u001b[0m
    \u001b[37m oslo_config_project = keystone\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+[filter:http_proxy_to_wsgi]\u001b[0m
    \u001b[37m+use = egg:oslo.middleware#http_proxy_to_wsgi\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+[filter:healthcheck]\u001b[0m
    \u001b[37m+use = egg:oslo.middleware#healthcheck\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m [filter:ec2_extension]\u001b[0m
    \u001b[37m use = egg:keystone#ec2_extension\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -39,6 +45,9 @@\u001b[0m
    \u001b[37m [filter:sizelimit]\u001b[0m
    \u001b[37m use = egg:oslo.middleware#sizelimit\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+[filter:osprofiler]\u001b[0m
    \u001b[37m+use = egg:osprofiler#osprofiler\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m [app:public_service]\u001b[0m
    \u001b[37m use = egg:keystone#public_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -49,19 +58,13 @@\u001b[0m
    \u001b[37m use = egg:keystone#admin_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [pipeline:public_api]\u001b[0m
    \u001b[37m-# The last item in this pipeline must be public_service or an equivalent\u001b[0m
    \u001b[37m-# application. It cannot be a filter.\u001b[0m
    \u001b[37m-pipeline = cors sizelimit url_normalize request_id admin_token_auth build_auth_context token_auth json_body ec2_extension public_service\u001b[0m
    \u001b[37m+pipeline = healthcheck cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension public_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [pipeline:admin_api]\u001b[0m
    \u001b[37m-# The last item in this pipeline must be admin_service or an equivalent\u001b[0m
    \u001b[37m-# application. It cannot be a filter.\u001b[0m
    \u001b[37m-pipeline = cors sizelimit url_normalize request_id admin_token_auth build_auth_context token_auth json_body ec2_extension s3_extension admin_service\u001b[0m
    \u001b[37m+pipeline = healthcheck cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension s3_extension admin_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [pipeline:api_v3]\u001b[0m
    \u001b[37m-# The last item in this pipeline must be service_v3 or an equivalent\u001b[0m
    \u001b[37m-# application. It cannot be a filter.\u001b[0m
    \u001b[37m-pipeline = cors sizelimit url_normalize request_id admin_token_auth build_auth_context token_auth json_body ec2_extension_v3 s3_extension service_v3\u001b[0m
    \u001b[37m+pipeline = healthcheck cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension_v3 s3_extension service_v3\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [app:public_version_service]\u001b[0m
    \u001b[37m use = egg:keystone#public_version_service\u001b[0m
    \u001b[37m@@ -70,10 +73,10 @@\u001b[0m
    \u001b[37m use = egg:keystone#admin_version_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [pipeline:public_version_api]\u001b[0m
    \u001b[37m-pipeline = cors sizelimit url_normalize public_version_service\u001b[0m
    \u001b[37m+pipeline = healthcheck cors sizelimit osprofiler url_normalize public_version_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [pipeline:admin_version_api]\u001b[0m
    \u001b[37m-pipeline = cors sizelimit url_normalize admin_version_service\u001b[0m
    \u001b[37m+pipeline = healthcheck cors sizelimit osprofiler url_normalize admin_version_service\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m [composite:main]\u001b[0m
    \u001b[37m use = egg:Paste#urlmap\u001b[0m
    \u001b[37m@@ -86,4 +89,6 @@\u001b[0m
    \u001b[37m /v2.0 = admin_api\u001b[0m
    \u001b[37m /v3 = api_v3\u001b[0m
    \u001b[37m / = admin_version_api\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[32m- change owner from 'root' to 'keystone'\u001b[0m
    \u001b[32m- change group from 'root' to 'keystone'\u001b[0m
\u001b[0m  * template[/etc/keystone/keystone.conf] action create
    \u001b[32m- update content in file /etc/keystone/keystone.conf from a282f9 to 0cf8b2\u001b[0m
    \u001b[37m--- /etc/keystone/keystone.conf\t2018-01-18 16:45:40.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/keystone/.chef-keystone20190423-11189-kdqdix.conf\t2019-04-23 15:42:35.310527556 +0000\u001b[0m
    \u001b[37m@@ -1,2097 +1,33 @@\u001b[0m
    \u001b[37m-[DEFAULT]\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m+# This file is automatically generated by Chef\u001b[0m
    \u001b[37m+# Any changes will be overwritten\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# A \"shared secret\" that can be used to bootstrap Keystone. This \"token\" does\u001b[0m
    \u001b[37m-# not represent a user, and carries no explicit authorization. If set to\u001b[0m
    \u001b[37m-# `None`, the value is ignored and the `admin_token` log in mechanism is\u001b[0m
    \u001b[37m-# effectively disabled. To completely disable `admin_token` in production\u001b[0m
    \u001b[37m-# (highly recommended), remove AdminTokenAuthMiddleware from your paste\u001b[0m
    \u001b[37m-# application pipelines (for example, in keystone-paste.ini). (string value)\u001b[0m
    \u001b[37m-#admin_token = <None>\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# The base public endpoint URL for Keystone that is advertised to clients\u001b[0m
    \u001b[37m-# (NOTE: this does NOT affect how Keystone listens for connections). Defaults\u001b[0m
    \u001b[37m-# to the base host URL of the request. E.g. a request to\u001b[0m
    \u001b[37m-# http://server:5000/v3/users will default to http://server:5000. You should\u001b[0m
    \u001b[37m-# only need to set this value if the base URL contains a path (e.g. /prefix/v3)\u001b[0m
    \u001b[37m-# or the endpoint should be found on a different server. (string value)\u001b[0m
    \u001b[37m-#public_endpoint = <None>\u001b[0m
    \u001b[37m+[fernet_tokens]\u001b[0m
    \u001b[37m+key_repository = /etc/keystone/fernet-tokens\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# The base admin endpoint URL for Keystone that is advertised to clients (NOTE:\u001b[0m
    \u001b[37m-# this does NOT affect how Keystone listens for connections). Defaults to the\u001b[0m
    \u001b[37m-# base host URL of the request. E.g. a request to http://server:35357/v3/users\u001b[0m
    \u001b[37m-# will default to http://server:35357. You should only need to set this value\u001b[0m
    \u001b[37m-# if the base URL contains a path (e.g. /prefix/v3) or the endpoint should be\u001b[0m
    \u001b[37m-# found on a different server. (string value)\u001b[0m
    \u001b[37m-#admin_endpoint = <None>\u001b[0m
    \u001b[37m+[credential]\u001b[0m
    \u001b[37m+key_repository = /etc/keystone/credential-tokens\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Maximum depth of the project hierarchy, excluding the project acting as a\u001b[0m
    \u001b[37m-# domain at the top of the hierarchy. WARNING: setting it to a large value may\u001b[0m
    \u001b[37m-# adversely impact  performance. (integer value)\u001b[0m
    \u001b[37m-#max_project_tree_depth = 5\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Limit the sizes of user & project ID/names. (integer value)\u001b[0m
    \u001b[37m-#max_param_size = 64\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Similar to max_param_size, but provides an exception for token values.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#max_token_size = 8192\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Similar to the member_role_name option, this represents the default role ID\u001b[0m
    \u001b[37m-# used to associate users with their default projects in the v2 API. This will\u001b[0m
    \u001b[37m-# be used as the explicit role where one is not specified by the v2 API.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#member_role_id = 9fe2ff9ee4384b1894a90878d3e92bab\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# This is the role name used in combination with the member_role_id option; see\u001b[0m
    \u001b[37m-# that option for more detail. (string value)\u001b[0m
    \u001b[37m-#member_role_name = _member_\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The value passed as the keyword \"rounds\" to passlib's encrypt method.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-# Minimum value: 1000\u001b[0m
    \u001b[37m-# Maximum value: 100000\u001b[0m
    \u001b[37m-#crypt_strength = 10000\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The maximum number of entities that will be returned in a collection, with no\u001b[0m
    \u001b[37m-# limit set by default. This global limit may be then overridden for a specific\u001b[0m
    \u001b[37m-# driver, by specifying a list_limit in the appropriate section (e.g.\u001b[0m
    \u001b[37m-# [assignment]). (integer value)\u001b[0m
    \u001b[37m-#list_limit = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Set this to false if you want to enable the ability for user, group and\u001b[0m
    \u001b[37m-# project entities to be moved between domains by updating their domain_id.\u001b[0m
    \u001b[37m-# Allowing such movement is not recommended if the scope of a domain admin is\u001b[0m
    \u001b[37m-# being restricted by use of an appropriate policy file (see\u001b[0m
    \u001b[37m-# policy.v3cloudsample as an example). This ability is deprecated and will be\u001b[0m
    \u001b[37m-# removed in a future release. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#domain_id_immutable = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set to true, strict password length checking is performed for password\u001b[0m
    \u001b[37m-# manipulation. If a password exceeds the maximum length, the operation will\u001b[0m
    \u001b[37m-# fail with an HTTP 403 Forbidden error. If set to false, passwords are\u001b[0m
    \u001b[37m-# automatically truncated to the maximum length. (boolean value)\u001b[0m
    \u001b[37m-#strict_password_check = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The HTTP header used to determine the scheme for the original request, even\u001b[0m
    \u001b[37m-# if it was removed by an SSL terminating proxy. (string value)\u001b[0m
    \u001b[37m-#secure_proxy_ssl_header = HTTP_X_FORWARDED_PROTO\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set to true the server will return information in the response that may\u001b[0m
    \u001b[37m-# allow an unauthenticated or authenticated user to get more information than\u001b[0m
    \u001b[37m-# normal, such as why authentication failed. This may be useful for debugging\u001b[0m
    \u001b[37m-# but is insecure. (boolean value)\u001b[0m
    \u001b[37m-#insecure_debug = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone.notifications\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default publisher_id for outgoing notifications (string value)\u001b[0m
    \u001b[37m-#default_publisher_id = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Define the notification format for Identity Service events. A \"basic\"\u001b[0m
    \u001b[37m-# notification has information about the resource being operated on. A \"cadf\"\u001b[0m
    \u001b[37m-# notification has the same information, as well as information about the\u001b[0m
    \u001b[37m-# initiator of the event. (string value)\u001b[0m
    \u001b[37m-# Allowed values: basic, cadf\u001b[0m
    \u001b[37m-#notification_format = basic\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Define the notification options to opt-out from. The value expected is:\u001b[0m
    \u001b[37m-# identity.<resource_type>.<operation>. This field can be set multiple times in\u001b[0m
    \u001b[37m-# order to add more notifications to opt-out from. For example:\u001b[0m
    \u001b[37m-#  notification_opt_out=identity.user.created\u001b[0m
    \u001b[37m-#  notification_opt_out=identity.authenticate.success (multi valued)\u001b[0m
    \u001b[37m-#notification_opt_out =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.log\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set to true, the logging level will be set to DEBUG instead of the default\u001b[0m
    \u001b[37m-# INFO level. (boolean value)\u001b[0m
    \u001b[37m-#debug = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set to false, the logging level will be set to WARNING instead of the\u001b[0m
    \u001b[37m-# default INFO level. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#verbose = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The name of a logging configuration file. This file is appended to any\u001b[0m
    \u001b[37m-# existing logging configuration files. For details about logging configuration\u001b[0m
    \u001b[37m-# files, see the Python logging module documentation. Note that when logging\u001b[0m
    \u001b[37m-# configuration files are used then all logging configuration is set in the\u001b[0m
    \u001b[37m-# configuration file and other logging configuration options are ignored (for\u001b[0m
    \u001b[37m-# example, logging_context_format_string). (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/log_config\u001b[0m
    \u001b[37m-#log_config_append = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Defines the format string for %%(asctime)s in log records. Default:\u001b[0m
    \u001b[37m-# %(default)s . This option is ignored if log_config_append is set. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#log_date_format = %Y-%m-%d %H:%M:%S\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# (Optional) Name of log file to send logging output to. If no default is set,\u001b[0m
    \u001b[37m-# logging will go to stderr as defined by use_stderr. This option is ignored if\u001b[0m
    \u001b[37m-# log_config_append is set. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/logfile\u001b[0m
    \u001b[37m-#log_file = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# (Optional) The base directory used for relative log_file  paths. This option\u001b[0m
    \u001b[37m-# is ignored if log_config_append is set. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/logdir\u001b[0m
    \u001b[37m-#log_dir = <None>\u001b[0m
    \u001b[37m+[DEFAULT]\u001b[0m
    \u001b[37m log_dir = /var/log/keystone\u001b[0m
    \u001b[37m+public_endpoint = http://139.178.70.138:5000/\u001b[0m
    \u001b[37m+admin_endpoint = http://139.178.70.138:5000/\u001b[0m
    \u001b[37m+transport_url = rabbit://admin:mypass@139.178.70.138:5672/\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Uses logging handler designed to watch file system. When log file is moved or\u001b[0m
    \u001b[37m-# removed this handler will open a new log file with specified path\u001b[0m
    \u001b[37m-# instantaneously. It makes sense only if log_file option is specified and\u001b[0m
    \u001b[37m-# Linux platform is used. This option is ignored if log_config_append is set.\u001b[0m
    \u001b[37m-# (boolean value)\u001b[0m
    \u001b[37m-#watch_log_file = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Use syslog for logging. Existing syslog format is DEPRECATED and will be\u001b[0m
    \u001b[37m-# changed later to honor RFC5424. This option is ignored if log_config_append\u001b[0m
    \u001b[37m-# is set. (boolean value)\u001b[0m
    \u001b[37m-#use_syslog = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Syslog facility to receive log lines. This option is ignored if\u001b[0m
    \u001b[37m-# log_config_append is set. (string value)\u001b[0m
    \u001b[37m-#syslog_log_facility = LOG_USER\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Log output to standard error. This option is ignored if log_config_append is\u001b[0m
    \u001b[37m-# set. (boolean value)\u001b[0m
    \u001b[37m-#use_stderr = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Format string to use for log messages with context. (string value)\u001b[0m
    \u001b[37m-#logging_context_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Format string to use for log messages when context is undefined. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#logging_default_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Additional data to append to log message when logging level for the message\u001b[0m
    \u001b[37m-# is DEBUG. (string value)\u001b[0m
    \u001b[37m-#logging_debug_format_suffix = %(funcName)s %(pathname)s:%(lineno)d\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Prefix each line of exception output with this format. (string value)\u001b[0m
    \u001b[37m-#logging_exception_prefix = %(asctime)s.%(msecs)03d %(process)d ERROR %(name)s %(instance)s\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Defines the format string for %(user_identity)s that is used in\u001b[0m
    \u001b[37m-# logging_context_format_string. (string value)\u001b[0m
    \u001b[37m-#logging_user_identity_format = %(user)s %(tenant)s %(domain)s %(user_domain)s %(project_domain)s\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# List of package logging levels in logger=LEVEL pairs. This option is ignored\u001b[0m
    \u001b[37m-# if log_config_append is set. (list value)\u001b[0m
    \u001b[37m-#default_log_levels = amqp=WARN,amqplib=WARN,boto=WARN,qpid=WARN,sqlalchemy=WARN,suds=INFO,oslo.messaging=INFO,iso8601=WARN,requests.packages.urllib3.connectionpool=WARN,urllib3.connectionpool=WARN,websocket=WARN,requests.packages.urllib3.util.retry=WARN,urllib3.util.retry=WARN,keystonemiddleware=WARN,routes.middleware=WARN,stevedore=WARN,taskflow=WARN,keystoneauth=WARN,oslo.cache=INFO,dogpile.core.dogpile=INFO\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enables or disables publication of error events. (boolean value)\u001b[0m
    \u001b[37m-#publish_errors = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The format for an instance that is passed with the log message. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#instance_format = \"[instance: %(uuid)s] \"\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The format for an instance UUID that is passed with the log message. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#instance_uuid_format = \"[instance: %(uuid)s] \"\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enables or disables fatal status of deprecations. (boolean value)\u001b[0m
    \u001b[37m-#fatal_deprecations = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.messaging\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Size of RPC connection pool. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rpc_conn_pool_size\u001b[0m
    \u001b[37m-#rpc_conn_pool_size = 30\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# ZeroMQ bind address. Should be a wildcard (*), an ethernet interface, or IP.\u001b[0m
    \u001b[37m-# The \"host\" option should point or resolve to this address. (string value)\u001b[0m
    \u001b[37m-#rpc_zmq_bind_address = *\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# MatchMaker driver. (string value)\u001b[0m
    \u001b[37m-# Allowed values: redis, dummy\u001b[0m
    \u001b[37m-#rpc_zmq_matchmaker = redis\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Type of concurrency used. Either \"native\" or \"eventlet\" (string value)\u001b[0m
    \u001b[37m-#rpc_zmq_concurrency = eventlet\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of ZeroMQ contexts, defaults to 1. (integer value)\u001b[0m
    \u001b[37m-#rpc_zmq_contexts = 1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of ingress messages to locally buffer per topic. Default is\u001b[0m
    \u001b[37m-# unlimited. (integer value)\u001b[0m
    \u001b[37m-#rpc_zmq_topic_backlog = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Directory for holding IPC sockets. (string value)\u001b[0m
    \u001b[37m-#rpc_zmq_ipc_dir = /var/run/openstack\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Name of this node. Must be a valid hostname, FQDN, or IP address. Must match\u001b[0m
    \u001b[37m-# \"host\" option, if running Nova. (string value)\u001b[0m
    \u001b[37m-#rpc_zmq_host = localhost\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Seconds to wait before a cast expires (TTL). The default value of -1\u001b[0m
    \u001b[37m-# specifies an infinite linger period. The value of 0 specifies no linger\u001b[0m
    \u001b[37m-# period. Pending messages shall be discarded immediately when the socket is\u001b[0m
    \u001b[37m-# closed. Only supported by impl_zmq. (integer value)\u001b[0m
    \u001b[37m-#rpc_cast_timeout = -1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The default number of seconds that poll should wait. Poll raises timeout\u001b[0m
    \u001b[37m-# exception when timeout expired. (integer value)\u001b[0m
    \u001b[37m-#rpc_poll_timeout = 1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Expiration timeout in seconds of a name service record about existing target\u001b[0m
    \u001b[37m-# ( < 0 means no timeout). (integer value)\u001b[0m
    \u001b[37m-#zmq_target_expire = 120\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Use PUB/SUB pattern for fanout methods. PUB/SUB always uses proxy. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#use_pub_sub = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Minimal port number for random ports range. (port value)\u001b[0m
    \u001b[37m-# Minimum value: 0\u001b[0m
    \u001b[37m-# Maximum value: 65535\u001b[0m
    \u001b[37m-#rpc_zmq_min_port = 49152\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximal port number for random ports range. (integer value)\u001b[0m
    \u001b[37m-# Minimum value: 1\u001b[0m
    \u001b[37m-# Maximum value: 65536\u001b[0m
    \u001b[37m-#rpc_zmq_max_port = 65536\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of retries to find free port number before fail with ZMQBindError.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#rpc_zmq_bind_port_retries = 100\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Size of executor thread pool. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rpc_thread_pool_size\u001b[0m
    \u001b[37m-#executor_thread_pool_size = 64\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Seconds to wait for a response from a call. (integer value)\u001b[0m
    \u001b[37m-#rpc_response_timeout = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# A URL representing the messaging driver to use and its full configuration. If\u001b[0m
    \u001b[37m-# not set, we fall back to the rpc_backend option and driver specific\u001b[0m
    \u001b[37m-# configuration. (string value)\u001b[0m
    \u001b[37m-#transport_url = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The messaging driver to use, defaults to rabbit. Other drivers include amqp\u001b[0m
    \u001b[37m-# and zmq. (string value)\u001b[0m
    \u001b[37m-#rpc_backend = rabbit\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The default exchange under which topics are scoped. May be overridden by an\u001b[0m
    \u001b[37m-# exchange name specified in the transport_url option. (string value)\u001b[0m
    \u001b[37m-#control_exchange = keystone\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.service.service\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable eventlet backdoor.  Acceptable values are 0, <port>, and\u001b[0m
    \u001b[37m-# <start>:<end>, where 0 results in listening on a random tcp port number;\u001b[0m
    \u001b[37m-# <port> results in listening on the specified port number (and not enabling\u001b[0m
    \u001b[37m-# backdoor if that port is in use); and <start>:<end> results in listening on\u001b[0m
    \u001b[37m-# the smallest unused port number within the specified range of port numbers.\u001b[0m
    \u001b[37m-# The chosen port is displayed in the service's log file. (string value)\u001b[0m
    \u001b[37m-#backdoor_port = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable eventlet backdoor, using the provided path as a unix socket that can\u001b[0m
    \u001b[37m-# receive connections. This option is mutually exclusive with 'backdoor_port'\u001b[0m
    \u001b[37m-# in that only one should be provided. If both are provided then the existence\u001b[0m
    \u001b[37m-# of this option overrides the usage of that option. (string value)\u001b[0m
    \u001b[37m-#backdoor_socket = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enables or disables logging values of all registered options when starting a\u001b[0m
    \u001b[37m-# service (at DEBUG level). (boolean value)\u001b[0m
    \u001b[37m-#log_options = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Specify a timeout after which a gracefully shutdown server will exit. Zero\u001b[0m
    \u001b[37m-# value means endless wait. (integer value)\u001b[0m
    \u001b[37m-#graceful_shutdown_timeout = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m [assignment]\u001b[0m
    \u001b[37m+driver = sql\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the assignment backend driver in the keystone.assignment\u001b[0m
    \u001b[37m-# namespace. Only an SQL driver is supplied. If an assignment driver is not\u001b[0m
    \u001b[37m-# specified, the identity driver will choose the assignment driver (driver\u001b[0m
    \u001b[37m-# selection based on `[identity]/driver` option is deprecated and will be\u001b[0m
    \u001b[37m-# removed in the \"O\" release). (string value)\u001b[0m
    \u001b[37m-#driver = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# A list of role names which are prohibited from being an implied role. (list\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#prohibited_implied_role = admin\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[auth]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allowed authentication methods. (list value)\u001b[0m
    \u001b[37m-#methods = external,password,token,oauth1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the password auth plugin module in the keystone.auth.password\u001b[0m
    \u001b[37m-# namespace. (string value)\u001b[0m
    \u001b[37m-#password = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the token auth plugin module in the keystone.auth.token\u001b[0m
    \u001b[37m-# namespace. (string value)\u001b[0m
    \u001b[37m-#token = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the external (REMOTE_USER) auth plugin module in the\u001b[0m
    \u001b[37m-# keystone.auth.external namespace. Supplied drivers are DefaultDomain and\u001b[0m
    \u001b[37m-# Domain. The default driver is DefaultDomain. (string value)\u001b[0m
    \u001b[37m-#external = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the oAuth1.0 auth plugin module in the keystone.auth.oauth1\u001b[0m
    \u001b[37m-# namespace. (string value)\u001b[0m
    \u001b[37m-#oauth1 = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m [cache]\u001b[0m
    \u001b[37m+enabled = true\u001b[0m
    \u001b[37m+backend = oslo_cache.memcache_pool\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.cache\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m+[policy]\u001b[0m
    \u001b[37m+driver = sql\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Prefix for building the configuration dictionary for the cache region. This\u001b[0m
    \u001b[37m-# should not need to be changed unless there is another dogpile.cache region\u001b[0m
    \u001b[37m-# with the same configuration name. (string value)\u001b[0m
    \u001b[37m-#config_prefix = cache.oslo\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default TTL, in seconds, for any cached item in the dogpile.cache region.\u001b[0m
    \u001b[37m-# This applies to any cached method that doesn't have an explicit cache\u001b[0m
    \u001b[37m-# expiration time defined for it. (integer value)\u001b[0m
    \u001b[37m-#expiration_time = 600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Dogpile.cache backend module. It is recommended that Memcache with pooling\u001b[0m
    \u001b[37m-# (oslo_cache.memcache_pool) or Redis (dogpile.cache.redis) be used in\u001b[0m
    \u001b[37m-# production deployments.  Small workloads (single process) like devstack can\u001b[0m
    \u001b[37m-# use the dogpile.cache.memory backend. (string value)\u001b[0m
    \u001b[37m-#backend = dogpile.cache.null\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Arguments supplied to the backend module. Specify this option once per\u001b[0m
    \u001b[37m-# argument to be passed to the dogpile.cache backend. Example format:\u001b[0m
    \u001b[37m-# \"<argname>:<value>\". (multi valued)\u001b[0m
    \u001b[37m-#backend_argument =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Proxy classes to import that will affect the way the dogpile.cache backend\u001b[0m
    \u001b[37m-# functions. See the dogpile.cache documentation on changing-backend-behavior.\u001b[0m
    \u001b[37m-# (list value)\u001b[0m
    \u001b[37m-#proxies =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Global toggle for caching. (boolean value)\u001b[0m
    \u001b[37m-#enabled = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Extra debugging from the cache backend (cache keys, get/set/delete/etc\u001b[0m
    \u001b[37m-# calls). This is only really useful if you need to see the specific cache-\u001b[0m
    \u001b[37m-# backend get/set/delete calls with the keys/values.  Typically this should be\u001b[0m
    \u001b[37m-# left set to false. (boolean value)\u001b[0m
    \u001b[37m-#debug_cache_backend = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Memcache servers in the format of \"host:port\". (dogpile.cache.memcache and\u001b[0m
    \u001b[37m-# oslo_cache.memcache_pool backends only). (list value)\u001b[0m
    \u001b[37m-#memcache_servers = localhost:11211\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds memcached server is considered dead before it is tried\u001b[0m
    \u001b[37m-# again. (dogpile.cache.memcache and oslo_cache.memcache_pool backends only).\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#memcache_dead_retry = 300\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Timeout in seconds for every call to a server. (dogpile.cache.memcache and\u001b[0m
    \u001b[37m-# oslo_cache.memcache_pool backends only). (integer value)\u001b[0m
    \u001b[37m-#memcache_socket_timeout = 3\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Max total number of open connections to every memcached server.\u001b[0m
    \u001b[37m-# (oslo_cache.memcache_pool backend only). (integer value)\u001b[0m
    \u001b[37m-#memcache_pool_maxsize = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds a connection to memcached is held unused in the pool before\u001b[0m
    \u001b[37m-# it is closed. (oslo_cache.memcache_pool backend only). (integer value)\u001b[0m
    \u001b[37m-#memcache_pool_unused_timeout = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds that an operation will wait to get a memcache client\u001b[0m
    \u001b[37m-# connection. (integer value)\u001b[0m
    \u001b[37m-#memcache_pool_connection_get_timeout = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[catalog]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Catalog template file name for use with the template catalog backend. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#template_file = default_catalog.templates\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the catalog backend driver in the keystone.catalog namespace.\u001b[0m
    \u001b[37m-# Supplied drivers are kvs, sql, templated, and endpoint_filter.sql (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for catalog caching. This has no effect unless global caching is\u001b[0m
    \u001b[37m-# enabled. (boolean value)\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time to cache catalog data (in seconds). This has no effect unless global and\u001b[0m
    \u001b[37m-# catalog caching are enabled. (integer value)\u001b[0m
    \u001b[37m-#cache_time = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of entities that will be returned in a catalog collection.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#list_limit = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[cors]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.middleware\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate whether this resource may be shared with the domain received in the\u001b[0m
    \u001b[37m-# requests \"origin\" header. (list value)\u001b[0m
    \u001b[37m-#allowed_origin = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate that the actual request can include user credentials (boolean value)\u001b[0m
    \u001b[37m-#allow_credentials = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate which headers are safe to expose to the API. Defaults to HTTP Simple\u001b[0m
    \u001b[37m-# Headers. (list value)\u001b[0m
    \u001b[37m-#expose_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum cache age of CORS preflight requests. (integer value)\u001b[0m
    \u001b[37m-#max_age = 3600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate which methods can be used during the actual request. (list value)\u001b[0m
    \u001b[37m-#allow_methods = GET,PUT,POST,DELETE,PATCH\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate which header field names may be used during the actual request.\u001b[0m
    \u001b[37m-# (list value)\u001b[0m
    \u001b[37m-#allow_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-Domain-Id,X-Domain-Name\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[cors.subdomain]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.middleware\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate whether this resource may be shared with the domain received in the\u001b[0m
    \u001b[37m-# requests \"origin\" header. (list value)\u001b[0m
    \u001b[37m-#allowed_origin = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate that the actual request can include user credentials (boolean value)\u001b[0m
    \u001b[37m-#allow_credentials = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate which headers are safe to expose to the API. Defaults to HTTP Simple\u001b[0m
    \u001b[37m-# Headers. (list value)\u001b[0m
    \u001b[37m-#expose_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum cache age of CORS preflight requests. (integer value)\u001b[0m
    \u001b[37m-#max_age = 3600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate which methods can be used during the actual request. (list value)\u001b[0m
    \u001b[37m-#allow_methods = GET,PUT,POST,DELETE,PATCH\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Indicate which header field names may be used during the actual request.\u001b[0m
    \u001b[37m-# (list value)\u001b[0m
    \u001b[37m-#allow_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-Domain-Id,X-Domain-Name\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[credential]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the credential backend driver in the keystone.credential\u001b[0m
    \u001b[37m-# namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[database]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.db\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The file name to use with SQLite. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sqlite_db\u001b[0m
    \u001b[37m-#sqlite_db = oslo.sqlite\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If True, SQLite uses synchronous mode. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sqlite_synchronous\u001b[0m
    \u001b[37m-#sqlite_synchronous = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The back end to use for the database. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/db_backend\u001b[0m
    \u001b[37m-#backend = sqlalchemy\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The SQLAlchemy connection string to use to connect to the database. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_connection\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_connection\u001b[0m
    \u001b[37m-# Deprecated group/name - [sql]/connection\u001b[0m
    \u001b[37m-#connection = <None>\u001b[0m
    \u001b[37m-connection = sqlite:////var/lib/keystone/keystone.db\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The SQLAlchemy connection string to use to connect to the slave database.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#slave_connection = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The SQL mode to be used for MySQL sessions. This option, including the\u001b[0m
    \u001b[37m-# default, overrides any server-set SQL mode. To use whatever SQL mode is set\u001b[0m
    \u001b[37m-# by the server configuration, set this to no value. Example: mysql_sql_mode=\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#mysql_sql_mode = TRADITIONAL\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Timeout before idle SQL connections are reaped. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_idle_timeout\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_idle_timeout\u001b[0m
    \u001b[37m-# Deprecated group/name - [sql]/idle_timeout\u001b[0m
    \u001b[37m-#idle_timeout = 3600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Minimum number of SQL connections to keep open in a pool. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_min_pool_size\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_min_pool_size\u001b[0m
    \u001b[37m-#min_pool_size = 1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of SQL connections to keep open in a pool. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_max_pool_size\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_max_pool_size\u001b[0m
    \u001b[37m-#max_pool_size = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of database connection retries during startup. Set to -1 to\u001b[0m
    \u001b[37m-# specify an infinite retry count. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_max_retries\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_max_retries\u001b[0m
    \u001b[37m-#max_retries = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Interval between retries of opening a SQL connection. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_retry_interval\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/reconnect_interval\u001b[0m
    \u001b[37m-#retry_interval = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set, use this value for max_overflow with SQLAlchemy. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_max_overflow\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sqlalchemy_max_overflow\u001b[0m
    \u001b[37m-#max_overflow = 50\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Verbosity of SQL debugging information: 0=None, 100=Everything. (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_connection_debug\u001b[0m
    \u001b[37m-#connection_debug = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Add Python stack traces to SQL as comment strings. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_connection_trace\u001b[0m
    \u001b[37m-#connection_trace = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set, use this value for pool_timeout with SQLAlchemy. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DATABASE]/sqlalchemy_pool_timeout\u001b[0m
    \u001b[37m-#pool_timeout = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable the experimental use of database reconnect on connection lost.\u001b[0m
    \u001b[37m-# (boolean value)\u001b[0m
    \u001b[37m-#use_db_reconnect = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Seconds between retries of a database transaction. (integer value)\u001b[0m
    \u001b[37m-#db_retry_interval = 1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If True, increases the interval between retries of a database operation up to\u001b[0m
    \u001b[37m-# db_max_retry_interval. (boolean value)\u001b[0m
    \u001b[37m-#db_inc_retry_interval = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If db_inc_retry_interval is set, the maximum seconds between retries of a\u001b[0m
    \u001b[37m-# database operation. (integer value)\u001b[0m
    \u001b[37m-#db_max_retry_interval = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum retries in case of connection error or deadlock error before error is\u001b[0m
    \u001b[37m-# raised. Set to -1 to specify an infinite retry count. (integer value)\u001b[0m
    \u001b[37m-#db_max_retries = 20\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[domain_config]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the domain config backend driver in the\u001b[0m
    \u001b[37m-# keystone.resource.domain_config namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for domain config caching. This has no effect unless global caching is\u001b[0m
    \u001b[37m-# enabled. (boolean value)\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# TTL (in seconds) to cache domain config data. This has no effect unless\u001b[0m
    \u001b[37m-# domain config caching is enabled. (integer value)\u001b[0m
    \u001b[37m-#cache_time = 300\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[endpoint_filter]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the endpoint filter backend driver in the\u001b[0m
    \u001b[37m-# keystone.endpoint_filter namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle to return all active endpoints if no filter exists. (boolean value)\u001b[0m
    \u001b[37m-#return_all_endpoints_if_no_filter = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[endpoint_policy]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable endpoint_policy functionality. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: The option to enable the OS-ENDPOINT-POLICY extension has been\u001b[0m
    \u001b[37m-# deprecated in the M release and will be removed in the O release. The OS-\u001b[0m
    \u001b[37m-# ENDPOINT-POLICY extension will be enabled by default.\u001b[0m
    \u001b[37m-#enabled = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the endpoint policy backend driver in the\u001b[0m
    \u001b[37m-# keystone.endpoint_policy namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[eventlet_server]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The number of worker processes to serve the public eventlet application.\u001b[0m
    \u001b[37m-# Defaults to number of CPUs (minimum of 2). (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/public_workers\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#public_workers = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The number of worker processes to serve the admin eventlet application.\u001b[0m
    \u001b[37m-# Defaults to number of CPUs (minimum of 2). (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/admin_workers\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#admin_workers = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The IP address of the network interface for the public service to listen on.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/bind_host\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/public_bind_host\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#public_bind_host = 0.0.0.0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The port number which the public service listens on. (port value)\u001b[0m
    \u001b[37m-# Minimum value: 0\u001b[0m
    \u001b[37m-# Maximum value: 65535\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/public_port\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#public_port = 5000\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The IP address of the network interface for the admin service to listen on.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/bind_host\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/admin_bind_host\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#admin_bind_host = 0.0.0.0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The port number which the admin service listens on. (port value)\u001b[0m
    \u001b[37m-# Minimum value: 0\u001b[0m
    \u001b[37m-# Maximum value: 65535\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/admin_port\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#admin_port = 35357\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If set to false, disables keepalives on the server; all connections will be\u001b[0m
    \u001b[37m-# closed after serving one request. (boolean value)\u001b[0m
    \u001b[37m-#wsgi_keep_alive = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Timeout for socket operations on a client connection. If an incoming\u001b[0m
    \u001b[37m-# connection is idle for this number of seconds it will be closed. A value of\u001b[0m
    \u001b[37m-# \"0\" means wait forever. (integer value)\u001b[0m
    \u001b[37m-#client_socket_timeout = 900\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Set this to true if you want to enable TCP_KEEPALIVE on server sockets, i.e.\u001b[0m
    \u001b[37m-# sockets used by the Keystone wsgi server for client connections. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/tcp_keepalive\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#tcp_keepalive = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Sets the value of TCP_KEEPIDLE in seconds for each server socket. Only\u001b[0m
    \u001b[37m-# applies if tcp_keepalive is true. Ignored if system does not support it.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/tcp_keepidle\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#tcp_keepidle = 600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[eventlet_server_ssl]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for SSL support on the Keystone eventlet servers. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [ssl]/enable\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#enable = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the certfile for SSL. For non-production environments, you may be\u001b[0m
    \u001b[37m-# interested in using `keystone-manage ssl_setup` to generate self-signed\u001b[0m
    \u001b[37m-# certificates. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [ssl]/certfile\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#certfile = /etc/keystone/ssl/certs/keystone.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the keyfile for SSL. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [ssl]/keyfile\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#keyfile = /etc/keystone/ssl/private/keystonekey.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the CA cert file for SSL. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [ssl]/ca_certs\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#ca_certs = /etc/keystone/ssl/certs/ca.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Require client certificate. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [ssl]/cert_required\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#cert_required = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[federation]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the federation backend driver in the keystone.federation\u001b[0m
    \u001b[37m-# namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Value to be used when filtering assertion parameters from the environment.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#assertion_prefix =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Value to be used to obtain the entity ID of the Identity Provider from the\u001b[0m
    \u001b[37m-# environment (e.g. if using the mod_shib plugin this value is `Shib-Identity-\u001b[0m
    \u001b[37m-# Provider`). (string value)\u001b[0m
    \u001b[37m-#remote_id_attribute = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# A domain name that is reserved to allow federated ephemeral users to have a\u001b[0m
    \u001b[37m-# domain concept. Note that an admin will not be able to create a domain with\u001b[0m
    \u001b[37m-# this name or update an existing domain to this name. You are not advised to\u001b[0m
    \u001b[37m-# change this value unless you really have to. (string value)\u001b[0m
    \u001b[37m-#federated_domain_name = Federated\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# A list of trusted dashboard hosts. Before accepting a Single Sign-On request\u001b[0m
    \u001b[37m-# to return a token, the origin host must be a member of the trusted_dashboard\u001b[0m
    \u001b[37m-# list. This configuration option may be repeated for multiple values. For\u001b[0m
    \u001b[37m-# example: trusted_dashboard=http://acme.com/auth/websso\u001b[0m
    \u001b[37m-# trusted_dashboard=http://beta.com/auth/websso (multi valued)\u001b[0m
    \u001b[37m-#trusted_dashboard =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Location of Single Sign-On callback handler, will return a token to a trusted\u001b[0m
    \u001b[37m-# dashboard host. (string value)\u001b[0m
    \u001b[37m-#sso_callback_template = /etc/keystone/sso_callback_template.html\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[fernet_tokens]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Directory containing Fernet token keys. (string value)\u001b[0m
    \u001b[37m-#key_repository = /etc/keystone/fernet-keys/\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# This controls how many keys are held in rotation by keystone-manage\u001b[0m
    \u001b[37m-# fernet_rotate before they are discarded. The default value of 3 means that\u001b[0m
    \u001b[37m-# keystone will maintain one staged key, one primary key, and one secondary\u001b[0m
    \u001b[37m-# key. Increasing this value means that additional secondary keys will be kept\u001b[0m
    \u001b[37m-# in the rotation. (integer value)\u001b[0m
    \u001b[37m-#max_active_keys = 3\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[identity]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# This references the domain to use for all Identity API v2 requests (which are\u001b[0m
    \u001b[37m-# not aware of domains). A domain with this ID will be created for you by\u001b[0m
    \u001b[37m-# keystone-manage db_sync in migration 008. The domain referenced by this ID\u001b[0m
    \u001b[37m-# cannot be deleted on the v3 API, to prevent accidentally breaking the v2 API.\u001b[0m
    \u001b[37m-# There is nothing special about this domain, other than the fact that it must\u001b[0m
    \u001b[37m-# exist to order to maintain support for your v2 clients. (string value)\u001b[0m
    \u001b[37m-#default_domain_id = default\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# A subset (or all) of domains can have their own identity driver, each with\u001b[0m
    \u001b[37m-# their own partial configuration options, stored in either the resource\u001b[0m
    \u001b[37m-# backend or in a file in a domain configuration directory (depending on the\u001b[0m
    \u001b[37m-# setting of domain_configurations_from_database). Only values specific to the\u001b[0m
    \u001b[37m-# domain need to be specified in this manner. This feature is disabled by\u001b[0m
    \u001b[37m-# default; set to true to enable. (boolean value)\u001b[0m
    \u001b[37m-#domain_specific_drivers_enabled = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Extract the domain specific configuration options from the resource backend\u001b[0m
    \u001b[37m-# where they have been stored with the domain data. This feature is disabled by\u001b[0m
    \u001b[37m-# default (in which case the domain specific options will be loaded from files\u001b[0m
    \u001b[37m-# in the domain configuration directory); set to true to enable. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#domain_configurations_from_database = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path for Keystone to locate the domain specific identity configuration files\u001b[0m
    \u001b[37m-# if domain_specific_drivers_enabled is set to true. (string value)\u001b[0m
    \u001b[37m-#domain_config_dir = /etc/keystone/domains\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the identity backend driver in the keystone.identity\u001b[0m
    \u001b[37m-# namespace. Supplied drivers are ldap and sql. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for identity caching. This has no effect unless global caching is\u001b[0m
    \u001b[37m-# enabled. (boolean value)\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time to cache identity data (in seconds). This has no effect unless global\u001b[0m
    \u001b[37m-# and identity caching are enabled. (integer value)\u001b[0m
    \u001b[37m-#cache_time = 600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum supported length for user passwords; decrease to improve performance.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-# Maximum value: 4096\u001b[0m
    \u001b[37m-#max_password_length = 4096\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of entities that will be returned in an identity collection.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#list_limit = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[identity_mapping]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the identity mapping backend driver in the\u001b[0m
    \u001b[37m-# keystone.identity.id_mapping namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the public ID generator for user and group entities in the\u001b[0m
    \u001b[37m-# keystone.identity.id_generator namespace. The Keystone identity mapper only\u001b[0m
    \u001b[37m-# supports generators that produce no more than 64 characters. (string value)\u001b[0m
    \u001b[37m-#generator = sha256\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The format of user and group IDs changed in Juno for backends that do not\u001b[0m
    \u001b[37m-# generate UUIDs (e.g. LDAP), with keystone providing a hash mapping to the\u001b[0m
    \u001b[37m-# underlying attribute in LDAP. By default this mapping is disabled, which\u001b[0m
    \u001b[37m-# ensures that existing IDs will not change. Even when the mapping is enabled\u001b[0m
    \u001b[37m-# by using domain specific drivers, any users and groups from the default\u001b[0m
    \u001b[37m-# domain being handled by LDAP will still not be mapped to ensure their IDs\u001b[0m
    \u001b[37m-# remain backward compatible. Setting this value to False will enable the\u001b[0m
    \u001b[37m-# mapping for even the default LDAP driver. It is only safe to do this if you\u001b[0m
    \u001b[37m-# do not already have assignments for users and groups from the default LDAP\u001b[0m
    \u001b[37m-# domain, and it is acceptable for Keystone to provide the different IDs to\u001b[0m
    \u001b[37m-# clients than it did previously. Typically this means that the only time you\u001b[0m
    \u001b[37m-# can set this value to False is when configuring a fresh installation.\u001b[0m
    \u001b[37m-# (boolean value)\u001b[0m
    \u001b[37m-#backward_compatible_ids = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[kvs]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Extra dogpile.cache backend modules to register with the dogpile.cache\u001b[0m
    \u001b[37m-# library. (list value)\u001b[0m
    \u001b[37m-#backends =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Prefix for building the configuration dictionary for the KVS region. This\u001b[0m
    \u001b[37m-# should not need to be changed unless there is another dogpile.cache region\u001b[0m
    \u001b[37m-# with the same configuration name. (string value)\u001b[0m
    \u001b[37m-#config_prefix = keystone.kvs\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle to disable using a key-mangling function to ensure fixed length keys.\u001b[0m
    \u001b[37m-# This is toggle-able for debugging purposes, it is highly recommended to\u001b[0m
    \u001b[37m-# always leave this set to true. (boolean value)\u001b[0m
    \u001b[37m-#enable_key_mangler = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default lock timeout (in seconds) for distributed locking. (integer value)\u001b[0m
    \u001b[37m-#default_lock_timeout = 5\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[ldap]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# URL(s) for connecting to the LDAP server. Multiple LDAP URLs may be specified\u001b[0m
    \u001b[37m-# as a comma separated string. The first URL to successfully bind is used for\u001b[0m
    \u001b[37m-# the connection. (string value)\u001b[0m
    \u001b[37m-#url = ldap://localhost\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# User BindDN to query the LDAP server. (string value)\u001b[0m
    \u001b[37m-#user = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Password for the BindDN to query the LDAP server. (string value)\u001b[0m
    \u001b[37m-#password = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP server suffix (string value)\u001b[0m
    \u001b[37m-#suffix = cn=example,cn=com\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If true, will add a dummy member to groups. This is required if the\u001b[0m
    \u001b[37m-# objectclass for groups requires the \"member\" attribute. (boolean value)\u001b[0m
    \u001b[37m-#use_dumb_member = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# DN of the \"dummy member\" to use when \"use_dumb_member\" is enabled. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#dumb_member = cn=dumb,dc=nonexistent\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Delete subtrees using the subtree delete control. Only enable this option if\u001b[0m
    \u001b[37m-# your LDAP server supports subtree deletion. (boolean value)\u001b[0m
    \u001b[37m-#allow_subtree_delete = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The LDAP scope for queries, \"one\" represents oneLevel/singleLevel and \"sub\"\u001b[0m
    \u001b[37m-# represents subtree/wholeSubtree options. (string value)\u001b[0m
    \u001b[37m-# Allowed values: one, sub\u001b[0m
    \u001b[37m-#query_scope = one\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum results per page; a value of zero (\"0\") disables paging. (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#page_size = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The LDAP dereferencing option for queries. The \"default\" option falls back to\u001b[0m
    \u001b[37m-# using default dereferencing configured by your ldap.conf. (string value)\u001b[0m
    \u001b[37m-# Allowed values: never, searching, always, finding, default\u001b[0m
    \u001b[37m-#alias_dereferencing = default\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Sets the LDAP debugging level for LDAP calls. A value of 0 means that\u001b[0m
    \u001b[37m-# debugging is not enabled. This value is a bitmask, consult your LDAP\u001b[0m
    \u001b[37m-# documentation for possible values. (integer value)\u001b[0m
    \u001b[37m-#debug_level = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Override the system's default referral chasing behavior for queries. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#chase_referrals = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Search base for users. Defaults to the suffix value. (string value)\u001b[0m
    \u001b[37m-#user_tree_dn = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP search filter for users. (string value)\u001b[0m
    \u001b[37m-#user_filter = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP objectclass for users. (string value)\u001b[0m
    \u001b[37m-#user_objectclass = inetOrgPerson\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to user id. WARNING: must not be a multivalued\u001b[0m
    \u001b[37m-# attribute. (string value)\u001b[0m
    \u001b[37m-#user_id_attribute = cn\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to user name. (string value)\u001b[0m
    \u001b[37m-#user_name_attribute = sn\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to user description. (string value)\u001b[0m
    \u001b[37m-#user_description_attribute = description\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to user email. (string value)\u001b[0m
    \u001b[37m-#user_mail_attribute = mail\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to password. (string value)\u001b[0m
    \u001b[37m-#user_pass_attribute = userPassword\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to user enabled flag. (string value)\u001b[0m
    \u001b[37m-#user_enabled_attribute = enabled\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Invert the meaning of the boolean enabled values. Some LDAP servers use a\u001b[0m
    \u001b[37m-# boolean lock attribute where \"true\" means an account is disabled. Setting\u001b[0m
    \u001b[37m-# \"user_enabled_invert = true\" will allow these lock attributes to be used.\u001b[0m
    \u001b[37m-# This setting will have no effect if \"user_enabled_mask\" or\u001b[0m
    \u001b[37m-# \"user_enabled_emulation\" settings are in use. (boolean value)\u001b[0m
    \u001b[37m-#user_enabled_invert = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Bitmask integer to indicate the bit that the enabled value is stored in if\u001b[0m
    \u001b[37m-# the LDAP server represents \"enabled\" as a bit on an integer rather than a\u001b[0m
    \u001b[37m-# boolean. A value of \"0\" indicates the mask is not used. If this is not set to\u001b[0m
    \u001b[37m-# \"0\" the typical value is \"2\". This is typically used when\u001b[0m
    \u001b[37m-# \"user_enabled_attribute = userAccountControl\". (integer value)\u001b[0m
    \u001b[37m-#user_enabled_mask = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default value to enable users. This should match an appropriate int value if\u001b[0m
    \u001b[37m-# the LDAP server uses non-boolean (bitmask) values to indicate if a user is\u001b[0m
    \u001b[37m-# enabled or disabled. If this is not set to \"True\" the typical value is \"512\".\u001b[0m
    \u001b[37m-# This is typically used when \"user_enabled_attribute = userAccountControl\".\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#user_enabled_default = True\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# List of attributes stripped off the user on update. (list value)\u001b[0m
    \u001b[37m-#user_attribute_ignore = default_project_id\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to default_project_id for users. (string value)\u001b[0m
    \u001b[37m-#user_default_project_id_attribute = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow user creation in LDAP backend. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m
    \u001b[37m-# release and will be removed in the O release.\u001b[0m
    \u001b[37m-#user_allow_create = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow user updates in LDAP backend. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m
    \u001b[37m-# release and will be removed in the O release.\u001b[0m
    \u001b[37m-#user_allow_update = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow user deletion in LDAP backend. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m
    \u001b[37m-# release and will be removed in the O release.\u001b[0m
    \u001b[37m-#user_allow_delete = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If true, Keystone uses an alternative method to determine if a user is\u001b[0m
    \u001b[37m-# enabled or not by checking if they are a member of the\u001b[0m
    \u001b[37m-# \"user_enabled_emulation_dn\" group. (boolean value)\u001b[0m
    \u001b[37m-#user_enabled_emulation = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# DN of the group entry to hold enabled users when using enabled emulation.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#user_enabled_emulation_dn = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Use the \"group_member_attribute\" and \"group_objectclass\" settings to\u001b[0m
    \u001b[37m-# determine membership in the emulated enabled group. (boolean value)\u001b[0m
    \u001b[37m-#user_enabled_emulation_use_group_config = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# List of additional LDAP attributes used for mapping additional attribute\u001b[0m
    \u001b[37m-# mappings for users. Attribute mapping format is <ldap_attr>:<user_attr>,\u001b[0m
    \u001b[37m-# where ldap_attr is the attribute in the LDAP entry and user_attr is the\u001b[0m
    \u001b[37m-# Identity API attribute. (list value)\u001b[0m
    \u001b[37m-#user_additional_attribute_mapping =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Search base for groups. Defaults to the suffix value. (string value)\u001b[0m
    \u001b[37m-#group_tree_dn = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP search filter for groups. (string value)\u001b[0m
    \u001b[37m-#group_filter = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP objectclass for groups. (string value)\u001b[0m
    \u001b[37m-#group_objectclass = groupOfNames\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to group id. (string value)\u001b[0m
    \u001b[37m-#group_id_attribute = cn\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to group name. (string value)\u001b[0m
    \u001b[37m-#group_name_attribute = ou\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to show group membership. (string value)\u001b[0m
    \u001b[37m-#group_member_attribute = member\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# LDAP attribute mapped to group description. (string value)\u001b[0m
    \u001b[37m-#group_desc_attribute = description\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# List of attributes stripped off the group on update. (list value)\u001b[0m
    \u001b[37m-#group_attribute_ignore =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow group creation in LDAP backend. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m
    \u001b[37m-# release and will be removed in the O release.\u001b[0m
    \u001b[37m-#group_allow_create = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow group update in LDAP backend. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m
    \u001b[37m-# release and will be removed in the O release.\u001b[0m
    \u001b[37m-#group_allow_update = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow group deletion in LDAP backend. (boolean value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m
    \u001b[37m-# release and will be removed in the O release.\u001b[0m
    \u001b[37m-#group_allow_delete = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Additional attribute mappings for groups. Attribute mapping format is\u001b[0m
    \u001b[37m-# <ldap_attr>:<user_attr>, where ldap_attr is the attribute in the LDAP entry\u001b[0m
    \u001b[37m-# and user_attr is the Identity API attribute. (list value)\u001b[0m
    \u001b[37m-#group_additional_attribute_mapping =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# CA certificate file path for communicating with LDAP servers. (string value)\u001b[0m
    \u001b[37m-#tls_cacertfile = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# CA certificate directory path for communicating with LDAP servers. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#tls_cacertdir = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable TLS for communicating with LDAP servers. (boolean value)\u001b[0m
    \u001b[37m-#use_tls = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Specifies what checks to perform on client certificates in an incoming TLS\u001b[0m
    \u001b[37m-# session. (string value)\u001b[0m
    \u001b[37m-# Allowed values: demand, never, allow\u001b[0m
    \u001b[37m-#tls_req_cert = demand\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable LDAP connection pooling. (boolean value)\u001b[0m
    \u001b[37m-#use_pool = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Connection pool size. (integer value)\u001b[0m
    \u001b[37m-#pool_size = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum count of reconnect trials. (integer value)\u001b[0m
    \u001b[37m-#pool_retry_max = 3\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time span in seconds to wait between two reconnect trials. (floating point\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#pool_retry_delay = 0.1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Connector timeout in seconds. Value -1 indicates indefinite wait for\u001b[0m
    \u001b[37m-# response. (integer value)\u001b[0m
    \u001b[37m-#pool_connection_timeout = -1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Connection lifetime in seconds. (integer value)\u001b[0m
    \u001b[37m-#pool_connection_lifetime = 600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable LDAP connection pooling for end user authentication. If use_pool is\u001b[0m
    \u001b[37m-# disabled, then this setting is meaningless and is not used at all. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#use_auth_pool = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# End user auth connection pool size. (integer value)\u001b[0m
    \u001b[37m-#auth_pool_size = 100\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# End user auth connection lifetime in seconds. (integer value)\u001b[0m
    \u001b[37m-#auth_pool_connection_lifetime = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# If the members of the group objectclass are user IDs rather than DNs, set\u001b[0m
    \u001b[37m-# this to true. This is the case when using posixGroup as the group objectclass\u001b[0m
    \u001b[37m-# and OpenDirectory. (boolean value)\u001b[0m
    \u001b[37m-#group_members_are_ids = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[matchmaker_redis]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.messaging\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Host to locate redis. (string value)\u001b[0m
    \u001b[37m-#host = 127.0.0.1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Use this port to connect to redis host. (port value)\u001b[0m
    \u001b[37m-# Minimum value: 0\u001b[0m
    \u001b[37m-# Maximum value: 65535\u001b[0m
    \u001b[37m-#port = 6379\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Password for Redis server (optional). (string value)\u001b[0m
    \u001b[37m-#password =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# List of Redis Sentinel hosts (fault tolerance mode) e.g.\u001b[0m
    \u001b[37m-# [host:port, host1:port ... ] (list value)\u001b[0m
    \u001b[37m-#sentinel_hosts =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Redis replica set name. (string value)\u001b[0m
    \u001b[37m-#sentinel_group_name = oslo-messaging-zeromq\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time in ms to wait between connection attempts. (integer value)\u001b[0m
    \u001b[37m-#wait_timeout = 500\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time in ms to wait before the transaction is killed. (integer value)\u001b[0m
    \u001b[37m-#check_timeout = 20000\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Timeout in ms on blocking socket operations (integer value)\u001b[0m
    \u001b[37m-#socket_timeout = 1000\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m [memcache]\u001b[0m
    \u001b[37m+servers = \u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Memcache servers in the format of \"host:port\". (list value)\u001b[0m
    \u001b[37m-#servers = localhost:11211\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds memcached server is considered dead before it is tried\u001b[0m
    \u001b[37m-# again. This is used by the key value store system (e.g. token pooled\u001b[0m
    \u001b[37m-# memcached persistence backend). (integer value)\u001b[0m
    \u001b[37m-#dead_retry = 300\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Timeout in seconds for every call to a server. This is used by the key value\u001b[0m
    \u001b[37m-# store system (e.g. token pooled memcached persistence backend). (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#socket_timeout = 3\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Max total number of open connections to every memcached server. This is used\u001b[0m
    \u001b[37m-# by the key value store system (e.g. token pooled memcached persistence\u001b[0m
    \u001b[37m-# backend). (integer value)\u001b[0m
    \u001b[37m-#pool_maxsize = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds a connection to memcached is held unused in the pool before\u001b[0m
    \u001b[37m-# it is closed. This is used by the key value store system (e.g. token pooled\u001b[0m
    \u001b[37m-# memcached persistence backend). (integer value)\u001b[0m
    \u001b[37m-#pool_unused_timeout = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds that an operation will wait to get a memcache client\u001b[0m
    \u001b[37m-# connection. This is used by the key value store system (e.g. token pooled\u001b[0m
    \u001b[37m-# memcached persistence backend). (integer value)\u001b[0m
    \u001b[37m-#pool_connection_get_timeout = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[oauth1]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the OAuth backend driver in the keystone.oauth1 namespace.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Duration (in seconds) for the OAuth Request Token. (integer value)\u001b[0m
    \u001b[37m-#request_token_duration = 28800\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Duration (in seconds) for the OAuth Access Token. (integer value)\u001b[0m
    \u001b[37m-#access_token_duration = 86400\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[os_inherit]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# role-assignment inheritance to projects from owning domain or from projects\u001b[0m
    \u001b[37m-# higher in the hierarchy can be optionally disabled. In the future, this\u001b[0m
    \u001b[37m-# option will be removed and the hierarchy will be always enabled. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: The option to enable the OS-INHERIT extension has been deprecated in\u001b[0m
    \u001b[37m-# the M release and will be removed in the O release. The OS-INHERIT extension\u001b[0m
    \u001b[37m-# will be enabled by default.\u001b[0m
    \u001b[37m-#enabled = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[oslo_messaging_amqp]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.messaging\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# address prefix used when sending to a specific server (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/server_request_prefix\u001b[0m
    \u001b[37m-#server_request_prefix = exclusive\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# address prefix used when broadcasting to all servers (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/broadcast_prefix\u001b[0m
    \u001b[37m-#broadcast_prefix = broadcast\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# address prefix when sending to any server in group (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/group_request_prefix\u001b[0m
    \u001b[37m-#group_request_prefix = unicast\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Name for the AMQP container (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/container_name\u001b[0m
    \u001b[37m-#container_name = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Timeout for inactive connections (in seconds) (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/idle_timeout\u001b[0m
    \u001b[37m-#idle_timeout = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Debug: dump AMQP frames to stdout (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/trace\u001b[0m
    \u001b[37m-#trace = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# CA certificate PEM file to verify server certificate (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_ca_file\u001b[0m
    \u001b[37m-#ssl_ca_file =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Identifying certificate PEM file to present to clients (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_cert_file\u001b[0m
    \u001b[37m-#ssl_cert_file =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Private key PEM file used to sign cert_file certificate (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_key_file\u001b[0m
    \u001b[37m-#ssl_key_file =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Password for decrypting ssl_key_file (if encrypted) (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_key_password\u001b[0m
    \u001b[37m-#ssl_key_password = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Accept clients using either SSL or plain TCP (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/allow_insecure_clients\u001b[0m
    \u001b[37m-#allow_insecure_clients = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Space separated list of acceptable SASL mechanisms (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/sasl_mechanisms\u001b[0m
    \u001b[37m-#sasl_mechanisms =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path to directory that contains the SASL configuration (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/sasl_config_dir\u001b[0m
    \u001b[37m-#sasl_config_dir =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Name of configuration file (without .conf suffix) (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/sasl_config_name\u001b[0m
    \u001b[37m-#sasl_config_name =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# User name for message broker authentication (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/username\u001b[0m
    \u001b[37m-#username =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Password for message broker authentication (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [amqp1]/password\u001b[0m
    \u001b[37m-#password =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[oslo_messaging_notifications]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.messaging\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The Drivers(s) to handle sending notifications. Possible values are\u001b[0m
    \u001b[37m-# messaging, messagingv2, routing, log, test, noop (multi valued)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/notification_driver\u001b[0m
    \u001b[37m-#driver =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# A URL representing the messaging driver to use for notifications. If not set,\u001b[0m
    \u001b[37m-# we fall back to the same configuration used for RPC. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/notification_transport_url\u001b[0m
    \u001b[37m-#transport_url = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# AMQP topic used for OpenStack notifications. (list value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [rpc_notifier2]/topics\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/notification_topics\u001b[0m
    \u001b[37m-#topics = notifications\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[oslo_messaging_rabbit]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.messaging\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Use durable queues in AMQP. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/amqp_durable_queues\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_durable_queues\u001b[0m
    \u001b[37m-#amqp_durable_queues = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Auto-delete queues in AMQP. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/amqp_auto_delete\u001b[0m
    \u001b[37m-#amqp_auto_delete = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# SSL version to use (valid only if SSL enabled). Valid values are TLSv1 and\u001b[0m
    \u001b[37m-# SSLv23. SSLv2, SSLv3, TLSv1_1, and TLSv1_2 may be available on some\u001b[0m
    \u001b[37m-# distributions. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_version\u001b[0m
    \u001b[37m-#kombu_ssl_version =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# SSL key file (valid only if SSL enabled). (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_keyfile\u001b[0m
    \u001b[37m-#kombu_ssl_keyfile =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# SSL cert file (valid only if SSL enabled). (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_certfile\u001b[0m
    \u001b[37m-#kombu_ssl_certfile =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# SSL certification authority file (valid only if SSL enabled). (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_ca_certs\u001b[0m
    \u001b[37m-#kombu_ssl_ca_certs =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# How long to wait before reconnecting in response to an AMQP consumer cancel\u001b[0m
    \u001b[37m-# notification. (floating point value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_reconnect_delay\u001b[0m
    \u001b[37m-#kombu_reconnect_delay = 1.0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# EXPERIMENTAL: Possible values are: gzip, bz2. If not set compression will not\u001b[0m
    \u001b[37m-# be used. This option may notbe available in future versions. (string value)\u001b[0m
    \u001b[37m-#kombu_compression = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# How long to wait a missing client beforce abandoning to send it its replies.\u001b[0m
    \u001b[37m-# This value should not be longer than rpc_response_timeout. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_reconnect_timeout\u001b[0m
    \u001b[37m-#kombu_missing_consumer_retry_timeout = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Determines how the next RabbitMQ node is chosen in case the one we are\u001b[0m
    \u001b[37m-# currently connected to becomes unavailable. Takes effect only if more than\u001b[0m
    \u001b[37m-# one RabbitMQ node is provided in config. (string value)\u001b[0m
    \u001b[37m-# Allowed values: round-robin, shuffle\u001b[0m
    \u001b[37m-#kombu_failover_strategy = round-robin\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The RabbitMQ broker address where a single node is used. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_host\u001b[0m
    \u001b[37m-#rabbit_host = localhost\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The RabbitMQ broker port where a single node is used. (port value)\u001b[0m
    \u001b[37m-# Minimum value: 0\u001b[0m
    \u001b[37m-# Maximum value: 65535\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_port\u001b[0m
    \u001b[37m-#rabbit_port = 5672\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# RabbitMQ HA cluster host:port pairs. (list value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_hosts\u001b[0m
    \u001b[37m-#rabbit_hosts = $rabbit_host:$rabbit_port\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Connect over SSL for RabbitMQ. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_use_ssl\u001b[0m
    \u001b[37m-#rabbit_use_ssl = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The RabbitMQ userid. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_userid\u001b[0m
    \u001b[37m-#rabbit_userid = guest\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The RabbitMQ password. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_password\u001b[0m
    \u001b[37m-#rabbit_password = guest\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The RabbitMQ login method. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_login_method\u001b[0m
    \u001b[37m-#rabbit_login_method = AMQPLAIN\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The RabbitMQ virtual host. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_virtual_host\u001b[0m
    \u001b[37m-#rabbit_virtual_host = /\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# How frequently to retry connecting with RabbitMQ. (integer value)\u001b[0m
    \u001b[37m-#rabbit_retry_interval = 1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# How long to backoff for between retries when connecting to RabbitMQ. (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_retry_backoff\u001b[0m
    \u001b[37m-#rabbit_retry_backoff = 2\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum interval of RabbitMQ connection retries. Default is 30 seconds.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#rabbit_interval_max = 30\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of RabbitMQ connection retries. Default is 0 (infinite retry\u001b[0m
    \u001b[37m-# count). (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_max_retries\u001b[0m
    \u001b[37m-#rabbit_max_retries = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Try to use HA queues in RabbitMQ (x-ha-policy: all). If you change this\u001b[0m
    \u001b[37m-# option, you must wipe the RabbitMQ database. In RabbitMQ 3.0, queue mirroring\u001b[0m
    \u001b[37m-# is no longer controlled by the x-ha-policy argument when declaring a queue.\u001b[0m
    \u001b[37m-# If you just want to make sure that all queues (except  those with auto-\u001b[0m
    \u001b[37m-# generated names) are mirrored across all nodes, run: \"rabbitmqctl set_policy\u001b[0m
    \u001b[37m-# HA '^(?!amq\\.).*' '{\"ha-mode\": \"all\"}' \" (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_ha_queues\u001b[0m
    \u001b[37m-#rabbit_ha_queues = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Positive integer representing duration in seconds for queue TTL (x-expires).\u001b[0m
    \u001b[37m-# Queues which are unused for the duration of the TTL are automatically\u001b[0m
    \u001b[37m-# deleted. The parameter affects only reply and fanout queues. (integer value)\u001b[0m
    \u001b[37m-# Minimum value: 1\u001b[0m
    \u001b[37m-#rabbit_transient_queues_ttl = 1800\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Specifies the number of messages to prefetch. Setting to zero allows\u001b[0m
    \u001b[37m-# unlimited messages. (integer value)\u001b[0m
    \u001b[37m-#rabbit_qos_prefetch_count = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Number of seconds after which the Rabbit broker is considered down if\u001b[0m
    \u001b[37m-# heartbeat's keep-alive fails (0 disable the heartbeat). EXPERIMENTAL (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#heartbeat_timeout_threshold = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# How often times during the heartbeat_timeout_threshold we check the\u001b[0m
    \u001b[37m-# heartbeat. (integer value)\u001b[0m
    \u001b[37m-#heartbeat_rate = 2\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Deprecated, use rpc_backend=kombu+memory or rpc_backend=fake (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/fake_rabbit\u001b[0m
    \u001b[37m-#fake_rabbit = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of channels to allow (integer value)\u001b[0m
    \u001b[37m-#channel_max = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The maximum byte size for an AMQP frame (integer value)\u001b[0m
    \u001b[37m-#frame_max = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# How often to send heartbeats for consumer's connections (integer value)\u001b[0m
    \u001b[37m-#heartbeat_interval = 1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable SSL (boolean value)\u001b[0m
    \u001b[37m-#ssl = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Arguments passed to ssl.wrap_socket (dict value)\u001b[0m
    \u001b[37m-#ssl_options = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Set socket timeout in seconds for connection's socket (floating point value)\u001b[0m
    \u001b[37m-#socket_timeout = 0.25\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Set TCP_USER_TIMEOUT in seconds for connection's socket (floating point\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#tcp_user_timeout = 0.25\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Set delay for reconnection to some host which has connection error (floating\u001b[0m
    \u001b[37m-# point value)\u001b[0m
    \u001b[37m-#host_connection_reconnect_delay = 0.25\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of connections to keep queued. (integer value)\u001b[0m
    \u001b[37m-#pool_max_size = 10\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of connections to create above `pool_max_size`. (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#pool_max_overflow = 0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default number of seconds to wait for a connections to available (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#pool_timeout = 30\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Lifetime of a connection (since creation) in seconds or None for no\u001b[0m
    \u001b[37m-# recycling. Expired connections are closed on acquire. (integer value)\u001b[0m
    \u001b[37m-#pool_recycle = 600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Threshold at which inactive (since release) connections are considered stale\u001b[0m
    \u001b[37m-# in seconds or None for no staleness. Stale connections are closed on acquire.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#pool_stale = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Persist notification messages. (boolean value)\u001b[0m
    \u001b[37m-#notification_persistence = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Exchange name for for sending notifications (string value)\u001b[0m
    \u001b[37m-#default_notification_exchange = ${control_exchange}_notification\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Max number of not acknowledged message which RabbitMQ can send to\u001b[0m
    \u001b[37m-# notification listener. (integer value)\u001b[0m
    \u001b[37m-#notification_listener_prefetch_count = 100\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Reconnecting retry count in case of connectivity problem during sending\u001b[0m
    \u001b[37m-# notification, -1 means infinite retry. (integer value)\u001b[0m
    \u001b[37m-#default_notification_retry_attempts = -1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Reconnecting retry delay in case of connectivity problem during sending\u001b[0m
    \u001b[37m-# notification message (floating point value)\u001b[0m
    \u001b[37m-#notification_retry_delay = 0.25\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time to live for rpc queues without consumers in seconds. (integer value)\u001b[0m
    \u001b[37m-#rpc_queue_expiration = 60\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Exchange name for sending RPC messages (string value)\u001b[0m
    \u001b[37m-#default_rpc_exchange = ${control_exchange}_rpc\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Exchange name for receiving RPC replies (string value)\u001b[0m
    \u001b[37m-#rpc_reply_exchange = ${control_exchange}_rpc_reply\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Max number of not acknowledged message which RabbitMQ can send to rpc\u001b[0m
    \u001b[37m-# listener. (integer value)\u001b[0m
    \u001b[37m-#rpc_listener_prefetch_count = 100\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Max number of not acknowledged message which RabbitMQ can send to rpc reply\u001b[0m
    \u001b[37m-# listener. (integer value)\u001b[0m
    \u001b[37m-#rpc_reply_listener_prefetch_count = 100\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Reconnecting retry count in case of connectivity problem during sending\u001b[0m
    \u001b[37m-# reply. -1 means infinite retry during rpc_timeout (integer value)\u001b[0m
    \u001b[37m-#rpc_reply_retry_attempts = -1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Reconnecting retry delay in case of connectivity problem during sending\u001b[0m
    \u001b[37m-# reply. (floating point value)\u001b[0m
    \u001b[37m-#rpc_reply_retry_delay = 0.25\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Reconnecting retry count in case of connectivity problem during sending RPC\u001b[0m
    \u001b[37m-# message, -1 means infinite retry. If actual retry attempts in not 0 the rpc\u001b[0m
    \u001b[37m-# request could be processed more then one time (integer value)\u001b[0m
    \u001b[37m-#default_rpc_retry_attempts = -1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Reconnecting retry delay in case of connectivity problem during sending RPC\u001b[0m
    \u001b[37m-# message (floating point value)\u001b[0m
    \u001b[37m-#rpc_retry_delay = 0.25\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[oslo_middleware]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.middleware\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The maximum body size for each  request, in bytes. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/osapi_max_request_body_size\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/max_request_body_size\u001b[0m
    \u001b[37m-#max_request_body_size = 114688\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The HTTP Header that will be used to determine what the original request\u001b[0m
    \u001b[37m-# protocol scheme was, even if it was hidden by an SSL termination proxy.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-#secure_proxy_ssl_header = X-Forwarded-Proto\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[oslo_policy]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From oslo.policy\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The JSON file that defines policies. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/policy_file\u001b[0m
    \u001b[37m-#policy_file = policy.json\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default rule. Enforced when a requested rule is not found. (string value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/policy_default_rule\u001b[0m
    \u001b[37m-#policy_default_rule = default\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Directories where policy configuration files are stored. They can be relative\u001b[0m
    \u001b[37m-# to any directory in the search path defined by the config_dir option, or\u001b[0m
    \u001b[37m-# absolute paths. The file defined by policy_file must exist for these\u001b[0m
    \u001b[37m-# directories to be searched.  Missing or empty directories are ignored. (multi\u001b[0m
    \u001b[37m-# valued)\u001b[0m
    \u001b[37m-# Deprecated group/name - [DEFAULT]/policy_dirs\u001b[0m
    \u001b[37m-#policy_dirs = policy.d\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[paste_deploy]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Name of the paste configuration file that defines the available pipelines.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#config_file = keystone-paste.ini\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[policy]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the policy backend driver in the keystone.policy namespace.\u001b[0m
    \u001b[37m-# Supplied drivers are rules and sql. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of entities that will be returned in a policy collection.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#list_limit = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[resource]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the resource backend driver in the keystone.resource\u001b[0m
    \u001b[37m-# namespace. Only an SQL driver is supplied. If a resource driver is not\u001b[0m
    \u001b[37m-# specified, the assignment driver will choose the resource driver. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#driver = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for resource caching. This has no effect unless global caching is\u001b[0m
    \u001b[37m-# enabled. (boolean value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [assignment]/caching\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# TTL (in seconds) to cache resource data. This has no effect unless global\u001b[0m
    \u001b[37m-# caching is enabled. (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [assignment]/cache_time\u001b[0m
    \u001b[37m-#cache_time = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of entities that will be returned in a resource collection.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [assignment]/list_limit\u001b[0m
    \u001b[37m-#list_limit = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Name of the domain that owns the `admin_project_name`. Defaults to None.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#admin_project_domain_name = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Special project for performing administrative operations on remote services.\u001b[0m
    \u001b[37m-# Tokens scoped to this project will contain the key/value\u001b[0m
    \u001b[37m-# `is_admin_project=true`. Defaults to None. (string value)\u001b[0m
    \u001b[37m-#admin_project_name = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Whether the names of projects are restricted from containing url reserved\u001b[0m
    \u001b[37m-# characters. If set to new, attempts to create or update a project with a url\u001b[0m
    \u001b[37m-# unsafe name will return an error. In addition, if set to strict, attempts to\u001b[0m
    \u001b[37m-# scope a token using an unsafe project name will return an error. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# Allowed values: off, new, strict\u001b[0m
    \u001b[37m-#project_name_url_safe = off\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Whether the names of domains are restricted from containing url reserved\u001b[0m
    \u001b[37m-# characters. If set to new, attempts to create or update a domain with a url\u001b[0m
    \u001b[37m-# unsafe name will return an error. In addition, if set to strict, attempts to\u001b[0m
    \u001b[37m-# scope a token using a domain name which is unsafe will return an error.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-# Allowed values: off, new, strict\u001b[0m
    \u001b[37m-#domain_name_url_safe = off\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[revoke]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for an implementation of the backend for persisting revocation\u001b[0m
    \u001b[37m-# events in the keystone.revoke namespace. Supplied drivers are kvs and sql.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# This value (calculated in seconds) is added to token expiration before a\u001b[0m
    \u001b[37m-# revocation event may be removed from the backend. (integer value)\u001b[0m
    \u001b[37m-#expiration_buffer = 1800\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for revocation event caching. This has no effect unless global caching\u001b[0m
    \u001b[37m-# is enabled. (boolean value)\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time to cache the revocation list and the revocation events (in seconds).\u001b[0m
    \u001b[37m-# This has no effect unless global and token caching are enabled. (integer\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# Deprecated group/name - [token]/revocation_cache_time\u001b[0m
    \u001b[37m-#cache_time = 3600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[role]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the role backend driver in the keystone.role namespace.\u001b[0m
    \u001b[37m-# Supplied drivers are ldap and sql. (string value)\u001b[0m
    \u001b[37m-#driver = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for role caching. This has no effect unless global caching is enabled.\u001b[0m
    \u001b[37m-# (boolean value)\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# TTL (in seconds) to cache role data. This has no effect unless global caching\u001b[0m
    \u001b[37m-# is enabled. (integer value)\u001b[0m
    \u001b[37m-#cache_time = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum number of entities that will be returned in a role collection.\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#list_limit = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[saml]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Default TTL, in seconds, for any generated SAML assertion created by\u001b[0m
    \u001b[37m-# Keystone. (integer value)\u001b[0m
    \u001b[37m-#assertion_expiration_time = 3600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Binary to be called for XML signing. Install the appropriate package, specify\u001b[0m
    \u001b[37m-# absolute path or adjust your PATH environment variable if the binary cannot\u001b[0m
    \u001b[37m-# be found. (string value)\u001b[0m
    \u001b[37m-#xmlsec1_binary = xmlsec1\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the certfile for SAML signing. For non-production environments, you\u001b[0m
    \u001b[37m-# may be interested in using `keystone-manage pki_setup` to generate self-\u001b[0m
    \u001b[37m-# signed certificates. Note, the path cannot contain a comma. (string value)\u001b[0m
    \u001b[37m-#certfile = /etc/keystone/ssl/certs/signing_cert.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the keyfile for SAML signing. Note, the path cannot contain a comma.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#keyfile = /etc/keystone/ssl/private/signing_key.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entity ID value for unique Identity Provider identification. Usually FQDN is\u001b[0m
    \u001b[37m-# set with a suffix. A value is required to generate IDP Metadata. For example:\u001b[0m
    \u001b[37m-# https://keystone.example.com/v3/OS-FEDERATION/saml2/idp (string value)\u001b[0m
    \u001b[37m-#idp_entity_id = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Identity Provider Single-Sign-On service value, required in the Identity\u001b[0m
    \u001b[37m-# Provider's metadata. A value is required to generate IDP Metadata. For\u001b[0m
    \u001b[37m-# example: https://keystone.example.com/v3/OS-FEDERATION/saml2/sso (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#idp_sso_endpoint = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Language used by the organization. (string value)\u001b[0m
    \u001b[37m-#idp_lang = en\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Organization name the installation belongs to. (string value)\u001b[0m
    \u001b[37m-#idp_organization_name = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Organization name to be displayed. (string value)\u001b[0m
    \u001b[37m-#idp_organization_display_name = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# URL of the organization. (string value)\u001b[0m
    \u001b[37m-#idp_organization_url = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Company of contact person. (string value)\u001b[0m
    \u001b[37m-#idp_contact_company = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Given name of contact person (string value)\u001b[0m
    \u001b[37m-#idp_contact_name = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Surname of contact person. (string value)\u001b[0m
    \u001b[37m-#idp_contact_surname = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Email address of contact person. (string value)\u001b[0m
    \u001b[37m-#idp_contact_email = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Telephone number of contact person. (string value)\u001b[0m
    \u001b[37m-#idp_contact_telephone = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The contact type describing the main point of contact for the identity\u001b[0m
    \u001b[37m-# provider. (string value)\u001b[0m
    \u001b[37m-# Allowed values: technical, support, administrative, billing, other\u001b[0m
    \u001b[37m-#idp_contact_type = other\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path to the Identity Provider Metadata file. This file should be generated\u001b[0m
    \u001b[37m-# with the keystone-manage saml_idp_metadata command. (string value)\u001b[0m
    \u001b[37m-#idp_metadata_path = /etc/keystone/saml2_idp_metadata.xml\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The prefix to use for the RelayState SAML attribute, used when generating ECP\u001b[0m
    \u001b[37m-# wrapped assertions. (string value)\u001b[0m
    \u001b[37m-#relay_state_prefix = ss:mem:\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[shadow_users]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the shadow users backend driver in the\u001b[0m
    \u001b[37m-# keystone.identity.shadow_users namespace. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[signing]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the certfile for token signing. For non-production environments, you\u001b[0m
    \u001b[37m-# may be interested in using `keystone-manage pki_setup` to generate self-\u001b[0m
    \u001b[37m-# signed certificates. (string value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#certfile = /etc/keystone/ssl/certs/signing_cert.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the keyfile for token signing. (string value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#keyfile = /etc/keystone/ssl/private/signing_key.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the CA for token signing. (string value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#ca_certs = /etc/keystone/ssl/certs/ca.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the CA key for token signing. (string value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#ca_key = /etc/keystone/ssl/private/cakey.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Key size (in bits) for token signing cert (auto generated certificate).\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-# Minimum value: 1024\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#key_size = 2048\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Days the token signing cert is valid for (auto generated certificate).\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#valid_days = 3650\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Certificate subject (auto generated certificate) for token signing. (string\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#cert_subject = /C=US/ST=Unset/L=Unset/O=Unset/CN=www.example.com\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[ssl]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Path of the CA key file for SSL. (string value)\u001b[0m
    \u001b[37m-#ca_key = /etc/keystone/ssl/private/cakey.pem\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# SSL key length (in bits) (auto generated certificate). (integer value)\u001b[0m
    \u001b[37m-# Minimum value: 1024\u001b[0m
    \u001b[37m-#key_size = 1024\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Days the certificate is valid for once signed (auto generated certificate).\u001b[0m
    \u001b[37m-# (integer value)\u001b[0m
    \u001b[37m-#valid_days = 3650\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# SSL certificate subject (auto generated certificate). (string value)\u001b[0m
    \u001b[37m-#cert_subject = /C=US/ST=Unset/L=Unset/O=Unset/CN=localhost\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[token]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# External auth mechanisms that should add bind information to token, e.g.,\u001b[0m
    \u001b[37m-# kerberos,x509. (list value)\u001b[0m
    \u001b[37m-#bind =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enforcement policy on tokens presented to Keystone with bind information. One\u001b[0m
    \u001b[37m-# of disabled, permissive, strict, required or a specifically required bind\u001b[0m
    \u001b[37m-# mode, e.g., kerberos or x509 to require binding to that authentication.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#enforce_token_bind = permissive\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Amount of time a token should remain valid (in seconds). (integer value)\u001b[0m
    \u001b[37m-#expiration = 3600\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Controls the token construction, validation, and revocation operations.\u001b[0m
    \u001b[37m-# Entrypoint in the keystone.token.provider namespace. Core providers are\u001b[0m
    \u001b[37m-# [fernet|pkiz|pki|uuid]. (string value)\u001b[0m
    \u001b[37m-#provider = uuid\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the token persistence backend driver in the\u001b[0m
    \u001b[37m-# keystone.token.persistence namespace. Supplied drivers are kvs, memcache,\u001b[0m
    \u001b[37m-# memcache_pool, and sql. (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Toggle for token system caching. This has no effect unless global caching is\u001b[0m
    \u001b[37m-# enabled. (boolean value)\u001b[0m
    \u001b[37m-#caching = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Time to cache tokens (in seconds). This has no effect unless global and token\u001b[0m
    \u001b[37m-# caching are enabled. (integer value)\u001b[0m
    \u001b[37m-#cache_time = <None>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Revoke token by token identifier. Setting revoke_by_id to true enables\u001b[0m
    \u001b[37m-# various forms of enumerating tokens, e.g. `list tokens for user`. These\u001b[0m
    \u001b[37m-# enumerations are processed to determine the list of tokens to revoke. Only\u001b[0m
    \u001b[37m-# disable if you are switching to using the Revoke extension with a backend\u001b[0m
    \u001b[37m-# other than KVS, which stores events in memory. (boolean value)\u001b[0m
    \u001b[37m-#revoke_by_id = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Allow rescoping of scoped token. Setting allow_rescoped_scoped_token to false\u001b[0m
    \u001b[37m-# prevents a user from exchanging a scoped token for any other token. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#allow_rescope_scoped_token = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The hash algorithm to use for PKI tokens. This can be set to any algorithm\u001b[0m
    \u001b[37m-# that hashlib supports. WARNING: Before changing this value, the auth_token\u001b[0m
    \u001b[37m-# middleware must be configured with the hash_algorithms, otherwise token\u001b[0m
    \u001b[37m-# revocation will not be processed correctly. (string value)\u001b[0m
    \u001b[37m-# This option is deprecated for removal.\u001b[0m
    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m
    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m
    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m
    \u001b[37m-#hash_algorithm = md5\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Add roles to token that are not explicitly added, but that are linked\u001b[0m
    \u001b[37m-# implicitly to other roles. (boolean value)\u001b[0m
    \u001b[37m-#infer_roles = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[tokenless_auth]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The list of trusted issuers to further filter the certificates that are\u001b[0m
    \u001b[37m-# allowed to participate in the X.509 tokenless authorization. If the option is\u001b[0m
    \u001b[37m-# absent then no certificates will be allowed. The naming format for the\u001b[0m
    \u001b[37m-# attributes of a Distinguished Name(DN) must be separated by a comma and\u001b[0m
    \u001b[37m-# contain no spaces. This configuration option may be repeated for multiple\u001b[0m
    \u001b[37m-# values. For example: trusted_issuer=CN=john,OU=keystone,O=openstack\u001b[0m
    \u001b[37m-# trusted_issuer=CN=mary,OU=eng,O=abc (multi valued)\u001b[0m
    \u001b[37m-#trusted_issuer =\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The protocol name for the X.509 tokenless authorization along with the option\u001b[0m
    \u001b[37m-# issuer_attribute below can look up its corresponding mapping. (string value)\u001b[0m
    \u001b[37m-#protocol = x509\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# The issuer attribute that is served as an IdP ID for the X.509 tokenless\u001b[0m
    \u001b[37m-# authorization along with the protocol to look up its corresponding mapping.\u001b[0m
    \u001b[37m-# It is the environment variable in the WSGI environment that references to the\u001b[0m
    \u001b[37m-# issuer of the client certificate. (string value)\u001b[0m
    \u001b[37m-#issuer_attribute = SSL_CLIENT_I_DN\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[trust]\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# From keystone\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Delegation and impersonation features can be optionally disabled. (boolean\u001b[0m
    \u001b[37m-# value)\u001b[0m
    \u001b[37m-#enabled = true\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Enable redelegation feature. (boolean value)\u001b[0m
    \u001b[37m-#allow_redelegation = false\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Maximum depth of trust redelegation. (integer value)\u001b[0m
    \u001b[37m-#max_redelegation_count = 3\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Entrypoint for the trust backend driver in the keystone.trust namespace.\u001b[0m
    \u001b[37m-# (string value)\u001b[0m
    \u001b[37m-#driver = sql\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-[extra_headers]\u001b[0m
    \u001b[37m-Distribution = Ubuntu\u001b[0m
    \u001b[37m+[database]\u001b[0m
    \u001b[37m+connection = mysql+pymysql://keystone:mypass@139.178.70.138:3306/keystone?charset=utf8\u001b[0m
    \u001b[32m- change mode from '0644' to '0640'\u001b[0m
    \u001b[32m- change owner from 'root' to 'keystone'\u001b[0m
    \u001b[32m- change group from 'root' to 'keystone'\u001b[0m
\u001b[0m  * ruby_block[delete all attributes in node['openstack']['identity']['conf_secrets']] action run
    \u001b[32m- execute the ruby block delete all attributes in node['openstack']['identity']['conf_secrets']\u001b[0m
\u001b[0m  * execute[keystone-manage db_sync] action run
    \u001b[32m- execute keystone-manage db_sync\u001b[0m
\u001b[0m  * execute[bootstrap_keystone] action run
    \u001b[32m- execute keystone-manage bootstrap \\
\u001b[0m    \u001b[32m          --bootstrap-password mypass \\
\u001b[0m    \u001b[32m          --bootstrap-username admin \\
\u001b[0m    \u001b[32m          --bootstrap-project-name admin \\
\u001b[0m    \u001b[32m          --bootstrap-role-name admin \\
\u001b[0m    \u001b[32m          --bootstrap-service-name keystone \\
\u001b[0m    \u001b[32m          --bootstrap-region-id RegionOne \\
\u001b[0m    \u001b[32m          --bootstrap-admin-url http://139.178.70.138:5000/v3 \\
\u001b[0m    \u001b[32m          --bootstrap-public-url http://139.178.70.138:5000/v3 \\
\u001b[0m    \u001b[32m          --bootstrap-internal-url http://139.178.70.138:5000/v3\u001b[0m
\u001b[0mRecipe: apache2::default\u001b[0m
  * apt_package[apache2] action install
    \u001b[32m- install version 2.4.18-2ubuntu3.10 of package apache2\u001b[0m
\u001b[0m  * directory[/etc/apache2/sites-available] action create (up to date)
  * directory[/etc/apache2/sites-enabled] action create (up to date)
  * directory[/etc/apache2/mods-available] action create (up to date)
  * directory[/etc/apache2/mods-enabled] action create (up to date)
  * directory[/etc/apache2/conf-available] action create (up to date)
  * directory[/etc/apache2/conf-enabled] action create (up to date)
  * link[/etc/apache2/sites-enabled/default] action delete (up to date)
  * file[/etc/apache2/sites-available/default] action delete (up to date)
  * link[/etc/apache2/sites-enabled/default.conf] action delete (up to date)
  * file[/etc/apache2/sites-available/default.conf] action delete (up to date)
  * link[/etc/apache2/sites-enabled/000-default] action delete (up to date)
  * file[/etc/apache2/sites-available/000-default] action delete (up to date)
  * link[/etc/apache2/sites-enabled/000-default.conf] action delete
    \u001b[32m- delete link to file at /etc/apache2/sites-enabled/000-default.conf\u001b[0m
\u001b[0m  * file[/etc/apache2/sites-available/000-default.conf] action delete
    \u001b[32m- delete file /etc/apache2/sites-available/000-default.conf\u001b[0m
\u001b[0m  * directory[/var/log/apache2] action create
    \u001b[32m- change mode from '0750' to '0755'\u001b[0m
\u001b[0m  * apt_package[perl] action install (up to date)
  * link[/usr/sbin/a2ensite] action delete
    \u001b[32m- delete link to file at /usr/sbin/a2ensite\u001b[0m
\u001b[0m  * template[/usr/sbin/a2ensite] action create
    \u001b[32m- create new file /usr/sbin/a2ensite\u001b[0m
    \u001b[32m- update content in file /usr/sbin/a2ensite from none to ce53f4\u001b[0m
    \u001b[37m--- /usr/sbin/a2ensite\t2019-04-23 15:42:46.663498039 +0000\u001b[0m
    \u001b[37m+++ /usr/sbin/.chef-a2ensite20190423-11189-1wt724b\t2019-04-23 15:42:46.663498039 +0000\u001b[0m
    \u001b[37m@@ -1 +1,533 @@\u001b[0m
    \u001b[37m+#!/usr/bin/perl -w\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m
    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+use strict;\u001b[0m
    \u001b[37m+use Cwd 'realpath';\u001b[0m
    \u001b[37m+use File::Spec;\u001b[0m
    \u001b[37m+use File::Basename;\u001b[0m
    \u001b[37m+use File::Path;\u001b[0m
    \u001b[37m+use Getopt::Long;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $quiet;\u001b[0m
    \u001b[37m+my $force;\u001b[0m
    \u001b[37m+my $maintmode;\u001b[0m
    \u001b[37m+my $purge;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m
    \u001b[37m+GetOptions(\u001b[0m
    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m
    \u001b[37m+    'force|f'     => \\$force,\u001b[0m
    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m
    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m
    \u001b[37m+) or exit 2;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $basename = basename($0);\u001b[0m
    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m
    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m
    \u001b[37m+my $act        = $1;\u001b[0m
    \u001b[37m+my $obj        = $2;\u001b[0m
    \u001b[37m+my $dir_suffix = $3;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m
    \u001b[37m+    || (\u001b[0m
    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m
    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m
    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m
    \u001b[37m+    );\u001b[0m
    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m
    \u001b[37m+read_env_file($env_file);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$act .= 'able';\u001b[0m
    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m
    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m
    \u001b[37m+    $obj    = 'module';\u001b[0m
    \u001b[37m+    $dir    = 'mods';\u001b[0m
    \u001b[37m+    $sffx   = '.load';\u001b[0m
    \u001b[37m+    $reload = 'restart';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m
    \u001b[37m+    $obj    = 'conf';\u001b[0m
    \u001b[37m+    $dir    = 'conf';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+else {\u001b[0m
    \u001b[37m+    $dir    = 'sites';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+$name = ucfirst($obj);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m
    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m
    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m
    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m
    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m
    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $request_reload = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $rc = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m
    \u001b[37m+    my @choices = myglob('*');\u001b[0m
    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m
    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m
    \u001b[37m+    my $input = <>;\u001b[0m
    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my @objs;\u001b[0m
    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m
    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m
    \u001b[37m+    my @glob = myglob($arg);\u001b[0m
    \u001b[37m+    if ( !@glob ) {\u001b[0m
    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m
    \u001b[37m+        $rc = 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        push @objs, @glob;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+foreach my $acton (@objs) {\u001b[0m
    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+info(\u001b[0m
    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m
    \u001b[37m+) if $request_reload;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+exit($rc);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+##############################################################################\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub myglob {\u001b[0m
    \u001b[37m+    my $arg = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my @glob = map {\u001b[0m
    \u001b[37m+        s{^$choicedir/}{};\u001b[0m
    \u001b[37m+        s{$sffx$}{};\u001b[0m
    \u001b[37m+        $_\u001b[0m
    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return @glob;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub doit {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m+            print\u001b[0m
    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m
    \u001b[37m+            $acton = 'cgid';\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m
    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m
    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m
    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m
    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m
    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m
    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m
    \u001b[37m+                unlink($link);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m
    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m
    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m
    \u001b[37m+                    unlink($conflink);\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        if ( $purge ) {\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # handle module dependencies\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m
    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m
    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m
    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m
    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m
    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            my @depending;\u001b[0m
    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m
    \u001b[37m+                my @deps = get_deps($d);\u001b[0m
    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m
    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m
    \u001b[37m+                    push @depending, $1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            if ( scalar @depending ) {\u001b[0m
    \u001b[37m+                if ($force) {\u001b[0m
    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m
    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m
    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                    return 1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m
    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m
    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m
    \u001b[37m+                );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m
    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m
    \u001b[37m+            remove_link($link);\u001b[0m
    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+                remove_link($conflink);\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+            remove_link($conflink);\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m
    \u001b[37m+            if ( $purge ) {\u001b[0m
    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub get_deps {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $fd;\u001b[0m
    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m
    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m
    \u001b[37m+        return;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    my $line;\u001b[0m
    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m
    \u001b[37m+        chomp $line;\u001b[0m
    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m
    \u001b[37m+            my $deps = $1;\u001b[0m
    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m
    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub do_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !doit($d) ) {\u001b[0m
    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warn_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m
    \u001b[37m+            warning(\u001b[0m
    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_conflicts {\u001b[0m
    \u001b[37m+    my $acton    = shift;\u001b[0m
    \u001b[37m+    my $haderror = 0;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m
    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+            error(\u001b[0m
    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m
    \u001b[37m+            $haderror++;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ($haderror) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub add_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # create relative link\u001b[0m
    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m
    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $link ) {\u001b[0m
    \u001b[37m+        if ( -l $link ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # points to nowhere\u001b[0m
    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m
    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 'missing';\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m
    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m
    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 'ok';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub remove_link {\u001b[0m
    \u001b[37m+    my ($link) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -l $link ) {\u001b[0m
    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( -e $link ) {\u001b[0m
    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub threaded {\u001b[0m
    \u001b[37m+    my $result = \"\";\u001b[0m
    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m
    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m
    \u001b[37m+    if ( $? != 0 ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # config doesn't work\u001b[0m
    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m
    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # do what user requested\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub info {\u001b[0m
    \u001b[37m+    print @_ if !$quiet;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub error {\u001b[0m
    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warning {\u001b[0m
    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub is_in {\u001b[0m
    \u001b[37m+    my $needle = shift;\u001b[0m
    \u001b[37m+    foreach my $e (@_) {\u001b[0m
    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 0;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub read_env_file {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    -r $file or return;\u001b[0m
    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m
    \u001b[37m+    if ($?) {\u001b[0m
    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    foreach my $l (@lines) {\u001b[0m
    \u001b[37m+        chomp $l;\u001b[0m
    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m
    \u001b[37m+        $ENV{$1} = $2;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub switch_marker {\u001b[0m
    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m
    \u001b[37m+        if @_ != 3;\u001b[0m
    \u001b[37m+    my $which = shift;\u001b[0m
    \u001b[37m+    my $what  = shift;\u001b[0m
    \u001b[37m+    my $name  = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $mode = \"admin\";\u001b[0m
    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m
    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m
    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m
    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m
    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m
    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m
    \u001b[37m+            || error(\u001b[0m
    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m
    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m
    \u001b[37m+    chomp(@markers);\u001b[0m
    \u001b[37m+    foreach (@markers) {\u001b[0m
    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m
    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    unless ($purge) {\u001b[0m
    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m
    \u001b[37m+        if ( $? != 0 ) {\u001b[0m
    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * link[/usr/sbin/a2dissite] action delete
    \u001b[32m- delete link to file at /usr/sbin/a2dissite\u001b[0m
\u001b[0m  * template[/usr/sbin/a2dissite] action create
    \u001b[32m- create new file /usr/sbin/a2dissite\u001b[0m
    \u001b[32m- update content in file /usr/sbin/a2dissite from none to ce53f4\u001b[0m
    \u001b[37m--- /usr/sbin/a2dissite\t2019-04-23 15:42:46.683499784 +0000\u001b[0m
    \u001b[37m+++ /usr/sbin/.chef-a2dissite20190423-11189-qn4jou\t2019-04-23 15:42:46.683499784 +0000\u001b[0m
    \u001b[37m@@ -1 +1,533 @@\u001b[0m
    \u001b[37m+#!/usr/bin/perl -w\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m
    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+use strict;\u001b[0m
    \u001b[37m+use Cwd 'realpath';\u001b[0m
    \u001b[37m+use File::Spec;\u001b[0m
    \u001b[37m+use File::Basename;\u001b[0m
    \u001b[37m+use File::Path;\u001b[0m
    \u001b[37m+use Getopt::Long;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $quiet;\u001b[0m
    \u001b[37m+my $force;\u001b[0m
    \u001b[37m+my $maintmode;\u001b[0m
    \u001b[37m+my $purge;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m
    \u001b[37m+GetOptions(\u001b[0m
    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m
    \u001b[37m+    'force|f'     => \\$force,\u001b[0m
    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m
    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m
    \u001b[37m+) or exit 2;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $basename = basename($0);\u001b[0m
    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m
    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m
    \u001b[37m+my $act        = $1;\u001b[0m
    \u001b[37m+my $obj        = $2;\u001b[0m
    \u001b[37m+my $dir_suffix = $3;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m
    \u001b[37m+    || (\u001b[0m
    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m
    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m
    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m
    \u001b[37m+    );\u001b[0m
    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m
    \u001b[37m+read_env_file($env_file);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$act .= 'able';\u001b[0m
    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m
    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m
    \u001b[37m+    $obj    = 'module';\u001b[0m
    \u001b[37m+    $dir    = 'mods';\u001b[0m
    \u001b[37m+    $sffx   = '.load';\u001b[0m
    \u001b[37m+    $reload = 'restart';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m
    \u001b[37m+    $obj    = 'conf';\u001b[0m
    \u001b[37m+    $dir    = 'conf';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+else {\u001b[0m
    \u001b[37m+    $dir    = 'sites';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+$name = ucfirst($obj);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m
    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m
    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m
    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m
    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m
    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $request_reload = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $rc = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m
    \u001b[37m+    my @choices = myglob('*');\u001b[0m
    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m
    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m
    \u001b[37m+    my $input = <>;\u001b[0m
    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my @objs;\u001b[0m
    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m
    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m
    \u001b[37m+    my @glob = myglob($arg);\u001b[0m
    \u001b[37m+    if ( !@glob ) {\u001b[0m
    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m
    \u001b[37m+        $rc = 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        push @objs, @glob;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+foreach my $acton (@objs) {\u001b[0m
    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+info(\u001b[0m
    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m
    \u001b[37m+) if $request_reload;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+exit($rc);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+##############################################################################\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub myglob {\u001b[0m
    \u001b[37m+    my $arg = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my @glob = map {\u001b[0m
    \u001b[37m+        s{^$choicedir/}{};\u001b[0m
    \u001b[37m+        s{$sffx$}{};\u001b[0m
    \u001b[37m+        $_\u001b[0m
    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return @glob;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub doit {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m+            print\u001b[0m
    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m
    \u001b[37m+            $acton = 'cgid';\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m
    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m
    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m
    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m
    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m
    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m
    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m
    \u001b[37m+                unlink($link);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m
    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m
    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m
    \u001b[37m+                    unlink($conflink);\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        if ( $purge ) {\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # handle module dependencies\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m
    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m
    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m
    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m
    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m
    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            my @depending;\u001b[0m
    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m
    \u001b[37m+                my @deps = get_deps($d);\u001b[0m
    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m
    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m
    \u001b[37m+                    push @depending, $1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            if ( scalar @depending ) {\u001b[0m
    \u001b[37m+                if ($force) {\u001b[0m
    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m
    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m
    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                    return 1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m
    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m
    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m
    \u001b[37m+                );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m
    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m
    \u001b[37m+            remove_link($link);\u001b[0m
    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+                remove_link($conflink);\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+            remove_link($conflink);\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m
    \u001b[37m+            if ( $purge ) {\u001b[0m
    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub get_deps {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $fd;\u001b[0m
    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m
    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m
    \u001b[37m+        return;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    my $line;\u001b[0m
    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m
    \u001b[37m+        chomp $line;\u001b[0m
    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m
    \u001b[37m+            my $deps = $1;\u001b[0m
    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m
    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub do_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !doit($d) ) {\u001b[0m
    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warn_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m
    \u001b[37m+            warning(\u001b[0m
    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_conflicts {\u001b[0m
    \u001b[37m+    my $acton    = shift;\u001b[0m
    \u001b[37m+    my $haderror = 0;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m
    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+            error(\u001b[0m
    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m
    \u001b[37m+            $haderror++;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ($haderror) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub add_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # create relative link\u001b[0m
    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m
    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $link ) {\u001b[0m
    \u001b[37m+        if ( -l $link ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # points to nowhere\u001b[0m
    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m
    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 'missing';\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m
    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m
    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 'ok';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub remove_link {\u001b[0m
    \u001b[37m+    my ($link) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -l $link ) {\u001b[0m
    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( -e $link ) {\u001b[0m
    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub threaded {\u001b[0m
    \u001b[37m+    my $result = \"\";\u001b[0m
    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m
    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m
    \u001b[37m+    if ( $? != 0 ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # config doesn't work\u001b[0m
    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m
    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # do what user requested\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub info {\u001b[0m
    \u001b[37m+    print @_ if !$quiet;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub error {\u001b[0m
    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warning {\u001b[0m
    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub is_in {\u001b[0m
    \u001b[37m+    my $needle = shift;\u001b[0m
    \u001b[37m+    foreach my $e (@_) {\u001b[0m
    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 0;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub read_env_file {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    -r $file or return;\u001b[0m
    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m
    \u001b[37m+    if ($?) {\u001b[0m
    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    foreach my $l (@lines) {\u001b[0m
    \u001b[37m+        chomp $l;\u001b[0m
    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m
    \u001b[37m+        $ENV{$1} = $2;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub switch_marker {\u001b[0m
    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m
    \u001b[37m+        if @_ != 3;\u001b[0m
    \u001b[37m+    my $which = shift;\u001b[0m
    \u001b[37m+    my $what  = shift;\u001b[0m
    \u001b[37m+    my $name  = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $mode = \"admin\";\u001b[0m
    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m
    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m
    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m
    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m
    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m
    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m
    \u001b[37m+            || error(\u001b[0m
    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m
    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m
    \u001b[37m+    chomp(@markers);\u001b[0m
    \u001b[37m+    foreach (@markers) {\u001b[0m
    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m
    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    unless ($purge) {\u001b[0m
    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m
    \u001b[37m+        if ( $? != 0 ) {\u001b[0m
    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * link[/usr/sbin/a2enmod] action delete (skipped due to only_if)
  * template[/usr/sbin/a2enmod] action create
    \u001b[32m- update content in file /usr/sbin/a2enmod from e2796c to ce53f4\u001b[0m
    \u001b[37m--- /usr/sbin/a2enmod\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /usr/sbin/.chef-a2enmod20190423-11189-zgviig\t2019-04-23 15:42:46.699501179 +0000\u001b[0m
    \u001b[37m@@ -11,8 +11,6 @@\u001b[0m
    \u001b[37m use File::Basename;\u001b[0m
    \u001b[37m use File::Path;\u001b[0m
    \u001b[37m use Getopt::Long;\u001b[0m
    \u001b[37m-use feature ':5.16';\u001b[0m
    \u001b[37m-no warnings \"experimental::smartmatch\";\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m my $quiet;\u001b[0m
    \u001b[37m my $force;\u001b[0m
    \u001b[37m@@ -34,18 +32,12 @@\u001b[0m
    \u001b[37m my $obj        = $2;\u001b[0m
    \u001b[37m my $dir_suffix = $3;\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-my @essential_module_list = qw(alias auth_basic authn_file authz_host\u001b[0m
    \u001b[37m-    authz_user autoindex deflate dir env filter logio mime negotiation\u001b[0m
    \u001b[37m-    setenvif unixd version watchdog);\u001b[0m
    \u001b[37m-my $env_file = $ENV{APACHE_ENVVARS};\u001b[0m
    \u001b[37m-if (! $env_file) {\u001b[0m
    \u001b[37m-    if ($ENV{APACHE_CONFDIR}) {\u001b[0m
    \u001b[37m-        $env_file = \"$ENV{APACHE_CONFDIR}/envvars\";\u001b[0m
    \u001b[37m-    }\u001b[0m
    \u001b[37m-    else {\u001b[0m
    \u001b[37m-        $env_file = \"/etc/apache2$dir_suffix/envvars\";\u001b[0m
    \u001b[37m-    }\u001b[0m
    \u001b[37m-}\u001b[0m
    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m
    \u001b[37m+    || (\u001b[0m
    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m
    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m
    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m
    \u001b[37m+    );\u001b[0m
    \u001b[37m $ENV{LANG} = 'C';\u001b[0m
    \u001b[37m read_env_file($env_file);\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -74,7 +66,7 @@\u001b[0m
    \u001b[37m my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m
    \u001b[37m     || \"$confdir/$dir-available\";\u001b[0m
    \u001b[37m my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m
    \u001b[37m-my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/var/lib/apache2\";\u001b[0m
    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m $statedir .= \"/$obj\";\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -82,8 +74,6 @@\u001b[0m
    \u001b[37m my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m my $request_reload = 0;\u001b[0m
    \u001b[37m-my $request_htcacheclean;\u001b[0m
    \u001b[37m-my $htc = \"apache-htcacheclean$dir_suffix\";\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m my $rc = 0;\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -113,14 +103,8 @@\u001b[0m
    \u001b[37m     doit($acton) or $rc = 1;\u001b[0m
    \u001b[37m }\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-my $htcstart = \"\";\u001b[0m
    \u001b[37m-if ($request_htcacheclean) {\u001b[0m
    \u001b[37m-    my $cmd = ($act eq \"enable\") ? \"start\" : \"stop\";\u001b[0m
    \u001b[37m-    $htcstart = \"  service $htc $cmd\
\";\u001b[0m
    \u001b[37m-}\u001b[0m
    \u001b[37m-info(  \"To activate the new configuration, you need to run:\
\"\u001b[0m
    \u001b[37m-     . \"  service apache2$dir_suffix $reload\
\"\u001b[0m
    \u001b[37m-     . $htcstart\u001b[0m
    \u001b[37m+info(\u001b[0m
    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m
    \u001b[37m ) if $request_reload;\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m exit($rc);\u001b[0m
    \u001b[37m@@ -144,7 +128,7 @@\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m     my ( $conftgt, $conflink );\u001b[0m
    \u001b[37m     if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m-        if ( $act eq 'enable' && $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m             print\u001b[0m
    \u001b[37m                 \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m
    \u001b[37m             $acton = 'cgid';\u001b[0m
    \u001b[37m@@ -193,6 +177,11 @@\u001b[0m
    \u001b[37m     # handle module dependencies\u001b[0m
    \u001b[37m     if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m         if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m
    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m
    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m
    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m             my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m
    \u001b[37m             do_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -271,7 +260,11 @@\u001b[0m
    \u001b[37m             }\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m             print \"Enabling $obj $acton.\
\";\u001b[0m
    \u001b[37m-            special_module_handling($acton);\u001b[0m
    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m
    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m
    \u001b[37m+                );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m             return add_link( $tgt, $link )\u001b[0m
    \u001b[37m                 && switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m         }\u001b[0m
    \u001b[37m@@ -282,10 +275,6 @@\u001b[0m
    \u001b[37m     }\u001b[0m
    \u001b[37m     else {\u001b[0m
    \u001b[37m         if ( -e $link || -l $link ) {\u001b[0m
    \u001b[37m-            special_module_handling($acton);\u001b[0m
    \u001b[37m-            if ($obj eq 'module' && grep {$_ eq $acton} @essential_module_list) {\u001b[0m
    \u001b[37m-                  $force || essential_module_handling($acton);\u001b[0m
    \u001b[37m-            }\u001b[0m
    \u001b[37m             remove_link($link);\u001b[0m
    \u001b[37m             if ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m                 remove_link($conflink);\u001b[0m
    \u001b[37m@@ -440,7 +429,7 @@\u001b[0m
    \u001b[37m     if ( $? != 0 ) {\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m         # config doesn't work\u001b[0m
    \u001b[37m-        if ( -e \"$enabldir/mpm_prefork.load\" )\u001b[0m
    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m
    \u001b[37m         {\u001b[0m
    \u001b[37m             return 0;\u001b[0m
    \u001b[37m         }\u001b[0m
    \u001b[37m@@ -537,57 +526,6 @@\u001b[0m
    \u001b[37m             error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m
    \u001b[37m         }\u001b[0m
    \u001b[37m         return 1;\u001b[0m
    \u001b[37m-    }\u001b[0m
    \u001b[37m-}\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-sub essential_module_handling {\u001b[0m
    \u001b[37m-    my $module = shift;\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-    print \"WARNING: The following essential module will be disabled.\
\";\u001b[0m
    \u001b[37m-    print \"This might result in unexpected behavior and should NOT be done\
\";\u001b[0m
    \u001b[37m-    print \"unless you know exactly what you are doing!\
 $module\
\
\";\u001b[0m
    \u001b[37m-    print \"To continue type in the phrase 'Yes, do as I say!' or retry by passing '-f': \";\u001b[0m
    \u001b[37m-    my $input = <STDIN>;\u001b[0m
    \u001b[37m-    chomp($input);\u001b[0m
    \u001b[37m-    if ($input ne 'Yes, do as I say!') {\u001b[0m
    \u001b[37m-        print(\"Aborting\
\");\u001b[0m
    \u001b[37m-        exit(1)\u001b[0m
    \u001b[37m-    }\u001b[0m
    \u001b[37m-}\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-sub special_module_handling {\u001b[0m
    \u001b[37m-    my $acton = shift;\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-    if ($obj ne 'module') {\u001b[0m
    \u001b[37m-        return;\u001b[0m
    \u001b[37m-    }\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-    given ($acton) {\u001b[0m
    \u001b[37m-        when ('ssl') {\u001b[0m
    \u001b[37m-            if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m-                info(  \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m-                     . \"how to configure SSL and create self-signed \"\u001b[0m
    \u001b[37m-                     . \"certificates.\
\"\u001b[0m
    \u001b[37m-                );\u001b[0m
    \u001b[37m-            }\u001b[0m
    \u001b[37m-        }\u001b[0m
    \u001b[37m-        when ('cache_disk') {\u001b[0m
    \u001b[37m-            $request_htcacheclean = 1;\u001b[0m
    \u001b[37m-            my $verb = \"\\u$act\";\u001b[0m
    \u001b[37m-            $verb =~ s/e$/ing/;\u001b[0m
    \u001b[37m-            info(\"$verb external service $htc\
\");\u001b[0m
    \u001b[37m-            # The init script has no Default-Start runlevels, so we need to\u001b[0m
    \u001b[37m-            # specify them explicitly.\u001b[0m
    \u001b[37m-            system(\"update-rc.d $htc $act 2 3 4 5\");\u001b[0m
    \u001b[37m-            if ($rc == 0) {\u001b[0m
    \u001b[37m-                info(\"The service will be started on next reboot.\
\")\u001b[0m
    \u001b[37m-                    if $act eq 'enable';\u001b[0m
    \u001b[37m-            }\u001b[0m
    \u001b[37m-            else {\u001b[0m
    \u001b[37m-                warning(\"update-rc.d failed\
\");\u001b[0m
    \u001b[37m-            }\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-        }\u001b[0m
    \u001b[37m     }\u001b[0m
    \u001b[37m }\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[32m- change mode from '0755' to '0700'\u001b[0m
\u001b[0m  * link[/usr/sbin/a2dismod] action delete
    \u001b[32m- delete link to file at /usr/sbin/a2dismod\u001b[0m
\u001b[0m  * template[/usr/sbin/a2dismod] action create
    \u001b[32m- create new file /usr/sbin/a2dismod\u001b[0m
    \u001b[32m- update content in file /usr/sbin/a2dismod from none to ce53f4\u001b[0m
    \u001b[37m--- /usr/sbin/a2dismod\t2019-04-23 15:42:46.715502575 +0000\u001b[0m
    \u001b[37m+++ /usr/sbin/.chef-a2dismod20190423-11189-zys9ig\t2019-04-23 15:42:46.715502575 +0000\u001b[0m
    \u001b[37m@@ -1 +1,533 @@\u001b[0m
    \u001b[37m+#!/usr/bin/perl -w\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m
    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+use strict;\u001b[0m
    \u001b[37m+use Cwd 'realpath';\u001b[0m
    \u001b[37m+use File::Spec;\u001b[0m
    \u001b[37m+use File::Basename;\u001b[0m
    \u001b[37m+use File::Path;\u001b[0m
    \u001b[37m+use Getopt::Long;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $quiet;\u001b[0m
    \u001b[37m+my $force;\u001b[0m
    \u001b[37m+my $maintmode;\u001b[0m
    \u001b[37m+my $purge;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m
    \u001b[37m+GetOptions(\u001b[0m
    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m
    \u001b[37m+    'force|f'     => \\$force,\u001b[0m
    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m
    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m
    \u001b[37m+) or exit 2;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $basename = basename($0);\u001b[0m
    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m
    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m
    \u001b[37m+my $act        = $1;\u001b[0m
    \u001b[37m+my $obj        = $2;\u001b[0m
    \u001b[37m+my $dir_suffix = $3;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m
    \u001b[37m+    || (\u001b[0m
    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m
    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m
    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m
    \u001b[37m+    );\u001b[0m
    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m
    \u001b[37m+read_env_file($env_file);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$act .= 'able';\u001b[0m
    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m
    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m
    \u001b[37m+    $obj    = 'module';\u001b[0m
    \u001b[37m+    $dir    = 'mods';\u001b[0m
    \u001b[37m+    $sffx   = '.load';\u001b[0m
    \u001b[37m+    $reload = 'restart';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m
    \u001b[37m+    $obj    = 'conf';\u001b[0m
    \u001b[37m+    $dir    = 'conf';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+else {\u001b[0m
    \u001b[37m+    $dir    = 'sites';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+$name = ucfirst($obj);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m
    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m
    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m
    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m
    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m
    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $request_reload = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $rc = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m
    \u001b[37m+    my @choices = myglob('*');\u001b[0m
    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m
    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m
    \u001b[37m+    my $input = <>;\u001b[0m
    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my @objs;\u001b[0m
    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m
    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m
    \u001b[37m+    my @glob = myglob($arg);\u001b[0m
    \u001b[37m+    if ( !@glob ) {\u001b[0m
    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m
    \u001b[37m+        $rc = 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        push @objs, @glob;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+foreach my $acton (@objs) {\u001b[0m
    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+info(\u001b[0m
    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m
    \u001b[37m+) if $request_reload;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+exit($rc);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+##############################################################################\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub myglob {\u001b[0m
    \u001b[37m+    my $arg = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my @glob = map {\u001b[0m
    \u001b[37m+        s{^$choicedir/}{};\u001b[0m
    \u001b[37m+        s{$sffx$}{};\u001b[0m
    \u001b[37m+        $_\u001b[0m
    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return @glob;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub doit {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m+            print\u001b[0m
    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m
    \u001b[37m+            $acton = 'cgid';\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m
    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m
    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m
    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m
    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m
    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m
    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m
    \u001b[37m+                unlink($link);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m
    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m
    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m
    \u001b[37m+                    unlink($conflink);\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        if ( $purge ) {\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # handle module dependencies\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m
    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m
    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m
    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m
    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m
    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            my @depending;\u001b[0m
    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m
    \u001b[37m+                my @deps = get_deps($d);\u001b[0m
    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m
    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m
    \u001b[37m+                    push @depending, $1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            if ( scalar @depending ) {\u001b[0m
    \u001b[37m+                if ($force) {\u001b[0m
    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m
    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m
    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                    return 1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m
    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m
    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m
    \u001b[37m+                );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m
    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m
    \u001b[37m+            remove_link($link);\u001b[0m
    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+                remove_link($conflink);\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+            remove_link($conflink);\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m
    \u001b[37m+            if ( $purge ) {\u001b[0m
    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub get_deps {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $fd;\u001b[0m
    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m
    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m
    \u001b[37m+        return;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    my $line;\u001b[0m
    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m
    \u001b[37m+        chomp $line;\u001b[0m
    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m
    \u001b[37m+            my $deps = $1;\u001b[0m
    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m
    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub do_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !doit($d) ) {\u001b[0m
    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warn_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m
    \u001b[37m+            warning(\u001b[0m
    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_conflicts {\u001b[0m
    \u001b[37m+    my $acton    = shift;\u001b[0m
    \u001b[37m+    my $haderror = 0;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m
    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+            error(\u001b[0m
    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m
    \u001b[37m+            $haderror++;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ($haderror) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub add_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # create relative link\u001b[0m
    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m
    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $link ) {\u001b[0m
    \u001b[37m+        if ( -l $link ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # points to nowhere\u001b[0m
    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m
    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 'missing';\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m
    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m
    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 'ok';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub remove_link {\u001b[0m
    \u001b[37m+    my ($link) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -l $link ) {\u001b[0m
    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( -e $link ) {\u001b[0m
    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub threaded {\u001b[0m
    \u001b[37m+    my $result = \"\";\u001b[0m
    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m
    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m
    \u001b[37m+    if ( $? != 0 ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # config doesn't work\u001b[0m
    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m
    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # do what user requested\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub info {\u001b[0m
    \u001b[37m+    print @_ if !$quiet;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub error {\u001b[0m
    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warning {\u001b[0m
    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub is_in {\u001b[0m
    \u001b[37m+    my $needle = shift;\u001b[0m
    \u001b[37m+    foreach my $e (@_) {\u001b[0m
    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 0;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub read_env_file {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    -r $file or return;\u001b[0m
    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m
    \u001b[37m+    if ($?) {\u001b[0m
    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    foreach my $l (@lines) {\u001b[0m
    \u001b[37m+        chomp $l;\u001b[0m
    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m
    \u001b[37m+        $ENV{$1} = $2;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub switch_marker {\u001b[0m
    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m
    \u001b[37m+        if @_ != 3;\u001b[0m
    \u001b[37m+    my $which = shift;\u001b[0m
    \u001b[37m+    my $what  = shift;\u001b[0m
    \u001b[37m+    my $name  = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $mode = \"admin\";\u001b[0m
    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m
    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m
    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m
    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m
    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m
    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m
    \u001b[37m+            || error(\u001b[0m
    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m
    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m
    \u001b[37m+    chomp(@markers);\u001b[0m
    \u001b[37m+    foreach (@markers) {\u001b[0m
    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m
    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    unless ($purge) {\u001b[0m
    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m
    \u001b[37m+        if ( $? != 0 ) {\u001b[0m
    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * link[/usr/sbin/a2enconf] action delete
    \u001b[32m- delete link to file at /usr/sbin/a2enconf\u001b[0m
\u001b[0m  * template[/usr/sbin/a2enconf] action create
    \u001b[32m- create new file /usr/sbin/a2enconf\u001b[0m
    \u001b[32m- update content in file /usr/sbin/a2enconf from none to ce53f4\u001b[0m
    \u001b[37m--- /usr/sbin/a2enconf\t2019-04-23 15:42:46.735504320 +0000\u001b[0m
    \u001b[37m+++ /usr/sbin/.chef-a2enconf20190423-11189-1ux4d4h\t2019-04-23 15:42:46.735504320 +0000\u001b[0m
    \u001b[37m@@ -1 +1,533 @@\u001b[0m
    \u001b[37m+#!/usr/bin/perl -w\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m
    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+use strict;\u001b[0m
    \u001b[37m+use Cwd 'realpath';\u001b[0m
    \u001b[37m+use File::Spec;\u001b[0m
    \u001b[37m+use File::Basename;\u001b[0m
    \u001b[37m+use File::Path;\u001b[0m
    \u001b[37m+use Getopt::Long;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $quiet;\u001b[0m
    \u001b[37m+my $force;\u001b[0m
    \u001b[37m+my $maintmode;\u001b[0m
    \u001b[37m+my $purge;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m
    \u001b[37m+GetOptions(\u001b[0m
    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m
    \u001b[37m+    'force|f'     => \\$force,\u001b[0m
    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m
    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m
    \u001b[37m+) or exit 2;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $basename = basename($0);\u001b[0m
    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m
    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m
    \u001b[37m+my $act        = $1;\u001b[0m
    \u001b[37m+my $obj        = $2;\u001b[0m
    \u001b[37m+my $dir_suffix = $3;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m
    \u001b[37m+    || (\u001b[0m
    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m
    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m
    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m
    \u001b[37m+    );\u001b[0m
    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m
    \u001b[37m+read_env_file($env_file);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$act .= 'able';\u001b[0m
    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m
    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m
    \u001b[37m+    $obj    = 'module';\u001b[0m
    \u001b[37m+    $dir    = 'mods';\u001b[0m
    \u001b[37m+    $sffx   = '.load';\u001b[0m
    \u001b[37m+    $reload = 'restart';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m
    \u001b[37m+    $obj    = 'conf';\u001b[0m
    \u001b[37m+    $dir    = 'conf';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+else {\u001b[0m
    \u001b[37m+    $dir    = 'sites';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+$name = ucfirst($obj);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m
    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m
    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m
    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m
    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m
    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $request_reload = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $rc = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m
    \u001b[37m+    my @choices = myglob('*');\u001b[0m
    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m
    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m
    \u001b[37m+    my $input = <>;\u001b[0m
    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my @objs;\u001b[0m
    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m
    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m
    \u001b[37m+    my @glob = myglob($arg);\u001b[0m
    \u001b[37m+    if ( !@glob ) {\u001b[0m
    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m
    \u001b[37m+        $rc = 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        push @objs, @glob;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+foreach my $acton (@objs) {\u001b[0m
    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+info(\u001b[0m
    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m
    \u001b[37m+) if $request_reload;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+exit($rc);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+##############################################################################\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub myglob {\u001b[0m
    \u001b[37m+    my $arg = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my @glob = map {\u001b[0m
    \u001b[37m+        s{^$choicedir/}{};\u001b[0m
    \u001b[37m+        s{$sffx$}{};\u001b[0m
    \u001b[37m+        $_\u001b[0m
    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return @glob;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub doit {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m+            print\u001b[0m
    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m
    \u001b[37m+            $acton = 'cgid';\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m
    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m
    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m
    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m
    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m
    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m
    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m
    \u001b[37m+                unlink($link);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m
    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m
    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m
    \u001b[37m+                    unlink($conflink);\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        if ( $purge ) {\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # handle module dependencies\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m
    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m
    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m
    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m
    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m
    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            my @depending;\u001b[0m
    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m
    \u001b[37m+                my @deps = get_deps($d);\u001b[0m
    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m
    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m
    \u001b[37m+                    push @depending, $1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            if ( scalar @depending ) {\u001b[0m
    \u001b[37m+                if ($force) {\u001b[0m
    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m
    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m
    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                    return 1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m
    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m
    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m
    \u001b[37m+                );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m
    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m
    \u001b[37m+            remove_link($link);\u001b[0m
    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+                remove_link($conflink);\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+            remove_link($conflink);\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m
    \u001b[37m+            if ( $purge ) {\u001b[0m
    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub get_deps {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $fd;\u001b[0m
    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m
    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m
    \u001b[37m+        return;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    my $line;\u001b[0m
    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m
    \u001b[37m+        chomp $line;\u001b[0m
    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m
    \u001b[37m+            my $deps = $1;\u001b[0m
    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m
    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub do_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !doit($d) ) {\u001b[0m
    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warn_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m
    \u001b[37m+            warning(\u001b[0m
    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_conflicts {\u001b[0m
    \u001b[37m+    my $acton    = shift;\u001b[0m
    \u001b[37m+    my $haderror = 0;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m
    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+            error(\u001b[0m
    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m
    \u001b[37m+            $haderror++;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ($haderror) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub add_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # create relative link\u001b[0m
    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m
    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $link ) {\u001b[0m
    \u001b[37m+        if ( -l $link ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # points to nowhere\u001b[0m
    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m
    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 'missing';\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m
    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m
    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 'ok';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub remove_link {\u001b[0m
    \u001b[37m+    my ($link) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -l $link ) {\u001b[0m
    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( -e $link ) {\u001b[0m
    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub threaded {\u001b[0m
    \u001b[37m+    my $result = \"\";\u001b[0m
    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m
    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m
    \u001b[37m+    if ( $? != 0 ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # config doesn't work\u001b[0m
    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m
    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # do what user requested\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub info {\u001b[0m
    \u001b[37m+    print @_ if !$quiet;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub error {\u001b[0m
    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warning {\u001b[0m
    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub is_in {\u001b[0m
    \u001b[37m+    my $needle = shift;\u001b[0m
    \u001b[37m+    foreach my $e (@_) {\u001b[0m
    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 0;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub read_env_file {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    -r $file or return;\u001b[0m
    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m
    \u001b[37m+    if ($?) {\u001b[0m
    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    foreach my $l (@lines) {\u001b[0m
    \u001b[37m+        chomp $l;\u001b[0m
    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m
    \u001b[37m+        $ENV{$1} = $2;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub switch_marker {\u001b[0m
    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m
    \u001b[37m+        if @_ != 3;\u001b[0m
    \u001b[37m+    my $which = shift;\u001b[0m
    \u001b[37m+    my $what  = shift;\u001b[0m
    \u001b[37m+    my $name  = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $mode = \"admin\";\u001b[0m
    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m
    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m
    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m
    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m
    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m
    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m
    \u001b[37m+            || error(\u001b[0m
    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m
    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m
    \u001b[37m+    chomp(@markers);\u001b[0m
    \u001b[37m+    foreach (@markers) {\u001b[0m
    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m
    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    unless ($purge) {\u001b[0m
    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m
    \u001b[37m+        if ( $? != 0 ) {\u001b[0m
    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * link[/usr/sbin/a2disconf] action delete
    \u001b[32m- delete link to file at /usr/sbin/a2disconf\u001b[0m
\u001b[0m  * template[/usr/sbin/a2disconf] action create
    \u001b[32m- create new file /usr/sbin/a2disconf\u001b[0m
    \u001b[32m- update content in file /usr/sbin/a2disconf from none to ce53f4\u001b[0m
    \u001b[37m--- /usr/sbin/a2disconf\t2019-04-23 15:42:46.755506065 +0000\u001b[0m
    \u001b[37m+++ /usr/sbin/.chef-a2disconf20190423-11189-8kmjbl\t2019-04-23 15:42:46.755506065 +0000\u001b[0m
    \u001b[37m@@ -1 +1,533 @@\u001b[0m
    \u001b[37m+#!/usr/bin/perl -w\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m
    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+use strict;\u001b[0m
    \u001b[37m+use Cwd 'realpath';\u001b[0m
    \u001b[37m+use File::Spec;\u001b[0m
    \u001b[37m+use File::Basename;\u001b[0m
    \u001b[37m+use File::Path;\u001b[0m
    \u001b[37m+use Getopt::Long;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $quiet;\u001b[0m
    \u001b[37m+my $force;\u001b[0m
    \u001b[37m+my $maintmode;\u001b[0m
    \u001b[37m+my $purge;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m
    \u001b[37m+GetOptions(\u001b[0m
    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m
    \u001b[37m+    'force|f'     => \\$force,\u001b[0m
    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m
    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m
    \u001b[37m+) or exit 2;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $basename = basename($0);\u001b[0m
    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m
    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m
    \u001b[37m+my $act        = $1;\u001b[0m
    \u001b[37m+my $obj        = $2;\u001b[0m
    \u001b[37m+my $dir_suffix = $3;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m
    \u001b[37m+    || (\u001b[0m
    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m
    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m
    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m
    \u001b[37m+    );\u001b[0m
    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m
    \u001b[37m+read_env_file($env_file);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$act .= 'able';\u001b[0m
    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m
    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m
    \u001b[37m+    $obj    = 'module';\u001b[0m
    \u001b[37m+    $dir    = 'mods';\u001b[0m
    \u001b[37m+    $sffx   = '.load';\u001b[0m
    \u001b[37m+    $reload = 'restart';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m
    \u001b[37m+    $obj    = 'conf';\u001b[0m
    \u001b[37m+    $dir    = 'conf';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+else {\u001b[0m
    \u001b[37m+    $dir    = 'sites';\u001b[0m
    \u001b[37m+    $sffx   = '.conf';\u001b[0m
    \u001b[37m+    $reload = 'reload';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+$name = ucfirst($obj);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m
    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m
    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m
    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m
    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m
    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $request_reload = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my $rc = 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m
    \u001b[37m+    my @choices = myglob('*');\u001b[0m
    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m
    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m
    \u001b[37m+    my $input = <>;\u001b[0m
    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+my @objs;\u001b[0m
    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m
    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m
    \u001b[37m+    my @glob = myglob($arg);\u001b[0m
    \u001b[37m+    if ( !@glob ) {\u001b[0m
    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m
    \u001b[37m+        $rc = 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        push @objs, @glob;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+foreach my $acton (@objs) {\u001b[0m
    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+info(\u001b[0m
    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m
    \u001b[37m+) if $request_reload;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+exit($rc);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+##############################################################################\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub myglob {\u001b[0m
    \u001b[37m+    my $arg = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my @glob = map {\u001b[0m
    \u001b[37m+        s{^$choicedir/}{};\u001b[0m
    \u001b[37m+        s{$sffx$}{};\u001b[0m
    \u001b[37m+        $_\u001b[0m
    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return @glob;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub doit {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m
    \u001b[37m+            print\u001b[0m
    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m
    \u001b[37m+            $acton = 'cgid';\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m
    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m
    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m
    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m
    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m
    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m
    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m
    \u001b[37m+                unlink($link);\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m
    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m
    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m
    \u001b[37m+                    unlink($conflink);\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        if ( $purge ) {\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # handle module dependencies\u001b[0m
    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m
    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m
    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m
    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m
    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m
    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m
    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            my @depending;\u001b[0m
    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m
    \u001b[37m+                my @deps = get_deps($d);\u001b[0m
    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m
    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m
    \u001b[37m+                    push @depending, $1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            if ( scalar @depending ) {\u001b[0m
    \u001b[37m+                if ($force) {\u001b[0m
    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m
    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m
    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m
    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                    return 1;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                else {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            else {\u001b[0m
    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m
    \u001b[37m+                return 1;\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m
    \u001b[37m+            if ($conflink) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+                # handle .conf file\u001b[0m
    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m
    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m
    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m
    \u001b[37m+                    error(\u001b[0m
    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m
    \u001b[37m+                    );\u001b[0m
    \u001b[37m+                    return 0;\u001b[0m
    \u001b[37m+                }\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m
    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m
    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m
    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m
    \u001b[37m+                );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m
    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m
    \u001b[37m+            remove_link($link);\u001b[0m
    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+                remove_link($conflink);\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m
    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m
    \u001b[37m+            remove_link($conflink);\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m
    \u001b[37m+            if ( $purge ) {\u001b[0m
    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m
    \u001b[37m+            }\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub get_deps {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $fd;\u001b[0m
    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m
    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m
    \u001b[37m+        return;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    my $line;\u001b[0m
    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m
    \u001b[37m+        chomp $line;\u001b[0m
    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m
    \u001b[37m+            my $deps = $1;\u001b[0m
    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m
    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub do_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !doit($d) ) {\u001b[0m
    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warn_deps {\u001b[0m
    \u001b[37m+    my $acton = shift;\u001b[0m
    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m
    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m
    \u001b[37m+            warning(\u001b[0m
    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_conflicts {\u001b[0m
    \u001b[37m+    my $acton    = shift;\u001b[0m
    \u001b[37m+    my $haderror = 0;\u001b[0m
    \u001b[37m+    foreach my $d (@_) {\u001b[0m
    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m
    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m
    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m
    \u001b[37m+            error(\u001b[0m
    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m
    \u001b[37m+            );\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m
    \u001b[37m+            $haderror++;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ($haderror) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub add_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # create relative link\u001b[0m
    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m
    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub check_link {\u001b[0m
    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( !-e $link ) {\u001b[0m
    \u001b[37m+        if ( -l $link ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # points to nowhere\u001b[0m
    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m
    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 'missing';\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m
    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m
    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 'ok';\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub remove_link {\u001b[0m
    \u001b[37m+    my ($link) = @_;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    if ( -l $link ) {\u001b[0m
    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( -e $link ) {\u001b[0m
    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    $request_reload = 1;\u001b[0m
    \u001b[37m+    return 1;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub threaded {\u001b[0m
    \u001b[37m+    my $result = \"\";\u001b[0m
    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m
    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m
    \u001b[37m+    if ( $? != 0 ) {\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+        # config doesn't work\u001b[0m
    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m
    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m
    \u001b[37m+        {\u001b[0m
    \u001b[37m+            return 1;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        else {\u001b[0m
    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+            # do what user requested\u001b[0m
    \u001b[37m+            return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m
    \u001b[37m+        return 0;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    else {\u001b[0m
    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub info {\u001b[0m
    \u001b[37m+    print @_ if !$quiet;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub error {\u001b[0m
    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub warning {\u001b[0m
    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub is_in {\u001b[0m
    \u001b[37m+    my $needle = shift;\u001b[0m
    \u001b[37m+    foreach my $e (@_) {\u001b[0m
    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    return 0;\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub read_env_file {\u001b[0m
    \u001b[37m+    my $file = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    -r $file or return;\u001b[0m
    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m
    \u001b[37m+    if ($?) {\u001b[0m
    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    foreach my $l (@lines) {\u001b[0m
    \u001b[37m+        chomp $l;\u001b[0m
    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m
    \u001b[37m+        $ENV{$1} = $2;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+sub switch_marker {\u001b[0m
    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m
    \u001b[37m+        if @_ != 3;\u001b[0m
    \u001b[37m+    my $which = shift;\u001b[0m
    \u001b[37m+    my $what  = shift;\u001b[0m
    \u001b[37m+    my $name  = shift;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    my $mode = \"admin\";\u001b[0m
    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m
    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m
    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m
    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m
    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m
    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m
    \u001b[37m+            || error(\u001b[0m
    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m
    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m
    \u001b[37m+    chomp(@markers);\u001b[0m
    \u001b[37m+    foreach (@markers) {\u001b[0m
    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m
    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+    unless ($purge) {\u001b[0m
    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m
    \u001b[37m+        if ( $? != 0 ) {\u001b[0m
    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m
    \u001b[37m+        }\u001b[0m
    \u001b[37m+        return 1;\u001b[0m
    \u001b[37m+    }\u001b[0m
    \u001b[37m+}\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m
    \u001b[32m- change mode from '' to '0700'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * directory[/etc/apache2/ssl] action create
    \u001b[32m- create new directory /etc/apache2/ssl\u001b[0m
    \u001b[32m- change mode from '' to '0755'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * directory[/var/cache/apache2] action create (up to date)
  * directory[/var/lock/apache2] action create (up to date)
  * template[/etc/sysconfig/apache2] action create (skipped due to only_if)
  * template[/etc/apache2/envvars] action create
    \u001b[32m- update content in file /etc/apache2/envvars from dfc55c to 9962b1\u001b[0m
    \u001b[37m--- /etc/apache2/envvars\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/.chef-envvars20190423-11189-zbsopg\t2019-04-23 15:42:46.775507810 +0000\u001b[0m
    \u001b[37m@@ -3,31 +3,21 @@\u001b[0m
    \u001b[37m # this won't be correct after changing uid\u001b[0m
    \u001b[37m unset HOME\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# for supporting multiple apache2 instances\u001b[0m
    \u001b[37m-if [ \"${APACHE_CONFDIR##/etc/apache2-}\" != \"${APACHE_CONFDIR}\" ] ; then\u001b[0m
    \u001b[37m-\tSUFFIX=\"-${APACHE_CONFDIR##/etc/apache2-}\"\u001b[0m
    \u001b[37m-else\u001b[0m
    \u001b[37m-\tSUFFIX=\u001b[0m
    \u001b[37m-fi\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m # Since there is no sane way to get the parsed apache2 config in scripts, some\u001b[0m
    \u001b[37m # settings are defined via environment variables and then used in apache2ctl,\u001b[0m
    \u001b[37m # /etc/init.d/apache2, /etc/logrotate.d/apache2, etc.\u001b[0m
    \u001b[37m export APACHE_RUN_USER=www-data\u001b[0m
    \u001b[37m export APACHE_RUN_GROUP=www-data\u001b[0m
    \u001b[37m # temporary state file location. This might be changed to /run in Wheezy+1\u001b[0m
    \u001b[37m-export APACHE_PID_FILE=/var/run/apache2/apache2$SUFFIX.pid\u001b[0m
    \u001b[37m-export APACHE_RUN_DIR=/var/run/apache2$SUFFIX\u001b[0m
    \u001b[37m-export APACHE_LOCK_DIR=/var/lock/apache2$SUFFIX\u001b[0m
    \u001b[37m-# Only /var/log/apache2 is handled by /etc/logrotate.d/apache2.\u001b[0m
    \u001b[37m-export APACHE_LOG_DIR=/var/log/apache2$SUFFIX\u001b[0m
    \u001b[37m+export APACHE_PID_FILE=/var/run/apache2/apache2.pid\u001b[0m
    \u001b[37m+export APACHE_RUN_DIR=/var/run/apache2\u001b[0m
    \u001b[37m+export APACHE_LOCK_DIR=/var/lock/apache2\u001b[0m
    \u001b[37m+export APACHE_LOG_DIR=/var/log/apache2\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m ## The locale used by some modules like mod_dav\u001b[0m
    \u001b[37m export LANG=C\u001b[0m
    \u001b[37m-## Uncomment the following line to use the system default locale instead:\u001b[0m
    \u001b[37m-#. /etc/default/locale\u001b[0m
    \u001b[37m+export LC_ALL=C\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-export LANG\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m ## The command to get the status for 'apache2ctl status'.\u001b[0m
    \u001b[37m ## Some packages providing 'www-browser' need '--dump' instead of '-dump'.\u001b[0m
    \u001b[37m@@ -45,4 +35,6 @@\u001b[0m
    \u001b[37m ## This will produce a verbose output on package installations of web server modules and web application\u001b[0m
    \u001b[37m ## installations which interact with Apache\u001b[0m
    \u001b[37m #export APACHE2_MAINTSCRIPT_DEBUG=1\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+APACHE_STATUSURL=http://localhost:80/server-status\u001b[0m
\u001b[0m  * template[apache2.conf] action create
    \u001b[32m- update content in file /etc/apache2/apache2.conf from 17b80a to d11711\u001b[0m
    \u001b[37m--- /etc/apache2/apache2.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/.chef-apache220190423-11189-etc5nu.conf\t2019-04-23 15:42:46.779508158 +0000\u001b[0m
    \u001b[37m@@ -1,84 +1,20 @@\u001b[0m
    \u001b[37m-# This is the main Apache server configuration file.  It contains the\u001b[0m
    \u001b[37m-# configuration directives that give the server its instructions.\u001b[0m
    \u001b[37m-# See http://httpd.apache.org/docs/2.4/ for detailed information about\u001b[0m
    \u001b[37m-# the directives and /usr/share/doc/apache2/README.Debian about Debian specific\u001b[0m
    \u001b[37m-# hints.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m+# Generated by Chef\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-# Summary of how the Apache 2 configuration works in Debian:\u001b[0m
    \u001b[37m-# The Apache 2 web server configuration in Debian is quite different to\u001b[0m
    \u001b[37m-# upstream's suggested way to configure the web server. This is because Debian's\u001b[0m
    \u001b[37m-# default Apache2 installation attempts to make adding and removing modules,\u001b[0m
    \u001b[37m-# virtual hosts, and extra configuration directives as flexible as possible, in\u001b[0m
    \u001b[37m-# order to make automating the changes and administering the server as easy as\u001b[0m
    \u001b[37m-# possible.\u001b[0m
    \u001b[37m+# Based on the Ubuntu apache2.conf\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# It is split into several files forming the configuration hierarchy outlined\u001b[0m
    \u001b[37m-# below, all located in the /etc/apache2/ directory:\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#\t/etc/apache2/\u001b[0m
    \u001b[37m-#\t|-- apache2.conf\u001b[0m
    \u001b[37m-#\t|\t`--  ports.conf\u001b[0m
    \u001b[37m-#\t|-- mods-enabled\u001b[0m
    \u001b[37m-#\t|\t|-- *.load\u001b[0m
    \u001b[37m-#\t|\t`-- *.conf\u001b[0m
    \u001b[37m-#\t|-- conf-enabled\u001b[0m
    \u001b[37m-#\t|\t`-- *.conf\u001b[0m
    \u001b[37m-# \t`-- sites-enabled\u001b[0m
    \u001b[37m-#\t \t`-- *.conf\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# * apache2.conf is the main configuration file (this file). It puts the pieces\u001b[0m
    \u001b[37m-#   together by including all remaining configuration files when starting up the\u001b[0m
    \u001b[37m-#   web server.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# * ports.conf is always included from the main configuration file. It is\u001b[0m
    \u001b[37m-#   supposed to determine listening ports for incoming connections which can be\u001b[0m
    \u001b[37m-#   customized anytime.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# * Configuration files in the mods-enabled/, conf-enabled/ and sites-enabled/\u001b[0m
    \u001b[37m-#   directories contain particular configuration snippets which manage modules,\u001b[0m
    \u001b[37m-#   global configuration fragments, or virtual host configurations,\u001b[0m
    \u001b[37m-#   respectively.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#   They are activated by symlinking available configuration files from their\u001b[0m
    \u001b[37m-#   respective *-available/ counterparts. These should be managed by using our\u001b[0m
    \u001b[37m-#   helpers a2enmod/a2dismod, a2ensite/a2dissite and a2enconf/a2disconf. See\u001b[0m
    \u001b[37m-#   their respective man pages for detailed information.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# * The binary is called apache2. Due to the use of environment variables, in\u001b[0m
    \u001b[37m-#   the default configuration, apache2 needs to be started/stopped with\u001b[0m
    \u001b[37m-#   /etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not\u001b[0m
    \u001b[37m-#   work with the default configuration.\u001b[0m
    \u001b[37m+ServerRoot \"/etc/apache2\"\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# Global configuration\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# ServerRoot: The top of the directory tree under which the server's\u001b[0m
    \u001b[37m-# configuration, error, and log files are kept.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# NOTE!  If you intend to place this on an NFS (or otherwise network)\u001b[0m
    \u001b[37m-# mounted filesystem then please read the Mutex documentation (available\u001b[0m
    \u001b[37m-# at <URL:http://httpd.apache.org/docs/2.4/mod/core.html#mutex>);\u001b[0m
    \u001b[37m-# you will save yourself a lot of trouble.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# Do NOT add a slash at the end of the directory path.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#ServerRoot \"/etc/apache2\"\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m # The accept serialization lock file MUST BE STORED ON A LOCAL DISK.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-Mutex file:${APACHE_LOCK_DIR} default\u001b[0m
    \u001b[37m+Mutex file:/var/lock/apache2 default\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # PidFile: The file in which the server should record its process\u001b[0m
    \u001b[37m # identification number when it starts.\u001b[0m
    \u001b[37m-# This needs to be set in /etc/apache2/envvars\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-PidFile ${APACHE_PID_FILE}\u001b[0m
    \u001b[37m+PidFile /var/run/apache2/apache2.pid\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # Timeout: The number of seconds before receives and sends time out.\u001b[0m
    \u001b[37m@@ -104,12 +40,56 @@\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m KeepAliveTimeout 5\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+#<IfModule unixd_module>\u001b[0m
    \u001b[37m+User www-data\u001b[0m
    \u001b[37m+Group www-data\u001b[0m
    \u001b[37m+#</IfModule>\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# These need to be set in /etc/apache2/envvars\u001b[0m
    \u001b[37m-User ${APACHE_RUN_USER}\u001b[0m
    \u001b[37m-Group ${APACHE_RUN_GROUP}\u001b[0m
    \u001b[37m+# Sets the default security model of the Apache2 HTTPD server. It does\u001b[0m
    \u001b[37m+# not allow access to the root filesystem outside of /usr/share and /var/www/html.\u001b[0m
    \u001b[37m+# If your system is serving content from a sub-directory in /srv you must allow\u001b[0m
    \u001b[37m+# access in conf-enabled, or in any related virtual host. e.g.\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+#  <Directory /srv/>\u001b[0m
    \u001b[37m+#    Options Indexes FollowSymLinks\u001b[0m
    \u001b[37m+#    AllowOverride None\u001b[0m
    \u001b[37m+#    Require all granted\u001b[0m
    \u001b[37m+#  </Directory>\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+<Directory />\u001b[0m
    \u001b[37m+        Options FollowSymLinks\u001b[0m
    \u001b[37m+        AllowOverride None\u001b[0m
    \u001b[37m+        Require all denied\u001b[0m
    \u001b[37m+</Directory>\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+<Directory /usr/share>\u001b[0m
    \u001b[37m+        AllowOverride None\u001b[0m
    \u001b[37m+        Require all granted\u001b[0m
    \u001b[37m+</Directory>\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+<Directory /var/www/html>\u001b[0m
    \u001b[37m+        Options Indexes FollowSymLinks\u001b[0m
    \u001b[37m+        AllowOverride None\u001b[0m
    \u001b[37m+        Require all granted\u001b[0m
    \u001b[37m+</Directory>\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m+# AccessFileName: The name of the file to look for in each directory\u001b[0m
    \u001b[37m+# for additional configuration directives.  See also the AllowOverride\u001b[0m
    \u001b[37m+# directive.\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+AccessFileName .htaccess\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+# The following lines prevent .htaccess and .htpasswd files from being\u001b[0m
    \u001b[37m+# viewed by Web clients.\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+<Files ~ \"^\\.ht\">\u001b[0m
    \u001b[37m+    Require all denied\u001b[0m
    \u001b[37m+</Files>\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m # HostnameLookups: Log the names of clients or just their IP addresses\u001b[0m
    \u001b[37m # e.g., www.apache.org (on) or 204.62.129.132 (off).\u001b[0m
    \u001b[37m # The default is off because it'd be overall better for the net if people\u001b[0m
    \u001b[37m@@ -125,98 +105,40 @@\u001b[0m
    \u001b[37m # logged here.  If you *do* define an error logfile for a <VirtualHost>\u001b[0m
    \u001b[37m # container, that host's errors will be logged there and not here.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-ErrorLog ${APACHE_LOG_DIR}/error.log\u001b[0m
    \u001b[37m+ErrorLog /var/log/apache2/error.log\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-# LogLevel: Control the severity of messages logged to the error_log.\u001b[0m
    \u001b[37m-# Available values: trace8, ..., trace1, debug, info, notice, warn,\u001b[0m
    \u001b[37m-# error, crit, alert, emerg.\u001b[0m
    \u001b[37m-# It is also possible to configure the log level for particular modules, e.g.\u001b[0m
    \u001b[37m-# \"LogLevel info ssl:warn\"\u001b[0m
    \u001b[37m+# LogLevel: Control the number of messages logged to the error_log.\u001b[0m
    \u001b[37m+# Possible values include: debug, info, notice, warn, error, crit,\u001b[0m
    \u001b[37m+# alert, emerg.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m LogLevel warn\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+# COOK-1021: Dummy LoadModule directive to aid module installations\u001b[0m
    \u001b[37m+#LoadModule dummy_module modules/mod_dummy.so\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m # Include module configuration:\u001b[0m
    \u001b[37m-IncludeOptional mods-enabled/*.load\u001b[0m
    \u001b[37m-IncludeOptional mods-enabled/*.conf\u001b[0m
    \u001b[37m+IncludeOptional /etc/apache2/mods-enabled/*.load\u001b[0m
    \u001b[37m+IncludeOptional /etc/apache2/mods-enabled/*.conf\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Include list of ports to listen on\u001b[0m
    \u001b[37m-Include ports.conf\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m+# Include ports listing\u001b[0m
    \u001b[37m+Include /etc/apache2/ports.conf\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Sets the default security model of the Apache2 HTTPD server. It does\u001b[0m
    \u001b[37m-# not allow access to the root filesystem outside of /usr/share and /var/www.\u001b[0m
    \u001b[37m-# The former is used by web applications packaged in Debian,\u001b[0m
    \u001b[37m-# the latter may be used for local directories served by the web server. If\u001b[0m
    \u001b[37m-# your system is serving content from a sub-directory in /srv you must allow\u001b[0m
    \u001b[37m-# access here, or in any related virtual host.\u001b[0m
    \u001b[37m-<Directory />\u001b[0m
    \u001b[37m-\tOptions FollowSymLinks\u001b[0m
    \u001b[37m-\tAllowOverride None\u001b[0m
    \u001b[37m-\tRequire all denied\u001b[0m
    \u001b[37m-</Directory>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-<Directory /usr/share>\u001b[0m
    \u001b[37m-\tAllowOverride None\u001b[0m
    \u001b[37m-\tRequire all granted\u001b[0m
    \u001b[37m-</Directory>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-<Directory /var/www/>\u001b[0m
    \u001b[37m-\tOptions Indexes FollowSymLinks\u001b[0m
    \u001b[37m-\tAllowOverride None\u001b[0m
    \u001b[37m-\tRequire all granted\u001b[0m
    \u001b[37m-</Directory>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#<Directory /srv/>\u001b[0m
    \u001b[37m-#\tOptions Indexes FollowSymLinks\u001b[0m
    \u001b[37m-#\tAllowOverride None\u001b[0m
    \u001b[37m-#\tRequire all granted\u001b[0m
    \u001b[37m-#</Directory>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# AccessFileName: The name of the file to look for in each directory\u001b[0m
    \u001b[37m-# for additional configuration directives.  See also the AllowOverride\u001b[0m
    \u001b[37m-# directive.\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-AccessFileName .htaccess\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# The following lines prevent .htaccess and .htpasswd files from being\u001b[0m
    \u001b[37m-# viewed by Web clients.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-<FilesMatch \"^\\.ht\">\u001b[0m
    \u001b[37m-\tRequire all denied\u001b[0m
    \u001b[37m-</FilesMatch>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m # The following directives define some format nicknames for use with\u001b[0m
    \u001b[37m-# a CustomLog directive.\u001b[0m
    \u001b[37m+# a CustomLog directive (see below).\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-# These deviate from the Common Log Format definitions in that they use %O\u001b[0m
    \u001b[37m-# (the actual bytes sent including headers) instead of %b (the size of the\u001b[0m
    \u001b[37m-# requested file), because the latter makes it impossible to detect partial\u001b[0m
    \u001b[37m-# requests.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# Note that the use of %{X-Forwarded-For}i instead of %h is not recommended.\u001b[0m
    \u001b[37m-# Use mod_remoteip instead.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m LogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\u001b[0m
    \u001b[37m-LogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\u001b[0m
    \u001b[37m-LogFormat \"%h %l %u %t \\\"%r\\\" %>s %O\" common\u001b[0m
    \u001b[37m+LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\u001b[0m
    \u001b[37m+LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\u001b[0m
    \u001b[37m LogFormat \"%{Referer}i -> %U\" referer\u001b[0m
    \u001b[37m LogFormat \"%{User-agent}i\" agent\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-# Include of directories ignores editors' and dpkg's backup files,\u001b[0m
    \u001b[37m-# see README.Debian for details.\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m # Include generic snippets of statements\u001b[0m
    \u001b[37m-IncludeOptional conf-enabled/*.conf\u001b[0m
    \u001b[37m+IncludeOptional /etc/apache2/conf-enabled/*.conf\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m # Include the virtual host configurations:\u001b[0m
    \u001b[37m-IncludeOptional sites-enabled/*.conf\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
    \u001b[37m+IncludeOptional /etc/apache2/sites-enabled/*.conf\u001b[0m
\u001b[0m  * file[/etc/apache2/conf-available/security] action delete (up to date)
  * template[/etc/apache2/conf-available/security.conf] action create
    \u001b[32m- update content in file /etc/apache2/conf-available/security.conf from fc9c6e to b8213b\u001b[0m
    \u001b[37m--- /etc/apache2/conf-available/security.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/conf-available/.chef-security20190423-11189-18tw25a.conf\t2019-04-23 15:42:46.791509205 +0000\u001b[0m
    \u001b[37m@@ -1,16 +1,3 @@\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# Disable access to the entire file system except for the directories that\u001b[0m
    \u001b[37m-# are explicitly allowed later.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# This currently breaks the configurations that come with some web application\u001b[0m
    \u001b[37m-# Debian packages.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#<Directory />\u001b[0m
    \u001b[37m-#   AllowOverride None\u001b[0m
    \u001b[37m-#   Require all denied\u001b[0m
    \u001b[37m-#</Directory>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m # Changing the following options will not really affect the security of the\u001b[0m
    \u001b[37m # server, but might make attacks slightly more difficult in some cases.\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m@@ -21,9 +8,8 @@\u001b[0m
    \u001b[37m # and compiled in modules.\u001b[0m
    \u001b[37m # Set to one of:  Full | OS | Minimal | Minor | Major | Prod\u001b[0m
    \u001b[37m # where Full conveys the most information, and Prod the least.\u001b[0m
    \u001b[37m-#ServerTokens Minimal\u001b[0m
    \u001b[37m-ServerTokens OS\u001b[0m
    \u001b[37m-#ServerTokens Full\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m+ServerTokens Prod\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # Optionally add a line containing the server version and virtual host\u001b[0m
    \u001b[37m@@ -32,7 +18,7 @@\u001b[0m
    \u001b[37m # documents or custom error documents).\u001b[0m
    \u001b[37m # Set to \"EMail\" to also include a mailto: link to the ServerAdmin.\u001b[0m
    \u001b[37m # Set to one of:  On | Off | EMail\u001b[0m
    \u001b[37m-#ServerSignature Off\u001b[0m
    \u001b[37m+#\u001b[0m
    \u001b[37m ServerSignature On\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m@@ -42,33 +28,6 @@\u001b[0m
    \u001b[37m # diagnostic purposes).\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m # Set to one of:  On | Off | extended\u001b[0m
    \u001b[37m-TraceEnable Off\u001b[0m
    \u001b[37m-#TraceEnable On\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m #\u001b[0m
    \u001b[37m-# Forbid access to version control directories\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# If you use version control systems in your document root, you should\u001b[0m
    \u001b[37m-# probably deny access to their directories. For example, for subversion:\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#<DirectoryMatch \"/\\.svn\">\u001b[0m
    \u001b[37m-#   Require all denied\u001b[0m
    \u001b[37m-#</DirectoryMatch>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# Setting this header will prevent MSIE from interpreting files as something\u001b[0m
    \u001b[37m-# else than declared by the content type in the HTTP headers.\u001b[0m
    \u001b[37m-# Requires mod_headers to be enabled.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#Header set X-Content-Type-Options: \"nosniff\"\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-# Setting this header will prevent other sites from embedding pages from this\u001b[0m
    \u001b[37m-# site as frames. This defends against clickjacking attacks.\u001b[0m
    \u001b[37m-# Requires mod_headers to be enabled.\u001b[0m
    \u001b[37m-#\u001b[0m
    \u001b[37m-#Header set X-Frame-Options: \"sameorigin\"\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
    \u001b[37m+TraceEnable Off\u001b[0m
\u001b[0m  * execute[a2enconf security.conf] action run (skipped due to not_if)
  * file[/etc/apache2/conf-available/charset] action delete (up to date)
  * template[/etc/apache2/conf-available/charset.conf] action create
    \u001b[32m- update content in file /etc/apache2/conf-available/charset.conf from 1b4173 to 543c6c\u001b[0m
    \u001b[37m--- /etc/apache2/conf-available/charset.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/conf-available/.chef-charset20190423-11189-g65mqf.conf\t2019-04-23 15:42:46.795509554 +0000\u001b[0m
    \u001b[37m@@ -4,6 +4,4 @@\u001b[0m
    \u001b[37m # in meta http-equiv or xml encoding tags.\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m #AddDefaultCharset UTF-8\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * execute[a2enconf charset.conf] action run (skipped due to not_if)
  * file[/etc/apache2/ports] action delete (up to date)
  * template[/etc/apache2/ports.conf] action create
    \u001b[32m- update content in file /etc/apache2/ports.conf from 9d2d53 to 4d2f2b\u001b[0m
    \u001b[37m--- /etc/apache2/ports.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/.chef-ports20190423-11189-bau2gz.conf\t2019-04-23 15:42:46.799509903 +0000\u001b[0m
    \u001b[37m@@ -1,16 +1,7 @@\u001b[0m
    \u001b[37m-# If you just change the port or add more ports here, you will likely also\u001b[0m
    \u001b[37m-# have to change the VirtualHost statement in\u001b[0m
    \u001b[37m-# /etc/apache2/sites-enabled/000-default.conf\u001b[0m
    \u001b[37m+# This file was generated by Chef for localhost.\u001b[0m
    \u001b[37m+# Do NOT modify this file by hand!\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-Listen 80\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-<IfModule ssl_module>\u001b[0m
    \u001b[37m-\tListen 443\u001b[0m
    \u001b[37m-</IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-<IfModule mod_gnutls.c>\u001b[0m
    \u001b[37m-\tListen 443\u001b[0m
    \u001b[37m-</IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
    \u001b[37m+Listen 139.178.70.138:5000\u001b[0m
    \u001b[37m+Listen 0.0.0.0:80\u001b[0m
    \u001b[37m+Listen 0.0.0.0:443\u001b[0m
\u001b[0mRecipe: apache2::mpm_event\u001b[0m
  * file[/etc/apache2/mods-available/mpm_prefork.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_prefork.load from 827c3b to 0d8639\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/mpm_prefork.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_prefork20190423-11189-ldb63.load\t2019-04-23 15:42:46.803510252 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Conflicts: mpm_event mpm_worker\u001b[0m
    \u001b[37m LoadModule mpm_prefork_module /usr/lib/apache2/modules/mod_mpm_prefork.so\u001b[0m
\u001b[0m  * execute[a2dismod mpm_prefork] action run (skipped due to only_if)
  * file[/etc/apache2/mods-available/mpm_worker.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_worker.load from 48ba3d to 24badb\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/mpm_worker.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_worker20190423-11189-1dnb2oe.load\t2019-04-23 15:42:46.807510601 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Conflicts: mpm_event mpm_prefork\u001b[0m
    \u001b[37m LoadModule mpm_worker_module /usr/lib/apache2/modules/mod_mpm_worker.so\u001b[0m
\u001b[0m  * execute[a2dismod mpm_worker] action run (skipped due to only_if)
  * template[/etc/apache2/mods-available/mpm_event.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_event.conf from 4318a0 to 7be572\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/mpm_event.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_event20190423-11189-n3nqfh.conf\t2019-04-23 15:42:46.811510950 +0000\u001b[0m
    \u001b[37m@@ -1,19 +1,18 @@\u001b[0m
    \u001b[37m # event MPM\u001b[0m
    \u001b[37m-# StartServers: initial number of server processes to start\u001b[0m
    \u001b[37m-# MinSpareThreads: minimum number of worker threads which are kept spare\u001b[0m
    \u001b[37m-# MaxSpareThreads: maximum number of worker threads which are kept spare\u001b[0m
    \u001b[37m-# ThreadsPerChild: constant number of worker threads in each server process\u001b[0m
    \u001b[37m-# MaxRequestWorkers: maximum number of worker threads\u001b[0m
    \u001b[37m-# MaxConnectionsPerChild: maximum number of requests a server process serves\u001b[0m
    \u001b[37m <IfModule mpm_event_module>\u001b[0m
    \u001b[37m-\tStartServers\t\t\t 2\u001b[0m
    \u001b[37m-\tMinSpareThreads\t\t 25\u001b[0m
    \u001b[37m-\tMaxSpareThreads\t\t 75\u001b[0m
    \u001b[37m-\tThreadLimit\t\t\t 64\u001b[0m
    \u001b[37m-\tThreadsPerChild\t\t 25\u001b[0m
    \u001b[37m-\tMaxRequestWorkers\t  150\u001b[0m
    \u001b[37m-\tMaxConnectionsPerChild   0\u001b[0m
    \u001b[37m+  # StartServers: initial number of server processes to start\u001b[0m
    \u001b[37m+  # MinSpareThreads: minimum number of worker threads which are kept spare\u001b[0m
    \u001b[37m+  # MaxSpareThreads: maximum number of worker threads which are kept spare\u001b[0m
    \u001b[37m+  # ThreadsPerChild: constant number of worker threads in each server process\u001b[0m
    \u001b[37m+  # MaxRequestWorkers: maximum number of worker threads\u001b[0m
    \u001b[37m+  # MaxConnectionsPerChild: maximum number of requests a server process serves\u001b[0m
    \u001b[37m+  StartServers           4\u001b[0m
    \u001b[37m+  MinSpareThreads        64\u001b[0m
    \u001b[37m+  MaxSpareThreads        192\u001b[0m
    \u001b[37m+  ThreadsPerChild        64\u001b[0m
    \u001b[37m+  MaxRequestWorkers      1024\u001b[0m
    \u001b[37m+  MaxConnectionsPerChild 0\u001b[0m
    \u001b[37m+  ThreadLimit            192\u001b[0m
    \u001b[37m+  ServerLimit            16\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/mpm_event.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_event.load from 744e65 to 466e14\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/mpm_event.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_event20190423-11189-1bxtlja.load\t2019-04-23 15:42:46.815511298 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Conflicts: mpm_worker mpm_prefork\u001b[0m
    \u001b[37m LoadModule mpm_event_module /usr/lib/apache2/modules/mod_mpm_event.so\u001b[0m
\u001b[0m  * execute[a2enmod mpm_event] action run (skipped due to not_if)
Recipe: apache2::mod_status\u001b[0m
  * template[/etc/apache2/mods-available/status.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/status.conf from 662455 to ed62d0\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/status.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-status20190423-11189-1a7g3nr.conf\t2019-04-23 15:42:46.815511298 +0000\u001b[0m
    \u001b[37m@@ -1,30 +1,31 @@\u001b[0m
    \u001b[37m <IfModule mod_status.c>\u001b[0m
    \u001b[37m-\t# Allow server status reports generated by mod_status,\u001b[0m
    \u001b[37m-\t# with the URL of http://servername/server-status\u001b[0m
    \u001b[37m-\t# Uncomment and change the \"192.0.2.0/24\" to allow access from other hosts.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Allow server status reports generated by mod_status,\u001b[0m
    \u001b[37m+  # with the URL of http://servername/server-status\u001b[0m
    \u001b[37m+  # Uncomment and change the \".example.com\" to allow\u001b[0m
    \u001b[37m+  # access from other hosts.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  <Location /server-status>\u001b[0m
    \u001b[37m+    SetHandler server-status\u001b[0m
    \u001b[37m+    Require local\u001b[0m
    \u001b[37m+    Require ip 127.0.0.1 ::1\u001b[0m
    \u001b[37m+  </Location>\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t<Location /server-status>\u001b[0m
    \u001b[37m-\t\tSetHandler server-status\u001b[0m
    \u001b[37m-\t\tRequire local\u001b[0m
    \u001b[37m-\t\t#Require ip 192.0.2.0/24\u001b[0m
    \u001b[37m-\t</Location>\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # ExtendedStatus controls whether Apache will generate \"full\" status\u001b[0m
    \u001b[37m+  # information (ExtendedStatus On) or just basic information (ExtendedStatus\u001b[0m
    \u001b[37m+  # Off) when the \"server-status\" handler is called. The default is Off.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  ExtendedStatus Off\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t# Keep track of extended status information for each request\u001b[0m
    \u001b[37m-\tExtendedStatus On\u001b[0m
    \u001b[37m+  # Determine if mod_status displays the first 63 characters of a request or\u001b[0m
    \u001b[37m+  # the last 63, assuming the request itself is greater than 63 chars.\u001b[0m
    \u001b[37m+  # Default: Off\u001b[0m
    \u001b[37m+  #SeeRequestTail On\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t# Determine if mod_status displays the first 63 characters of a request or\u001b[0m
    \u001b[37m-\t# the last 63, assuming the request itself is greater than 63 chars.\u001b[0m
    \u001b[37m-\t# Default: Off\u001b[0m
    \u001b[37m-\t#SeeRequestTail On\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\t<IfModule mod_proxy.c>\u001b[0m
    \u001b[37m-\t\t# Show Proxy LoadBalancer status in mod_status\u001b[0m
    \u001b[37m-\t\tProxyStatus On\u001b[0m
    \u001b[37m-\t</IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m+  <IfModule mod_proxy.c>\u001b[0m
    \u001b[37m+     # Show Proxy LoadBalancer status in mod_status\u001b[0m
    \u001b[37m+     ProxyStatus On\u001b[0m
    \u001b[37m+  </IfModule>\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/status.load] action create (up to date)
  * execute[a2enmod status] action run (skipped due to not_if)
Recipe: apache2::mod_alias\u001b[0m
  * template[/etc/apache2/mods-available/alias.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/alias.conf from 51f6f3 to 167573\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/alias.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-alias20190423-11189-1kzl1iq.conf\t2019-04-23 15:42:46.823511997 +0000\u001b[0m
    \u001b[37m@@ -1,25 +1,23 @@\u001b[0m
    \u001b[37m <IfModule alias_module>\u001b[0m
    \u001b[37m-\t# Aliases: Add here as many aliases as you need (with no limit). The format is\u001b[0m
    \u001b[37m-\t# Alias fakename realname\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Note that if you include a trailing / on fakename then the server will\u001b[0m
    \u001b[37m-\t# require it to be present in the URL.  So \"/icons\" isn't aliased in this\u001b[0m
    \u001b[37m-\t# example, only \"/icons/\".  If the fakename is slash-terminated, then the\u001b[0m
    \u001b[37m-\t# realname must also be slash terminated, and if the fakename omits the\u001b[0m
    \u001b[37m-\t# trailing slash, the realname must also omit it.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# We include the /icons/ alias for FancyIndexed directory listings.  If\u001b[0m
    \u001b[37m-\t# you do not use FancyIndexing, you may comment this out.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Aliases: Add here as many aliases as you need (with no limit). The format is\u001b[0m
    \u001b[37m+  # Alias fakename realname\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Note that if you include a trailing / on fakename then the server will\u001b[0m
    \u001b[37m+  # require it to be present in the URL.  So \"/icons\" isn't aliased in this\u001b[0m
    \u001b[37m+  # example, only \"/icons/\".  If the fakename is slash-terminated, then the\u001b[0m
    \u001b[37m+  # realname must also be slash terminated, and if the fakename omits the\u001b[0m
    \u001b[37m+  # trailing slash, the realname must also omit it.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # We include the /icons/ alias for FancyIndexed directory listings.  If\u001b[0m
    \u001b[37m+  # you do not use FancyIndexing, you may comment this out.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  Alias /icons/ \"/usr/share/apache2/icons/\"\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\tAlias /icons/ \"/usr/share/apache2/icons/\"\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\t<Directory \"/usr/share/apache2/icons\">\u001b[0m
    \u001b[37m-\t\tOptions FollowSymlinks\u001b[0m
    \u001b[37m-\t\tAllowOverride None\u001b[0m
    \u001b[37m-\t\tRequire all granted\u001b[0m
    \u001b[37m-\t</Directory>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m+  <Directory \"/usr/share/apache2/icons\">\u001b[0m
    \u001b[37m+    Options Indexes MultiViews\u001b[0m
    \u001b[37m+    AllowOverride None\u001b[0m
    \u001b[37m+    Require all granted\u001b[0m
    \u001b[37m+  </Directory>\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/alias.load] action create (up to date)
  * execute[a2enmod alias] action run (skipped due to not_if)
Recipe: apache2::mod_auth_basic\u001b[0m
  * file[/etc/apache2/mods-available/auth_basic.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/auth_basic.load from a4b933 to 0d1116\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/auth_basic.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-auth_basic20190423-11189-1bufd6.load\t2019-04-23 15:42:46.827512346 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Depends: authn_core\u001b[0m
    \u001b[37m LoadModule auth_basic_module /usr/lib/apache2/modules/mod_auth_basic.so\u001b[0m
\u001b[0m  * execute[a2enmod auth_basic] action run (skipped due to not_if)
Recipe: apache2::mod_authn_core\u001b[0m
  * file[/etc/apache2/mods-available/authn_core.load] action create (up to date)
  * execute[a2enmod authn_core] action run (skipped due to not_if)
Recipe: apache2::mod_authn_file\u001b[0m
  * file[/etc/apache2/mods-available/authn_file.load] action create (up to date)
  * execute[a2enmod authn_file] action run (skipped due to not_if)
Recipe: apache2::mod_authz_core\u001b[0m
  * file[/etc/apache2/mods-available/authz_core.load] action create (up to date)
  * execute[a2enmod authz_core] action run (skipped due to not_if)
Recipe: apache2::mod_authz_groupfile\u001b[0m
  * file[/etc/apache2/mods-available/authz_groupfile.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/authz_groupfile.load from 8bc67b to 214f51\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/authz_groupfile.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-authz_groupfile20190423-11189-nm8cdb.load\t2019-04-23 15:42:46.835513044 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Depends: authz_core\u001b[0m
    \u001b[37m LoadModule authz_groupfile_module /usr/lib/apache2/modules/mod_authz_groupfile.so\u001b[0m
\u001b[0m  * execute[a2enmod authz_groupfile] action run
    \u001b[32m- execute /usr/sbin/a2enmod authz_groupfile\u001b[0m
\u001b[0mRecipe: apache2::mod_authz_host\u001b[0m
  * file[/etc/apache2/mods-available/authz_host.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/authz_host.load from 66e656 to a6f9be\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/authz_host.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-authz_host20190423-11189-nzfw2d.load\t2019-04-23 15:42:46.883517231 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Depends: authz_core\u001b[0m
    \u001b[37m LoadModule authz_host_module /usr/lib/apache2/modules/mod_authz_host.so\u001b[0m
\u001b[0m  * execute[a2enmod authz_host] action run (skipped due to not_if)
Recipe: apache2::mod_authz_user\u001b[0m
  * file[/etc/apache2/mods-available/authz_user.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/authz_user.load from d219d3 to 854c87\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/authz_user.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-authz_user20190423-11189-lvuqhl.load\t2019-04-23 15:42:46.887517579 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Depends: authz_core\u001b[0m
    \u001b[37m LoadModule authz_user_module /usr/lib/apache2/modules/mod_authz_user.so\u001b[0m
\u001b[0m  * execute[a2enmod authz_user] action run (skipped due to not_if)
Recipe: apache2::mod_autoindex\u001b[0m
  * template[/etc/apache2/mods-available/autoindex.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/autoindex.conf from 727807 to 8e7e44\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/autoindex.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-autoindex20190423-11189-1l3omtk.conf\t2019-04-23 15:42:46.895518278 +0000\u001b[0m
    \u001b[37m@@ -1,97 +1,101 @@\u001b[0m
    \u001b[37m <IfModule mod_autoindex.c>\u001b[0m
    \u001b[37m-\t# Directives controlling the display of server-generated directory listings.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Directives controlling the display of server-generated directory listings.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# IndexOptions: Controls the appearance of server-generated directory\u001b[0m
    \u001b[37m-\t# listings.\u001b[0m
    \u001b[37m-\t# Remove/replace the \"Charset=UTF-8\" if you don't use UTF-8 for your filenames.\u001b[0m
    \u001b[37m-\tIndexOptions FancyIndexing VersionSort HTMLTable NameWidth=* DescriptionWidth=* Charset=UTF-8\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # IndexOptions: Controls the appearance of server-generated directory\u001b[0m
    \u001b[37m+  # listings.\u001b[0m
    \u001b[37m+  # Remove/replace the \"Charset=UTF-8\" if you don't use UTF-8 for your filenames.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  IndexOptions FancyIndexing VersionSort HTMLTable NameWidth=* DescriptionWidth=* Charset=UTF-8\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# AddIcon* directives tell the server which icon to show for different\u001b[0m
    \u001b[37m-\t# files or filename extensions.  These are only displayed for\u001b[0m
    \u001b[37m-\t# FancyIndexed directories.\u001b[0m
    \u001b[37m-\tAddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip x-bzip2\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # AddIcon* directives tell the server which icon to show for different\u001b[0m
    \u001b[37m+  # files or filename extensions.  These are only displayed for\u001b[0m
    \u001b[37m+  # FancyIndexed directories.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip x-bzip2\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\tAddIconByType (TXT,/icons/text.gif) text/*\u001b[0m
    \u001b[37m-\tAddIconByType (IMG,/icons/image2.gif) image/*\u001b[0m
    \u001b[37m-\tAddIconByType (SND,/icons/sound2.gif) audio/*\u001b[0m
    \u001b[37m-\tAddIconByType (VID,/icons/movie.gif) video/*\u001b[0m
    \u001b[37m+  AddIconByType (TXT,/icons/text.gif) text/*\u001b[0m
    \u001b[37m+  AddIconByType (IMG,/icons/image2.gif) image/*\u001b[0m
    \u001b[37m+  AddIconByType (SND,/icons/sound2.gif) audio/*\u001b[0m
    \u001b[37m+  AddIconByType (VID,/icons/movie.gif) video/*\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\tAddIcon /icons/binary.gif .bin .exe\u001b[0m
    \u001b[37m-\tAddIcon /icons/binhex.gif .hqx\u001b[0m
    \u001b[37m-\tAddIcon /icons/tar.gif .tar\u001b[0m
    \u001b[37m-\tAddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv\u001b[0m
    \u001b[37m-\tAddIcon /icons/compressed.gif .Z .z .tgz .gz .zip\u001b[0m
    \u001b[37m-\tAddIcon /icons/a.gif .ps .ai .eps\u001b[0m
    \u001b[37m-\tAddIcon /icons/layout.gif .html .shtml .htm .pdf\u001b[0m
    \u001b[37m-\tAddIcon /icons/text.gif .txt\u001b[0m
    \u001b[37m-\tAddIcon /icons/c.gif .c\u001b[0m
    \u001b[37m-\tAddIcon /icons/p.gif .pl .py\u001b[0m
    \u001b[37m-\tAddIcon /icons/f.gif .for\u001b[0m
    \u001b[37m-\tAddIcon /icons/dvi.gif .dvi\u001b[0m
    \u001b[37m-\tAddIcon /icons/uuencoded.gif .uu\u001b[0m
    \u001b[37m-\tAddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl\u001b[0m
    \u001b[37m-\tAddIcon /icons/tex.gif .tex\u001b[0m
    \u001b[37m-\t# It's a suffix rule, so simply matching \"core\" matches \"score\" as well !\u001b[0m
    \u001b[37m-\tAddIcon /icons/bomb.gif /core\u001b[0m
    \u001b[37m-\tAddIcon (SND,/icons/sound2.gif) .ogg\u001b[0m
    \u001b[37m-\tAddIcon (VID,/icons/movie.gif) .ogm\u001b[0m
    \u001b[37m+  AddIcon /icons/binary.gif .bin .exe\u001b[0m
    \u001b[37m+  AddIcon /icons/binhex.gif .hqx\u001b[0m
    \u001b[37m+  AddIcon /icons/tar.gif .tar\u001b[0m
    \u001b[37m+  AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv\u001b[0m
    \u001b[37m+  AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip\u001b[0m
    \u001b[37m+  AddIcon /icons/a.gif .ps .ai .eps\u001b[0m
    \u001b[37m+  AddIcon /icons/layout.gif .html .shtml .htm .pdf\u001b[0m
    \u001b[37m+  AddIcon /icons/text.gif .txt\u001b[0m
    \u001b[37m+  AddIcon /icons/c.gif .c\u001b[0m
    \u001b[37m+  AddIcon /icons/p.gif .pl .py\u001b[0m
    \u001b[37m+  AddIcon /icons/f.gif .for\u001b[0m
    \u001b[37m+  AddIcon /icons/dvi.gif .dvi\u001b[0m
    \u001b[37m+  AddIcon /icons/uuencoded.gif .uu\u001b[0m
    \u001b[37m+  AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl\u001b[0m
    \u001b[37m+  AddIcon /icons/tex.gif .tex\u001b[0m
    \u001b[37m+  # It's a suffix rule, so simply matching \"core\" matches \"score\" as well !\u001b[0m
    \u001b[37m+  AddIcon /icons/bomb.gif /core\u001b[0m
    \u001b[37m+  AddIcon (SND,/icons/sound2.gif) .ogg\u001b[0m
    \u001b[37m+  AddIcon (VID,/icons/movie.gif) .ogm\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\tAddIcon /icons/back.gif ..\u001b[0m
    \u001b[37m-\tAddIcon /icons/hand.right.gif README\u001b[0m
    \u001b[37m-\tAddIcon /icons/folder.gif ^^DIRECTORY^^\u001b[0m
    \u001b[37m-\tAddIcon /icons/blank.gif ^^BLANKICON^^\u001b[0m
    \u001b[37m+  AddIcon /icons/back.gif ..\u001b[0m
    \u001b[37m+  AddIcon /icons/hand.right.gif README\u001b[0m
    \u001b[37m+  AddIcon /icons/folder.gif ^^DIRECTORY^^\u001b[0m
    \u001b[37m+  AddIcon /icons/blank.gif ^^BLANKICON^^\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t# Default icons for OpenDocument format\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odt-20x22.png .odt\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6ods-20x22.png .ods\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odp-20x22.png .odp\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odg-20x22.png .odg\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odc-20x22.png .odc\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odf-20x22.png .odf\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odb-20x22.png .odb\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odi-20x22.png .odi\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6odm-20x22.png .odm\u001b[0m
    \u001b[37m+  # Default icons for OpenDocument format\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odt-20x22.png .odt\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6ods-20x22.png .ods\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odp-20x22.png .odp\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odg-20x22.png .odg\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odc-20x22.png .odc\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odf-20x22.png .odf\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odb-20x22.png .odb\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odi-20x22.png .odi\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6odm-20x22.png .odm\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6ott-20x22.png .ott\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6ots-20x22.png .ots\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6otp-20x22.png .otp\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6otg-20x22.png .otg\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6otc-20x22.png .otc\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6otf-20x22.png .otf\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6oti-20x22.png .oti\u001b[0m
    \u001b[37m-\tAddIcon /icons/odf6oth-20x22.png .oth\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6ott-20x22.png .ott\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6ots-20x22.png .ots\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6otp-20x22.png .otp\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6otg-20x22.png .otg\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6otc-20x22.png .otc\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6otf-20x22.png .otf\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6oti-20x22.png .oti\u001b[0m
    \u001b[37m+  AddIcon /icons/odf6oth-20x22.png .oth\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# DefaultIcon is which icon to show for files which do not have an icon\u001b[0m
    \u001b[37m-\t# explicitly set.\u001b[0m
    \u001b[37m-\tDefaultIcon /icons/unknown.gif\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # DefaultIcon is which icon to show for files which do not have an icon\u001b[0m
    \u001b[37m+  # explicitly set.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  DefaultIcon /icons/unknown.gif\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# AddDescription allows you to place a short description after a file in\u001b[0m
    \u001b[37m-\t# server-generated indexes.  These are only displayed for FancyIndexed\u001b[0m
    \u001b[37m-\t# directories.\u001b[0m
    \u001b[37m-\t# Format: AddDescription \"description\" filename\u001b[0m
    \u001b[37m-\t#AddDescription \"GZIP compressed document\" .gz\u001b[0m
    \u001b[37m-\t#AddDescription \"tar archive\" .tar\u001b[0m
    \u001b[37m-\t#AddDescription \"GZIP compressed tar archive\" .tgz\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # AddDescription allows you to place a short description after a file in\u001b[0m
    \u001b[37m+  # server-generated indexes.  These are only displayed for FancyIndexed\u001b[0m
    \u001b[37m+  # directories.\u001b[0m
    \u001b[37m+  # Format: AddDescription \"description\" filename\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  #AddDescription \"GZIP compressed document\" .gz\u001b[0m
    \u001b[37m+  #AddDescription \"tar archive\" .tar\u001b[0m
    \u001b[37m+  #AddDescription \"GZIP compressed tar archive\" .tgz\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# ReadmeName is the name of the README file the server will look for by\u001b[0m
    \u001b[37m-\t# default, and append to directory listings.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# HeaderName is the name of a file which should be prepended to\u001b[0m
    \u001b[37m-\t# directory indexes\u001b[0m
    \u001b[37m-\tReadmeName README.html\u001b[0m
    \u001b[37m-\tHeaderName HEADER.html\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # ReadmeName is the name of the README file the server will look for by\u001b[0m
    \u001b[37m+  # default, and append to directory listings.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # HeaderName is the name of a file which should be prepended to\u001b[0m
    \u001b[37m+  # directory indexes.\u001b[0m
    \u001b[37m+  ReadmeName README.html\u001b[0m
    \u001b[37m+  HeaderName HEADER.html\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# IndexIgnore is a set of filenames which directory indexing should ignore\u001b[0m
    \u001b[37m-\t# and not include in the listing.  Shell-style wildcarding is permitted.\u001b[0m
    \u001b[37m-\tIndexIgnore .??* *~ *# RCS CVS *,v *,t\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # IndexIgnore is a set of filenames which directory indexing should ignore\u001b[0m
    \u001b[37m+  # and not include in the listing.  Shell-style wildcarding is permitted.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  IndexIgnore .??* *~ *# RCS CVS *,v *,t\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/autoindex.load] action create (up to date)
  * execute[a2enmod autoindex] action run (skipped due to not_if)
Recipe: apache2::mod_deflate\u001b[0m
  * template[/etc/apache2/mods-available/deflate.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/deflate.conf from 7c5c22 to c8749f\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/deflate.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-deflate20190423-11189-1i9nbnz.conf\t2019-04-23 15:42:46.911519673 +0000\u001b[0m
    \u001b[37m@@ -1,15 +1,19 @@\u001b[0m
    \u001b[37m <IfModule mod_deflate.c>\u001b[0m
    \u001b[37m-\t<IfModule mod_filter.c>\u001b[0m
    \u001b[37m-\t\t# these are known to be safe with MSIE 6\u001b[0m
    \u001b[37m-\t\tAddOutputFilterByType DEFLATE text/html text/plain text/xml\u001b[0m
    \u001b[37m+  <IfModule mod_filter.c>\u001b[0m
    \u001b[37m+     # these are known to be safe with MSIE 6\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE text/html text/plain text/xml\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t\t# everything else may cause problems with MSIE 6\u001b[0m
    \u001b[37m-\t\tAddOutputFilterByType DEFLATE text/css\u001b[0m
    \u001b[37m-\t\tAddOutputFilterByType DEFLATE application/x-javascript application/javascript application/ecmascript\u001b[0m
    \u001b[37m-\t\tAddOutputFilterByType DEFLATE application/rss+xml\u001b[0m
    \u001b[37m-\t\tAddOutputFilterByType DEFLATE application/xml\u001b[0m
    \u001b[37m-\t</IfModule>\u001b[0m
    \u001b[37m+     # everything else may cause problems with MSIE 6\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE text/css\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-javascript application/javascript application/ecmascript\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/rss+xml\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/xml\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/xhtml+xml\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE image/svg+xml\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/atom_xml\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-httpd-php\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-httpd-fastphp\u001b[0m
    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-httpd-eruby\u001b[0m
    \u001b[37m+  </IfModule>\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/deflate.load] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/deflate.load from 82ba90 to a9a45c\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/deflate.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-deflate20190423-11189-1ovx2l7.load\t2019-04-23 15:42:46.911519673 +0000\u001b[0m
    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m
    \u001b[37m-# Depends: filter\u001b[0m
    \u001b[37m LoadModule deflate_module /usr/lib/apache2/modules/mod_deflate.so\u001b[0m
\u001b[0m  * execute[a2enmod deflate] action run (skipped due to not_if)
Recipe: apache2::mod_dir\u001b[0m
  * template[/etc/apache2/mods-available/dir.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/dir.conf from f02232 to 5d2651\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/dir.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-dir20190423-11189-1l8u9i6.conf\t2019-04-23 15:42:46.915520023 +0000\u001b[0m
    \u001b[37m@@ -1,6 +1,4 @@\u001b[0m
    \u001b[37m <IfModule mod_dir.c>\u001b[0m
    \u001b[37m-\tDirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm\u001b[0m
    \u001b[37m+  DirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/dir.load] action create (up to date)
  * execute[a2enmod dir] action run (skipped due to not_if)
Recipe: apache2::mod_env\u001b[0m
  * file[/etc/apache2/mods-available/env.load] action create (up to date)
  * execute[a2enmod env] action run (skipped due to not_if)
Recipe: apache2::mod_mime\u001b[0m
  * template[/etc/apache2/mods-available/mime.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/mime.conf from 967722 to 76e7d0\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/mime.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-mime20190423-11189-16sv3ai.conf\t2019-04-23 15:42:46.923520721 +0000\u001b[0m
    \u001b[37m@@ -1,250 +1,193 @@\u001b[0m
    \u001b[37m <IfModule mod_mime.c>\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # TypesConfig points to the file containing the list of mappings from\u001b[0m
    \u001b[37m+  # filename extension to MIME-type.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  TypesConfig /etc/mime.types\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# TypesConfig points to the file containing the list of mappings from\u001b[0m
    \u001b[37m-\t# filename extension to MIME-type.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tTypesConfig /etc/mime.types\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # AddType allows you to add to or override the MIME configuration\u001b[0m
    \u001b[37m+  # file mime.types for specific file types.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  #AddType application/x-gzip .tgz\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # AddEncoding allows you to have certain browsers uncompress\u001b[0m
    \u001b[37m+  # information on the fly. Note: Not all browsers support this.\u001b[0m
    \u001b[37m+  # Despite the name similarity, the following Add* directives have\u001b[0m
    \u001b[37m+  # nothing to do with the FancyIndexing customization directives above.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  #AddEncoding x-compress .Z\u001b[0m
    \u001b[37m+  #AddEncoding x-gzip .gz .tgz\u001b[0m
    \u001b[37m+  #AddEncoding x-bzip2 .bz2\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # If the AddEncoding directives above are commented-out, then you\u001b[0m
    \u001b[37m+  # probably should define those extensions to indicate media types:\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  AddType application/x-compress .Z\u001b[0m
    \u001b[37m+  AddType application/x-gzip .gz .tgz\u001b[0m
    \u001b[37m+  AddType application/x-bzip2 .bz2\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# AddType allows you to add to or override the MIME configuration\u001b[0m
    \u001b[37m-\t# file mime.types for specific file types.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t#AddType application/x-gzip .tgz\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# AddEncoding allows you to have certain browsers uncompress\u001b[0m
    \u001b[37m-\t# information on the fly. Note: Not all browsers support this.\u001b[0m
    \u001b[37m-\t# Despite the name similarity, the following Add* directives have\u001b[0m
    \u001b[37m-\t# nothing to do with the FancyIndexing customization directives above.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t#AddEncoding x-compress .Z\u001b[0m
    \u001b[37m-\t#AddEncoding x-gzip .gz .tgz\u001b[0m
    \u001b[37m-\t#AddEncoding x-bzip2 .bz2\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# If the AddEncoding directives above are commented-out, then you\u001b[0m
    \u001b[37m-\t# probably should define those extensions to indicate media types:\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tAddType application/x-compress .Z\u001b[0m
    \u001b[37m-\tAddType application/x-gzip .gz .tgz\u001b[0m
    \u001b[37m-\tAddType application/x-bzip2 .bz2\u001b[0m
    \u001b[37m+  AddType image/svg+xml svg svgz\u001b[0m
    \u001b[37m+  AddEncoding gzip svgz\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# DefaultLanguage and AddLanguage allows you to specify the language of \u001b[0m
    \u001b[37m-\t# a document. You can then use content negotiation to give a browser a \u001b[0m
    \u001b[37m-\t# file in a language the user can understand.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Specify a default language. This means that all data\u001b[0m
    \u001b[37m-\t# going out without a specific language tag (see below) will \u001b[0m
    \u001b[37m-\t# be marked with this one. You probably do NOT want to set\u001b[0m
    \u001b[37m-\t# this unless you are sure it is correct for all cases.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# * It is generally better to not mark a page as \u001b[0m
    \u001b[37m-\t# * being a certain language than marking it with the wrong\u001b[0m
    \u001b[37m-\t# * language!\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# DefaultLanguage nl\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Note 1: The suffix does not have to be the same as the language\u001b[0m
    \u001b[37m-\t# keyword --- those with documents in Polish (whose net-standard\u001b[0m
    \u001b[37m-\t# language code is pl) may wish to use \"AddLanguage pl .po\" to\u001b[0m
    \u001b[37m-\t# avoid the ambiguity with the common suffix for perl scripts.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Note 2: The example entries below illustrate that in some cases \u001b[0m
    \u001b[37m-\t# the two character 'Language' abbreviation is not identical to \u001b[0m
    \u001b[37m-\t# the two character 'Country' code for its country,\u001b[0m
    \u001b[37m-\t# E.g. 'Danmark/dk' versus 'Danish/da'.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Note 3: In the case of 'ltz' we violate the RFC by using a three char\u001b[0m
    \u001b[37m-\t# specifier. There is 'work in progress' to fix this and get\u001b[0m
    \u001b[37m-\t# the reference data for rfc1766 cleaned up.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Catalan (ca) - Croatian (hr) - Czech (cs) - Danish (da) - Dutch (nl)\u001b[0m
    \u001b[37m-\t# English (en) - Esperanto (eo) - Estonian (et) - French (fr) - German (de)\u001b[0m
    \u001b[37m-\t# Greek-Modern (el) - Hebrew (he) - Italian (it) - Japanese (ja)\u001b[0m
    \u001b[37m-\t# Korean (ko) - Luxembourgeois* (ltz) - Norwegian Nynorsk (nn)\u001b[0m
    \u001b[37m-\t# Norwegian (no) - Polish (pl) - Portugese (pt)\u001b[0m
    \u001b[37m-\t# Brazilian Portuguese (pt-BR) - Russian (ru) - Swedish (sv)\u001b[0m
    \u001b[37m-\t# Simplified Chinese (zh-CN) - Spanish (es) - Traditional Chinese (zh-TW)\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tAddLanguage am .amh\u001b[0m
    \u001b[37m-\tAddLanguage ar .ara\u001b[0m
    \u001b[37m-\tAddLanguage be .be\u001b[0m
    \u001b[37m-\tAddLanguage bg .bg\u001b[0m
    \u001b[37m-\tAddLanguage bn .bn\u001b[0m
    \u001b[37m-\tAddLanguage br .br\u001b[0m
    \u001b[37m-\tAddLanguage bs .bs\u001b[0m
    \u001b[37m-\tAddLanguage ca .ca\u001b[0m
    \u001b[37m-\tAddLanguage cs .cz .cs\u001b[0m
    \u001b[37m-\tAddLanguage cy .cy\u001b[0m
    \u001b[37m-\tAddLanguage da .dk\u001b[0m
    \u001b[37m-\tAddLanguage de .de\u001b[0m
    \u001b[37m-\tAddLanguage dz .dz\u001b[0m
    \u001b[37m-\tAddLanguage el .el\u001b[0m
    \u001b[37m-\tAddLanguage en .en\u001b[0m
    \u001b[37m-\tAddLanguage eo .eo\u001b[0m
    \u001b[37m-\t# es is ecmascript in /etc/mime.types\u001b[0m
    \u001b[37m-\tRemoveType  es\u001b[0m
    \u001b[37m-\tAddLanguage es .es\u001b[0m
    \u001b[37m-\tAddLanguage et .et\u001b[0m
    \u001b[37m-\tAddLanguage eu .eu\u001b[0m
    \u001b[37m-\tAddLanguage fa .fa\u001b[0m
    \u001b[37m-\tAddLanguage fi .fi\u001b[0m
    \u001b[37m-\tAddLanguage fr .fr\u001b[0m
    \u001b[37m-\tAddLanguage ga .ga\u001b[0m
    \u001b[37m-\tAddLanguage gl .glg\u001b[0m
    \u001b[37m-\tAddLanguage gu .gu\u001b[0m
    \u001b[37m-\tAddLanguage he .he\u001b[0m
    \u001b[37m-\tAddLanguage hi .hi\u001b[0m
    \u001b[37m-\tAddLanguage hr .hr\u001b[0m
    \u001b[37m-\tAddLanguage hu .hu\u001b[0m
    \u001b[37m-\tAddLanguage hy .hy\u001b[0m
    \u001b[37m-\tAddLanguage id .id\u001b[0m
    \u001b[37m-\tAddLanguage is .is\u001b[0m
    \u001b[37m-\tAddLanguage it .it\u001b[0m
    \u001b[37m-\tAddLanguage ja .ja\u001b[0m
    \u001b[37m-\tAddLanguage ka .ka\u001b[0m
    \u001b[37m-\tAddLanguage kk .kk\u001b[0m
    \u001b[37m-\tAddLanguage km .km\u001b[0m
    \u001b[37m-\tAddLanguage kn .kn\u001b[0m
    \u001b[37m-\tAddLanguage ko .ko\u001b[0m
    \u001b[37m-\tAddLanguage ku .ku\u001b[0m
    \u001b[37m-\tAddLanguage lo .lo\u001b[0m
    \u001b[37m-\tAddLanguage lt .lt\u001b[0m
    \u001b[37m-\tAddLanguage ltz .ltz\u001b[0m
    \u001b[37m-\tAddLanguage lv .lv\u001b[0m
    \u001b[37m-\tAddLanguage mg .mg\u001b[0m
    \u001b[37m-\tAddLanguage mk .mk\u001b[0m
    \u001b[37m-\tAddLanguage ml .ml\u001b[0m
    \u001b[37m-\tAddLanguage mr .mr\u001b[0m
    \u001b[37m-\tAddLanguage ms .msa\u001b[0m
    \u001b[37m-\tAddLanguage nb .nob\u001b[0m
    \u001b[37m-\tAddLanguage ne .ne\u001b[0m
    \u001b[37m-\tAddLanguage nl .nl\u001b[0m
    \u001b[37m-\tAddLanguage nn .nn\u001b[0m
    \u001b[37m-\tAddLanguage no .no\u001b[0m
    \u001b[37m-\tAddLanguage pa .pa\u001b[0m
    \u001b[37m-\tAddLanguage pl .po\u001b[0m
    \u001b[37m-\tAddLanguage pt-BR .pt-br\u001b[0m
    \u001b[37m-\tAddLanguage pt .pt\u001b[0m
    \u001b[37m-\tAddLanguage ro .ro\u001b[0m
    \u001b[37m-\tAddLanguage ru .ru\u001b[0m
    \u001b[37m-\tAddLanguage sa .sa\u001b[0m
    \u001b[37m-\tAddLanguage se .se\u001b[0m
    \u001b[37m-\tAddLanguage si .si\u001b[0m
    \u001b[37m-\tAddLanguage sk .sk\u001b[0m
    \u001b[37m-\tAddLanguage sl .sl\u001b[0m
    \u001b[37m-\tAddLanguage sq .sq\u001b[0m
    \u001b[37m-\tAddLanguage sr .sr\u001b[0m
    \u001b[37m-\tAddLanguage sv .sv\u001b[0m
    \u001b[37m-\tAddLanguage ta .ta\u001b[0m
    \u001b[37m-\tAddLanguage te .te\u001b[0m
    \u001b[37m-\tAddLanguage th .th\u001b[0m
    \u001b[37m-\tAddLanguage tl .tl\u001b[0m
    \u001b[37m-\tRemoveType  tr\u001b[0m
    \u001b[37m-\t# tr is troff in /etc/mime.types\u001b[0m
    \u001b[37m-\tAddLanguage tr .tr\u001b[0m
    \u001b[37m-\tAddLanguage uk .uk\u001b[0m
    \u001b[37m-\tAddLanguage ur .ur\u001b[0m
    \u001b[37m-\tAddLanguage vi .vi\u001b[0m
    \u001b[37m-\tAddLanguage wo .wo\u001b[0m
    \u001b[37m-\tAddLanguage xh .xh\u001b[0m
    \u001b[37m-\tAddLanguage zh-CN .zh-cn\u001b[0m
    \u001b[37m-\tAddLanguage zh-TW .zh-tw\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # DefaultLanguage and AddLanguage allows you to specify the language of\u001b[0m
    \u001b[37m+  # a document. You can then use content negotiation to give a browser a\u001b[0m
    \u001b[37m+  # file in a language the user can understand.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Specify a default language. This means that all data\u001b[0m
    \u001b[37m+  # going out without a specific language tag (see below) will\u001b[0m
    \u001b[37m+  # be marked with this one. You probably do NOT want to set\u001b[0m
    \u001b[37m+  # this unless you are sure it is correct for all cases.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # * It is generally better to not mark a page as\u001b[0m
    \u001b[37m+  # * being a certain language than marking it with the wrong\u001b[0m
    \u001b[37m+  # * language!\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # DefaultLanguage nl\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Note 1: The suffix does not have to be the same as the language\u001b[0m
    \u001b[37m+  # keyword --- those with documents in Polish (whose net-standard\u001b[0m
    \u001b[37m+  # language code is pl) may wish to use \"AddLanguage pl .po\" to\u001b[0m
    \u001b[37m+  # avoid the ambiguity with the common suffix for perl scripts.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Note 2: The example entries below illustrate that in some cases\u001b[0m
    \u001b[37m+  # the two character 'Language' abbreviation is not identical to\u001b[0m
    \u001b[37m+  # the two character 'Country' code for its country,\u001b[0m
    \u001b[37m+  # E.g. 'Danmark/dk' versus 'Danish/da'.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Note 3: In the case of 'ltz' we violate the RFC by using a three char\u001b[0m
    \u001b[37m+  # specifier. There is 'work in progress' to fix this and get\u001b[0m
    \u001b[37m+  # the reference data for rfc1766 cleaned up.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Catalan (ca) - Croatian (hr) - Czech (cs) - Danish (da) - Dutch (nl)\u001b[0m
    \u001b[37m+  # English (en) - Esperanto (eo) - Estonian (et) - French (fr) - German (de)\u001b[0m
    \u001b[37m+  # Greek-Modern (el) - Hebrew (he) - Italian (it) - Japanese (ja)\u001b[0m
    \u001b[37m+  # Korean (ko) - Luxembourgeois* (ltz) - Norwegian Nynorsk (nn)\u001b[0m
    \u001b[37m+  # Norwegian (no) - Polish (pl) - Portugese (pt)\u001b[0m
    \u001b[37m+  # Brazilian Portuguese (pt-BR) - Russian (ru) - Swedish (sv)\u001b[0m
    \u001b[37m+  # Simplified Chinese (zh-CN) - Spanish (es) - Traditional Chinese (zh-TW)\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  AddLanguage ca .ca\u001b[0m
    \u001b[37m+  AddLanguage cs .cz .cs\u001b[0m
    \u001b[37m+  AddLanguage da .dk\u001b[0m
    \u001b[37m+  AddLanguage de .de\u001b[0m
    \u001b[37m+  AddLanguage el .el\u001b[0m
    \u001b[37m+  AddLanguage en .en\u001b[0m
    \u001b[37m+  AddLanguage eo .eo\u001b[0m
    \u001b[37m+  # See README.Debian for Spanish\u001b[0m
    \u001b[37m+  AddLanguage es .es\u001b[0m
    \u001b[37m+  AddLanguage et .et\u001b[0m
    \u001b[37m+  AddLanguage fr .fr\u001b[0m
    \u001b[37m+  AddLanguage he .he\u001b[0m
    \u001b[37m+  AddLanguage hr .hr\u001b[0m
    \u001b[37m+  AddLanguage it .it\u001b[0m
    \u001b[37m+  AddLanguage ja .ja\u001b[0m
    \u001b[37m+  AddLanguage ko .ko\u001b[0m
    \u001b[37m+  AddLanguage ltz .ltz\u001b[0m
    \u001b[37m+  AddLanguage nl .nl\u001b[0m
    \u001b[37m+  AddLanguage nn .nn\u001b[0m
    \u001b[37m+  AddLanguage no .no\u001b[0m
    \u001b[37m+  AddLanguage pl .po\u001b[0m
    \u001b[37m+  AddLanguage pt .pt\u001b[0m
    \u001b[37m+  AddLanguage pt-BR .pt-br\u001b[0m
    \u001b[37m+  AddLanguage ru .ru\u001b[0m
    \u001b[37m+  AddLanguage sv .sv\u001b[0m
    \u001b[37m+  # See README.Debian for Turkish\u001b[0m
    \u001b[37m+  AddLanguage tr .tr\u001b[0m
    \u001b[37m+  AddLanguage zh-CN .zh-cn\u001b[0m
    \u001b[37m+  AddLanguage zh-TW .zh-tw\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Commonly used filename extensions to character sets. You probably\u001b[0m
    \u001b[37m-\t# want to avoid clashes with the language extensions, unless you\u001b[0m
    \u001b[37m-\t# are good at carefully testing your setup after each change.\u001b[0m
    \u001b[37m-\t# See http://www.iana.org/assignments/character-sets for the\u001b[0m
    \u001b[37m-\t# official list of charset names and their respective RFCs.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tAddCharset us-ascii\t.ascii .us-ascii\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-1  .iso8859-1  .latin1\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-2  .iso8859-2  .latin2 .cen\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-3  .iso8859-3  .latin3\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-4  .iso8859-4  .latin4\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-5  .iso8859-5  .cyr .iso-ru\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-6  .iso8859-6  .arb .arabic\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-7  .iso8859-7  .grk .greek\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-8  .iso8859-8  .heb .hebrew\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-9  .iso8859-9  .latin5 .trk\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-10  .iso8859-10  .latin6\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-13  .iso8859-13\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-14  .iso8859-14  .latin8\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-15  .iso8859-15  .latin9\u001b[0m
    \u001b[37m-\tAddCharset ISO-8859-16  .iso8859-16  .latin10\u001b[0m
    \u001b[37m-\tAddCharset ISO-2022-JP .iso2022-jp .jis\u001b[0m
    \u001b[37m-\tAddCharset ISO-2022-KR .iso2022-kr .kis\u001b[0m
    \u001b[37m-\tAddCharset ISO-2022-CN .iso2022-cn .cis\u001b[0m
    \u001b[37m-\tAddCharset Big5\t\t.Big5\t   .big5 .b5\u001b[0m
    \u001b[37m-\tAddCharset cn-Big5\t .cn-big5\u001b[0m
    \u001b[37m-\t# For russian, more than one charset is used (depends on client, mostly):\u001b[0m
    \u001b[37m-\tAddCharset WINDOWS-1251 .cp-1251   .win-1251\u001b[0m
    \u001b[37m-\tAddCharset CP866\t   .cp866\u001b[0m
    \u001b[37m-\tAddCharset KOI8\t  .koi8\u001b[0m
    \u001b[37m-\tAddCharset KOI8-E\t  .koi8-e\u001b[0m
    \u001b[37m-\tAddCharset KOI8-r\t  .koi8-r .koi8-ru\u001b[0m
    \u001b[37m-\tAddCharset KOI8-U\t  .koi8-u\u001b[0m
    \u001b[37m-\tAddCharset KOI8-ru\t .koi8-uk .ua\u001b[0m
    \u001b[37m-\tAddCharset ISO-10646-UCS-2 .ucs2\u001b[0m
    \u001b[37m-\tAddCharset ISO-10646-UCS-4 .ucs4\u001b[0m
    \u001b[37m-\tAddCharset UTF-7\t   .utf7\u001b[0m
    \u001b[37m-\tAddCharset UTF-8\t   .utf8\u001b[0m
    \u001b[37m-\tAddCharset UTF-16\t  .utf16\u001b[0m
    \u001b[37m-\tAddCharset UTF-16BE\t.utf16be\u001b[0m
    \u001b[37m-\tAddCharset UTF-16LE\t.utf16le\u001b[0m
    \u001b[37m-\tAddCharset UTF-32\t  .utf32\u001b[0m
    \u001b[37m-\tAddCharset UTF-32BE\t.utf32be\u001b[0m
    \u001b[37m-\tAddCharset UTF-32LE\t.utf32le\u001b[0m
    \u001b[37m-\tAddCharset euc-cn\t  .euc-cn\u001b[0m
    \u001b[37m-\tAddCharset euc-gb\t  .euc-gb\u001b[0m
    \u001b[37m-\tAddCharset euc-jp\t  .euc-jp\u001b[0m
    \u001b[37m-\tAddCharset euc-kr\t  .euc-kr\u001b[0m
    \u001b[37m-\t#Not sure how euc-tw got in - IANA doesn't list it???\u001b[0m
    \u001b[37m-\tAddCharset EUC-TW\t  .euc-tw\u001b[0m
    \u001b[37m-\tAddCharset gb2312\t  .gb2312 .gb\u001b[0m
    \u001b[37m-\tAddCharset iso-10646-ucs-2 .ucs-2 .iso-10646-ucs-2\u001b[0m
    \u001b[37m-\tAddCharset iso-10646-ucs-4 .ucs-4 .iso-10646-ucs-4\u001b[0m
    \u001b[37m-\tAddCharset shift_jis   .shift_jis .sjis\u001b[0m
    \u001b[37m-\tAddCharset BRF\t\t .brf\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Commonly used filename extensions to character sets. You probably\u001b[0m
    \u001b[37m+  # want to avoid clashes with the language extensions, unless you\u001b[0m
    \u001b[37m+  # are good at carefully testing your setup after each change.\u001b[0m
    \u001b[37m+  # See http://www.iana.org/assignments/character-sets for the\u001b[0m
    \u001b[37m+  # official list of charset names and their respective RFCs.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  AddCharset us-ascii    .ascii .us-ascii\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-1  .iso8859-1  .latin1\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-3  .iso8859-3  .latin3\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-4  .iso8859-4  .latin4\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-5  .iso8859-5  .cyr .iso-ru\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-6  .iso8859-6  .arb .arabic\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-7  .iso8859-7  .grk .greek\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-8  .iso8859-8  .heb .hebrew\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-9  .iso8859-9  .latin5 .trk\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-10  .iso8859-10  .latin6\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-13  .iso8859-13\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-14  .iso8859-14  .latin8\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-15  .iso8859-15  .latin9\u001b[0m
    \u001b[37m+  AddCharset ISO-8859-16  .iso8859-16  .latin10\u001b[0m
    \u001b[37m+  AddCharset ISO-2022-JP .iso2022-jp .jis\u001b[0m
    \u001b[37m+  AddCharset ISO-2022-KR .iso2022-kr .kis\u001b[0m
    \u001b[37m+  AddCharset ISO-2022-CN .iso2022-cn .cis\u001b[0m
    \u001b[37m+  AddCharset Big5        .Big5       .big5 .b5\u001b[0m
    \u001b[37m+  AddCharset cn-Big5     .cn-big5\u001b[0m
    \u001b[37m+  # For russian, more than one charset is used (depends on client, mostly):\u001b[0m
    \u001b[37m+  AddCharset WINDOWS-1251 .cp-1251   .win-1251\u001b[0m
    \u001b[37m+  AddCharset CP866       .cp866\u001b[0m
    \u001b[37m+  AddCharset KOI8      .koi8\u001b[0m
    \u001b[37m+  AddCharset KOI8-E      .koi8-e\u001b[0m
    \u001b[37m+  AddCharset KOI8-r      .koi8-r .koi8-ru\u001b[0m
    \u001b[37m+  AddCharset KOI8-U      .koi8-u\u001b[0m
    \u001b[37m+  AddCharset KOI8-ru     .koi8-uk .ua\u001b[0m
    \u001b[37m+  AddCharset ISO-10646-UCS-2 .ucs2\u001b[0m
    \u001b[37m+  AddCharset ISO-10646-UCS-4 .ucs4\u001b[0m
    \u001b[37m+  AddCharset UTF-7       .utf7\u001b[0m
    \u001b[37m+  AddCharset UTF-8       .utf8\u001b[0m
    \u001b[37m+  AddCharset UTF-16      .utf16\u001b[0m
    \u001b[37m+  AddCharset UTF-16BE    .utf16be\u001b[0m
    \u001b[37m+  AddCharset UTF-16LE    .utf16le\u001b[0m
    \u001b[37m+  AddCharset UTF-32      .utf32\u001b[0m
    \u001b[37m+  AddCharset UTF-32BE    .utf32be\u001b[0m
    \u001b[37m+  AddCharset UTF-32LE    .utf32le\u001b[0m
    \u001b[37m+  AddCharset euc-cn      .euc-cn\u001b[0m
    \u001b[37m+  AddCharset euc-gb      .euc-gb\u001b[0m
    \u001b[37m+  AddCharset euc-jp      .euc-jp\u001b[0m
    \u001b[37m+  AddCharset euc-kr      .euc-kr\u001b[0m
    \u001b[37m+  #Not sure how euc-tw got in - IANA doesn't list it???\u001b[0m
    \u001b[37m+  AddCharset EUC-TW      .euc-tw\u001b[0m
    \u001b[37m+  AddCharset gb2312      .gb2312 .gb\u001b[0m
    \u001b[37m+  AddCharset iso-10646-ucs-2 .ucs-2 .iso-10646-ucs-2\u001b[0m
    \u001b[37m+  AddCharset iso-10646-ucs-4 .ucs-4 .iso-10646-ucs-4\u001b[0m
    \u001b[37m+  AddCharset shift_jis   .shift_jis .sjis\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# AddHandler allows you to map certain file extensions to \"handlers\":\u001b[0m
    \u001b[37m-\t# actions unrelated to filetype. These can be either built into the server\u001b[0m
    \u001b[37m-\t# or added with the Action directive (see below)\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# To use CGI scripts outside of ScriptAliased directories:\u001b[0m
    \u001b[37m-\t# (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t#AddHandler cgi-script .cgi\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # AddHandler allows you to map certain file extensions to \"handlers\":\u001b[0m
    \u001b[37m+  # actions unrelated to filetype. These can be either built into the server\u001b[0m
    \u001b[37m+  # or added with the Action directive (see below)\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # To use CGI scripts outside of ScriptAliased directories:\u001b[0m
    \u001b[37m+  # (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  #AddHandler cgi-script .cgi\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# For files that include their own HTTP headers:\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t#AddHandler send-as-is asis\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # For files that include their own HTTP headers:\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  #AddHandler send-as-is asis\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# For server-parsed imagemap files:\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t#AddHandler imap-file map\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # For server-parsed imagemap files:\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  #AddHandler imap-file map\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# For type maps (negotiated resources):\u001b[0m
    \u001b[37m-\t# (This is enabled by default to allow the Apache \"It Worked\" page\u001b[0m
    \u001b[37m-\t#  to be distributed in multiple languages.)\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tAddHandler type-map var\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # For type maps (negotiated resources):\u001b[0m
    \u001b[37m+  # (This is enabled by default to allow the Apache \"It Worked\" page\u001b[0m
    \u001b[37m+  #  to be distributed in multiple languages.)\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  AddHandler type-map var\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Filters allow you to process content before it is sent to the client.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# To parse .shtml files for server-side includes (SSI):\u001b[0m
    \u001b[37m-\t# (You will also need to add \"Includes\" to the \"Options\" directive.)\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tAddType text/html .shtml\u001b[0m
    \u001b[37m-\tAddOutputFilter INCLUDES .shtml\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Filters allow you to process content before it is sent to the client.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # To parse .shtml files for server-side includes (SSI):\u001b[0m
    \u001b[37m+  # (You will also need to add \"Includes\" to the \"Options\" directive.)\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  AddType text/html .shtml\u001b[0m
    \u001b[37m+  AddOutputFilter INCLUDES .shtml\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/mime.load] action create (up to date)
  * execute[a2enmod mime] action run (skipped due to not_if)
Recipe: apache2::mod_negotiation\u001b[0m
  * template[/etc/apache2/mods-available/negotiation.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/negotiation.conf from 0649b6 to 3ad8fd\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/negotiation.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-negotiation20190423-11189-1aur8ta.conf\t2019-04-23 15:42:46.939522117 +0000\u001b[0m
    \u001b[37m@@ -1,21 +1,18 @@\u001b[0m
    \u001b[37m <IfModule mod_negotiation.c>\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # LanguagePriority allows you to give precedence to some languages\u001b[0m
    \u001b[37m+  # in case of a tie during content negotiation.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # Just list the languages in decreasing order of preference. We have\u001b[0m
    \u001b[37m+  # more or less alphabetized them here. You probably want to change this.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv tr zh-CN zh-TW\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t# LanguagePriority allows you to give precedence to some languages\u001b[0m
    \u001b[37m-\t# in case of a tie during content negotiation.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# Just list the languages in decreasing order of preference. We have\u001b[0m
    \u001b[37m-\t# more or less alphabetized them here. You probably want to change this.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tLanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv tr zh-CN zh-TW\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# ForceLanguagePriority allows you to serve a result page rather than\u001b[0m
    \u001b[37m-\t# MULTIPLE CHOICES (Prefer) [in case of a tie] or NOT ACCEPTABLE (Fallback)\u001b[0m
    \u001b[37m-\t# [in case no accepted languages matched the available variants]\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tForceLanguagePriority Prefer Fallback\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # ForceLanguagePriority allows you to serve a result page rather than\u001b[0m
    \u001b[37m+  # MULTIPLE CHOICES (Prefer) [in case of a tie] or NOT ACCEPTABLE (Fallback)\u001b[0m
    \u001b[37m+  # [in case no accepted languages matched the available variants]\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  ForceLanguagePriority Prefer Fallback\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/negotiation.load] action create (up to date)
  * execute[a2enmod negotiation] action run (skipped due to not_if)
Recipe: apache2::mod_setenvif\u001b[0m
  * template[/etc/apache2/mods-available/setenvif.conf] action create
    \u001b[32m- update content in file /etc/apache2/mods-available/setenvif.conf from 56aca4 to fb5a27\u001b[0m
    \u001b[37m--- /etc/apache2/mods-available/setenvif.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/mods-available/.chef-setenvif20190423-11189-1c9pdut.conf\t2019-04-23 15:42:46.947522814 +0000\u001b[0m
    \u001b[37m@@ -1,33 +1,29 @@\u001b[0m
    \u001b[37m <IfModule mod_setenvif.c>\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # The following directives modify normal HTTP response behavior to\u001b[0m
    \u001b[37m+  # handle known problems with browser implementations.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  BrowserMatch \"Mozilla/2\" nokeepalive\u001b[0m
    \u001b[37m+  BrowserMatch \"MSIE 4\\.0b2;\" nokeepalive downgrade-1.0 force-response-1.0\u001b[0m
    \u001b[37m+  BrowserMatch \"RealPlayer 4\\.0\" force-response-1.0\u001b[0m
    \u001b[37m+  BrowserMatch \"Java/1\\.0\" force-response-1.0\u001b[0m
    \u001b[37m+  BrowserMatch \"JDK/1\\.0\" force-response-1.0\u001b[0m
    \u001b[37m \u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# The following directives modify normal HTTP response behavior to\u001b[0m
    \u001b[37m-\t# handle known problems with browser implementations.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tBrowserMatch \"Mozilla/2\" nokeepalive\u001b[0m
    \u001b[37m-\tBrowserMatch \"MSIE 4\\.0b2;\" nokeepalive downgrade-1.0 force-response-1.0\u001b[0m
    \u001b[37m-\tBrowserMatch \"RealPlayer 4\\.0\" force-response-1.0\u001b[0m
    \u001b[37m-\tBrowserMatch \"Java/1\\.0\" force-response-1.0\u001b[0m
    \u001b[37m-\tBrowserMatch \"JDK/1\\.0\" force-response-1.0\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\t# The following directive disables redirects on non-GET requests for\u001b[0m
    \u001b[37m-\t# a directory that does not include the trailing slash.  This fixes a\u001b[0m
    \u001b[37m-\t# problem with Microsoft WebFolders which does not appropriately handle\u001b[0m
    \u001b[37m-\t# redirects for folders with DAV methods.\u001b[0m
    \u001b[37m-\t# Same deal with Apple's DAV filesystem and Gnome VFS support for DAV.\u001b[0m
    \u001b[37m-\t#\u001b[0m
    \u001b[37m-\tBrowserMatch \"Microsoft Data Access Internet Publishing Provider\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"MS FrontPage\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"^WebDrive\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"^WebDAVFS/1.[012]\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"^gnome-vfs/1.0\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"^gvfs/1\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"^XML Spy\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \"^Dreamweaver-WebDAV-SCM1\" redirect-carefully\u001b[0m
    \u001b[37m-\tBrowserMatch \" Konqueror/4\" redirect-carefully\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  # The following directive disables redirects on non-GET requests for\u001b[0m
    \u001b[37m+  # a directory that does not include the trailing slash.  This fixes a\u001b[0m
    \u001b[37m+  # problem with Microsoft WebFolders which does not appropriately handle\u001b[0m
    \u001b[37m+  # redirects for folders with DAV methods.\u001b[0m
    \u001b[37m+  # Same deal with Apple's DAV filesystem and Gnome VFS support for DAV.\u001b[0m
    \u001b[37m+  #\u001b[0m
    \u001b[37m+  BrowserMatch \"Microsoft Data Access Internet Publishing Provider\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"MS FrontPage\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"^WebDrive\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"^WebDAVFS/1.[012]\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"^gnome-vfs/1.0\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"^gvfs/1\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"^XML Spy\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \"^Dreamweaver-WebDAV-SCM1\" redirect-carefully\u001b[0m
    \u001b[37m+  BrowserMatch \" Konqueror/4\" redirect-carefully\u001b[0m
    \u001b[37m </IfModule>\u001b[0m
    \u001b[37m-\u001b[0m
    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m
\u001b[0m  * file[/etc/apache2/mods-available/setenvif.load] action create (up to date)
  * execute[a2enmod setenvif] action run (skipped due to not_if)
Recipe: apache2::default\u001b[0m
  * service[apache2] action enable (up to date)
  * service[apache2] action start (up to date)
Recipe: apache2::mod_wsgi\u001b[0m
  * apt_package[libapache2-mod-wsgi] action install
    \u001b[32m- install version 4.3.0-1.1build1 of package libapache2-mod-wsgi\u001b[0m
\u001b[0m  * file[/etc/apache2/conf.d/wsgi.conf] action create (skipped due to only_if)
  * file[/etc/apache2/mods-available/wsgi.load] action create (up to date)
  * execute[a2enmod wsgi] action run (skipped due to not_if)
Recipe: openstack-identity::server-apache\u001b[0m
  * directory[/var/www/html/keystone] action create
    \u001b[32m- create new directory /var/www/html/keystone\u001b[0m
    \u001b[32m- change mode from '' to '0755'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0mRecipe: apache2::mod_rewrite\u001b[0m
  * file[/etc/apache2/mods-available/rewrite.load] action create (up to date)
  * execute[a2enmod rewrite] action run
    \u001b[32m- execute /usr/sbin/a2enmod rewrite\u001b[0m
\u001b[0mRecipe: apache2::mod_headers\u001b[0m
  * file[/etc/apache2/mods-available/headers.load] action create (up to date)
  * execute[a2enmod headers] action run
    \u001b[32m- execute /usr/sbin/a2enmod headers\u001b[0m
\u001b[0mRecipe: openstack-identity::server-apache\u001b[0m
  * template[/etc/apache2/sites-available/identity.conf] action create
    \u001b[32m- create new file /etc/apache2/sites-available/identity.conf\u001b[0m
    \u001b[32m- update content in file /etc/apache2/sites-available/identity.conf from none to d0fe55\u001b[0m
    \u001b[37m--- /etc/apache2/sites-available/identity.conf\t2019-04-23 15:42:53.176064889 +0000\u001b[0m
    \u001b[37m+++ /etc/apache2/sites-available/.chef-identity20190423-11189-waowio.conf\t2019-04-23 15:42:53.176064889 +0000\u001b[0m
    \u001b[37m@@ -1 +1,22 @@\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+# This file is automatically generated by Chef\u001b[0m
    \u001b[37m+# Any changes will be overwritten\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+<VirtualHost 139.178.70.138:5000>\u001b[0m
    \u001b[37m+    WSGIDaemonProcess identity processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}\u001b[0m
    \u001b[37m+    WSGIProcessGroup identity\u001b[0m
    \u001b[37m+    WSGIScriptAlias / /usr/bin/keystone-wsgi-public\u001b[0m
    \u001b[37m+    WSGIApplicationGroup %{GLOBAL}\u001b[0m
    \u001b[37m+    WSGIPassAuthorization On\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    ErrorLogFormat \"%{cu}t %M\"\u001b[0m
    \u001b[37m+    ErrorLog /var/log/apache2/identity.log\u001b[0m
    \u001b[37m+    CustomLog /var/log/apache2/identity_access.log combined\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+    <Directory /usr/bin>\u001b[0m
    \u001b[37m+        Require all granted\u001b[0m
    \u001b[37m+    </Directory>\u001b[0m
    \u001b[37m+\u001b[0m
    \u001b[37m+</VirtualHost>\u001b[0m
    \u001b[32m- change mode from '' to '0644'\u001b[0m
    \u001b[32m- change owner from '' to 'root'\u001b[0m
    \u001b[32m- change group from '' to 'root'\u001b[0m
\u001b[0m  * execute[a2ensite identity.conf] action run
    \u001b[32m- execute /usr/sbin/a2ensite identity.conf\u001b[0m
\u001b[0m  * execute[a2dissite keystone.conf] action run (skipped due to only_if)
  * execute[Keystone apache restart] action run
    \u001b[32m- execute uname\u001b[0m
\u001b[0mRecipe: openstack-dashboard::apache2-server\u001b[0m
  * execute[restore-selinux-context] action run (skipped due to only_if)
Recipe: apache2::default\u001b[0m
  * service[apache2] action restart
    \u001b[32m- restart service service[apache2]\u001b[0m
\u001b[0mRecipe: openstack-dashboard::horizon\u001b[0m
  * file[/usr/share/openstack-dashboard/openstack_dashboard/local/.secret_key_store] action create (skipped due to only_if)
Recipe: openstack-identity::server-apache\u001b[0m
  * execute[restore-selinux-context] action nothing (skipped due to action :nothing)
Recipe: openstack-identity::registration\u001b[0m
  * ruby_block[wait for identity endpoint] action run
    \u001b[0m
    ================================================================================\u001b[0m
    \u001b[31mError executing action `run` on resource 'ruby_block[wait for identity endpoint]'\u001b[0m
    ================================================================================\u001b[0m
    
\u001b[0m    RuntimeError\u001b[0m
    ------------\u001b[0m
    Waited 60 seconds for identity endpoint to become ready and will not wait any longer\u001b[0m
    
\u001b[0m    Cookbook Trace:\u001b[0m
    ---------------\u001b[0m
    /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:62:in `rescue in block (2 levels) in from_file'
\u001b[0m    /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:54:in `block (2 levels) in from_file'\u001b[0m
    
\u001b[0m    Resource Declaration:\u001b[0m
    ---------------------\u001b[0m
    # In /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb
\u001b[0m    
\u001b[0m     52: ruby_block 'wait for identity endpoint' do
\u001b[0m     53:   block do
\u001b[0m     54:     begin
\u001b[0m     55:       Timeout.timeout(60) do
\u001b[0m     56:         until Net::HTTP.get_response(URI(auth_url)).message == 'OK'
\u001b[0m     57:           Chef::Log.info 'waiting for identity endpoint to be up...'
\u001b[0m     58:           sleep 1
\u001b[0m     59:         end
\u001b[0m     60:       end
\u001b[0m     61:     rescue Timeout::Error
\u001b[0m     62:       raise 'Waited 60 seconds for identity endpoint to become ready'\\
\u001b[0m     63:         ' and will not wait any longer'
\u001b[0m     64:     end
\u001b[0m     65:   end
\u001b[0m    
\u001b[0m    Compiled Resource:\u001b[0m
    ------------------\u001b[0m
    # Declared in /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:52:in `from_file'
\u001b[0m    
\u001b[0m    ruby_block(\"wait for identity endpoint\") do
\u001b[0m      action [:run]
\u001b[0m      default_guard_interpreter :default
\u001b[0m      declared_type :ruby_block
\u001b[0m      cookbook_name \"openstack-identity\"
\u001b[0m      recipe_name \"registration\"
\u001b[0m      block #<Proc:0x00000000058a3c48@/root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:53>
\u001b[0m      block_name \"wait for identity endpoint\"
\u001b[0m    end
\u001b[0m    
\u001b[0m    System Info:\u001b[0m
    ------------\u001b[0m
    chef_version=14.4.56
\u001b[0m    platform=ubuntu
\u001b[0m    platform_version=16.04
\u001b[0m    ruby=ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]
\u001b[0m    program_name=/usr/bin/chef-client
\u001b[0m    executable=/opt/chefdk/bin/chef-client\u001b[0m
    
\u001b[0mRecipe: mariadb::server\u001b[0m
  * service[mysql] action restart
    \u001b[32m- restart service service[mysql]\u001b[0m
\u001b[0mRecipe: rabbitmq::default\u001b[0m
  * service[rabbitmq-server] action restart
    \u001b[32m- restart service service[rabbitmq-server]\u001b[0m
\u001b[0mRecipe: apache2::default\u001b[0m
  * service[apache2] action reload
    \u001b[32m- reload service service[apache2]\u001b[0m
\u001b[0mRecipe: openstack-dashboard::horizon\u001b[0m
  * file[/usr/share/openstack-dashboard/openstack_dashboard/local/.secret_key_store] action create (skipped due to only_if)
Recipe: apache2::default\u001b[0m
  * service[apache2] action restart
    \u001b[32m- restart service service[apache2]\u001b[0m
\u001b[0mRecipe: openstack-dashboard::horizon\u001b[0m
  * file[/usr/share/openstack-dashboard/openstack_dashboard/local/.secret_key_store] action create (skipped due to only_if)
\u001b[0m
Running handlers:\u001b[0m
[2019-04-23T15:44:04+00:00] ERROR: Running exception handlers
Running handlers complete
\u001b[0m[2019-04-23T15:44:04+00:00] ERROR: Exception handlers complete
Chef Client failed. 202 resources updated in 05 minutes 39 seconds\u001b[0m
[2019-04-23T15:44:04+00:00] FATAL: Stacktrace dumped to /root/.chef/local-mode-cache/cache/chef-stacktrace.out
[2019-04-23T15:44:04+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
[2019-04-23T15:44:04+00:00] FATAL: RuntimeError: ruby_block[wait for identity endpoint] (openstack-identity::registration line 52) had an error: RuntimeError: Waited 60 seconds for identity endpoint to become ready and will not wait any longer", "stdout_lines": ["[2019-04-23T15:38:24+00:00] WARN: No config file found or specified on command line, using command line options.", "Starting Chef Client, version 14.4.56\u001b[0m", "resolving cookbooks for run list: [\"build-essential\", \"openstack-common\", \"openstack-common::logging\", \"openstack-common::sysctl\", \"openstack-common::python\", \"openstack-common::client\", \"openstack-ops-database::server\", \"openstack-ops-database::openstack-db\", \"openstack-ops-messaging::rabbitmq-server\", \"openstack-identity::server-apache\", \"openstack-identity::registration\", \"openstack-identity::openrc\", \"openstack-image::api\", \"openstack-image::registry\", \"openstack-image::identity_registration\", \"openstack-network\", \"openstack-network::server\", \"openstack-network::ml2_core_plugin\", \"openstack-network::dhcp_agent\", \"openstack-network::metadata_agent\", \"openstack-compute::nova-setup\", \"openstack-compute::identity_registration\", \"openstack-compute::conductor\", \"openstack-compute::api-os-compute\", \"openstack-compute::api-metadata\", \"openstack-compute::placement_api\", \"openstack-compute::scheduler\", \"openstack-compute::vncproxy\", \"openstack-orchestration::engine\", \"openstack-orchestration::api\", \"openstack-orchestration::api-cfn\", \"openstack-orchestration::identity_registration\", \"openstack-image::image_upload\", \"openstack-dashboard::horizon\"]\u001b[0m", "Synchronizing Cookbooks:\u001b[0m", "  - build-essential (8.2.1)\u001b[0m", "  - openstack-common (18.0.0)\u001b[0m", "  - openstack-ops-database (18.0.0)\u001b[0m", "  - openstack-ops-messaging (18.0.0)\u001b[0m", "  - openstack-identity (18.0.0)\u001b[0m", "  - openstack-image (18.0.0)\u001b[0m", "  - openstack-network (18.0.0)\u001b[0m", "  - openstack-compute (18.0.0)\u001b[0m", "  - openstack-orchestration (18.0.0)\u001b[0m", "  - openstack-dashboard (18.0.0)\u001b[0m", "  - seven_zip (3.1.0)\u001b[0m", "  - mingw (2.1.0)\u001b[0m", "  - etcd (5.6.0)\u001b[0m", "  - mariadb (1.5.4)\u001b[0m", "  - memcached (4.1.0)\u001b[0m", "  - mysql (8.5.1)\u001b[0m", "  - poise-python (1.7.0)\u001b[0m", "  - selinux (2.1.1)\u001b[0m", "  - mysql2_chef_gem (2.1.0)\u001b[0m", "  - rabbitmq (5.8.0)\u001b[0m", "  - openstackclient (18.0.0)\u001b[0m", "  - apache2 (5.0.1)\u001b[0m", "  - windows (5.3.0)\u001b[0m", "  - docker (4.9.2)\u001b[0m", "  - apt (7.1.1)\u001b[0m", "  - selinux_policy (2.3.4)\u001b[0m", "  - yum (5.1.0)\u001b[0m", "  - yum-epel (3.3.0)\u001b[0m", "  - yum-scl (0.2.0)\u001b[0m", "  - runit (5.0.1)\u001b[0m", "  - poise (2.8.2)\u001b[0m", "  - poise-languages (2.1.2)\u001b[0m", "  - erlang (7.0.0)\u001b[0m", "  - yum-erlang_solutions (2.0.0)\u001b[0m", "  - dpkg_autostart (0.2.0)\u001b[0m", "  - logrotate (2.2.0)\u001b[0m", "  - inifile_chef_gem (0.1.0)\u001b[0m", "  - packagecloud (1.0.1)\u001b[0m", "  - poise-archive (1.5.0)\u001b[0m", "Installing Cookbook Gems:\u001b[0m", "Compiling Cookbooks...\u001b[0m", "Converging 388 resources\u001b[0m", "Recipe: build-essential::default\u001b[0m", "  * build_essential[install_packages] action install", "    * apt_package[autoconf, binutils-doc, bison, build-essential, flex, gettext, ncurses-dev] action install", "      \u001b[32m- install version 2.69-9 of package autoconf\u001b[0m", "      \u001b[32m- install version 2.26.1-1ubuntu1~16.04.8 of package binutils-doc\u001b[0m", "      \u001b[32m- install version 2:3.0.4.dfsg-1 of package bison\u001b[0m", "      \u001b[32m- install version 2.6.0-11 of package flex\u001b[0m", "      \u001b[32m- install version 0.19.7-2ubuntu3.1 of package gettext\u001b[0m", "      \u001b[32m- install version 6.0+20160213-1ubuntu1 of package ncurses-dev\u001b[0m", "\u001b[0m  ", "\u001b[0mRecipe: openstack-common::default\u001b[0m", "  * apt_update[default] action update", "    \u001b[32m- force update new lists of packages\u001b[0m", "    * directory[/var/lib/apt/periodic] action create (up to date)", "    * directory[/etc/apt/apt.conf.d] action create (up to date)", "    * file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing", "      \u001b[32m- create new file /etc/apt/apt.conf.d/15update-stamp\u001b[0m", "      \u001b[32m- update content in file /etc/apt/apt.conf.d/15update-stamp from none to 174cdb\u001b[0m", "      \u001b[37m--- /etc/apt/apt.conf.d/15update-stamp\t2019-04-23 15:39:21.311945773 +0000\u001b[0m", "      \u001b[37m+++ /etc/apt/apt.conf.d/.chef-15update-stamp20190423-11189-y5fkxc\t2019-04-23 15:39:21.311945773 +0000\u001b[0m", "      \u001b[37m@@ -1 +1,2 @@\u001b[0m", "      \u001b[37m+APT::Update::Post-Invoke-Success {\"touch /var/lib/apt/periodic/update-success-stamp 2>/dev/null || true\";};\u001b[0m", "\u001b[0m    * execute[apt-get -q update] action run", "      \u001b[32m- execute [\"apt-get\", \"-q\", \"update\"]\u001b[0m", "\u001b[0m  ", "\u001b[0m  * file[/etc/apt/apt.conf.d/confdef] action create", "    \u001b[32m- create new file /etc/apt/apt.conf.d/confdef\u001b[0m", "    \u001b[32m- update content in file /etc/apt/apt.conf.d/confdef from none to af5564\u001b[0m", "    \u001b[37m--- /etc/apt/apt.conf.d/confdef\t2019-04-23 15:39:22.788059273 +0000\u001b[0m", "    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-confdef20190423-11189-1shmiza\t2019-04-23 15:39:22.788059273 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,5 @@\u001b[0m", "    \u001b[37m+Dpkg::Options {\u001b[0m", "    \u001b[37m+      \"--force-confdef\";\u001b[0m", "    \u001b[37m+      \"--force-confold\";\u001b[0m", "    \u001b[37m+      }\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * apt_package[ubuntu-cloud-keyring] action upgrade", "    \u001b[32m- upgrade package ubuntu-cloud-keyring from uninstalled to 2012.08.14\u001b[0m", "\u001b[0m  * python_runtime[2] action install", "    * poise_languages_system[python2.7] action install", "       (up to date)", "    * apt_package[python2.7, python2.7-dev] action nothing (skipped due to action :nothing)", "     (up to date)", "  * python_runtime_pip[2] action install", "    * python_package[pip] action upgrade", "      \u001b[32m- upgrade(allow_downgrade) package pip from 8.1.1 to 18.0\u001b[0m", "\u001b[0m  ", "\u001b[0m  * python_package[setuptools] action install", "    \u001b[32m- install version 40.0.0 of package setuptools\u001b[0m", "\u001b[0m  * python_package[wheel] action install", "    \u001b[32m- install version 0.31.1 of package wheel\u001b[0m", "\u001b[0m  * python_package[virtualenv] action install", "    \u001b[32m- install version 16.4.3 of package virtualenv\u001b[0m", "\u001b[0m", "\u001b[0mRecipe: openstack-common::logging\u001b[0m", "  * directory[/etc/openstack] action create", "    \u001b[32m- create new directory /etc/openstack\u001b[0m", "    \u001b[32m- change mode from '' to '0755'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * template[/etc/openstack/logging.conf] action create", "    \u001b[32m- create new file /etc/openstack/logging.conf\u001b[0m", "    \u001b[32m- update content in file /etc/openstack/logging.conf from none to d41178\u001b[0m", "    \u001b[37m--- /etc/openstack/logging.conf\t2019-04-23 15:39:40.233396994 +0000\u001b[0m", "    \u001b[37m+++ /etc/openstack/.chef-logging20190423-11189-1xie8a7.conf\t2019-04-23 15:39:40.233396994 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,135 @@\u001b[0m", "    \u001b[37m+[loggers]\u001b[0m", "    \u001b[37m+keys=root,ceilometer,cinder,glance,horizon,keystone,nova,neutron,trove,amqplib,sqlalchemy,boto,suds,eventletwsgi,nova_api_openstack_wsgi,nova_osapi_compute_wsgi_server\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[formatters]\u001b[0m", "    \u001b[37m+keys=normal,normal_with_name,debug,syslog_with_name,syslog_debug\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[handlers]\u001b[0m", "    \u001b[37m+keys=stderr,devel,prod,debug\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+## LOGGERS ##\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_root]\u001b[0m", "    \u001b[37m+level=NOTSET\u001b[0m", "    \u001b[37m+handlers=devel\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_ceilometer]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=ceilometer\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_cinder]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=cinder\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_glance]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=glance\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_horizon]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=horizon\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_keystone]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=keystone\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_nova]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=nova\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_neutron]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=neutron\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_trove]\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=trove\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_amqplib]\u001b[0m", "    \u001b[37m+level=WARNING\u001b[0m", "    \u001b[37m+handlers=stderr\u001b[0m", "    \u001b[37m+qualname=amqplib\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_sqlalchemy]\u001b[0m", "    \u001b[37m+level=WARNING\u001b[0m", "    \u001b[37m+handlers=stderr\u001b[0m", "    \u001b[37m+qualname=sqlalchemy\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_boto]\u001b[0m", "    \u001b[37m+level=WARNING\u001b[0m", "    \u001b[37m+handlers=stderr\u001b[0m", "    \u001b[37m+qualname=boto\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_suds]\u001b[0m", "    \u001b[37m+level=INFO\u001b[0m", "    \u001b[37m+handlers=stderr\u001b[0m", "    \u001b[37m+qualname=suds\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_eventletwsgi]\u001b[0m", "    \u001b[37m+level=WARNING\u001b[0m", "    \u001b[37m+handlers=stderr\u001b[0m", "    \u001b[37m+qualname=eventlet.wsgi.server\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_nova_api_openstack_wsgi]\u001b[0m", "    \u001b[37m+level=WARNING\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=nova.api.openstack.wsgi\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[logger_nova_osapi_compute_wsgi_server]\u001b[0m", "    \u001b[37m+level=WARNING\u001b[0m", "    \u001b[37m+handlers=prod,debug\u001b[0m", "    \u001b[37m+qualname=nova.osapi_compute.wsgi.server\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+## FORMATTERS ##\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[formatter_normal]\u001b[0m", "    \u001b[37m+format=%(asctime)s %(levelname)s %(message)s\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[formatter_normal_with_name]\u001b[0m", "    \u001b[37m+format=[%(name)s]: %(asctime)s %(levelname)s %(message)s\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[formatter_debug]\u001b[0m", "    \u001b[37m+format=[%(name)s]: %(asctime)s %(levelname)s %(module)s.%(funcName)s %(message)s\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[formatter_syslog_with_name]\u001b[0m", "    \u001b[37m+format=%(name)s: %(levelname)s %(message)s\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[formatter_syslog_debug]\u001b[0m", "    \u001b[37m+format=%(name)s: %(levelname)s %(module)s.%(funcName)s %(message)s\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+## HANDLERS ##\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[handler_stderr]\u001b[0m", "    \u001b[37m+args=(sys.stderr,)\u001b[0m", "    \u001b[37m+class=StreamHandler\u001b[0m", "    \u001b[37m+formatter=debug\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[handler_devel]\u001b[0m", "    \u001b[37m+args=(sys.stdout,)\u001b[0m", "    \u001b[37m+class=StreamHandler\u001b[0m", "    \u001b[37m+formatter=debug\u001b[0m", "    \u001b[37m+level=NOTSET\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[handler_prod]\u001b[0m", "    \u001b[37m+args=(('/dev/log'), handlers.SysLogHandler.LOG_LOCAL0)\u001b[0m", "    \u001b[37m+class=handlers.SysLogHandler\u001b[0m", "    \u001b[37m+formatter=syslog_with_name\u001b[0m", "    \u001b[37m+level=INFO\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[handler_debug]\u001b[0m", "    \u001b[37m+args=(('/dev/log'), handlers.SysLogHandler.LOG_LOCAL1)\u001b[0m", "    \u001b[37m+class=handlers.SysLogHandler\u001b[0m", "    \u001b[37m+formatter=syslog_debug\u001b[0m", "    \u001b[37m+level=DEBUG\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0mRecipe: openstack-common::sysctl\u001b[0m", "  * directory[/etc/sysctl.d] action create (up to date)", "  * template[/etc/sysctl.d/60-openstack.conf] action create", "    \u001b[32m- create new file /etc/sysctl.d/60-openstack.conf\u001b[0m", "    \u001b[32m- update content in file /etc/sysctl.d/60-openstack.conf from none to 8fa39c\u001b[0m", "    \u001b[37m--- /etc/sysctl.d/60-openstack.conf\t2019-04-23 15:39:40.245397911 +0000\u001b[0m", "    \u001b[37m+++ /etc/sysctl.d/.chef-60-openstack20190423-11189-hxg0h4.conf\t2019-04-23 15:39:40.245397911 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,6 @@\u001b[0m", "    \u001b[37m+# Managed by Chef\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+net.ipv4.conf.all.rp_filter = 0\u001b[0m", "    \u001b[37m+net.ipv4.conf.default.rp_filter = 0\u001b[0m", "    \u001b[37m+net.ipv4.ip_forward = 1\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * execute[sysctl -p /etc/sysctl.d/60-openstack.conf] action run", "    \u001b[32m- execute sysctl -p /etc/sysctl.d/60-openstack.conf\u001b[0m", "\u001b[0m  * execute[sysctl -p /etc/sysctl.d/60-openstack.conf] action nothing (skipped due to action :nothing)", "Recipe: openstack-common::python\u001b[0m", "  * python_runtime[3.5] action install", "    * poise_languages_system[python3.5] action install", "       (up to date)", "    * apt_package[python3.5, python3.5-dev] action nothing (skipped due to action :nothing)", "     (up to date)", "  * python_runtime_pip[3.5] action install (up to date)", "  * python_package[setuptools] action install", "    \u001b[32m- install version 40.0.0 of package setuptools\u001b[0m", "\u001b[0m  * python_package[wheel] action install", "    \u001b[32m- install version 0.31.1 of package wheel\u001b[0m", "\u001b[0m", "\u001b[0mRecipe: openstack-common::client\u001b[0m", "  * apt_package[python-openstackclient] action upgrade", "    \u001b[32m- upgrade package python-openstackclient from uninstalled to 2.3.1-0ubuntu1\u001b[0m", "\u001b[0mRecipe: apt::default\u001b[0m", "  * file[/var/lib/apt/periodic/update-success-stamp] action nothing (skipped due to action :nothing)", "  * apt_update[periodic] action periodic (up to date)", "  * execute[apt-get update] action nothing (skipped due to action :nothing)", "  * execute[apt-get autoremove] action nothing (skipped due to action :nothing)", "  * execute[apt-get autoclean] action nothing (skipped due to action :nothing)", "  * directory[/var/cache/local] action create", "    \u001b[32m- create new directory /var/cache/local\u001b[0m", "    \u001b[32m- change mode from '' to '0755'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * directory[/var/cache/local/preseeding] action create", "    \u001b[32m- create new directory /var/cache/local/preseeding\u001b[0m", "    \u001b[32m- change mode from '' to '0755'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * template[/etc/apt/apt.conf.d/10dpkg-options] action create", "    \u001b[32m- create new file /etc/apt/apt.conf.d/10dpkg-options\u001b[0m", "    \u001b[32m- update content in file /etc/apt/apt.conf.d/10dpkg-options from none to c918ac\u001b[0m", "    \u001b[37m--- /etc/apt/apt.conf.d/10dpkg-options\t2019-04-23 15:40:10.815726779 +0000\u001b[0m", "    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-10dpkg-options20190423-11189-11l51es\t2019-04-23 15:40:10.815726779 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,4 @@\u001b[0m", "    \u001b[37m+# Managed by Chef\u001b[0m", "    \u001b[37m+DPkg::Options {\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * template[/etc/apt/apt.conf.d/10recommends] action create", "    \u001b[32m- create new file /etc/apt/apt.conf.d/10recommends\u001b[0m", "    \u001b[32m- update content in file /etc/apt/apt.conf.d/10recommends from none to f41e1d\u001b[0m", "    \u001b[37m--- /etc/apt/apt.conf.d/10recommends\t2019-04-23 15:40:10.819727082 +0000\u001b[0m", "    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-10recommends20190423-11189-re7he5\t2019-04-23 15:40:10.819727082 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,4 @@\u001b[0m", "    \u001b[37m+# Managed by Chef\u001b[0m", "    \u001b[37m+APT::Install-Recommends \"1\";\u001b[0m", "    \u001b[37m+APT::Install-Suggests \"0\";\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * apt_package[apt-transport-https, gnupg, dirmngr] action install", "    \u001b[32m- install version 2.1.11-6ubuntu2.1 of package dirmngr\u001b[0m", "\u001b[0mRecipe: mariadb::repository\u001b[0m", "  * apt_repository[mariadb-10.0] action add", "    * execute[install-key F1656F24C74CD1D8] action run", "      \u001b[32m- execute apt-key adv --recv --keyserver hkp://keyserver.ubuntu.com:80 F1656F24C74CD1D8\u001b[0m", "\u001b[0m    * execute[apt-cache gencaches] action run", "      \u001b[32m- execute [\"apt-cache\", \"gencaches\"]\u001b[0m", "\u001b[0m    * execute[apt-cache gencaches] action nothing (skipped due to action :nothing)", "    * apt_update[mariadb-10.0] action nothing (skipped due to action :nothing)", "    * file[/etc/apt/sources.list.d/mariadb-10.0.list] action create", "      \u001b[32m- create new file /etc/apt/sources.list.d/mariadb-10.0.list\u001b[0m", "      \u001b[32m- update content in file /etc/apt/sources.list.d/mariadb-10.0.list from none to 30fa24\u001b[0m", "      \u001b[37m--- /etc/apt/sources.list.d/mariadb-10.0.list\t2019-04-23 15:40:18.696324196 +0000\u001b[0m", "      \u001b[37m+++ /etc/apt/sources.list.d/.chef-mariadb-1020190423-11189-zsh4hj.0.list\t2019-04-23 15:40:18.696324196 +0000\u001b[0m", "      \u001b[37m@@ -1 +1,2 @@\u001b[0m", "      \u001b[37m+deb      \"http://ftp.igh.cnrs.fr/pub/mariadb/repo/10.0/ubuntu\" xenial main\u001b[0m", "      \u001b[32m- change mode from '' to '0644'\u001b[0m", "      \u001b[32m- change owner from '' to 'root'\u001b[0m", "      \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m    * execute[apt-cache gencaches] action run", "      \u001b[32m- execute [\"apt-cache\", \"gencaches\"]\u001b[0m", "\u001b[0m    * apt_update[mariadb-10.0] action update", "      \u001b[32m- force update new lists of packages\u001b[0m", "      * directory[/var/lib/apt/periodic] action create (up to date)", "      * directory[/etc/apt/apt.conf.d] action create (up to date)", "      * file[/etc/apt/apt.conf.d/15update-stamp] action create_if_missing (up to date)", "      * execute[apt-get -q update] action run", "        \u001b[32m- execute [\"apt-get\", \"-q\", \"update\"]\u001b[0m", "\u001b[0m    ", "\u001b[0m  ", "\u001b[0mRecipe: mariadb::client\u001b[0m", "  * apt_package[MariaDB-client] action install", "    \u001b[32m- install version 10.0.38+maria-1~xenial of package mariadb-client-10.0\u001b[0m", "\u001b[0mRecipe: mariadb::devel\u001b[0m", "  * apt_package[MariaDB-devel] action install", "    \u001b[32m- install version 10.0.38+maria-1~xenial of package libmariadbclient-dev\u001b[0m", "\u001b[0mRecipe: openstack-ops-database::mariadb-client\u001b[0m", "  * mysql2_chef_gem_mysql2_chef_gem_mariadb[default] action install", "    \u001b[32m- evaluate block and run any associated actions\u001b[0m", "    \u001b[32m- evaluate block and run any associated actions\u001b[0m", "    * gem_package[mysql2] action install", "      \u001b[32m- install version 0.4.9 of package mysql2\u001b[0m", "\u001b[0m  ", "\u001b[0m  * apt_package[python-mysqldb] action install", "    \u001b[32m- install version 1.3.7-1build2 of package python-mysqldb\u001b[0m", "\u001b[0mRecipe: mariadb::_debian_server_preinstall\u001b[0m", "  * apt_package[debconf-utils] action install", "    \u001b[32m- install version 1.5.58ubuntu1 of package debconf-utils\u001b[0m", "\u001b[0m  * template[/var/cache/local/preseeding/mariadb-server.seed] action create", "    \u001b[32m- create new file /var/cache/local/preseeding/mariadb-server.seed\u001b[0m", "    \u001b[32m- update content in file /var/cache/local/preseeding/mariadb-server.seed from none to cb6df4\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0600'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * execute[preseed mariadb-server] action run", "    \u001b[32m- execute /usr/bin/debconf-set-selections /var/cache/local/preseeding/mariadb-server.seed\u001b[0m", "\u001b[0m  * execute[preseed mariadb-server] action nothing (skipped due to action :nothing)", "Recipe: mariadb::server\u001b[0m", "  * apt_package[MariaDB-server] action install", "    \u001b[32m- install version 10.0.38+maria-1~xenial of package mariadb-server-10.0\u001b[0m", "\u001b[0m  * ruby_block[restart_mysql] action run", "    \u001b[32m- execute the ruby block restart_mysql\u001b[0m", "\u001b[0mRecipe: mariadb::config\u001b[0m", "  * template[/root/.my.cnf] action create (skipped due to only_if)", "  * template[/etc/mysql/my.cnf] action create", "    \u001b[32m- update content in file /etc/mysql/my.cnf from fa1a1c to 39b39f\u001b[0m", "    \u001b[37m--- /etc/mysql/my.cnf\t2019-01-29 22:07:03.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/mysql/.chef-my20190423-11189-1ljpqni.cnf\t2019-04-23 15:41:30.437714850 +0000\u001b[0m", "    \u001b[37m@@ -1,9 +1,10 @@\u001b[0m", "    \u001b[37m+# DEPLOYED BY CHEF\u001b[0m", "    \u001b[37m # MariaDB database server configuration file.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # You can copy this file to one of:\u001b[0m", "    \u001b[37m # - \"/etc/mysql/my.cnf\" to set global options,\u001b[0m", "    \u001b[37m # - \"~/.my.cnf\" to set user-specific options.\u001b[0m", "    \u001b[37m-# \u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m # One can use all long options that the program supports.\u001b[0m", "    \u001b[37m # Run program with --help to get a list of available options and with\u001b[0m", "    \u001b[37m # --print-defaults to see which it would actually understand and use.\u001b[0m", "    \u001b[37m@@ -37,18 +38,18 @@\u001b[0m", "    \u001b[37m port\t\t= 3306\u001b[0m", "    \u001b[37m basedir\t\t= /usr\u001b[0m", "    \u001b[37m datadir\t\t= /var/lib/mysql\u001b[0m", "    \u001b[37m-tmpdir\t\t= /tmp\u001b[0m", "    \u001b[37m+tmpdir\t\t= /var/tmp\u001b[0m", "    \u001b[37m lc_messages_dir\t= /usr/share/mysql\u001b[0m", "    \u001b[37m lc_messages\t= en_US\u001b[0m", "    \u001b[37m skip-external-locking\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # Instead of skip-networking the default is now to listen only on\u001b[0m", "    \u001b[37m # localhost which is more compatible and is not less secure.\u001b[0m", "    \u001b[37m-bind-address\t\t= 127.0.0.1\u001b[0m", "    \u001b[37m+bind-address\t\t= 139.178.70.138\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # * Fine Tuning\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-max_connections\t\t= 100\u001b[0m", "    \u001b[37m+max_connections\t\t= 307\u001b[0m", "    \u001b[37m connect_timeout\t\t= 5\u001b[0m", "    \u001b[37m wait_timeout\t\t= 600\u001b[0m", "    \u001b[37m max_allowed_packet\t= 16M\u001b[0m", "    \u001b[37m@@ -64,7 +65,6 @@\u001b[0m", "    \u001b[37m # the first time they are touched. On error, make copy and try a repair.\u001b[0m", "    \u001b[37m myisam_recover          = BACKUP\u001b[0m", "    \u001b[37m key_buffer_size\t\t= 128M\u001b[0m", "    \u001b[37m-#open-files-limit\t= 2000\u001b[0m", "    \u001b[37m table_open_cache\t= 400\u001b[0m", "    \u001b[37m myisam_sort_buffer_size\t= 512M\u001b[0m", "    \u001b[37m concurrent_insert\t= 2\u001b[0m", "    \u001b[37m@@ -84,8 +84,8 @@\u001b[0m", "    \u001b[37m # Both location gets rotated by the cronjob.\u001b[0m", "    \u001b[37m # Be aware that this log type is a performance killer.\u001b[0m", "    \u001b[37m # As of 5.1 you can enable the log at runtime!\u001b[0m", "    \u001b[37m-#general_log_file        = /var/log/mysql/mysql.log\u001b[0m", "    \u001b[37m-#general_log             = 1\u001b[0m", "    \u001b[37m+general_log_file        = /var/log/mysql/mysql.log\u001b[0m", "    \u001b[37m+general_log             = 0\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # Error logging goes to syslog due to /etc/mysql/conf.d/mysqld_safe_syslog.cnf.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m@@ -94,10 +94,13 @@\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # Enable the slow query log to see queries with especially long duration\u001b[0m", "    \u001b[37m #slow_query_log[={0|1}]\u001b[0m", "    \u001b[37m+slow_query_log = 0\u001b[0m", "    \u001b[37m slow_query_log_file\t= /var/log/mysql/mariadb-slow.log\u001b[0m", "    \u001b[37m long_query_time = 10\u001b[0m", "    \u001b[37m-#log_slow_rate_limit\t= 1000\u001b[0m", "    \u001b[37m+log_slow_rate_limit\t= 1000\u001b[0m", "    \u001b[37m log_slow_verbosity\t= query_plan\u001b[0m", "    \u001b[37m+# Logging output type\u001b[0m", "    \u001b[37m+log_output = FILE\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #log-queries-not-using-indexes\u001b[0m", "    \u001b[37m #log_slow_admin_statements\u001b[0m", "    \u001b[37m@@ -105,16 +108,11 @@\u001b[0m", "    \u001b[37m # The following can be used as easy to replay backup logs or for replication.\u001b[0m", "    \u001b[37m # note: if you are setting up a replication slave, see README.Debian about\u001b[0m", "    \u001b[37m #       other settings you may need to change.\u001b[0m", "    \u001b[37m-#server-id\t\t= 1\u001b[0m", "    \u001b[37m #report_host\t\t= master1\u001b[0m", "    \u001b[37m #auto_increment_increment = 2\u001b[0m", "    \u001b[37m #auto_increment_offset\t= 1\u001b[0m", "    \u001b[37m-log_bin\t\t\t= /var/log/mysql/mariadb-bin\u001b[0m", "    \u001b[37m-log_bin_index\t\t= /var/log/mysql/mariadb-bin.index\u001b[0m", "    \u001b[37m # not fab for performance, but safer\u001b[0m", "    \u001b[37m #sync_binlog\t\t= 1\u001b[0m", "    \u001b[37m-expire_logs_days\t= 10\u001b[0m", "    \u001b[37m-max_binlog_size         = 100M\u001b[0m", "    \u001b[37m # slaves\u001b[0m", "    \u001b[37m #relay_log\t\t= /var/log/mysql/relay-bin\u001b[0m", "    \u001b[37m #relay_log_index\t= /var/log/mysql/relay-bin.index\u001b[0m", "    \u001b[37m@@ -125,20 +123,9 @@\u001b[0m", "    \u001b[37m # If applications support it, this stricter sql_mode prevents some\u001b[0m", "    \u001b[37m # mistakes like inserting invalid dates etc.\u001b[0m", "    \u001b[37m #sql_mode\t\t= NO_ENGINE_SUBSTITUTION,TRADITIONAL\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# * InnoDB\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\u001b[0m", "    \u001b[37m-# Read the manual for more InnoDB related options. There are many!\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m default_storage_engine\t= InnoDB\u001b[0m", "    \u001b[37m-# you can't just change log file size, requires special procedure\u001b[0m", "    \u001b[37m-#innodb_log_file_size\t= 50M\u001b[0m", "    \u001b[37m-innodb_buffer_pool_size\t= 256M\u001b[0m", "    \u001b[37m-innodb_log_buffer_size\t= 8M\u001b[0m", "    \u001b[37m-innodb_file_per_table\t= 1\u001b[0m", "    \u001b[37m-innodb_open_files\t= 400\u001b[0m", "    \u001b[37m-innodb_io_capacity\t= 400\u001b[0m", "    \u001b[37m-innodb_flush_method\t= O_DIRECT\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # * Security Features\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m@@ -152,10 +139,11 @@\u001b[0m", "    \u001b[37m # ssl-key=/etc/mysql/server-key.pem\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# * Plugins Options\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [mysqldump]\u001b[0m", "    \u001b[37m-quick\u001b[0m", "    \u001b[37m-quote-names\u001b[0m", "    \u001b[37m max_allowed_packet\t= 16M\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [mysql]\u001b[0m", "\u001b[0m  * directory[/etc/mysql/conf.d] action create (skipped due to not_if)", "  * mariadb_configuration[20-innodb] action add", "    * template[/etc/mysql/conf.d/20-innodb.cnf] action create", "      \u001b[32m- create new file /etc/mysql/conf.d/20-innodb.cnf\u001b[0m", "      \u001b[32m- update content in file /etc/mysql/conf.d/20-innodb.cnf from none to 36e5ec\u001b[0m", "      \u001b[32m- suppressed sensitive resource\u001b[0m", "      \u001b[32m- change mode from '' to '0640'\u001b[0m", "      \u001b[32m- change owner from '' to 'root'\u001b[0m", "      \u001b[32m- change group from '' to 'mysql'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * mariadb_configuration[30-replication] action add", "    * template[/etc/mysql/conf.d/30-replication.cnf] action create", "      \u001b[32m- create new file /etc/mysql/conf.d/30-replication.cnf\u001b[0m", "      \u001b[32m- update content in file /etc/mysql/conf.d/30-replication.cnf from none to b2d844\u001b[0m", "      \u001b[32m- suppressed sensitive resource\u001b[0m", "      \u001b[32m- change mode from '' to '0640'\u001b[0m", "      \u001b[32m- change owner from '' to 'root'\u001b[0m", "      \u001b[32m- change group from '' to 'mysql'\u001b[0m", "\u001b[0m  ", "\u001b[0mRecipe: mariadb::server\u001b[0m", "  * directory[/var/log/mysql] action create", "    \u001b[32m- change mode from '02750' to '0755'\u001b[0m", "    \u001b[32m- change group from 'adm' to 'mysql'\u001b[0m", "\u001b[0m  * execute[mariadb-service-restart-needed] action run", "    \u001b[32m- execute true\u001b[0m", "\u001b[0m  * ruby_block[restart_mysql] action run", "    \u001b[32m- execute the ruby block restart_mysql\u001b[0m", "\u001b[0m  * service[mysql] action enable (up to date)", "  * service[mysql] action restart", "    \u001b[32m- restart service service[mysql]\u001b[0m", "\u001b[0m  * ruby_block[restart_mysql] action nothing (skipped due to action :nothing)", "Recipe: mariadb::_mariadb_postinstall\u001b[0m", "  * file[/etc/mysql_root_change] action create", "    \u001b[32m- create new file /etc/mysql_root_change\u001b[0m", "    \u001b[32m- update content in file /etc/mysql_root_change from none to f8cd5c\u001b[0m", "    \u001b[37m--- /etc/mysql_root_change\t2019-04-23 15:41:31.737811823 +0000\u001b[0m", "    \u001b[37m+++ /etc/.chef-mysql_root_change20190423-11189-18rbz0t\t2019-04-23 15:41:31.737811823 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,2 @@\u001b[0m", "    \u001b[37m+a029d0df84eb5549c641e04a9ef389e5\u001b[0m", "\u001b[0m  * execute[install-grants] action run (skipped due to only_if)", "  * execute[install-grants] action nothing (skipped due to action :nothing)", "  * template[/etc/mariadb_grants] action create", "    \u001b[32m- create new file /etc/mariadb_grants\u001b[0m", "    \u001b[32m- update content in file /etc/mariadb_grants from none to b25da0\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0600'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * execute[install-grants] action run", "    \u001b[32m- execute sensitive resource\u001b[0m", "\u001b[0mRecipe: openstack-ops-database::mariadb-server\u001b[0m", "  * template[/etc/mysql/conf.d/openstack.cnf] action create", "    \u001b[32m- create new file /etc/mysql/conf.d/openstack.cnf\u001b[0m", "    \u001b[32m- update content in file /etc/mysql/conf.d/openstack.cnf from none to 3f1fa5\u001b[0m", "    \u001b[37m--- /etc/mysql/conf.d/openstack.cnf\t2019-04-23 15:41:31.789815702 +0000\u001b[0m", "    \u001b[37m+++ /etc/mysql/conf.d/.chef-openstack20190423-11189-167tcq3.cnf\t2019-04-23 15:41:31.789815702 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,19 @@\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# This file is automatically generated by Chef\u001b[0m", "    \u001b[37m+# Any changes will be overwritten\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[mysqld]\u001b[0m", "    \u001b[37m+default-storage-engine = InnoDB\u001b[0m", "    \u001b[37m+innodb_autoinc_lock_mode = 1\u001b[0m", "    \u001b[37m+innodb_file_per_table = OFF\u001b[0m", "    \u001b[37m+innodb_thread_concurrency = 0\u001b[0m", "    \u001b[37m+innodb_commit_concurrency = 0\u001b[0m", "    \u001b[37m+innodb_read_io_threads = 4\u001b[0m", "    \u001b[37m+innodb_flush_log_at_trx_commit = 1\u001b[0m", "    \u001b[37m+innodb_buffer_pool_size = 134217728\u001b[0m", "    \u001b[37m+innodb_log_file_size = 5242880\u001b[0m", "    \u001b[37m+innodb_log_buffer_size = 8388608\u001b[0m", "    \u001b[37m+character-set-server = latin1\u001b[0m", "    \u001b[37m+query_cache_size = 0\u001b[0m", "    \u001b[37m+max_connections = 307\u001b[0m", "    \u001b[32m- change owner from '' to 'mysql'\u001b[0m", "    \u001b[32m- change group from '' to 'mysql'\u001b[0m", "\u001b[0mRecipe: openstack-ops-database::openstack-db\u001b[0m", "  * log[No databag item containing the database password for aodh was found, so no database was created] action write", "  ", "\u001b[0m  * openstack_common_database[bare_metal] action create", "    * database[create database ironic] action create", "      \u001b[32m- Creating schema 'ironic'\u001b[0m", "\u001b[0m    * database_user[create database user ironic] action create", "      \u001b[32m- Creating user 'ironic'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user ironic] action grant", "      \u001b[32m- Granting privs for 'ironic'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[block_storage] action create", "    * database[create database cinder] action create", "      \u001b[32m- Creating schema 'cinder'\u001b[0m", "\u001b[0m    * database_user[create database user cinder] action create", "      \u001b[32m- Creating user 'cinder'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user cinder] action grant", "      \u001b[32m- Granting privs for 'cinder'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[compute] action create", "    * database[create database nova] action create", "      \u001b[32m- Creating schema 'nova'\u001b[0m", "\u001b[0m    * database_user[create database user nova] action create", "      \u001b[32m- Creating user 'nova'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user nova] action grant", "      \u001b[32m- Granting privs for 'nova'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[compute_api] action create", "    * database[create database nova_api] action create", "      \u001b[32m- Creating schema 'nova_api'\u001b[0m", "\u001b[0m    * database_user[create database user nova_api] action create", "      \u001b[32m- Creating user 'nova_api'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user nova_api] action grant", "      \u001b[32m- Granting privs for 'nova_api'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[compute_cell0] action create", "    * database[create database nova_cell0] action create", "      \u001b[32m- Creating schema 'nova_cell0'\u001b[0m", "\u001b[0m    * database_user[create database user nova_cell0] action create", "      \u001b[32m- Creating user 'nova_cell0'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user nova_cell0] action grant", "      \u001b[32m- Granting privs for 'nova_cell0'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[dashboard] action create", "    * database[create database horizon] action create", "      \u001b[32m- Creating schema 'horizon'\u001b[0m", "\u001b[0m    * database_user[create database user horizon] action create", "      \u001b[32m- Creating user 'horizon'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user horizon] action grant", "      \u001b[32m- Granting privs for 'horizon'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * log[No databag item containing the database password for trove was found, so no database was created] action write", "  ", "\u001b[0m  * openstack_common_database[dns] action create", "    * database[create database designate] action create", "      \u001b[32m- Creating schema 'designate'\u001b[0m", "\u001b[0m    * database_user[create database user designate] action create", "      \u001b[32m- Creating user 'designate'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user designate] action grant", "      \u001b[32m- Granting privs for 'designate'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[identity] action create", "    * database[create database keystone] action create", "      \u001b[32m- Creating schema 'keystone'\u001b[0m", "\u001b[0m    * database_user[create database user keystone] action create", "      \u001b[32m- Creating user 'keystone'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user keystone] action grant", "      \u001b[32m- Granting privs for 'keystone'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[image] action create", "    * database[create database glance] action create", "      \u001b[32m- Creating schema 'glance'\u001b[0m", "\u001b[0m    * database_user[create database user glance] action create", "      \u001b[32m- Creating user 'glance'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user glance] action grant", "      \u001b[32m- Granting privs for 'glance'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[network] action create", "    * database[create database neutron] action create", "      \u001b[32m- Creating schema 'neutron'\u001b[0m", "\u001b[0m    * database_user[create database user neutron] action create", "      \u001b[32m- Creating user 'neutron'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user neutron] action grant", "      \u001b[32m- Granting privs for 'neutron'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * log[No databag item containing the database password for swift was found, so no database was created] action write", "  ", "\u001b[0m  * openstack_common_database[orchestration] action create", "    * database[create database heat] action create", "      \u001b[32m- Creating schema 'heat'\u001b[0m", "\u001b[0m    * database_user[create database user heat] action create", "      \u001b[32m- Creating user 'heat'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user heat] action grant", "      \u001b[32m- Granting privs for 'heat'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[telemetry] action create", "    * database[create database ceilometer] action create", "      \u001b[32m- Creating schema 'ceilometer'\u001b[0m", "\u001b[0m    * database_user[create database user ceilometer] action create", "      \u001b[32m- Creating user 'ceilometer'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user ceilometer] action grant", "      \u001b[32m- Granting privs for 'ceilometer'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * openstack_common_database[telemetry_metric] action create", "    * database[create database gnocchi] action create", "      \u001b[32m- Creating schema 'gnocchi'\u001b[0m", "\u001b[0m    * database_user[create database user gnocchi] action create", "      \u001b[32m- Creating user 'gnocchi'@'localhost'\u001b[0m", "\u001b[0m    * database_user[grant database user gnocchi] action grant", "      \u001b[32m- Granting privs for 'gnocchi'@'%'\u001b[0m", "\u001b[0m  ", "\u001b[0m  * log[No databag item containing the database password for murano was found, so no database was created] action write", "  ", "\u001b[0mRecipe: erlang::package\u001b[0m", "  * apt_package[erlang-nox] action install", "    \u001b[32m- install version 1:18.3-dfsg-1ubuntu3.1 of package erlang-nox\u001b[0m", "\u001b[0m  * apt_package[erlang-dev] action install", "    \u001b[32m- install version 1:18.3-dfsg-1ubuntu3.1 of package erlang-dev\u001b[0m", "\u001b[0mRecipe: rabbitmq::default\u001b[0m", "  * directory[/etc/rabbitmq] action create", "    \u001b[32m- create new directory /etc/rabbitmq\u001b[0m", "    \u001b[32m- change mode from '' to '0755'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * template[/etc/apt/apt.conf.d/90forceyes] action create", "    \u001b[32m- create new file /etc/apt/apt.conf.d/90forceyes\u001b[0m", "    \u001b[32m- update content in file /etc/apt/apt.conf.d/90forceyes from none to 2f21e4\u001b[0m", "    \u001b[37m--- /etc/apt/apt.conf.d/90forceyes\t2019-04-23 15:41:47.454982345 +0000\u001b[0m", "    \u001b[37m+++ /etc/apt/apt.conf.d/.chef-90forceyes20190423-11189-clncjg\t2019-04-23 15:41:47.454982345 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,3 @@\u001b[0m", "    \u001b[37m+APT::Get::Assume-Yes \"false\";\u001b[0m", "    \u001b[37m+APT::Get::force-yes \"false\";\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * apt_package[logrotate] action install (up to date)", "  * apt_package[socat] action install (up to date)", "Recipe: <Dynamically Defined Resource>\u001b[0m", "  * dpkg_autostart[bin_file] action create", "    * template[dpkg_autostart_file] action create", "      \u001b[32m- update content in file /usr/sbin/policy-rc.d from c2bcd9 to 13cff7\u001b[0m", "      \u001b[37m--- /usr/sbin/policy-rc.d\t2019-01-22 22:48:14.000000000 +0000\u001b[0m", "      \u001b[37m+++ /usr/sbin/.chef-policy-rc20190423-11189-1wn38l3.d\t2019-04-23 15:41:49.083103414 +0000\u001b[0m", "      \u001b[37m@@ -1,3 +1,83 @@\u001b[0m", "      \u001b[37m-#!/bin/sh\u001b[0m", "      \u001b[37m-exit 101\u001b[0m", "      \u001b[37m+#!/bin/bash\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+DISABLE_ACTIONS=( start restart )\u001b[0m", "      \u001b[37m+DISABLED_SERVICES=( rabbitmq-server )\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+longoptions='quiet,force,try-anyway,disclose-deny,query,no-fallback,help'\u001b[0m", "      \u001b[37m+getopt=$(getopt -o '' --longoptions $longoptions -- \"$@\")\u001b[0m", "      \u001b[37m+if [ $? != 0 ]; then\u001b[0m", "      \u001b[37m+   echo \"ERROR!\"\u001b[0m", "      \u001b[37m+   exit 1;\u001b[0m", "      \u001b[37m+fi\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+eval set -- \"$getopt\"\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+while true; do\u001b[0m", "      \u001b[37m+      case \"$1\" in\u001b[0m", "      \u001b[37m+      --quiet)\u001b[0m", "      \u001b[37m+        QUIET=1\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      --force)\u001b[0m", "      \u001b[37m+        FORCE=1\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      --try-anyway)\u001b[0m", "      \u001b[37m+        TRY_ANYWAY=1\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      --disclose-deny)\u001b[0m", "      \u001b[37m+        DISCLOSE_DENY=1\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      --query)\u001b[0m", "      \u001b[37m+        QUERY=1\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      --no-fallback)\u001b[0m", "      \u001b[37m+        NO_FALLBACK=1\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      --)\u001b[0m", "      \u001b[37m+        shift\u001b[0m", "      \u001b[37m+        break\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      *)\u001b[0m", "      \u001b[37m+        echo \"There should probably be some help text here!\"\u001b[0m", "      \u001b[37m+        exit 1\u001b[0m", "      \u001b[37m+      ;;\u001b[0m", "      \u001b[37m+      esac\u001b[0m", "      \u001b[37m+done\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+SRV_NAME=$1\u001b[0m", "      \u001b[37m+shift\u001b[0m", "      \u001b[37m+SRV_ACTION=$1\u001b[0m", "      \u001b[37m+SRV_ARGS=$*\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+SRV_DISABLED=0\u001b[0m", "      \u001b[37m+ACT_DISABLED=0\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+if [ ! -x \"/etc/init.d/${SRV_NAME}\" ] && [ ! -f \"/etc/init/${SRV_NAME}.conf\" ]; then\u001b[0m", "      \u001b[37m+    exit 100\u001b[0m", "      \u001b[37m+fi\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+for i in \"${DISABLED_SERVICES[@]}\"\u001b[0m", "      \u001b[37m+do\u001b[0m", "      \u001b[37m+    if [ $i = $SRV_NAME ]; then\u001b[0m", "      \u001b[37m+        SRV_DISABLED=1\u001b[0m", "      \u001b[37m+    fi\u001b[0m", "      \u001b[37m+done\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+for i in \"${DISABLE_ACTIONS[@]}\"\u001b[0m", "      \u001b[37m+do\u001b[0m", "      \u001b[37m+    if [ $i = $SRV_ACTION ]; then\u001b[0m", "      \u001b[37m+        ACT_DISABLED=1\u001b[0m", "      \u001b[37m+    fi\u001b[0m", "      \u001b[37m+done\u001b[0m", "      \u001b[37m+\u001b[0m", "      \u001b[37m+if [ $SRV_DISABLED -eq 1 -a $ACT_DISABLED -eq 1 ]; then\u001b[0m", "      \u001b[37m+    exit 101\u001b[0m", "      \u001b[37m+else\u001b[0m", "      \u001b[37m+    exit 104\u001b[0m", "      \u001b[37m+fi\u001b[0m", "\u001b[0m     (up to date)", "Recipe: rabbitmq::default\u001b[0m", "  * dpkg_autostart[rabbitmq-server] action nothing (skipped due to action :nothing)", "  * apt_package[rabbitmq-server] action install", "    \u001b[32m- install version 3.5.7-1ubuntu0.16.04.2 of package rabbitmq-server\u001b[0m", "\u001b[0m  * directory[/var/lib/rabbitmq/mnesia] action create", "    \u001b[32m- change mode from '0755' to '0775'\u001b[0m", "\u001b[0m  * template[/etc/rabbitmq/rabbitmq-env.conf] action create", "    \u001b[32m- update content in file /etc/rabbitmq/rabbitmq-env.conf from 383102 to 80ea5d\u001b[0m", "    \u001b[37m--- /etc/rabbitmq/rabbitmq-env.conf\t2019-04-23 15:41:54.011469685 +0000\u001b[0m", "    \u001b[37m+++ /etc/rabbitmq/.chef-rabbitmq-env20190423-11189-1ogr344.conf\t2019-04-23 15:41:54.347494645 +0000\u001b[0m", "    \u001b[37m@@ -1,14 +1,13 @@\u001b[0m", "    \u001b[37m-# Defaults to rabbit. This can be useful if you want to run more than one node\u001b[0m", "    \u001b[37m-# per machine - RABBITMQ_NODENAME should be unique per erlang-node-and-machine\u001b[0m", "    \u001b[37m-# combination. See the clustering on a single machine guide for details:\u001b[0m", "    \u001b[37m-# http://www.rabbitmq.com/clustering.html#single-machine\u001b[0m", "    \u001b[37m-#NODENAME=rabbit\u001b[0m", "    \u001b[37m+###\u001b[0m", "    \u001b[37m+# Generated by Chef\u001b[0m", "    \u001b[37m+###\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# By default RabbitMQ will bind to all interfaces, on IPv4 and IPv6 if\u001b[0m", "    \u001b[37m-# available. Set this if you only want to bind to one network interface or#\u001b[0m", "    \u001b[37m-# address family.\u001b[0m", "    \u001b[37m-#NODE_IP_ADDRESS=127.0.0.1\u001b[0m", "    \u001b[37m+NODE_IP_ADDRESS=139.178.70.138\u001b[0m", "    \u001b[37m+NODENAME=admin@openstack-mstr1\u001b[0m", "    \u001b[37m+NODE_PORT=5672\u001b[0m", "    \u001b[37m+CONFIG_FILE=/etc/rabbitmq/rabbitmq.config\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Defaults to 5672.\u001b[0m", "    \u001b[37m-#NODE_PORT=5672\u001b[0m", "    \u001b[37m+MNESIA_BASE=/var/lib/rabbitmq/mnesia\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[32m- change owner from 'rabbitmq' to 'root'\u001b[0m", "    \u001b[32m- change group from 'rabbitmq' to 'root'\u001b[0m", "\u001b[0m  * template[/etc/rabbitmq/rabbitmq.config] action create", "    \u001b[32m- create new file /etc/rabbitmq/rabbitmq.config\u001b[0m", "    \u001b[32m- update content in file /etc/rabbitmq/rabbitmq.config from none to 3870dc\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * template[/etc/default/rabbitmq-server] action create", "    \u001b[32m- update content in file /etc/default/rabbitmq-server from 554eee to 2b28a9\u001b[0m", "    \u001b[37m--- /etc/default/rabbitmq-server\t2016-01-18 14:05:55.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/default/.chef-rabbitmq-server20190423-11189-1nq75r8\t2019-04-23 15:41:54.359495537 +0000\u001b[0m", "    \u001b[37m@@ -1,10 +1,12 @@\u001b[0m", "    \u001b[37m+###\u001b[0m", "    \u001b[37m+# Generated by Chef\u001b[0m", "    \u001b[37m+###\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m # This file is sourced by /etc/init.d/rabbitmq-server. Its primary\u001b[0m", "    \u001b[37m-# reason for existing is to allow adjustment of system limits for the\u001b[0m", "    \u001b[37m+# reason for existing is to allow minor system and environment adjustment for the\u001b[0m", "    \u001b[37m # rabbitmq-server process.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-# Maximum number of open file handles. This will need to be increased\u001b[0m", "    \u001b[37m-# to handle many simultaneous connections. Refer to the system\u001b[0m", "    \u001b[37m-# documentation for ulimit (in man bash) for more information.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#ulimit -n 1024\u001b[0m", "    \u001b[37m+# On modern distributions system limits are managed by systemd, see rabbitmq:systemd_limits and\u001b[0m", "    \u001b[37m+# https://www.rabbitmq.com/networking.html#open-file-handle-limit.\u001b[0m", "    \u001b[37m+\u001b[0m", "\u001b[0m  * service[rabbitmq-server] action enable (up to date)", "  * service[rabbitmq-server] action start", "    \u001b[32m- start service service[rabbitmq-server]\u001b[0m", "\u001b[0m  * ohai[reload_packages] action reload", "    \u001b[32m- re-run ohai and merge results into node attributes\u001b[0m", "\u001b[0mRecipe: rabbitmq::management_ui\u001b[0m", "  * rabbitmq_plugin[rabbitmq_management] action enable", "    * execute[rabbitmq-plugins enable rabbitmq_management] action run", "      \u001b[32m- execute rabbitmq-plugins enable rabbitmq_management\u001b[0m", "\u001b[0m  ", "\u001b[0mRecipe: rabbitmq::default\u001b[0m", "  * service[rabbitmq-server] action restart", "    \u001b[32m- restart service service[rabbitmq-server]\u001b[0m", "\u001b[0mRecipe: openstack-ops-messaging::rabbitmq-server\u001b[0m", "  * rabbitmq_user[add openstack rabbit user] action add", "    * execute[rabbitmqctl -q add_user admin] action run", "      \u001b[32m- execute sensitive resource\u001b[0m", "\u001b[0m  ", "\u001b[0m  * rabbitmq_user[change openstack rabbit user password] action change_password", "    * execute[rabbitmqctl -q change_password admin] action run", "      \u001b[32m- execute sensitive resource\u001b[0m", "\u001b[0m  ", "\u001b[0m  * rabbitmq_vhost[add openstack rabbit vhost] action add (up to date)", "  * rabbitmq_user[set openstack user permissions] action set_permissions", "    * execute[rabbitmqctl -q set_permissions -p / admin \".*\" \".*\" \".*\"] action run", "      \u001b[32m- execute rabbitmqctl -q set_permissions -p / admin \".*\" \".*\" \".*\"\u001b[0m", "\u001b[0m  ", "\u001b[0m  * rabbitmq_user[set rabbit administrator tag] action set_tags", "    * execute[rabbitmqctl -q set_user_tags admin administrator] action run", "      \u001b[32m- execute rabbitmqctl -q set_user_tags admin administrator\u001b[0m", "\u001b[0m  ", "\u001b[0mRecipe: openstack-identity::server-apache\u001b[0m", "  * execute[set-selinux-permissive] action run (skipped due to only_if)", "  * apt_package[identity cookbook package python-mysqldb] action upgrade (up to date)", "  * apt_package[identity cookbook package python-memcache] action upgrade", "    \u001b[32m- upgrade package python-memcache from uninstalled to 1.57-1\u001b[0m", "\u001b[0m  * apt_package[identity cookbook package keystone] action upgrade", "    \u001b[32m- upgrade package keystone from uninstalled to 2:9.3.0-0ubuntu3.2\u001b[0m", "\u001b[0m  * service[keystone] action stop", "    \u001b[32m- stop service service[keystone]\u001b[0m", "\u001b[0m  * service[keystone] action disable", "    \u001b[32m- disable service service[keystone]\u001b[0m", "\u001b[0m  * directory[/etc/keystone] action create (up to date)", "  * directory[/etc/keystone/domains] action create (skipped due to only_if)", "  * file[/var/lib/keystone/keystone.db] action delete", "    \u001b[32m- delete file /var/lib/keystone/keystone.db\u001b[0m", "\u001b[0mRecipe: openstack-identity::_credential_tokens\u001b[0m", "  * directory[/etc/keystone/credential-tokens] action create", "    \u001b[32m- create new directory /etc/keystone/credential-tokens\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'keystone'\u001b[0m", "    \u001b[32m- change group from '' to 'keystone'\u001b[0m", "\u001b[0m  * file[/etc/keystone/credential-tokens/0] action create", "    \u001b[32m- create new file /etc/keystone/credential-tokens/0\u001b[0m", "    \u001b[32m- update content in file /etc/keystone/credential-tokens/0 from none to 2e2f33\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0400'\u001b[0m", "    \u001b[32m- change owner from '' to 'keystone'\u001b[0m", "    \u001b[32m- change group from '' to 'keystone'\u001b[0m", "\u001b[0m  * file[/etc/keystone/credential-tokens/1] action create", "    \u001b[32m- create new file /etc/keystone/credential-tokens/1\u001b[0m", "    \u001b[32m- update content in file /etc/keystone/credential-tokens/1 from none to 2e2f33\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0400'\u001b[0m", "    \u001b[32m- change owner from '' to 'keystone'\u001b[0m", "    \u001b[32m- change group from '' to 'keystone'\u001b[0m", "\u001b[0mRecipe: openstack-identity::_fernet_tokens\u001b[0m", "  * directory[/etc/keystone/fernet-tokens] action create", "    \u001b[32m- create new directory /etc/keystone/fernet-tokens\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'keystone'\u001b[0m", "    \u001b[32m- change group from '' to 'keystone'\u001b[0m", "\u001b[0m  * file[/etc/keystone/fernet-tokens/0] action create", "    \u001b[32m- create new file /etc/keystone/fernet-tokens/0\u001b[0m", "    \u001b[32m- update content in file /etc/keystone/fernet-tokens/0 from none to 2e2f33\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0400'\u001b[0m", "    \u001b[32m- change owner from '' to 'keystone'\u001b[0m", "    \u001b[32m- change group from '' to 'keystone'\u001b[0m", "\u001b[0m  * file[/etc/keystone/fernet-tokens/1] action create", "    \u001b[32m- create new file /etc/keystone/fernet-tokens/1\u001b[0m", "    \u001b[32m- update content in file /etc/keystone/fernet-tokens/1 from none to 2e2f33\u001b[0m", "    \u001b[32m- suppressed sensitive resource\u001b[0m", "    \u001b[32m- change mode from '' to '0400'\u001b[0m", "    \u001b[32m- change owner from '' to 'keystone'\u001b[0m", "    \u001b[32m- change group from '' to 'keystone'\u001b[0m", "\u001b[0mRecipe: openstack-identity::server-apache\u001b[0m", "  * template[/etc/keystone/keystone-paste.ini] action create", "    \u001b[32m- update content in file /etc/keystone/keystone-paste.ini from 745f66 to d5e29a\u001b[0m", "    \u001b[37m--- /etc/keystone/keystone-paste.ini\t2017-02-01 14:54:39.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/keystone/.chef-keystone-paste20190423-11189-1cxb14k.ini\t2019-04-23 15:42:35.302526966 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,8 @@\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# This file is automatically generated by Chef\u001b[0m", "    \u001b[37m+# Any changes will be overwritten\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m # Keystone PasteDeploy configuration file.\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [filter:debug]\u001b[0m", "    \u001b[37m@@ -12,11 +17,6 @@\u001b[0m", "    \u001b[37m [filter:token_auth]\u001b[0m", "    \u001b[37m use = egg:keystone#token_auth\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-[filter:admin_token_auth]\u001b[0m", "    \u001b[37m-# This is deprecated in the M release and will be removed in the O release.\u001b[0m", "    \u001b[37m-# Use `keystone-manage bootstrap` and remove this from the pipelines below.\u001b[0m", "    \u001b[37m-use = egg:keystone#admin_token_auth\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m [filter:json_body]\u001b[0m", "    \u001b[37m use = egg:keystone#json_body\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -24,6 +24,12 @@\u001b[0m", "    \u001b[37m use = egg:oslo.middleware#cors\u001b[0m", "    \u001b[37m oslo_config_project = keystone\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+[filter:http_proxy_to_wsgi]\u001b[0m", "    \u001b[37m+use = egg:oslo.middleware#http_proxy_to_wsgi\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+[filter:healthcheck]\u001b[0m", "    \u001b[37m+use = egg:oslo.middleware#healthcheck\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m [filter:ec2_extension]\u001b[0m", "    \u001b[37m use = egg:keystone#ec2_extension\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -39,6 +45,9 @@\u001b[0m", "    \u001b[37m [filter:sizelimit]\u001b[0m", "    \u001b[37m use = egg:oslo.middleware#sizelimit\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+[filter:osprofiler]\u001b[0m", "    \u001b[37m+use = egg:osprofiler#osprofiler\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m [app:public_service]\u001b[0m", "    \u001b[37m use = egg:keystone#public_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -49,19 +58,13 @@\u001b[0m", "    \u001b[37m use = egg:keystone#admin_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [pipeline:public_api]\u001b[0m", "    \u001b[37m-# The last item in this pipeline must be public_service or an equivalent\u001b[0m", "    \u001b[37m-# application. It cannot be a filter.\u001b[0m", "    \u001b[37m-pipeline = cors sizelimit url_normalize request_id admin_token_auth build_auth_context token_auth json_body ec2_extension public_service\u001b[0m", "    \u001b[37m+pipeline = healthcheck cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension public_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [pipeline:admin_api]\u001b[0m", "    \u001b[37m-# The last item in this pipeline must be admin_service or an equivalent\u001b[0m", "    \u001b[37m-# application. It cannot be a filter.\u001b[0m", "    \u001b[37m-pipeline = cors sizelimit url_normalize request_id admin_token_auth build_auth_context token_auth json_body ec2_extension s3_extension admin_service\u001b[0m", "    \u001b[37m+pipeline = healthcheck cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension s3_extension admin_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [pipeline:api_v3]\u001b[0m", "    \u001b[37m-# The last item in this pipeline must be service_v3 or an equivalent\u001b[0m", "    \u001b[37m-# application. It cannot be a filter.\u001b[0m", "    \u001b[37m-pipeline = cors sizelimit url_normalize request_id admin_token_auth build_auth_context token_auth json_body ec2_extension_v3 s3_extension service_v3\u001b[0m", "    \u001b[37m+pipeline = healthcheck cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension_v3 s3_extension service_v3\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [app:public_version_service]\u001b[0m", "    \u001b[37m use = egg:keystone#public_version_service\u001b[0m", "    \u001b[37m@@ -70,10 +73,10 @@\u001b[0m", "    \u001b[37m use = egg:keystone#admin_version_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [pipeline:public_version_api]\u001b[0m", "    \u001b[37m-pipeline = cors sizelimit url_normalize public_version_service\u001b[0m", "    \u001b[37m+pipeline = healthcheck cors sizelimit osprofiler url_normalize public_version_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [pipeline:admin_version_api]\u001b[0m", "    \u001b[37m-pipeline = cors sizelimit url_normalize admin_version_service\u001b[0m", "    \u001b[37m+pipeline = healthcheck cors sizelimit osprofiler url_normalize admin_version_service\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m [composite:main]\u001b[0m", "    \u001b[37m use = egg:Paste#urlmap\u001b[0m", "    \u001b[37m@@ -86,4 +89,6 @@\u001b[0m", "    \u001b[37m /v2.0 = admin_api\u001b[0m", "    \u001b[37m /v3 = api_v3\u001b[0m", "    \u001b[37m / = admin_version_api\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[32m- change owner from 'root' to 'keystone'\u001b[0m", "    \u001b[32m- change group from 'root' to 'keystone'\u001b[0m", "\u001b[0m  * template[/etc/keystone/keystone.conf] action create", "    \u001b[32m- update content in file /etc/keystone/keystone.conf from a282f9 to 0cf8b2\u001b[0m", "    \u001b[37m--- /etc/keystone/keystone.conf\t2018-01-18 16:45:40.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/keystone/.chef-keystone20190423-11189-kdqdix.conf\t2019-04-23 15:42:35.310527556 +0000\u001b[0m", "    \u001b[37m@@ -1,2097 +1,33 @@\u001b[0m", "    \u001b[37m-[DEFAULT]\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m+# This file is automatically generated by Chef\u001b[0m", "    \u001b[37m+# Any changes will be overwritten\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# A \"shared secret\" that can be used to bootstrap Keystone. This \"token\" does\u001b[0m", "    \u001b[37m-# not represent a user, and carries no explicit authorization. If set to\u001b[0m", "    \u001b[37m-# `None`, the value is ignored and the `admin_token` log in mechanism is\u001b[0m", "    \u001b[37m-# effectively disabled. To completely disable `admin_token` in production\u001b[0m", "    \u001b[37m-# (highly recommended), remove AdminTokenAuthMiddleware from your paste\u001b[0m", "    \u001b[37m-# application pipelines (for example, in keystone-paste.ini). (string value)\u001b[0m", "    \u001b[37m-#admin_token = <None>\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# The base public endpoint URL for Keystone that is advertised to clients\u001b[0m", "    \u001b[37m-# (NOTE: this does NOT affect how Keystone listens for connections). Defaults\u001b[0m", "    \u001b[37m-# to the base host URL of the request. E.g. a request to\u001b[0m", "    \u001b[37m-# http://server:5000/v3/users will default to http://server:5000. You should\u001b[0m", "    \u001b[37m-# only need to set this value if the base URL contains a path (e.g. /prefix/v3)\u001b[0m", "    \u001b[37m-# or the endpoint should be found on a different server. (string value)\u001b[0m", "    \u001b[37m-#public_endpoint = <None>\u001b[0m", "    \u001b[37m+[fernet_tokens]\u001b[0m", "    \u001b[37m+key_repository = /etc/keystone/fernet-tokens\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# The base admin endpoint URL for Keystone that is advertised to clients (NOTE:\u001b[0m", "    \u001b[37m-# this does NOT affect how Keystone listens for connections). Defaults to the\u001b[0m", "    \u001b[37m-# base host URL of the request. E.g. a request to http://server:35357/v3/users\u001b[0m", "    \u001b[37m-# will default to http://server:35357. You should only need to set this value\u001b[0m", "    \u001b[37m-# if the base URL contains a path (e.g. /prefix/v3) or the endpoint should be\u001b[0m", "    \u001b[37m-# found on a different server. (string value)\u001b[0m", "    \u001b[37m-#admin_endpoint = <None>\u001b[0m", "    \u001b[37m+[credential]\u001b[0m", "    \u001b[37m+key_repository = /etc/keystone/credential-tokens\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Maximum depth of the project hierarchy, excluding the project acting as a\u001b[0m", "    \u001b[37m-# domain at the top of the hierarchy. WARNING: setting it to a large value may\u001b[0m", "    \u001b[37m-# adversely impact  performance. (integer value)\u001b[0m", "    \u001b[37m-#max_project_tree_depth = 5\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Limit the sizes of user & project ID/names. (integer value)\u001b[0m", "    \u001b[37m-#max_param_size = 64\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Similar to max_param_size, but provides an exception for token values.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#max_token_size = 8192\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Similar to the member_role_name option, this represents the default role ID\u001b[0m", "    \u001b[37m-# used to associate users with their default projects in the v2 API. This will\u001b[0m", "    \u001b[37m-# be used as the explicit role where one is not specified by the v2 API.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#member_role_id = 9fe2ff9ee4384b1894a90878d3e92bab\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# This is the role name used in combination with the member_role_id option; see\u001b[0m", "    \u001b[37m-# that option for more detail. (string value)\u001b[0m", "    \u001b[37m-#member_role_name = _member_\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The value passed as the keyword \"rounds\" to passlib's encrypt method.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-# Minimum value: 1000\u001b[0m", "    \u001b[37m-# Maximum value: 100000\u001b[0m", "    \u001b[37m-#crypt_strength = 10000\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The maximum number of entities that will be returned in a collection, with no\u001b[0m", "    \u001b[37m-# limit set by default. This global limit may be then overridden for a specific\u001b[0m", "    \u001b[37m-# driver, by specifying a list_limit in the appropriate section (e.g.\u001b[0m", "    \u001b[37m-# [assignment]). (integer value)\u001b[0m", "    \u001b[37m-#list_limit = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Set this to false if you want to enable the ability for user, group and\u001b[0m", "    \u001b[37m-# project entities to be moved between domains by updating their domain_id.\u001b[0m", "    \u001b[37m-# Allowing such movement is not recommended if the scope of a domain admin is\u001b[0m", "    \u001b[37m-# being restricted by use of an appropriate policy file (see\u001b[0m", "    \u001b[37m-# policy.v3cloudsample as an example). This ability is deprecated and will be\u001b[0m", "    \u001b[37m-# removed in a future release. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#domain_id_immutable = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set to true, strict password length checking is performed for password\u001b[0m", "    \u001b[37m-# manipulation. If a password exceeds the maximum length, the operation will\u001b[0m", "    \u001b[37m-# fail with an HTTP 403 Forbidden error. If set to false, passwords are\u001b[0m", "    \u001b[37m-# automatically truncated to the maximum length. (boolean value)\u001b[0m", "    \u001b[37m-#strict_password_check = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The HTTP header used to determine the scheme for the original request, even\u001b[0m", "    \u001b[37m-# if it was removed by an SSL terminating proxy. (string value)\u001b[0m", "    \u001b[37m-#secure_proxy_ssl_header = HTTP_X_FORWARDED_PROTO\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set to true the server will return information in the response that may\u001b[0m", "    \u001b[37m-# allow an unauthenticated or authenticated user to get more information than\u001b[0m", "    \u001b[37m-# normal, such as why authentication failed. This may be useful for debugging\u001b[0m", "    \u001b[37m-# but is insecure. (boolean value)\u001b[0m", "    \u001b[37m-#insecure_debug = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone.notifications\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default publisher_id for outgoing notifications (string value)\u001b[0m", "    \u001b[37m-#default_publisher_id = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Define the notification format for Identity Service events. A \"basic\"\u001b[0m", "    \u001b[37m-# notification has information about the resource being operated on. A \"cadf\"\u001b[0m", "    \u001b[37m-# notification has the same information, as well as information about the\u001b[0m", "    \u001b[37m-# initiator of the event. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: basic, cadf\u001b[0m", "    \u001b[37m-#notification_format = basic\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Define the notification options to opt-out from. The value expected is:\u001b[0m", "    \u001b[37m-# identity.<resource_type>.<operation>. This field can be set multiple times in\u001b[0m", "    \u001b[37m-# order to add more notifications to opt-out from. For example:\u001b[0m", "    \u001b[37m-#  notification_opt_out=identity.user.created\u001b[0m", "    \u001b[37m-#  notification_opt_out=identity.authenticate.success (multi valued)\u001b[0m", "    \u001b[37m-#notification_opt_out =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.log\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set to true, the logging level will be set to DEBUG instead of the default\u001b[0m", "    \u001b[37m-# INFO level. (boolean value)\u001b[0m", "    \u001b[37m-#debug = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set to false, the logging level will be set to WARNING instead of the\u001b[0m", "    \u001b[37m-# default INFO level. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#verbose = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The name of a logging configuration file. This file is appended to any\u001b[0m", "    \u001b[37m-# existing logging configuration files. For details about logging configuration\u001b[0m", "    \u001b[37m-# files, see the Python logging module documentation. Note that when logging\u001b[0m", "    \u001b[37m-# configuration files are used then all logging configuration is set in the\u001b[0m", "    \u001b[37m-# configuration file and other logging configuration options are ignored (for\u001b[0m", "    \u001b[37m-# example, logging_context_format_string). (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/log_config\u001b[0m", "    \u001b[37m-#log_config_append = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Defines the format string for %%(asctime)s in log records. Default:\u001b[0m", "    \u001b[37m-# %(default)s . This option is ignored if log_config_append is set. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#log_date_format = %Y-%m-%d %H:%M:%S\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# (Optional) Name of log file to send logging output to. If no default is set,\u001b[0m", "    \u001b[37m-# logging will go to stderr as defined by use_stderr. This option is ignored if\u001b[0m", "    \u001b[37m-# log_config_append is set. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/logfile\u001b[0m", "    \u001b[37m-#log_file = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# (Optional) The base directory used for relative log_file  paths. This option\u001b[0m", "    \u001b[37m-# is ignored if log_config_append is set. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/logdir\u001b[0m", "    \u001b[37m-#log_dir = <None>\u001b[0m", "    \u001b[37m+[DEFAULT]\u001b[0m", "    \u001b[37m log_dir = /var/log/keystone\u001b[0m", "    \u001b[37m+public_endpoint = http://139.178.70.138:5000/\u001b[0m", "    \u001b[37m+admin_endpoint = http://139.178.70.138:5000/\u001b[0m", "    \u001b[37m+transport_url = rabbit://admin:mypass@139.178.70.138:5672/\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Uses logging handler designed to watch file system. When log file is moved or\u001b[0m", "    \u001b[37m-# removed this handler will open a new log file with specified path\u001b[0m", "    \u001b[37m-# instantaneously. It makes sense only if log_file option is specified and\u001b[0m", "    \u001b[37m-# Linux platform is used. This option is ignored if log_config_append is set.\u001b[0m", "    \u001b[37m-# (boolean value)\u001b[0m", "    \u001b[37m-#watch_log_file = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Use syslog for logging. Existing syslog format is DEPRECATED and will be\u001b[0m", "    \u001b[37m-# changed later to honor RFC5424. This option is ignored if log_config_append\u001b[0m", "    \u001b[37m-# is set. (boolean value)\u001b[0m", "    \u001b[37m-#use_syslog = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Syslog facility to receive log lines. This option is ignored if\u001b[0m", "    \u001b[37m-# log_config_append is set. (string value)\u001b[0m", "    \u001b[37m-#syslog_log_facility = LOG_USER\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Log output to standard error. This option is ignored if log_config_append is\u001b[0m", "    \u001b[37m-# set. (boolean value)\u001b[0m", "    \u001b[37m-#use_stderr = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Format string to use for log messages with context. (string value)\u001b[0m", "    \u001b[37m-#logging_context_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Format string to use for log messages when context is undefined. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#logging_default_format_string = %(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Additional data to append to log message when logging level for the message\u001b[0m", "    \u001b[37m-# is DEBUG. (string value)\u001b[0m", "    \u001b[37m-#logging_debug_format_suffix = %(funcName)s %(pathname)s:%(lineno)d\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Prefix each line of exception output with this format. (string value)\u001b[0m", "    \u001b[37m-#logging_exception_prefix = %(asctime)s.%(msecs)03d %(process)d ERROR %(name)s %(instance)s\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Defines the format string for %(user_identity)s that is used in\u001b[0m", "    \u001b[37m-# logging_context_format_string. (string value)\u001b[0m", "    \u001b[37m-#logging_user_identity_format = %(user)s %(tenant)s %(domain)s %(user_domain)s %(project_domain)s\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# List of package logging levels in logger=LEVEL pairs. This option is ignored\u001b[0m", "    \u001b[37m-# if log_config_append is set. (list value)\u001b[0m", "    \u001b[37m-#default_log_levels = amqp=WARN,amqplib=WARN,boto=WARN,qpid=WARN,sqlalchemy=WARN,suds=INFO,oslo.messaging=INFO,iso8601=WARN,requests.packages.urllib3.connectionpool=WARN,urllib3.connectionpool=WARN,websocket=WARN,requests.packages.urllib3.util.retry=WARN,urllib3.util.retry=WARN,keystonemiddleware=WARN,routes.middleware=WARN,stevedore=WARN,taskflow=WARN,keystoneauth=WARN,oslo.cache=INFO,dogpile.core.dogpile=INFO\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enables or disables publication of error events. (boolean value)\u001b[0m", "    \u001b[37m-#publish_errors = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The format for an instance that is passed with the log message. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#instance_format = \"[instance: %(uuid)s] \"\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The format for an instance UUID that is passed with the log message. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#instance_uuid_format = \"[instance: %(uuid)s] \"\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enables or disables fatal status of deprecations. (boolean value)\u001b[0m", "    \u001b[37m-#fatal_deprecations = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.messaging\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Size of RPC connection pool. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rpc_conn_pool_size\u001b[0m", "    \u001b[37m-#rpc_conn_pool_size = 30\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# ZeroMQ bind address. Should be a wildcard (*), an ethernet interface, or IP.\u001b[0m", "    \u001b[37m-# The \"host\" option should point or resolve to this address. (string value)\u001b[0m", "    \u001b[37m-#rpc_zmq_bind_address = *\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# MatchMaker driver. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: redis, dummy\u001b[0m", "    \u001b[37m-#rpc_zmq_matchmaker = redis\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Type of concurrency used. Either \"native\" or \"eventlet\" (string value)\u001b[0m", "    \u001b[37m-#rpc_zmq_concurrency = eventlet\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of ZeroMQ contexts, defaults to 1. (integer value)\u001b[0m", "    \u001b[37m-#rpc_zmq_contexts = 1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of ingress messages to locally buffer per topic. Default is\u001b[0m", "    \u001b[37m-# unlimited. (integer value)\u001b[0m", "    \u001b[37m-#rpc_zmq_topic_backlog = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Directory for holding IPC sockets. (string value)\u001b[0m", "    \u001b[37m-#rpc_zmq_ipc_dir = /var/run/openstack\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Name of this node. Must be a valid hostname, FQDN, or IP address. Must match\u001b[0m", "    \u001b[37m-# \"host\" option, if running Nova. (string value)\u001b[0m", "    \u001b[37m-#rpc_zmq_host = localhost\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Seconds to wait before a cast expires (TTL). The default value of -1\u001b[0m", "    \u001b[37m-# specifies an infinite linger period. The value of 0 specifies no linger\u001b[0m", "    \u001b[37m-# period. Pending messages shall be discarded immediately when the socket is\u001b[0m", "    \u001b[37m-# closed. Only supported by impl_zmq. (integer value)\u001b[0m", "    \u001b[37m-#rpc_cast_timeout = -1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The default number of seconds that poll should wait. Poll raises timeout\u001b[0m", "    \u001b[37m-# exception when timeout expired. (integer value)\u001b[0m", "    \u001b[37m-#rpc_poll_timeout = 1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Expiration timeout in seconds of a name service record about existing target\u001b[0m", "    \u001b[37m-# ( < 0 means no timeout). (integer value)\u001b[0m", "    \u001b[37m-#zmq_target_expire = 120\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Use PUB/SUB pattern for fanout methods. PUB/SUB always uses proxy. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#use_pub_sub = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Minimal port number for random ports range. (port value)\u001b[0m", "    \u001b[37m-# Minimum value: 0\u001b[0m", "    \u001b[37m-# Maximum value: 65535\u001b[0m", "    \u001b[37m-#rpc_zmq_min_port = 49152\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximal port number for random ports range. (integer value)\u001b[0m", "    \u001b[37m-# Minimum value: 1\u001b[0m", "    \u001b[37m-# Maximum value: 65536\u001b[0m", "    \u001b[37m-#rpc_zmq_max_port = 65536\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of retries to find free port number before fail with ZMQBindError.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#rpc_zmq_bind_port_retries = 100\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Size of executor thread pool. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rpc_thread_pool_size\u001b[0m", "    \u001b[37m-#executor_thread_pool_size = 64\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Seconds to wait for a response from a call. (integer value)\u001b[0m", "    \u001b[37m-#rpc_response_timeout = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# A URL representing the messaging driver to use and its full configuration. If\u001b[0m", "    \u001b[37m-# not set, we fall back to the rpc_backend option and driver specific\u001b[0m", "    \u001b[37m-# configuration. (string value)\u001b[0m", "    \u001b[37m-#transport_url = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The messaging driver to use, defaults to rabbit. Other drivers include amqp\u001b[0m", "    \u001b[37m-# and zmq. (string value)\u001b[0m", "    \u001b[37m-#rpc_backend = rabbit\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The default exchange under which topics are scoped. May be overridden by an\u001b[0m", "    \u001b[37m-# exchange name specified in the transport_url option. (string value)\u001b[0m", "    \u001b[37m-#control_exchange = keystone\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.service.service\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable eventlet backdoor.  Acceptable values are 0, <port>, and\u001b[0m", "    \u001b[37m-# <start>:<end>, where 0 results in listening on a random tcp port number;\u001b[0m", "    \u001b[37m-# <port> results in listening on the specified port number (and not enabling\u001b[0m", "    \u001b[37m-# backdoor if that port is in use); and <start>:<end> results in listening on\u001b[0m", "    \u001b[37m-# the smallest unused port number within the specified range of port numbers.\u001b[0m", "    \u001b[37m-# The chosen port is displayed in the service's log file. (string value)\u001b[0m", "    \u001b[37m-#backdoor_port = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable eventlet backdoor, using the provided path as a unix socket that can\u001b[0m", "    \u001b[37m-# receive connections. This option is mutually exclusive with 'backdoor_port'\u001b[0m", "    \u001b[37m-# in that only one should be provided. If both are provided then the existence\u001b[0m", "    \u001b[37m-# of this option overrides the usage of that option. (string value)\u001b[0m", "    \u001b[37m-#backdoor_socket = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enables or disables logging values of all registered options when starting a\u001b[0m", "    \u001b[37m-# service (at DEBUG level). (boolean value)\u001b[0m", "    \u001b[37m-#log_options = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Specify a timeout after which a gracefully shutdown server will exit. Zero\u001b[0m", "    \u001b[37m-# value means endless wait. (integer value)\u001b[0m", "    \u001b[37m-#graceful_shutdown_timeout = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m [assignment]\u001b[0m", "    \u001b[37m+driver = sql\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the assignment backend driver in the keystone.assignment\u001b[0m", "    \u001b[37m-# namespace. Only an SQL driver is supplied. If an assignment driver is not\u001b[0m", "    \u001b[37m-# specified, the identity driver will choose the assignment driver (driver\u001b[0m", "    \u001b[37m-# selection based on `[identity]/driver` option is deprecated and will be\u001b[0m", "    \u001b[37m-# removed in the \"O\" release). (string value)\u001b[0m", "    \u001b[37m-#driver = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# A list of role names which are prohibited from being an implied role. (list\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#prohibited_implied_role = admin\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[auth]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allowed authentication methods. (list value)\u001b[0m", "    \u001b[37m-#methods = external,password,token,oauth1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the password auth plugin module in the keystone.auth.password\u001b[0m", "    \u001b[37m-# namespace. (string value)\u001b[0m", "    \u001b[37m-#password = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the token auth plugin module in the keystone.auth.token\u001b[0m", "    \u001b[37m-# namespace. (string value)\u001b[0m", "    \u001b[37m-#token = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the external (REMOTE_USER) auth plugin module in the\u001b[0m", "    \u001b[37m-# keystone.auth.external namespace. Supplied drivers are DefaultDomain and\u001b[0m", "    \u001b[37m-# Domain. The default driver is DefaultDomain. (string value)\u001b[0m", "    \u001b[37m-#external = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the oAuth1.0 auth plugin module in the keystone.auth.oauth1\u001b[0m", "    \u001b[37m-# namespace. (string value)\u001b[0m", "    \u001b[37m-#oauth1 = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m [cache]\u001b[0m", "    \u001b[37m+enabled = true\u001b[0m", "    \u001b[37m+backend = oslo_cache.memcache_pool\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.cache\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m+[policy]\u001b[0m", "    \u001b[37m+driver = sql\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Prefix for building the configuration dictionary for the cache region. This\u001b[0m", "    \u001b[37m-# should not need to be changed unless there is another dogpile.cache region\u001b[0m", "    \u001b[37m-# with the same configuration name. (string value)\u001b[0m", "    \u001b[37m-#config_prefix = cache.oslo\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default TTL, in seconds, for any cached item in the dogpile.cache region.\u001b[0m", "    \u001b[37m-# This applies to any cached method that doesn't have an explicit cache\u001b[0m", "    \u001b[37m-# expiration time defined for it. (integer value)\u001b[0m", "    \u001b[37m-#expiration_time = 600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Dogpile.cache backend module. It is recommended that Memcache with pooling\u001b[0m", "    \u001b[37m-# (oslo_cache.memcache_pool) or Redis (dogpile.cache.redis) be used in\u001b[0m", "    \u001b[37m-# production deployments.  Small workloads (single process) like devstack can\u001b[0m", "    \u001b[37m-# use the dogpile.cache.memory backend. (string value)\u001b[0m", "    \u001b[37m-#backend = dogpile.cache.null\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Arguments supplied to the backend module. Specify this option once per\u001b[0m", "    \u001b[37m-# argument to be passed to the dogpile.cache backend. Example format:\u001b[0m", "    \u001b[37m-# \"<argname>:<value>\". (multi valued)\u001b[0m", "    \u001b[37m-#backend_argument =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Proxy classes to import that will affect the way the dogpile.cache backend\u001b[0m", "    \u001b[37m-# functions. See the dogpile.cache documentation on changing-backend-behavior.\u001b[0m", "    \u001b[37m-# (list value)\u001b[0m", "    \u001b[37m-#proxies =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Global toggle for caching. (boolean value)\u001b[0m", "    \u001b[37m-#enabled = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Extra debugging from the cache backend (cache keys, get/set/delete/etc\u001b[0m", "    \u001b[37m-# calls). This is only really useful if you need to see the specific cache-\u001b[0m", "    \u001b[37m-# backend get/set/delete calls with the keys/values.  Typically this should be\u001b[0m", "    \u001b[37m-# left set to false. (boolean value)\u001b[0m", "    \u001b[37m-#debug_cache_backend = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Memcache servers in the format of \"host:port\". (dogpile.cache.memcache and\u001b[0m", "    \u001b[37m-# oslo_cache.memcache_pool backends only). (list value)\u001b[0m", "    \u001b[37m-#memcache_servers = localhost:11211\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds memcached server is considered dead before it is tried\u001b[0m", "    \u001b[37m-# again. (dogpile.cache.memcache and oslo_cache.memcache_pool backends only).\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#memcache_dead_retry = 300\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Timeout in seconds for every call to a server. (dogpile.cache.memcache and\u001b[0m", "    \u001b[37m-# oslo_cache.memcache_pool backends only). (integer value)\u001b[0m", "    \u001b[37m-#memcache_socket_timeout = 3\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Max total number of open connections to every memcached server.\u001b[0m", "    \u001b[37m-# (oslo_cache.memcache_pool backend only). (integer value)\u001b[0m", "    \u001b[37m-#memcache_pool_maxsize = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds a connection to memcached is held unused in the pool before\u001b[0m", "    \u001b[37m-# it is closed. (oslo_cache.memcache_pool backend only). (integer value)\u001b[0m", "    \u001b[37m-#memcache_pool_unused_timeout = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds that an operation will wait to get a memcache client\u001b[0m", "    \u001b[37m-# connection. (integer value)\u001b[0m", "    \u001b[37m-#memcache_pool_connection_get_timeout = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[catalog]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Catalog template file name for use with the template catalog backend. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#template_file = default_catalog.templates\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the catalog backend driver in the keystone.catalog namespace.\u001b[0m", "    \u001b[37m-# Supplied drivers are kvs, sql, templated, and endpoint_filter.sql (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for catalog caching. This has no effect unless global caching is\u001b[0m", "    \u001b[37m-# enabled. (boolean value)\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time to cache catalog data (in seconds). This has no effect unless global and\u001b[0m", "    \u001b[37m-# catalog caching are enabled. (integer value)\u001b[0m", "    \u001b[37m-#cache_time = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of entities that will be returned in a catalog collection.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#list_limit = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[cors]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.middleware\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate whether this resource may be shared with the domain received in the\u001b[0m", "    \u001b[37m-# requests \"origin\" header. (list value)\u001b[0m", "    \u001b[37m-#allowed_origin = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate that the actual request can include user credentials (boolean value)\u001b[0m", "    \u001b[37m-#allow_credentials = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate which headers are safe to expose to the API. Defaults to HTTP Simple\u001b[0m", "    \u001b[37m-# Headers. (list value)\u001b[0m", "    \u001b[37m-#expose_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum cache age of CORS preflight requests. (integer value)\u001b[0m", "    \u001b[37m-#max_age = 3600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate which methods can be used during the actual request. (list value)\u001b[0m", "    \u001b[37m-#allow_methods = GET,PUT,POST,DELETE,PATCH\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate which header field names may be used during the actual request.\u001b[0m", "    \u001b[37m-# (list value)\u001b[0m", "    \u001b[37m-#allow_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-Domain-Id,X-Domain-Name\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[cors.subdomain]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.middleware\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate whether this resource may be shared with the domain received in the\u001b[0m", "    \u001b[37m-# requests \"origin\" header. (list value)\u001b[0m", "    \u001b[37m-#allowed_origin = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate that the actual request can include user credentials (boolean value)\u001b[0m", "    \u001b[37m-#allow_credentials = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate which headers are safe to expose to the API. Defaults to HTTP Simple\u001b[0m", "    \u001b[37m-# Headers. (list value)\u001b[0m", "    \u001b[37m-#expose_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum cache age of CORS preflight requests. (integer value)\u001b[0m", "    \u001b[37m-#max_age = 3600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate which methods can be used during the actual request. (list value)\u001b[0m", "    \u001b[37m-#allow_methods = GET,PUT,POST,DELETE,PATCH\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Indicate which header field names may be used during the actual request.\u001b[0m", "    \u001b[37m-# (list value)\u001b[0m", "    \u001b[37m-#allow_headers = X-Auth-Token,X-Openstack-Request-Id,X-Subject-Token,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-Domain-Id,X-Domain-Name\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[credential]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the credential backend driver in the keystone.credential\u001b[0m", "    \u001b[37m-# namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[database]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.db\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The file name to use with SQLite. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sqlite_db\u001b[0m", "    \u001b[37m-#sqlite_db = oslo.sqlite\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If True, SQLite uses synchronous mode. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sqlite_synchronous\u001b[0m", "    \u001b[37m-#sqlite_synchronous = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The back end to use for the database. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/db_backend\u001b[0m", "    \u001b[37m-#backend = sqlalchemy\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The SQLAlchemy connection string to use to connect to the database. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_connection\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_connection\u001b[0m", "    \u001b[37m-# Deprecated group/name - [sql]/connection\u001b[0m", "    \u001b[37m-#connection = <None>\u001b[0m", "    \u001b[37m-connection = sqlite:////var/lib/keystone/keystone.db\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The SQLAlchemy connection string to use to connect to the slave database.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#slave_connection = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The SQL mode to be used for MySQL sessions. This option, including the\u001b[0m", "    \u001b[37m-# default, overrides any server-set SQL mode. To use whatever SQL mode is set\u001b[0m", "    \u001b[37m-# by the server configuration, set this to no value. Example: mysql_sql_mode=\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#mysql_sql_mode = TRADITIONAL\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Timeout before idle SQL connections are reaped. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_idle_timeout\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_idle_timeout\u001b[0m", "    \u001b[37m-# Deprecated group/name - [sql]/idle_timeout\u001b[0m", "    \u001b[37m-#idle_timeout = 3600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Minimum number of SQL connections to keep open in a pool. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_min_pool_size\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_min_pool_size\u001b[0m", "    \u001b[37m-#min_pool_size = 1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of SQL connections to keep open in a pool. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_max_pool_size\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_max_pool_size\u001b[0m", "    \u001b[37m-#max_pool_size = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of database connection retries during startup. Set to -1 to\u001b[0m", "    \u001b[37m-# specify an infinite retry count. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_max_retries\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sql_max_retries\u001b[0m", "    \u001b[37m-#max_retries = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Interval between retries of opening a SQL connection. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_retry_interval\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/reconnect_interval\u001b[0m", "    \u001b[37m-#retry_interval = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set, use this value for max_overflow with SQLAlchemy. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_max_overflow\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sqlalchemy_max_overflow\u001b[0m", "    \u001b[37m-#max_overflow = 50\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Verbosity of SQL debugging information: 0=None, 100=Everything. (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_connection_debug\u001b[0m", "    \u001b[37m-#connection_debug = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Add Python stack traces to SQL as comment strings. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/sql_connection_trace\u001b[0m", "    \u001b[37m-#connection_trace = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set, use this value for pool_timeout with SQLAlchemy. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DATABASE]/sqlalchemy_pool_timeout\u001b[0m", "    \u001b[37m-#pool_timeout = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable the experimental use of database reconnect on connection lost.\u001b[0m", "    \u001b[37m-# (boolean value)\u001b[0m", "    \u001b[37m-#use_db_reconnect = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Seconds between retries of a database transaction. (integer value)\u001b[0m", "    \u001b[37m-#db_retry_interval = 1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If True, increases the interval between retries of a database operation up to\u001b[0m", "    \u001b[37m-# db_max_retry_interval. (boolean value)\u001b[0m", "    \u001b[37m-#db_inc_retry_interval = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If db_inc_retry_interval is set, the maximum seconds between retries of a\u001b[0m", "    \u001b[37m-# database operation. (integer value)\u001b[0m", "    \u001b[37m-#db_max_retry_interval = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum retries in case of connection error or deadlock error before error is\u001b[0m", "    \u001b[37m-# raised. Set to -1 to specify an infinite retry count. (integer value)\u001b[0m", "    \u001b[37m-#db_max_retries = 20\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[domain_config]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the domain config backend driver in the\u001b[0m", "    \u001b[37m-# keystone.resource.domain_config namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for domain config caching. This has no effect unless global caching is\u001b[0m", "    \u001b[37m-# enabled. (boolean value)\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# TTL (in seconds) to cache domain config data. This has no effect unless\u001b[0m", "    \u001b[37m-# domain config caching is enabled. (integer value)\u001b[0m", "    \u001b[37m-#cache_time = 300\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[endpoint_filter]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the endpoint filter backend driver in the\u001b[0m", "    \u001b[37m-# keystone.endpoint_filter namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle to return all active endpoints if no filter exists. (boolean value)\u001b[0m", "    \u001b[37m-#return_all_endpoints_if_no_filter = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[endpoint_policy]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable endpoint_policy functionality. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: The option to enable the OS-ENDPOINT-POLICY extension has been\u001b[0m", "    \u001b[37m-# deprecated in the M release and will be removed in the O release. The OS-\u001b[0m", "    \u001b[37m-# ENDPOINT-POLICY extension will be enabled by default.\u001b[0m", "    \u001b[37m-#enabled = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the endpoint policy backend driver in the\u001b[0m", "    \u001b[37m-# keystone.endpoint_policy namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[eventlet_server]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The number of worker processes to serve the public eventlet application.\u001b[0m", "    \u001b[37m-# Defaults to number of CPUs (minimum of 2). (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/public_workers\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#public_workers = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The number of worker processes to serve the admin eventlet application.\u001b[0m", "    \u001b[37m-# Defaults to number of CPUs (minimum of 2). (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/admin_workers\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#admin_workers = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The IP address of the network interface for the public service to listen on.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/bind_host\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/public_bind_host\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#public_bind_host = 0.0.0.0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The port number which the public service listens on. (port value)\u001b[0m", "    \u001b[37m-# Minimum value: 0\u001b[0m", "    \u001b[37m-# Maximum value: 65535\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/public_port\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#public_port = 5000\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The IP address of the network interface for the admin service to listen on.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/bind_host\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/admin_bind_host\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#admin_bind_host = 0.0.0.0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The port number which the admin service listens on. (port value)\u001b[0m", "    \u001b[37m-# Minimum value: 0\u001b[0m", "    \u001b[37m-# Maximum value: 65535\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/admin_port\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#admin_port = 35357\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If set to false, disables keepalives on the server; all connections will be\u001b[0m", "    \u001b[37m-# closed after serving one request. (boolean value)\u001b[0m", "    \u001b[37m-#wsgi_keep_alive = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Timeout for socket operations on a client connection. If an incoming\u001b[0m", "    \u001b[37m-# connection is idle for this number of seconds it will be closed. A value of\u001b[0m", "    \u001b[37m-# \"0\" means wait forever. (integer value)\u001b[0m", "    \u001b[37m-#client_socket_timeout = 900\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Set this to true if you want to enable TCP_KEEPALIVE on server sockets, i.e.\u001b[0m", "    \u001b[37m-# sockets used by the Keystone wsgi server for client connections. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/tcp_keepalive\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#tcp_keepalive = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Sets the value of TCP_KEEPIDLE in seconds for each server socket. Only\u001b[0m", "    \u001b[37m-# applies if tcp_keepalive is true. Ignored if system does not support it.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/tcp_keepidle\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#tcp_keepidle = 600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[eventlet_server_ssl]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for SSL support on the Keystone eventlet servers. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [ssl]/enable\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#enable = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the certfile for SSL. For non-production environments, you may be\u001b[0m", "    \u001b[37m-# interested in using `keystone-manage ssl_setup` to generate self-signed\u001b[0m", "    \u001b[37m-# certificates. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [ssl]/certfile\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#certfile = /etc/keystone/ssl/certs/keystone.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the keyfile for SSL. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [ssl]/keyfile\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#keyfile = /etc/keystone/ssl/private/keystonekey.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the CA cert file for SSL. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [ssl]/ca_certs\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#ca_certs = /etc/keystone/ssl/certs/ca.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Require client certificate. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [ssl]/cert_required\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#cert_required = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[federation]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the federation backend driver in the keystone.federation\u001b[0m", "    \u001b[37m-# namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Value to be used when filtering assertion parameters from the environment.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#assertion_prefix =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Value to be used to obtain the entity ID of the Identity Provider from the\u001b[0m", "    \u001b[37m-# environment (e.g. if using the mod_shib plugin this value is `Shib-Identity-\u001b[0m", "    \u001b[37m-# Provider`). (string value)\u001b[0m", "    \u001b[37m-#remote_id_attribute = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# A domain name that is reserved to allow federated ephemeral users to have a\u001b[0m", "    \u001b[37m-# domain concept. Note that an admin will not be able to create a domain with\u001b[0m", "    \u001b[37m-# this name or update an existing domain to this name. You are not advised to\u001b[0m", "    \u001b[37m-# change this value unless you really have to. (string value)\u001b[0m", "    \u001b[37m-#federated_domain_name = Federated\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# A list of trusted dashboard hosts. Before accepting a Single Sign-On request\u001b[0m", "    \u001b[37m-# to return a token, the origin host must be a member of the trusted_dashboard\u001b[0m", "    \u001b[37m-# list. This configuration option may be repeated for multiple values. For\u001b[0m", "    \u001b[37m-# example: trusted_dashboard=http://acme.com/auth/websso\u001b[0m", "    \u001b[37m-# trusted_dashboard=http://beta.com/auth/websso (multi valued)\u001b[0m", "    \u001b[37m-#trusted_dashboard =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Location of Single Sign-On callback handler, will return a token to a trusted\u001b[0m", "    \u001b[37m-# dashboard host. (string value)\u001b[0m", "    \u001b[37m-#sso_callback_template = /etc/keystone/sso_callback_template.html\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[fernet_tokens]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Directory containing Fernet token keys. (string value)\u001b[0m", "    \u001b[37m-#key_repository = /etc/keystone/fernet-keys/\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# This controls how many keys are held in rotation by keystone-manage\u001b[0m", "    \u001b[37m-# fernet_rotate before they are discarded. The default value of 3 means that\u001b[0m", "    \u001b[37m-# keystone will maintain one staged key, one primary key, and one secondary\u001b[0m", "    \u001b[37m-# key. Increasing this value means that additional secondary keys will be kept\u001b[0m", "    \u001b[37m-# in the rotation. (integer value)\u001b[0m", "    \u001b[37m-#max_active_keys = 3\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[identity]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# This references the domain to use for all Identity API v2 requests (which are\u001b[0m", "    \u001b[37m-# not aware of domains). A domain with this ID will be created for you by\u001b[0m", "    \u001b[37m-# keystone-manage db_sync in migration 008. The domain referenced by this ID\u001b[0m", "    \u001b[37m-# cannot be deleted on the v3 API, to prevent accidentally breaking the v2 API.\u001b[0m", "    \u001b[37m-# There is nothing special about this domain, other than the fact that it must\u001b[0m", "    \u001b[37m-# exist to order to maintain support for your v2 clients. (string value)\u001b[0m", "    \u001b[37m-#default_domain_id = default\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# A subset (or all) of domains can have their own identity driver, each with\u001b[0m", "    \u001b[37m-# their own partial configuration options, stored in either the resource\u001b[0m", "    \u001b[37m-# backend or in a file in a domain configuration directory (depending on the\u001b[0m", "    \u001b[37m-# setting of domain_configurations_from_database). Only values specific to the\u001b[0m", "    \u001b[37m-# domain need to be specified in this manner. This feature is disabled by\u001b[0m", "    \u001b[37m-# default; set to true to enable. (boolean value)\u001b[0m", "    \u001b[37m-#domain_specific_drivers_enabled = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Extract the domain specific configuration options from the resource backend\u001b[0m", "    \u001b[37m-# where they have been stored with the domain data. This feature is disabled by\u001b[0m", "    \u001b[37m-# default (in which case the domain specific options will be loaded from files\u001b[0m", "    \u001b[37m-# in the domain configuration directory); set to true to enable. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#domain_configurations_from_database = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path for Keystone to locate the domain specific identity configuration files\u001b[0m", "    \u001b[37m-# if domain_specific_drivers_enabled is set to true. (string value)\u001b[0m", "    \u001b[37m-#domain_config_dir = /etc/keystone/domains\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the identity backend driver in the keystone.identity\u001b[0m", "    \u001b[37m-# namespace. Supplied drivers are ldap and sql. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for identity caching. This has no effect unless global caching is\u001b[0m", "    \u001b[37m-# enabled. (boolean value)\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time to cache identity data (in seconds). This has no effect unless global\u001b[0m", "    \u001b[37m-# and identity caching are enabled. (integer value)\u001b[0m", "    \u001b[37m-#cache_time = 600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum supported length for user passwords; decrease to improve performance.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-# Maximum value: 4096\u001b[0m", "    \u001b[37m-#max_password_length = 4096\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of entities that will be returned in an identity collection.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#list_limit = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[identity_mapping]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the identity mapping backend driver in the\u001b[0m", "    \u001b[37m-# keystone.identity.id_mapping namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the public ID generator for user and group entities in the\u001b[0m", "    \u001b[37m-# keystone.identity.id_generator namespace. The Keystone identity mapper only\u001b[0m", "    \u001b[37m-# supports generators that produce no more than 64 characters. (string value)\u001b[0m", "    \u001b[37m-#generator = sha256\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The format of user and group IDs changed in Juno for backends that do not\u001b[0m", "    \u001b[37m-# generate UUIDs (e.g. LDAP), with keystone providing a hash mapping to the\u001b[0m", "    \u001b[37m-# underlying attribute in LDAP. By default this mapping is disabled, which\u001b[0m", "    \u001b[37m-# ensures that existing IDs will not change. Even when the mapping is enabled\u001b[0m", "    \u001b[37m-# by using domain specific drivers, any users and groups from the default\u001b[0m", "    \u001b[37m-# domain being handled by LDAP will still not be mapped to ensure their IDs\u001b[0m", "    \u001b[37m-# remain backward compatible. Setting this value to False will enable the\u001b[0m", "    \u001b[37m-# mapping for even the default LDAP driver. It is only safe to do this if you\u001b[0m", "    \u001b[37m-# do not already have assignments for users and groups from the default LDAP\u001b[0m", "    \u001b[37m-# domain, and it is acceptable for Keystone to provide the different IDs to\u001b[0m", "    \u001b[37m-# clients than it did previously. Typically this means that the only time you\u001b[0m", "    \u001b[37m-# can set this value to False is when configuring a fresh installation.\u001b[0m", "    \u001b[37m-# (boolean value)\u001b[0m", "    \u001b[37m-#backward_compatible_ids = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[kvs]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Extra dogpile.cache backend modules to register with the dogpile.cache\u001b[0m", "    \u001b[37m-# library. (list value)\u001b[0m", "    \u001b[37m-#backends =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Prefix for building the configuration dictionary for the KVS region. This\u001b[0m", "    \u001b[37m-# should not need to be changed unless there is another dogpile.cache region\u001b[0m", "    \u001b[37m-# with the same configuration name. (string value)\u001b[0m", "    \u001b[37m-#config_prefix = keystone.kvs\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle to disable using a key-mangling function to ensure fixed length keys.\u001b[0m", "    \u001b[37m-# This is toggle-able for debugging purposes, it is highly recommended to\u001b[0m", "    \u001b[37m-# always leave this set to true. (boolean value)\u001b[0m", "    \u001b[37m-#enable_key_mangler = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default lock timeout (in seconds) for distributed locking. (integer value)\u001b[0m", "    \u001b[37m-#default_lock_timeout = 5\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[ldap]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# URL(s) for connecting to the LDAP server. Multiple LDAP URLs may be specified\u001b[0m", "    \u001b[37m-# as a comma separated string. The first URL to successfully bind is used for\u001b[0m", "    \u001b[37m-# the connection. (string value)\u001b[0m", "    \u001b[37m-#url = ldap://localhost\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# User BindDN to query the LDAP server. (string value)\u001b[0m", "    \u001b[37m-#user = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Password for the BindDN to query the LDAP server. (string value)\u001b[0m", "    \u001b[37m-#password = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP server suffix (string value)\u001b[0m", "    \u001b[37m-#suffix = cn=example,cn=com\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If true, will add a dummy member to groups. This is required if the\u001b[0m", "    \u001b[37m-# objectclass for groups requires the \"member\" attribute. (boolean value)\u001b[0m", "    \u001b[37m-#use_dumb_member = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# DN of the \"dummy member\" to use when \"use_dumb_member\" is enabled. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#dumb_member = cn=dumb,dc=nonexistent\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Delete subtrees using the subtree delete control. Only enable this option if\u001b[0m", "    \u001b[37m-# your LDAP server supports subtree deletion. (boolean value)\u001b[0m", "    \u001b[37m-#allow_subtree_delete = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The LDAP scope for queries, \"one\" represents oneLevel/singleLevel and \"sub\"\u001b[0m", "    \u001b[37m-# represents subtree/wholeSubtree options. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: one, sub\u001b[0m", "    \u001b[37m-#query_scope = one\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum results per page; a value of zero (\"0\") disables paging. (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#page_size = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The LDAP dereferencing option for queries. The \"default\" option falls back to\u001b[0m", "    \u001b[37m-# using default dereferencing configured by your ldap.conf. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: never, searching, always, finding, default\u001b[0m", "    \u001b[37m-#alias_dereferencing = default\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Sets the LDAP debugging level for LDAP calls. A value of 0 means that\u001b[0m", "    \u001b[37m-# debugging is not enabled. This value is a bitmask, consult your LDAP\u001b[0m", "    \u001b[37m-# documentation for possible values. (integer value)\u001b[0m", "    \u001b[37m-#debug_level = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Override the system's default referral chasing behavior for queries. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#chase_referrals = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Search base for users. Defaults to the suffix value. (string value)\u001b[0m", "    \u001b[37m-#user_tree_dn = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP search filter for users. (string value)\u001b[0m", "    \u001b[37m-#user_filter = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP objectclass for users. (string value)\u001b[0m", "    \u001b[37m-#user_objectclass = inetOrgPerson\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to user id. WARNING: must not be a multivalued\u001b[0m", "    \u001b[37m-# attribute. (string value)\u001b[0m", "    \u001b[37m-#user_id_attribute = cn\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to user name. (string value)\u001b[0m", "    \u001b[37m-#user_name_attribute = sn\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to user description. (string value)\u001b[0m", "    \u001b[37m-#user_description_attribute = description\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to user email. (string value)\u001b[0m", "    \u001b[37m-#user_mail_attribute = mail\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to password. (string value)\u001b[0m", "    \u001b[37m-#user_pass_attribute = userPassword\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to user enabled flag. (string value)\u001b[0m", "    \u001b[37m-#user_enabled_attribute = enabled\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Invert the meaning of the boolean enabled values. Some LDAP servers use a\u001b[0m", "    \u001b[37m-# boolean lock attribute where \"true\" means an account is disabled. Setting\u001b[0m", "    \u001b[37m-# \"user_enabled_invert = true\" will allow these lock attributes to be used.\u001b[0m", "    \u001b[37m-# This setting will have no effect if \"user_enabled_mask\" or\u001b[0m", "    \u001b[37m-# \"user_enabled_emulation\" settings are in use. (boolean value)\u001b[0m", "    \u001b[37m-#user_enabled_invert = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Bitmask integer to indicate the bit that the enabled value is stored in if\u001b[0m", "    \u001b[37m-# the LDAP server represents \"enabled\" as a bit on an integer rather than a\u001b[0m", "    \u001b[37m-# boolean. A value of \"0\" indicates the mask is not used. If this is not set to\u001b[0m", "    \u001b[37m-# \"0\" the typical value is \"2\". This is typically used when\u001b[0m", "    \u001b[37m-# \"user_enabled_attribute = userAccountControl\". (integer value)\u001b[0m", "    \u001b[37m-#user_enabled_mask = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default value to enable users. This should match an appropriate int value if\u001b[0m", "    \u001b[37m-# the LDAP server uses non-boolean (bitmask) values to indicate if a user is\u001b[0m", "    \u001b[37m-# enabled or disabled. If this is not set to \"True\" the typical value is \"512\".\u001b[0m", "    \u001b[37m-# This is typically used when \"user_enabled_attribute = userAccountControl\".\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#user_enabled_default = True\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# List of attributes stripped off the user on update. (list value)\u001b[0m", "    \u001b[37m-#user_attribute_ignore = default_project_id\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to default_project_id for users. (string value)\u001b[0m", "    \u001b[37m-#user_default_project_id_attribute = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow user creation in LDAP backend. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m", "    \u001b[37m-# release and will be removed in the O release.\u001b[0m", "    \u001b[37m-#user_allow_create = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow user updates in LDAP backend. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m", "    \u001b[37m-# release and will be removed in the O release.\u001b[0m", "    \u001b[37m-#user_allow_update = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow user deletion in LDAP backend. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m", "    \u001b[37m-# release and will be removed in the O release.\u001b[0m", "    \u001b[37m-#user_allow_delete = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If true, Keystone uses an alternative method to determine if a user is\u001b[0m", "    \u001b[37m-# enabled or not by checking if they are a member of the\u001b[0m", "    \u001b[37m-# \"user_enabled_emulation_dn\" group. (boolean value)\u001b[0m", "    \u001b[37m-#user_enabled_emulation = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# DN of the group entry to hold enabled users when using enabled emulation.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#user_enabled_emulation_dn = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Use the \"group_member_attribute\" and \"group_objectclass\" settings to\u001b[0m", "    \u001b[37m-# determine membership in the emulated enabled group. (boolean value)\u001b[0m", "    \u001b[37m-#user_enabled_emulation_use_group_config = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# List of additional LDAP attributes used for mapping additional attribute\u001b[0m", "    \u001b[37m-# mappings for users. Attribute mapping format is <ldap_attr>:<user_attr>,\u001b[0m", "    \u001b[37m-# where ldap_attr is the attribute in the LDAP entry and user_attr is the\u001b[0m", "    \u001b[37m-# Identity API attribute. (list value)\u001b[0m", "    \u001b[37m-#user_additional_attribute_mapping =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Search base for groups. Defaults to the suffix value. (string value)\u001b[0m", "    \u001b[37m-#group_tree_dn = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP search filter for groups. (string value)\u001b[0m", "    \u001b[37m-#group_filter = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP objectclass for groups. (string value)\u001b[0m", "    \u001b[37m-#group_objectclass = groupOfNames\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to group id. (string value)\u001b[0m", "    \u001b[37m-#group_id_attribute = cn\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to group name. (string value)\u001b[0m", "    \u001b[37m-#group_name_attribute = ou\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to show group membership. (string value)\u001b[0m", "    \u001b[37m-#group_member_attribute = member\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# LDAP attribute mapped to group description. (string value)\u001b[0m", "    \u001b[37m-#group_desc_attribute = description\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# List of attributes stripped off the group on update. (list value)\u001b[0m", "    \u001b[37m-#group_attribute_ignore =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow group creation in LDAP backend. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m", "    \u001b[37m-# release and will be removed in the O release.\u001b[0m", "    \u001b[37m-#group_allow_create = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow group update in LDAP backend. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m", "    \u001b[37m-# release and will be removed in the O release.\u001b[0m", "    \u001b[37m-#group_allow_update = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow group deletion in LDAP backend. (boolean value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: Write support for Identity LDAP backends has been deprecated in the M\u001b[0m", "    \u001b[37m-# release and will be removed in the O release.\u001b[0m", "    \u001b[37m-#group_allow_delete = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Additional attribute mappings for groups. Attribute mapping format is\u001b[0m", "    \u001b[37m-# <ldap_attr>:<user_attr>, where ldap_attr is the attribute in the LDAP entry\u001b[0m", "    \u001b[37m-# and user_attr is the Identity API attribute. (list value)\u001b[0m", "    \u001b[37m-#group_additional_attribute_mapping =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# CA certificate file path for communicating with LDAP servers. (string value)\u001b[0m", "    \u001b[37m-#tls_cacertfile = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# CA certificate directory path for communicating with LDAP servers. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#tls_cacertdir = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable TLS for communicating with LDAP servers. (boolean value)\u001b[0m", "    \u001b[37m-#use_tls = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Specifies what checks to perform on client certificates in an incoming TLS\u001b[0m", "    \u001b[37m-# session. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: demand, never, allow\u001b[0m", "    \u001b[37m-#tls_req_cert = demand\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable LDAP connection pooling. (boolean value)\u001b[0m", "    \u001b[37m-#use_pool = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Connection pool size. (integer value)\u001b[0m", "    \u001b[37m-#pool_size = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum count of reconnect trials. (integer value)\u001b[0m", "    \u001b[37m-#pool_retry_max = 3\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time span in seconds to wait between two reconnect trials. (floating point\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#pool_retry_delay = 0.1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Connector timeout in seconds. Value -1 indicates indefinite wait for\u001b[0m", "    \u001b[37m-# response. (integer value)\u001b[0m", "    \u001b[37m-#pool_connection_timeout = -1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Connection lifetime in seconds. (integer value)\u001b[0m", "    \u001b[37m-#pool_connection_lifetime = 600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable LDAP connection pooling for end user authentication. If use_pool is\u001b[0m", "    \u001b[37m-# disabled, then this setting is meaningless and is not used at all. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#use_auth_pool = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# End user auth connection pool size. (integer value)\u001b[0m", "    \u001b[37m-#auth_pool_size = 100\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# End user auth connection lifetime in seconds. (integer value)\u001b[0m", "    \u001b[37m-#auth_pool_connection_lifetime = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# If the members of the group objectclass are user IDs rather than DNs, set\u001b[0m", "    \u001b[37m-# this to true. This is the case when using posixGroup as the group objectclass\u001b[0m", "    \u001b[37m-# and OpenDirectory. (boolean value)\u001b[0m", "    \u001b[37m-#group_members_are_ids = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[matchmaker_redis]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.messaging\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Host to locate redis. (string value)\u001b[0m", "    \u001b[37m-#host = 127.0.0.1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Use this port to connect to redis host. (port value)\u001b[0m", "    \u001b[37m-# Minimum value: 0\u001b[0m", "    \u001b[37m-# Maximum value: 65535\u001b[0m", "    \u001b[37m-#port = 6379\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Password for Redis server (optional). (string value)\u001b[0m", "    \u001b[37m-#password =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# List of Redis Sentinel hosts (fault tolerance mode) e.g.\u001b[0m", "    \u001b[37m-# [host:port, host1:port ... ] (list value)\u001b[0m", "    \u001b[37m-#sentinel_hosts =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Redis replica set name. (string value)\u001b[0m", "    \u001b[37m-#sentinel_group_name = oslo-messaging-zeromq\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time in ms to wait between connection attempts. (integer value)\u001b[0m", "    \u001b[37m-#wait_timeout = 500\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time in ms to wait before the transaction is killed. (integer value)\u001b[0m", "    \u001b[37m-#check_timeout = 20000\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Timeout in ms on blocking socket operations (integer value)\u001b[0m", "    \u001b[37m-#socket_timeout = 1000\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m [memcache]\u001b[0m", "    \u001b[37m+servers = \u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Memcache servers in the format of \"host:port\". (list value)\u001b[0m", "    \u001b[37m-#servers = localhost:11211\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds memcached server is considered dead before it is tried\u001b[0m", "    \u001b[37m-# again. This is used by the key value store system (e.g. token pooled\u001b[0m", "    \u001b[37m-# memcached persistence backend). (integer value)\u001b[0m", "    \u001b[37m-#dead_retry = 300\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Timeout in seconds for every call to a server. This is used by the key value\u001b[0m", "    \u001b[37m-# store system (e.g. token pooled memcached persistence backend). (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#socket_timeout = 3\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Max total number of open connections to every memcached server. This is used\u001b[0m", "    \u001b[37m-# by the key value store system (e.g. token pooled memcached persistence\u001b[0m", "    \u001b[37m-# backend). (integer value)\u001b[0m", "    \u001b[37m-#pool_maxsize = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds a connection to memcached is held unused in the pool before\u001b[0m", "    \u001b[37m-# it is closed. This is used by the key value store system (e.g. token pooled\u001b[0m", "    \u001b[37m-# memcached persistence backend). (integer value)\u001b[0m", "    \u001b[37m-#pool_unused_timeout = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds that an operation will wait to get a memcache client\u001b[0m", "    \u001b[37m-# connection. This is used by the key value store system (e.g. token pooled\u001b[0m", "    \u001b[37m-# memcached persistence backend). (integer value)\u001b[0m", "    \u001b[37m-#pool_connection_get_timeout = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[oauth1]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the OAuth backend driver in the keystone.oauth1 namespace.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Duration (in seconds) for the OAuth Request Token. (integer value)\u001b[0m", "    \u001b[37m-#request_token_duration = 28800\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Duration (in seconds) for the OAuth Access Token. (integer value)\u001b[0m", "    \u001b[37m-#access_token_duration = 86400\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[os_inherit]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# role-assignment inheritance to projects from owning domain or from projects\u001b[0m", "    \u001b[37m-# higher in the hierarchy can be optionally disabled. In the future, this\u001b[0m", "    \u001b[37m-# option will be removed and the hierarchy will be always enabled. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: The option to enable the OS-INHERIT extension has been deprecated in\u001b[0m", "    \u001b[37m-# the M release and will be removed in the O release. The OS-INHERIT extension\u001b[0m", "    \u001b[37m-# will be enabled by default.\u001b[0m", "    \u001b[37m-#enabled = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[oslo_messaging_amqp]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.messaging\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# address prefix used when sending to a specific server (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/server_request_prefix\u001b[0m", "    \u001b[37m-#server_request_prefix = exclusive\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# address prefix used when broadcasting to all servers (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/broadcast_prefix\u001b[0m", "    \u001b[37m-#broadcast_prefix = broadcast\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# address prefix when sending to any server in group (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/group_request_prefix\u001b[0m", "    \u001b[37m-#group_request_prefix = unicast\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Name for the AMQP container (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/container_name\u001b[0m", "    \u001b[37m-#container_name = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Timeout for inactive connections (in seconds) (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/idle_timeout\u001b[0m", "    \u001b[37m-#idle_timeout = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Debug: dump AMQP frames to stdout (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/trace\u001b[0m", "    \u001b[37m-#trace = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# CA certificate PEM file to verify server certificate (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_ca_file\u001b[0m", "    \u001b[37m-#ssl_ca_file =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Identifying certificate PEM file to present to clients (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_cert_file\u001b[0m", "    \u001b[37m-#ssl_cert_file =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Private key PEM file used to sign cert_file certificate (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_key_file\u001b[0m", "    \u001b[37m-#ssl_key_file =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Password for decrypting ssl_key_file (if encrypted) (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/ssl_key_password\u001b[0m", "    \u001b[37m-#ssl_key_password = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Accept clients using either SSL or plain TCP (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/allow_insecure_clients\u001b[0m", "    \u001b[37m-#allow_insecure_clients = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Space separated list of acceptable SASL mechanisms (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/sasl_mechanisms\u001b[0m", "    \u001b[37m-#sasl_mechanisms =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path to directory that contains the SASL configuration (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/sasl_config_dir\u001b[0m", "    \u001b[37m-#sasl_config_dir =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Name of configuration file (without .conf suffix) (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/sasl_config_name\u001b[0m", "    \u001b[37m-#sasl_config_name =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# User name for message broker authentication (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/username\u001b[0m", "    \u001b[37m-#username =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Password for message broker authentication (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [amqp1]/password\u001b[0m", "    \u001b[37m-#password =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[oslo_messaging_notifications]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.messaging\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The Drivers(s) to handle sending notifications. Possible values are\u001b[0m", "    \u001b[37m-# messaging, messagingv2, routing, log, test, noop (multi valued)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/notification_driver\u001b[0m", "    \u001b[37m-#driver =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# A URL representing the messaging driver to use for notifications. If not set,\u001b[0m", "    \u001b[37m-# we fall back to the same configuration used for RPC. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/notification_transport_url\u001b[0m", "    \u001b[37m-#transport_url = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# AMQP topic used for OpenStack notifications. (list value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [rpc_notifier2]/topics\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/notification_topics\u001b[0m", "    \u001b[37m-#topics = notifications\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[oslo_messaging_rabbit]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.messaging\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Use durable queues in AMQP. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/amqp_durable_queues\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_durable_queues\u001b[0m", "    \u001b[37m-#amqp_durable_queues = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Auto-delete queues in AMQP. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/amqp_auto_delete\u001b[0m", "    \u001b[37m-#amqp_auto_delete = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# SSL version to use (valid only if SSL enabled). Valid values are TLSv1 and\u001b[0m", "    \u001b[37m-# SSLv23. SSLv2, SSLv3, TLSv1_1, and TLSv1_2 may be available on some\u001b[0m", "    \u001b[37m-# distributions. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_version\u001b[0m", "    \u001b[37m-#kombu_ssl_version =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# SSL key file (valid only if SSL enabled). (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_keyfile\u001b[0m", "    \u001b[37m-#kombu_ssl_keyfile =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# SSL cert file (valid only if SSL enabled). (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_certfile\u001b[0m", "    \u001b[37m-#kombu_ssl_certfile =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# SSL certification authority file (valid only if SSL enabled). (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_ssl_ca_certs\u001b[0m", "    \u001b[37m-#kombu_ssl_ca_certs =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# How long to wait before reconnecting in response to an AMQP consumer cancel\u001b[0m", "    \u001b[37m-# notification. (floating point value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_reconnect_delay\u001b[0m", "    \u001b[37m-#kombu_reconnect_delay = 1.0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# EXPERIMENTAL: Possible values are: gzip, bz2. If not set compression will not\u001b[0m", "    \u001b[37m-# be used. This option may notbe available in future versions. (string value)\u001b[0m", "    \u001b[37m-#kombu_compression = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# How long to wait a missing client beforce abandoning to send it its replies.\u001b[0m", "    \u001b[37m-# This value should not be longer than rpc_response_timeout. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/kombu_reconnect_timeout\u001b[0m", "    \u001b[37m-#kombu_missing_consumer_retry_timeout = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Determines how the next RabbitMQ node is chosen in case the one we are\u001b[0m", "    \u001b[37m-# currently connected to becomes unavailable. Takes effect only if more than\u001b[0m", "    \u001b[37m-# one RabbitMQ node is provided in config. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: round-robin, shuffle\u001b[0m", "    \u001b[37m-#kombu_failover_strategy = round-robin\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The RabbitMQ broker address where a single node is used. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_host\u001b[0m", "    \u001b[37m-#rabbit_host = localhost\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The RabbitMQ broker port where a single node is used. (port value)\u001b[0m", "    \u001b[37m-# Minimum value: 0\u001b[0m", "    \u001b[37m-# Maximum value: 65535\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_port\u001b[0m", "    \u001b[37m-#rabbit_port = 5672\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# RabbitMQ HA cluster host:port pairs. (list value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_hosts\u001b[0m", "    \u001b[37m-#rabbit_hosts = $rabbit_host:$rabbit_port\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Connect over SSL for RabbitMQ. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_use_ssl\u001b[0m", "    \u001b[37m-#rabbit_use_ssl = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The RabbitMQ userid. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_userid\u001b[0m", "    \u001b[37m-#rabbit_userid = guest\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The RabbitMQ password. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_password\u001b[0m", "    \u001b[37m-#rabbit_password = guest\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The RabbitMQ login method. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_login_method\u001b[0m", "    \u001b[37m-#rabbit_login_method = AMQPLAIN\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The RabbitMQ virtual host. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_virtual_host\u001b[0m", "    \u001b[37m-#rabbit_virtual_host = /\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# How frequently to retry connecting with RabbitMQ. (integer value)\u001b[0m", "    \u001b[37m-#rabbit_retry_interval = 1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# How long to backoff for between retries when connecting to RabbitMQ. (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_retry_backoff\u001b[0m", "    \u001b[37m-#rabbit_retry_backoff = 2\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum interval of RabbitMQ connection retries. Default is 30 seconds.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#rabbit_interval_max = 30\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of RabbitMQ connection retries. Default is 0 (infinite retry\u001b[0m", "    \u001b[37m-# count). (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_max_retries\u001b[0m", "    \u001b[37m-#rabbit_max_retries = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Try to use HA queues in RabbitMQ (x-ha-policy: all). If you change this\u001b[0m", "    \u001b[37m-# option, you must wipe the RabbitMQ database. In RabbitMQ 3.0, queue mirroring\u001b[0m", "    \u001b[37m-# is no longer controlled by the x-ha-policy argument when declaring a queue.\u001b[0m", "    \u001b[37m-# If you just want to make sure that all queues (except  those with auto-\u001b[0m", "    \u001b[37m-# generated names) are mirrored across all nodes, run: \"rabbitmqctl set_policy\u001b[0m", "    \u001b[37m-# HA '^(?!amq\\.).*' '{\"ha-mode\": \"all\"}' \" (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/rabbit_ha_queues\u001b[0m", "    \u001b[37m-#rabbit_ha_queues = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Positive integer representing duration in seconds for queue TTL (x-expires).\u001b[0m", "    \u001b[37m-# Queues which are unused for the duration of the TTL are automatically\u001b[0m", "    \u001b[37m-# deleted. The parameter affects only reply and fanout queues. (integer value)\u001b[0m", "    \u001b[37m-# Minimum value: 1\u001b[0m", "    \u001b[37m-#rabbit_transient_queues_ttl = 1800\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Specifies the number of messages to prefetch. Setting to zero allows\u001b[0m", "    \u001b[37m-# unlimited messages. (integer value)\u001b[0m", "    \u001b[37m-#rabbit_qos_prefetch_count = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Number of seconds after which the Rabbit broker is considered down if\u001b[0m", "    \u001b[37m-# heartbeat's keep-alive fails (0 disable the heartbeat). EXPERIMENTAL (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#heartbeat_timeout_threshold = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# How often times during the heartbeat_timeout_threshold we check the\u001b[0m", "    \u001b[37m-# heartbeat. (integer value)\u001b[0m", "    \u001b[37m-#heartbeat_rate = 2\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Deprecated, use rpc_backend=kombu+memory or rpc_backend=fake (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/fake_rabbit\u001b[0m", "    \u001b[37m-#fake_rabbit = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of channels to allow (integer value)\u001b[0m", "    \u001b[37m-#channel_max = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The maximum byte size for an AMQP frame (integer value)\u001b[0m", "    \u001b[37m-#frame_max = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# How often to send heartbeats for consumer's connections (integer value)\u001b[0m", "    \u001b[37m-#heartbeat_interval = 1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable SSL (boolean value)\u001b[0m", "    \u001b[37m-#ssl = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Arguments passed to ssl.wrap_socket (dict value)\u001b[0m", "    \u001b[37m-#ssl_options = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Set socket timeout in seconds for connection's socket (floating point value)\u001b[0m", "    \u001b[37m-#socket_timeout = 0.25\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Set TCP_USER_TIMEOUT in seconds for connection's socket (floating point\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#tcp_user_timeout = 0.25\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Set delay for reconnection to some host which has connection error (floating\u001b[0m", "    \u001b[37m-# point value)\u001b[0m", "    \u001b[37m-#host_connection_reconnect_delay = 0.25\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of connections to keep queued. (integer value)\u001b[0m", "    \u001b[37m-#pool_max_size = 10\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of connections to create above `pool_max_size`. (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#pool_max_overflow = 0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default number of seconds to wait for a connections to available (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#pool_timeout = 30\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Lifetime of a connection (since creation) in seconds or None for no\u001b[0m", "    \u001b[37m-# recycling. Expired connections are closed on acquire. (integer value)\u001b[0m", "    \u001b[37m-#pool_recycle = 600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Threshold at which inactive (since release) connections are considered stale\u001b[0m", "    \u001b[37m-# in seconds or None for no staleness. Stale connections are closed on acquire.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#pool_stale = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Persist notification messages. (boolean value)\u001b[0m", "    \u001b[37m-#notification_persistence = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Exchange name for for sending notifications (string value)\u001b[0m", "    \u001b[37m-#default_notification_exchange = ${control_exchange}_notification\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Max number of not acknowledged message which RabbitMQ can send to\u001b[0m", "    \u001b[37m-# notification listener. (integer value)\u001b[0m", "    \u001b[37m-#notification_listener_prefetch_count = 100\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Reconnecting retry count in case of connectivity problem during sending\u001b[0m", "    \u001b[37m-# notification, -1 means infinite retry. (integer value)\u001b[0m", "    \u001b[37m-#default_notification_retry_attempts = -1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Reconnecting retry delay in case of connectivity problem during sending\u001b[0m", "    \u001b[37m-# notification message (floating point value)\u001b[0m", "    \u001b[37m-#notification_retry_delay = 0.25\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time to live for rpc queues without consumers in seconds. (integer value)\u001b[0m", "    \u001b[37m-#rpc_queue_expiration = 60\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Exchange name for sending RPC messages (string value)\u001b[0m", "    \u001b[37m-#default_rpc_exchange = ${control_exchange}_rpc\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Exchange name for receiving RPC replies (string value)\u001b[0m", "    \u001b[37m-#rpc_reply_exchange = ${control_exchange}_rpc_reply\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Max number of not acknowledged message which RabbitMQ can send to rpc\u001b[0m", "    \u001b[37m-# listener. (integer value)\u001b[0m", "    \u001b[37m-#rpc_listener_prefetch_count = 100\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Max number of not acknowledged message which RabbitMQ can send to rpc reply\u001b[0m", "    \u001b[37m-# listener. (integer value)\u001b[0m", "    \u001b[37m-#rpc_reply_listener_prefetch_count = 100\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Reconnecting retry count in case of connectivity problem during sending\u001b[0m", "    \u001b[37m-# reply. -1 means infinite retry during rpc_timeout (integer value)\u001b[0m", "    \u001b[37m-#rpc_reply_retry_attempts = -1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Reconnecting retry delay in case of connectivity problem during sending\u001b[0m", "    \u001b[37m-# reply. (floating point value)\u001b[0m", "    \u001b[37m-#rpc_reply_retry_delay = 0.25\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Reconnecting retry count in case of connectivity problem during sending RPC\u001b[0m", "    \u001b[37m-# message, -1 means infinite retry. If actual retry attempts in not 0 the rpc\u001b[0m", "    \u001b[37m-# request could be processed more then one time (integer value)\u001b[0m", "    \u001b[37m-#default_rpc_retry_attempts = -1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Reconnecting retry delay in case of connectivity problem during sending RPC\u001b[0m", "    \u001b[37m-# message (floating point value)\u001b[0m", "    \u001b[37m-#rpc_retry_delay = 0.25\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[oslo_middleware]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.middleware\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The maximum body size for each  request, in bytes. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/osapi_max_request_body_size\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/max_request_body_size\u001b[0m", "    \u001b[37m-#max_request_body_size = 114688\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The HTTP Header that will be used to determine what the original request\u001b[0m", "    \u001b[37m-# protocol scheme was, even if it was hidden by an SSL termination proxy.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-#secure_proxy_ssl_header = X-Forwarded-Proto\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[oslo_policy]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From oslo.policy\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The JSON file that defines policies. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/policy_file\u001b[0m", "    \u001b[37m-#policy_file = policy.json\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default rule. Enforced when a requested rule is not found. (string value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/policy_default_rule\u001b[0m", "    \u001b[37m-#policy_default_rule = default\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Directories where policy configuration files are stored. They can be relative\u001b[0m", "    \u001b[37m-# to any directory in the search path defined by the config_dir option, or\u001b[0m", "    \u001b[37m-# absolute paths. The file defined by policy_file must exist for these\u001b[0m", "    \u001b[37m-# directories to be searched.  Missing or empty directories are ignored. (multi\u001b[0m", "    \u001b[37m-# valued)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [DEFAULT]/policy_dirs\u001b[0m", "    \u001b[37m-#policy_dirs = policy.d\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[paste_deploy]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Name of the paste configuration file that defines the available pipelines.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#config_file = keystone-paste.ini\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[policy]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the policy backend driver in the keystone.policy namespace.\u001b[0m", "    \u001b[37m-# Supplied drivers are rules and sql. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of entities that will be returned in a policy collection.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#list_limit = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[resource]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the resource backend driver in the keystone.resource\u001b[0m", "    \u001b[37m-# namespace. Only an SQL driver is supplied. If a resource driver is not\u001b[0m", "    \u001b[37m-# specified, the assignment driver will choose the resource driver. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#driver = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for resource caching. This has no effect unless global caching is\u001b[0m", "    \u001b[37m-# enabled. (boolean value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [assignment]/caching\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# TTL (in seconds) to cache resource data. This has no effect unless global\u001b[0m", "    \u001b[37m-# caching is enabled. (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [assignment]/cache_time\u001b[0m", "    \u001b[37m-#cache_time = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of entities that will be returned in a resource collection.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [assignment]/list_limit\u001b[0m", "    \u001b[37m-#list_limit = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Name of the domain that owns the `admin_project_name`. Defaults to None.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#admin_project_domain_name = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Special project for performing administrative operations on remote services.\u001b[0m", "    \u001b[37m-# Tokens scoped to this project will contain the key/value\u001b[0m", "    \u001b[37m-# `is_admin_project=true`. Defaults to None. (string value)\u001b[0m", "    \u001b[37m-#admin_project_name = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Whether the names of projects are restricted from containing url reserved\u001b[0m", "    \u001b[37m-# characters. If set to new, attempts to create or update a project with a url\u001b[0m", "    \u001b[37m-# unsafe name will return an error. In addition, if set to strict, attempts to\u001b[0m", "    \u001b[37m-# scope a token using an unsafe project name will return an error. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# Allowed values: off, new, strict\u001b[0m", "    \u001b[37m-#project_name_url_safe = off\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Whether the names of domains are restricted from containing url reserved\u001b[0m", "    \u001b[37m-# characters. If set to new, attempts to create or update a domain with a url\u001b[0m", "    \u001b[37m-# unsafe name will return an error. In addition, if set to strict, attempts to\u001b[0m", "    \u001b[37m-# scope a token using a domain name which is unsafe will return an error.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-# Allowed values: off, new, strict\u001b[0m", "    \u001b[37m-#domain_name_url_safe = off\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[revoke]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for an implementation of the backend for persisting revocation\u001b[0m", "    \u001b[37m-# events in the keystone.revoke namespace. Supplied drivers are kvs and sql.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# This value (calculated in seconds) is added to token expiration before a\u001b[0m", "    \u001b[37m-# revocation event may be removed from the backend. (integer value)\u001b[0m", "    \u001b[37m-#expiration_buffer = 1800\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for revocation event caching. This has no effect unless global caching\u001b[0m", "    \u001b[37m-# is enabled. (boolean value)\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time to cache the revocation list and the revocation events (in seconds).\u001b[0m", "    \u001b[37m-# This has no effect unless global and token caching are enabled. (integer\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# Deprecated group/name - [token]/revocation_cache_time\u001b[0m", "    \u001b[37m-#cache_time = 3600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[role]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the role backend driver in the keystone.role namespace.\u001b[0m", "    \u001b[37m-# Supplied drivers are ldap and sql. (string value)\u001b[0m", "    \u001b[37m-#driver = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for role caching. This has no effect unless global caching is enabled.\u001b[0m", "    \u001b[37m-# (boolean value)\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# TTL (in seconds) to cache role data. This has no effect unless global caching\u001b[0m", "    \u001b[37m-# is enabled. (integer value)\u001b[0m", "    \u001b[37m-#cache_time = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum number of entities that will be returned in a role collection.\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#list_limit = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[saml]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Default TTL, in seconds, for any generated SAML assertion created by\u001b[0m", "    \u001b[37m-# Keystone. (integer value)\u001b[0m", "    \u001b[37m-#assertion_expiration_time = 3600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Binary to be called for XML signing. Install the appropriate package, specify\u001b[0m", "    \u001b[37m-# absolute path or adjust your PATH environment variable if the binary cannot\u001b[0m", "    \u001b[37m-# be found. (string value)\u001b[0m", "    \u001b[37m-#xmlsec1_binary = xmlsec1\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the certfile for SAML signing. For non-production environments, you\u001b[0m", "    \u001b[37m-# may be interested in using `keystone-manage pki_setup` to generate self-\u001b[0m", "    \u001b[37m-# signed certificates. Note, the path cannot contain a comma. (string value)\u001b[0m", "    \u001b[37m-#certfile = /etc/keystone/ssl/certs/signing_cert.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the keyfile for SAML signing. Note, the path cannot contain a comma.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#keyfile = /etc/keystone/ssl/private/signing_key.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entity ID value for unique Identity Provider identification. Usually FQDN is\u001b[0m", "    \u001b[37m-# set with a suffix. A value is required to generate IDP Metadata. For example:\u001b[0m", "    \u001b[37m-# https://keystone.example.com/v3/OS-FEDERATION/saml2/idp (string value)\u001b[0m", "    \u001b[37m-#idp_entity_id = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Identity Provider Single-Sign-On service value, required in the Identity\u001b[0m", "    \u001b[37m-# Provider's metadata. A value is required to generate IDP Metadata. For\u001b[0m", "    \u001b[37m-# example: https://keystone.example.com/v3/OS-FEDERATION/saml2/sso (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#idp_sso_endpoint = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Language used by the organization. (string value)\u001b[0m", "    \u001b[37m-#idp_lang = en\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Organization name the installation belongs to. (string value)\u001b[0m", "    \u001b[37m-#idp_organization_name = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Organization name to be displayed. (string value)\u001b[0m", "    \u001b[37m-#idp_organization_display_name = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# URL of the organization. (string value)\u001b[0m", "    \u001b[37m-#idp_organization_url = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Company of contact person. (string value)\u001b[0m", "    \u001b[37m-#idp_contact_company = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Given name of contact person (string value)\u001b[0m", "    \u001b[37m-#idp_contact_name = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Surname of contact person. (string value)\u001b[0m", "    \u001b[37m-#idp_contact_surname = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Email address of contact person. (string value)\u001b[0m", "    \u001b[37m-#idp_contact_email = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Telephone number of contact person. (string value)\u001b[0m", "    \u001b[37m-#idp_contact_telephone = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The contact type describing the main point of contact for the identity\u001b[0m", "    \u001b[37m-# provider. (string value)\u001b[0m", "    \u001b[37m-# Allowed values: technical, support, administrative, billing, other\u001b[0m", "    \u001b[37m-#idp_contact_type = other\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path to the Identity Provider Metadata file. This file should be generated\u001b[0m", "    \u001b[37m-# with the keystone-manage saml_idp_metadata command. (string value)\u001b[0m", "    \u001b[37m-#idp_metadata_path = /etc/keystone/saml2_idp_metadata.xml\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The prefix to use for the RelayState SAML attribute, used when generating ECP\u001b[0m", "    \u001b[37m-# wrapped assertions. (string value)\u001b[0m", "    \u001b[37m-#relay_state_prefix = ss:mem:\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[shadow_users]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the shadow users backend driver in the\u001b[0m", "    \u001b[37m-# keystone.identity.shadow_users namespace. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[signing]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the certfile for token signing. For non-production environments, you\u001b[0m", "    \u001b[37m-# may be interested in using `keystone-manage pki_setup` to generate self-\u001b[0m", "    \u001b[37m-# signed certificates. (string value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#certfile = /etc/keystone/ssl/certs/signing_cert.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the keyfile for token signing. (string value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#keyfile = /etc/keystone/ssl/private/signing_key.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the CA for token signing. (string value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#ca_certs = /etc/keystone/ssl/certs/ca.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the CA key for token signing. (string value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#ca_key = /etc/keystone/ssl/private/cakey.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Key size (in bits) for token signing cert (auto generated certificate).\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-# Minimum value: 1024\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#key_size = 2048\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Days the token signing cert is valid for (auto generated certificate).\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#valid_days = 3650\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Certificate subject (auto generated certificate) for token signing. (string\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#cert_subject = /C=US/ST=Unset/L=Unset/O=Unset/CN=www.example.com\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[ssl]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Path of the CA key file for SSL. (string value)\u001b[0m", "    \u001b[37m-#ca_key = /etc/keystone/ssl/private/cakey.pem\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# SSL key length (in bits) (auto generated certificate). (integer value)\u001b[0m", "    \u001b[37m-# Minimum value: 1024\u001b[0m", "    \u001b[37m-#key_size = 1024\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Days the certificate is valid for once signed (auto generated certificate).\u001b[0m", "    \u001b[37m-# (integer value)\u001b[0m", "    \u001b[37m-#valid_days = 3650\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# SSL certificate subject (auto generated certificate). (string value)\u001b[0m", "    \u001b[37m-#cert_subject = /C=US/ST=Unset/L=Unset/O=Unset/CN=localhost\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[token]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# External auth mechanisms that should add bind information to token, e.g.,\u001b[0m", "    \u001b[37m-# kerberos,x509. (list value)\u001b[0m", "    \u001b[37m-#bind =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enforcement policy on tokens presented to Keystone with bind information. One\u001b[0m", "    \u001b[37m-# of disabled, permissive, strict, required or a specifically required bind\u001b[0m", "    \u001b[37m-# mode, e.g., kerberos or x509 to require binding to that authentication.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#enforce_token_bind = permissive\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Amount of time a token should remain valid (in seconds). (integer value)\u001b[0m", "    \u001b[37m-#expiration = 3600\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Controls the token construction, validation, and revocation operations.\u001b[0m", "    \u001b[37m-# Entrypoint in the keystone.token.provider namespace. Core providers are\u001b[0m", "    \u001b[37m-# [fernet|pkiz|pki|uuid]. (string value)\u001b[0m", "    \u001b[37m-#provider = uuid\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the token persistence backend driver in the\u001b[0m", "    \u001b[37m-# keystone.token.persistence namespace. Supplied drivers are kvs, memcache,\u001b[0m", "    \u001b[37m-# memcache_pool, and sql. (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Toggle for token system caching. This has no effect unless global caching is\u001b[0m", "    \u001b[37m-# enabled. (boolean value)\u001b[0m", "    \u001b[37m-#caching = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Time to cache tokens (in seconds). This has no effect unless global and token\u001b[0m", "    \u001b[37m-# caching are enabled. (integer value)\u001b[0m", "    \u001b[37m-#cache_time = <None>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Revoke token by token identifier. Setting revoke_by_id to true enables\u001b[0m", "    \u001b[37m-# various forms of enumerating tokens, e.g. `list tokens for user`. These\u001b[0m", "    \u001b[37m-# enumerations are processed to determine the list of tokens to revoke. Only\u001b[0m", "    \u001b[37m-# disable if you are switching to using the Revoke extension with a backend\u001b[0m", "    \u001b[37m-# other than KVS, which stores events in memory. (boolean value)\u001b[0m", "    \u001b[37m-#revoke_by_id = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Allow rescoping of scoped token. Setting allow_rescoped_scoped_token to false\u001b[0m", "    \u001b[37m-# prevents a user from exchanging a scoped token for any other token. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#allow_rescope_scoped_token = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The hash algorithm to use for PKI tokens. This can be set to any algorithm\u001b[0m", "    \u001b[37m-# that hashlib supports. WARNING: Before changing this value, the auth_token\u001b[0m", "    \u001b[37m-# middleware must be configured with the hash_algorithms, otherwise token\u001b[0m", "    \u001b[37m-# revocation will not be processed correctly. (string value)\u001b[0m", "    \u001b[37m-# This option is deprecated for removal.\u001b[0m", "    \u001b[37m-# Its value may be silently ignored in the future.\u001b[0m", "    \u001b[37m-# Reason: PKI token support has been deprecated in the M release and will be\u001b[0m", "    \u001b[37m-# removed in the O release. Fernet or UUID tokens are recommended.\u001b[0m", "    \u001b[37m-#hash_algorithm = md5\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Add roles to token that are not explicitly added, but that are linked\u001b[0m", "    \u001b[37m-# implicitly to other roles. (boolean value)\u001b[0m", "    \u001b[37m-#infer_roles = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[tokenless_auth]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The list of trusted issuers to further filter the certificates that are\u001b[0m", "    \u001b[37m-# allowed to participate in the X.509 tokenless authorization. If the option is\u001b[0m", "    \u001b[37m-# absent then no certificates will be allowed. The naming format for the\u001b[0m", "    \u001b[37m-# attributes of a Distinguished Name(DN) must be separated by a comma and\u001b[0m", "    \u001b[37m-# contain no spaces. This configuration option may be repeated for multiple\u001b[0m", "    \u001b[37m-# values. For example: trusted_issuer=CN=john,OU=keystone,O=openstack\u001b[0m", "    \u001b[37m-# trusted_issuer=CN=mary,OU=eng,O=abc (multi valued)\u001b[0m", "    \u001b[37m-#trusted_issuer =\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The protocol name for the X.509 tokenless authorization along with the option\u001b[0m", "    \u001b[37m-# issuer_attribute below can look up its corresponding mapping. (string value)\u001b[0m", "    \u001b[37m-#protocol = x509\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# The issuer attribute that is served as an IdP ID for the X.509 tokenless\u001b[0m", "    \u001b[37m-# authorization along with the protocol to look up its corresponding mapping.\u001b[0m", "    \u001b[37m-# It is the environment variable in the WSGI environment that references to the\u001b[0m", "    \u001b[37m-# issuer of the client certificate. (string value)\u001b[0m", "    \u001b[37m-#issuer_attribute = SSL_CLIENT_I_DN\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[trust]\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# From keystone\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Delegation and impersonation features can be optionally disabled. (boolean\u001b[0m", "    \u001b[37m-# value)\u001b[0m", "    \u001b[37m-#enabled = true\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Enable redelegation feature. (boolean value)\u001b[0m", "    \u001b[37m-#allow_redelegation = false\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Maximum depth of trust redelegation. (integer value)\u001b[0m", "    \u001b[37m-#max_redelegation_count = 3\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Entrypoint for the trust backend driver in the keystone.trust namespace.\u001b[0m", "    \u001b[37m-# (string value)\u001b[0m", "    \u001b[37m-#driver = sql\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-[extra_headers]\u001b[0m", "    \u001b[37m-Distribution = Ubuntu\u001b[0m", "    \u001b[37m+[database]\u001b[0m", "    \u001b[37m+connection = mysql+pymysql://keystone:mypass@139.178.70.138:3306/keystone?charset=utf8\u001b[0m", "    \u001b[32m- change mode from '0644' to '0640'\u001b[0m", "    \u001b[32m- change owner from 'root' to 'keystone'\u001b[0m", "    \u001b[32m- change group from 'root' to 'keystone'\u001b[0m", "\u001b[0m  * ruby_block[delete all attributes in node['openstack']['identity']['conf_secrets']] action run", "    \u001b[32m- execute the ruby block delete all attributes in node['openstack']['identity']['conf_secrets']\u001b[0m", "\u001b[0m  * execute[keystone-manage db_sync] action run", "    \u001b[32m- execute keystone-manage db_sync\u001b[0m", "\u001b[0m  * execute[bootstrap_keystone] action run", "    \u001b[32m- execute keystone-manage bootstrap \\", "\u001b[0m    \u001b[32m          --bootstrap-password mypass \\", "\u001b[0m    \u001b[32m          --bootstrap-username admin \\", "\u001b[0m    \u001b[32m          --bootstrap-project-name admin \\", "\u001b[0m    \u001b[32m          --bootstrap-role-name admin \\", "\u001b[0m    \u001b[32m          --bootstrap-service-name keystone \\", "\u001b[0m    \u001b[32m          --bootstrap-region-id RegionOne \\", "\u001b[0m    \u001b[32m          --bootstrap-admin-url http://139.178.70.138:5000/v3 \\", "\u001b[0m    \u001b[32m          --bootstrap-public-url http://139.178.70.138:5000/v3 \\", "\u001b[0m    \u001b[32m          --bootstrap-internal-url http://139.178.70.138:5000/v3\u001b[0m", "\u001b[0mRecipe: apache2::default\u001b[0m", "  * apt_package[apache2] action install", "    \u001b[32m- install version 2.4.18-2ubuntu3.10 of package apache2\u001b[0m", "\u001b[0m  * directory[/etc/apache2/sites-available] action create (up to date)", "  * directory[/etc/apache2/sites-enabled] action create (up to date)", "  * directory[/etc/apache2/mods-available] action create (up to date)", "  * directory[/etc/apache2/mods-enabled] action create (up to date)", "  * directory[/etc/apache2/conf-available] action create (up to date)", "  * directory[/etc/apache2/conf-enabled] action create (up to date)", "  * link[/etc/apache2/sites-enabled/default] action delete (up to date)", "  * file[/etc/apache2/sites-available/default] action delete (up to date)", "  * link[/etc/apache2/sites-enabled/default.conf] action delete (up to date)", "  * file[/etc/apache2/sites-available/default.conf] action delete (up to date)", "  * link[/etc/apache2/sites-enabled/000-default] action delete (up to date)", "  * file[/etc/apache2/sites-available/000-default] action delete (up to date)", "  * link[/etc/apache2/sites-enabled/000-default.conf] action delete", "    \u001b[32m- delete link to file at /etc/apache2/sites-enabled/000-default.conf\u001b[0m", "\u001b[0m  * file[/etc/apache2/sites-available/000-default.conf] action delete", "    \u001b[32m- delete file /etc/apache2/sites-available/000-default.conf\u001b[0m", "\u001b[0m  * directory[/var/log/apache2] action create", "    \u001b[32m- change mode from '0750' to '0755'\u001b[0m", "\u001b[0m  * apt_package[perl] action install (up to date)", "  * link[/usr/sbin/a2ensite] action delete", "    \u001b[32m- delete link to file at /usr/sbin/a2ensite\u001b[0m", "\u001b[0m  * template[/usr/sbin/a2ensite] action create", "    \u001b[32m- create new file /usr/sbin/a2ensite\u001b[0m", "    \u001b[32m- update content in file /usr/sbin/a2ensite from none to ce53f4\u001b[0m", "    \u001b[37m--- /usr/sbin/a2ensite\t2019-04-23 15:42:46.663498039 +0000\u001b[0m", "    \u001b[37m+++ /usr/sbin/.chef-a2ensite20190423-11189-1wt724b\t2019-04-23 15:42:46.663498039 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,533 @@\u001b[0m", "    \u001b[37m+#!/usr/bin/perl -w\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m", "    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+use strict;\u001b[0m", "    \u001b[37m+use Cwd 'realpath';\u001b[0m", "    \u001b[37m+use File::Spec;\u001b[0m", "    \u001b[37m+use File::Basename;\u001b[0m", "    \u001b[37m+use File::Path;\u001b[0m", "    \u001b[37m+use Getopt::Long;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $quiet;\u001b[0m", "    \u001b[37m+my $force;\u001b[0m", "    \u001b[37m+my $maintmode;\u001b[0m", "    \u001b[37m+my $purge;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m", "    \u001b[37m+GetOptions(\u001b[0m", "    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m", "    \u001b[37m+    'force|f'     => \\$force,\u001b[0m", "    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m", "    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m", "    \u001b[37m+) or exit 2;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $basename = basename($0);\u001b[0m", "    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m", "    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m", "    \u001b[37m+my $act        = $1;\u001b[0m", "    \u001b[37m+my $obj        = $2;\u001b[0m", "    \u001b[37m+my $dir_suffix = $3;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m", "    \u001b[37m+    || (\u001b[0m", "    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m", "    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m", "    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m", "    \u001b[37m+    );\u001b[0m", "    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m", "    \u001b[37m+read_env_file($env_file);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$act .= 'able';\u001b[0m", "    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m", "    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'module';\u001b[0m", "    \u001b[37m+    $dir    = 'mods';\u001b[0m", "    \u001b[37m+    $sffx   = '.load';\u001b[0m", "    \u001b[37m+    $reload = 'restart';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'conf';\u001b[0m", "    \u001b[37m+    $dir    = 'conf';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+else {\u001b[0m", "    \u001b[37m+    $dir    = 'sites';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+$name = ucfirst($obj);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m", "    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m", "    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m", "    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m", "    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m", "    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $request_reload = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $rc = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m", "    \u001b[37m+    my @choices = myglob('*');\u001b[0m", "    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m", "    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m", "    \u001b[37m+    my $input = <>;\u001b[0m", "    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my @objs;\u001b[0m", "    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m", "    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m", "    \u001b[37m+    my @glob = myglob($arg);\u001b[0m", "    \u001b[37m+    if ( !@glob ) {\u001b[0m", "    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m", "    \u001b[37m+        $rc = 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        push @objs, @glob;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+foreach my $acton (@objs) {\u001b[0m", "    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+info(\u001b[0m", "    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m", "    \u001b[37m+) if $request_reload;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+exit($rc);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+##############################################################################\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub myglob {\u001b[0m", "    \u001b[37m+    my $arg = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my @glob = map {\u001b[0m", "    \u001b[37m+        s{^$choicedir/}{};\u001b[0m", "    \u001b[37m+        s{$sffx$}{};\u001b[0m", "    \u001b[37m+        $_\u001b[0m", "    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return @glob;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub doit {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m+            print\u001b[0m", "    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m", "    \u001b[37m+            $acton = 'cgid';\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m", "    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m", "    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m", "    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m", "    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m", "    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m", "    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m", "    \u001b[37m+                unlink($link);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m", "    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m", "    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m", "    \u001b[37m+                    unlink($conflink);\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        if ( $purge ) {\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # handle module dependencies\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m", "    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m", "    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m", "    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m", "    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m", "    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            my @depending;\u001b[0m", "    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m", "    \u001b[37m+                my @deps = get_deps($d);\u001b[0m", "    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m", "    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m", "    \u001b[37m+                    push @depending, $1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            if ( scalar @depending ) {\u001b[0m", "    \u001b[37m+                if ($force) {\u001b[0m", "    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m", "    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m", "    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                    return 1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m", "    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m", "    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m", "    \u001b[37m+                );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m", "    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m", "    \u001b[37m+            remove_link($link);\u001b[0m", "    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+                remove_link($conflink);\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+            remove_link($conflink);\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m", "    \u001b[37m+            if ( $purge ) {\u001b[0m", "    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub get_deps {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $fd;\u001b[0m", "    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m", "    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m", "    \u001b[37m+        return;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    my $line;\u001b[0m", "    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m", "    \u001b[37m+        chomp $line;\u001b[0m", "    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m", "    \u001b[37m+            my $deps = $1;\u001b[0m", "    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m", "    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub do_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !doit($d) ) {\u001b[0m", "    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warn_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m", "    \u001b[37m+            warning(\u001b[0m", "    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_conflicts {\u001b[0m", "    \u001b[37m+    my $acton    = shift;\u001b[0m", "    \u001b[37m+    my $haderror = 0;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m", "    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+            error(\u001b[0m", "    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m", "    \u001b[37m+            $haderror++;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ($haderror) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub add_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # create relative link\u001b[0m", "    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m", "    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $link ) {\u001b[0m", "    \u001b[37m+        if ( -l $link ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # points to nowhere\u001b[0m", "    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m", "    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 'missing';\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m", "    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m", "    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 'ok';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub remove_link {\u001b[0m", "    \u001b[37m+    my ($link) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -l $link ) {\u001b[0m", "    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( -e $link ) {\u001b[0m", "    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub threaded {\u001b[0m", "    \u001b[37m+    my $result = \"\";\u001b[0m", "    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m", "    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m", "    \u001b[37m+    if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # config doesn't work\u001b[0m", "    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m", "    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # do what user requested\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub info {\u001b[0m", "    \u001b[37m+    print @_ if !$quiet;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub error {\u001b[0m", "    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warning {\u001b[0m", "    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub is_in {\u001b[0m", "    \u001b[37m+    my $needle = shift;\u001b[0m", "    \u001b[37m+    foreach my $e (@_) {\u001b[0m", "    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 0;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub read_env_file {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    -r $file or return;\u001b[0m", "    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m", "    \u001b[37m+    if ($?) {\u001b[0m", "    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    foreach my $l (@lines) {\u001b[0m", "    \u001b[37m+        chomp $l;\u001b[0m", "    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m", "    \u001b[37m+        $ENV{$1} = $2;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub switch_marker {\u001b[0m", "    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m", "    \u001b[37m+        if @_ != 3;\u001b[0m", "    \u001b[37m+    my $which = shift;\u001b[0m", "    \u001b[37m+    my $what  = shift;\u001b[0m", "    \u001b[37m+    my $name  = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $mode = \"admin\";\u001b[0m", "    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m", "    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m", "    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m", "    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m", "    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m", "    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m", "    \u001b[37m+            || error(\u001b[0m", "    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m", "    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m", "    \u001b[37m+    chomp(@markers);\u001b[0m", "    \u001b[37m+    foreach (@markers) {\u001b[0m", "    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    unless ($purge) {\u001b[0m", "    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m", "    \u001b[37m+        if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * link[/usr/sbin/a2dissite] action delete", "    \u001b[32m- delete link to file at /usr/sbin/a2dissite\u001b[0m", "\u001b[0m  * template[/usr/sbin/a2dissite] action create", "    \u001b[32m- create new file /usr/sbin/a2dissite\u001b[0m", "    \u001b[32m- update content in file /usr/sbin/a2dissite from none to ce53f4\u001b[0m", "    \u001b[37m--- /usr/sbin/a2dissite\t2019-04-23 15:42:46.683499784 +0000\u001b[0m", "    \u001b[37m+++ /usr/sbin/.chef-a2dissite20190423-11189-qn4jou\t2019-04-23 15:42:46.683499784 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,533 @@\u001b[0m", "    \u001b[37m+#!/usr/bin/perl -w\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m", "    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+use strict;\u001b[0m", "    \u001b[37m+use Cwd 'realpath';\u001b[0m", "    \u001b[37m+use File::Spec;\u001b[0m", "    \u001b[37m+use File::Basename;\u001b[0m", "    \u001b[37m+use File::Path;\u001b[0m", "    \u001b[37m+use Getopt::Long;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $quiet;\u001b[0m", "    \u001b[37m+my $force;\u001b[0m", "    \u001b[37m+my $maintmode;\u001b[0m", "    \u001b[37m+my $purge;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m", "    \u001b[37m+GetOptions(\u001b[0m", "    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m", "    \u001b[37m+    'force|f'     => \\$force,\u001b[0m", "    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m", "    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m", "    \u001b[37m+) or exit 2;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $basename = basename($0);\u001b[0m", "    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m", "    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m", "    \u001b[37m+my $act        = $1;\u001b[0m", "    \u001b[37m+my $obj        = $2;\u001b[0m", "    \u001b[37m+my $dir_suffix = $3;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m", "    \u001b[37m+    || (\u001b[0m", "    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m", "    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m", "    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m", "    \u001b[37m+    );\u001b[0m", "    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m", "    \u001b[37m+read_env_file($env_file);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$act .= 'able';\u001b[0m", "    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m", "    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'module';\u001b[0m", "    \u001b[37m+    $dir    = 'mods';\u001b[0m", "    \u001b[37m+    $sffx   = '.load';\u001b[0m", "    \u001b[37m+    $reload = 'restart';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'conf';\u001b[0m", "    \u001b[37m+    $dir    = 'conf';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+else {\u001b[0m", "    \u001b[37m+    $dir    = 'sites';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+$name = ucfirst($obj);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m", "    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m", "    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m", "    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m", "    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m", "    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $request_reload = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $rc = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m", "    \u001b[37m+    my @choices = myglob('*');\u001b[0m", "    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m", "    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m", "    \u001b[37m+    my $input = <>;\u001b[0m", "    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my @objs;\u001b[0m", "    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m", "    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m", "    \u001b[37m+    my @glob = myglob($arg);\u001b[0m", "    \u001b[37m+    if ( !@glob ) {\u001b[0m", "    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m", "    \u001b[37m+        $rc = 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        push @objs, @glob;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+foreach my $acton (@objs) {\u001b[0m", "    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+info(\u001b[0m", "    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m", "    \u001b[37m+) if $request_reload;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+exit($rc);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+##############################################################################\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub myglob {\u001b[0m", "    \u001b[37m+    my $arg = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my @glob = map {\u001b[0m", "    \u001b[37m+        s{^$choicedir/}{};\u001b[0m", "    \u001b[37m+        s{$sffx$}{};\u001b[0m", "    \u001b[37m+        $_\u001b[0m", "    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return @glob;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub doit {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m+            print\u001b[0m", "    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m", "    \u001b[37m+            $acton = 'cgid';\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m", "    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m", "    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m", "    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m", "    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m", "    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m", "    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m", "    \u001b[37m+                unlink($link);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m", "    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m", "    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m", "    \u001b[37m+                    unlink($conflink);\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        if ( $purge ) {\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # handle module dependencies\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m", "    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m", "    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m", "    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m", "    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m", "    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            my @depending;\u001b[0m", "    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m", "    \u001b[37m+                my @deps = get_deps($d);\u001b[0m", "    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m", "    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m", "    \u001b[37m+                    push @depending, $1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            if ( scalar @depending ) {\u001b[0m", "    \u001b[37m+                if ($force) {\u001b[0m", "    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m", "    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m", "    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                    return 1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m", "    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m", "    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m", "    \u001b[37m+                );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m", "    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m", "    \u001b[37m+            remove_link($link);\u001b[0m", "    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+                remove_link($conflink);\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+            remove_link($conflink);\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m", "    \u001b[37m+            if ( $purge ) {\u001b[0m", "    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub get_deps {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $fd;\u001b[0m", "    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m", "    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m", "    \u001b[37m+        return;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    my $line;\u001b[0m", "    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m", "    \u001b[37m+        chomp $line;\u001b[0m", "    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m", "    \u001b[37m+            my $deps = $1;\u001b[0m", "    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m", "    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub do_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !doit($d) ) {\u001b[0m", "    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warn_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m", "    \u001b[37m+            warning(\u001b[0m", "    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_conflicts {\u001b[0m", "    \u001b[37m+    my $acton    = shift;\u001b[0m", "    \u001b[37m+    my $haderror = 0;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m", "    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+            error(\u001b[0m", "    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m", "    \u001b[37m+            $haderror++;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ($haderror) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub add_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # create relative link\u001b[0m", "    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m", "    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $link ) {\u001b[0m", "    \u001b[37m+        if ( -l $link ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # points to nowhere\u001b[0m", "    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m", "    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 'missing';\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m", "    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m", "    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 'ok';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub remove_link {\u001b[0m", "    \u001b[37m+    my ($link) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -l $link ) {\u001b[0m", "    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( -e $link ) {\u001b[0m", "    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub threaded {\u001b[0m", "    \u001b[37m+    my $result = \"\";\u001b[0m", "    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m", "    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m", "    \u001b[37m+    if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # config doesn't work\u001b[0m", "    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m", "    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # do what user requested\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub info {\u001b[0m", "    \u001b[37m+    print @_ if !$quiet;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub error {\u001b[0m", "    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warning {\u001b[0m", "    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub is_in {\u001b[0m", "    \u001b[37m+    my $needle = shift;\u001b[0m", "    \u001b[37m+    foreach my $e (@_) {\u001b[0m", "    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 0;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub read_env_file {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    -r $file or return;\u001b[0m", "    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m", "    \u001b[37m+    if ($?) {\u001b[0m", "    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    foreach my $l (@lines) {\u001b[0m", "    \u001b[37m+        chomp $l;\u001b[0m", "    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m", "    \u001b[37m+        $ENV{$1} = $2;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub switch_marker {\u001b[0m", "    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m", "    \u001b[37m+        if @_ != 3;\u001b[0m", "    \u001b[37m+    my $which = shift;\u001b[0m", "    \u001b[37m+    my $what  = shift;\u001b[0m", "    \u001b[37m+    my $name  = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $mode = \"admin\";\u001b[0m", "    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m", "    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m", "    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m", "    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m", "    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m", "    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m", "    \u001b[37m+            || error(\u001b[0m", "    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m", "    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m", "    \u001b[37m+    chomp(@markers);\u001b[0m", "    \u001b[37m+    foreach (@markers) {\u001b[0m", "    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    unless ($purge) {\u001b[0m", "    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m", "    \u001b[37m+        if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * link[/usr/sbin/a2enmod] action delete (skipped due to only_if)", "  * template[/usr/sbin/a2enmod] action create", "    \u001b[32m- update content in file /usr/sbin/a2enmod from e2796c to ce53f4\u001b[0m", "    \u001b[37m--- /usr/sbin/a2enmod\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /usr/sbin/.chef-a2enmod20190423-11189-zgviig\t2019-04-23 15:42:46.699501179 +0000\u001b[0m", "    \u001b[37m@@ -11,8 +11,6 @@\u001b[0m", "    \u001b[37m use File::Basename;\u001b[0m", "    \u001b[37m use File::Path;\u001b[0m", "    \u001b[37m use Getopt::Long;\u001b[0m", "    \u001b[37m-use feature ':5.16';\u001b[0m", "    \u001b[37m-no warnings \"experimental::smartmatch\";\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m my $quiet;\u001b[0m", "    \u001b[37m my $force;\u001b[0m", "    \u001b[37m@@ -34,18 +32,12 @@\u001b[0m", "    \u001b[37m my $obj        = $2;\u001b[0m", "    \u001b[37m my $dir_suffix = $3;\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-my @essential_module_list = qw(alias auth_basic authn_file authz_host\u001b[0m", "    \u001b[37m-    authz_user autoindex deflate dir env filter logio mime negotiation\u001b[0m", "    \u001b[37m-    setenvif unixd version watchdog);\u001b[0m", "    \u001b[37m-my $env_file = $ENV{APACHE_ENVVARS};\u001b[0m", "    \u001b[37m-if (! $env_file) {\u001b[0m", "    \u001b[37m-    if ($ENV{APACHE_CONFDIR}) {\u001b[0m", "    \u001b[37m-        $env_file = \"$ENV{APACHE_CONFDIR}/envvars\";\u001b[0m", "    \u001b[37m-    }\u001b[0m", "    \u001b[37m-    else {\u001b[0m", "    \u001b[37m-        $env_file = \"/etc/apache2$dir_suffix/envvars\";\u001b[0m", "    \u001b[37m-    }\u001b[0m", "    \u001b[37m-}\u001b[0m", "    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m", "    \u001b[37m+    || (\u001b[0m", "    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m", "    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m", "    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m", "    \u001b[37m+    );\u001b[0m", "    \u001b[37m $ENV{LANG} = 'C';\u001b[0m", "    \u001b[37m read_env_file($env_file);\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -74,7 +66,7 @@\u001b[0m", "    \u001b[37m my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m", "    \u001b[37m     || \"$confdir/$dir-available\";\u001b[0m", "    \u001b[37m my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m", "    \u001b[37m-my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/var/lib/apache2\";\u001b[0m", "    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m $statedir .= \"/$obj\";\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -82,8 +74,6 @@\u001b[0m", "    \u001b[37m my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m my $request_reload = 0;\u001b[0m", "    \u001b[37m-my $request_htcacheclean;\u001b[0m", "    \u001b[37m-my $htc = \"apache-htcacheclean$dir_suffix\";\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m my $rc = 0;\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -113,14 +103,8 @@\u001b[0m", "    \u001b[37m     doit($acton) or $rc = 1;\u001b[0m", "    \u001b[37m }\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-my $htcstart = \"\";\u001b[0m", "    \u001b[37m-if ($request_htcacheclean) {\u001b[0m", "    \u001b[37m-    my $cmd = ($act eq \"enable\") ? \"start\" : \"stop\";\u001b[0m", "    \u001b[37m-    $htcstart = \"  service $htc $cmd\
\";\u001b[0m", "    \u001b[37m-}\u001b[0m", "    \u001b[37m-info(  \"To activate the new configuration, you need to run:\
\"\u001b[0m", "    \u001b[37m-     . \"  service apache2$dir_suffix $reload\
\"\u001b[0m", "    \u001b[37m-     . $htcstart\u001b[0m", "    \u001b[37m+info(\u001b[0m", "    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m", "    \u001b[37m ) if $request_reload;\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m exit($rc);\u001b[0m", "    \u001b[37m@@ -144,7 +128,7 @@\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m     my ( $conftgt, $conflink );\u001b[0m", "    \u001b[37m     if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m-        if ( $act eq 'enable' && $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m             print\u001b[0m", "    \u001b[37m                 \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m", "    \u001b[37m             $acton = 'cgid';\u001b[0m", "    \u001b[37m@@ -193,6 +177,11 @@\u001b[0m", "    \u001b[37m     # handle module dependencies\u001b[0m", "    \u001b[37m     if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m         if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m", "    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m", "    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m", "    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m             my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m", "    \u001b[37m             do_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -271,7 +260,11 @@\u001b[0m", "    \u001b[37m             }\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m             print \"Enabling $obj $acton.\
\";\u001b[0m", "    \u001b[37m-            special_module_handling($acton);\u001b[0m", "    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m", "    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m", "    \u001b[37m+                );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m             return add_link( $tgt, $link )\u001b[0m", "    \u001b[37m                 && switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m         }\u001b[0m", "    \u001b[37m@@ -282,10 +275,6 @@\u001b[0m", "    \u001b[37m     }\u001b[0m", "    \u001b[37m     else {\u001b[0m", "    \u001b[37m         if ( -e $link || -l $link ) {\u001b[0m", "    \u001b[37m-            special_module_handling($acton);\u001b[0m", "    \u001b[37m-            if ($obj eq 'module' && grep {$_ eq $acton} @essential_module_list) {\u001b[0m", "    \u001b[37m-                  $force || essential_module_handling($acton);\u001b[0m", "    \u001b[37m-            }\u001b[0m", "    \u001b[37m             remove_link($link);\u001b[0m", "    \u001b[37m             if ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m                 remove_link($conflink);\u001b[0m", "    \u001b[37m@@ -440,7 +429,7 @@\u001b[0m", "    \u001b[37m     if ( $? != 0 ) {\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m         # config doesn't work\u001b[0m", "    \u001b[37m-        if ( -e \"$enabldir/mpm_prefork.load\" )\u001b[0m", "    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m", "    \u001b[37m         {\u001b[0m", "    \u001b[37m             return 0;\u001b[0m", "    \u001b[37m         }\u001b[0m", "    \u001b[37m@@ -537,57 +526,6 @@\u001b[0m", "    \u001b[37m             error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m", "    \u001b[37m         }\u001b[0m", "    \u001b[37m         return 1;\u001b[0m", "    \u001b[37m-    }\u001b[0m", "    \u001b[37m-}\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-sub essential_module_handling {\u001b[0m", "    \u001b[37m-    my $module = shift;\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-    print \"WARNING: The following essential module will be disabled.\
\";\u001b[0m", "    \u001b[37m-    print \"This might result in unexpected behavior and should NOT be done\
\";\u001b[0m", "    \u001b[37m-    print \"unless you know exactly what you are doing!\
 $module\
\
\";\u001b[0m", "    \u001b[37m-    print \"To continue type in the phrase 'Yes, do as I say!' or retry by passing '-f': \";\u001b[0m", "    \u001b[37m-    my $input = <STDIN>;\u001b[0m", "    \u001b[37m-    chomp($input);\u001b[0m", "    \u001b[37m-    if ($input ne 'Yes, do as I say!') {\u001b[0m", "    \u001b[37m-        print(\"Aborting\
\");\u001b[0m", "    \u001b[37m-        exit(1)\u001b[0m", "    \u001b[37m-    }\u001b[0m", "    \u001b[37m-}\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-sub special_module_handling {\u001b[0m", "    \u001b[37m-    my $acton = shift;\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-    if ($obj ne 'module') {\u001b[0m", "    \u001b[37m-        return;\u001b[0m", "    \u001b[37m-    }\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-    given ($acton) {\u001b[0m", "    \u001b[37m-        when ('ssl') {\u001b[0m", "    \u001b[37m-            if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m-                info(  \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m-                     . \"how to configure SSL and create self-signed \"\u001b[0m", "    \u001b[37m-                     . \"certificates.\
\"\u001b[0m", "    \u001b[37m-                );\u001b[0m", "    \u001b[37m-            }\u001b[0m", "    \u001b[37m-        }\u001b[0m", "    \u001b[37m-        when ('cache_disk') {\u001b[0m", "    \u001b[37m-            $request_htcacheclean = 1;\u001b[0m", "    \u001b[37m-            my $verb = \"\\u$act\";\u001b[0m", "    \u001b[37m-            $verb =~ s/e$/ing/;\u001b[0m", "    \u001b[37m-            info(\"$verb external service $htc\
\");\u001b[0m", "    \u001b[37m-            # The init script has no Default-Start runlevels, so we need to\u001b[0m", "    \u001b[37m-            # specify them explicitly.\u001b[0m", "    \u001b[37m-            system(\"update-rc.d $htc $act 2 3 4 5\");\u001b[0m", "    \u001b[37m-            if ($rc == 0) {\u001b[0m", "    \u001b[37m-                info(\"The service will be started on next reboot.\
\")\u001b[0m", "    \u001b[37m-                    if $act eq 'enable';\u001b[0m", "    \u001b[37m-            }\u001b[0m", "    \u001b[37m-            else {\u001b[0m", "    \u001b[37m-                warning(\"update-rc.d failed\
\");\u001b[0m", "    \u001b[37m-            }\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-        }\u001b[0m", "    \u001b[37m     }\u001b[0m", "    \u001b[37m }\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[32m- change mode from '0755' to '0700'\u001b[0m", "\u001b[0m  * link[/usr/sbin/a2dismod] action delete", "    \u001b[32m- delete link to file at /usr/sbin/a2dismod\u001b[0m", "\u001b[0m  * template[/usr/sbin/a2dismod] action create", "    \u001b[32m- create new file /usr/sbin/a2dismod\u001b[0m", "    \u001b[32m- update content in file /usr/sbin/a2dismod from none to ce53f4\u001b[0m", "    \u001b[37m--- /usr/sbin/a2dismod\t2019-04-23 15:42:46.715502575 +0000\u001b[0m", "    \u001b[37m+++ /usr/sbin/.chef-a2dismod20190423-11189-zys9ig\t2019-04-23 15:42:46.715502575 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,533 @@\u001b[0m", "    \u001b[37m+#!/usr/bin/perl -w\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m", "    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+use strict;\u001b[0m", "    \u001b[37m+use Cwd 'realpath';\u001b[0m", "    \u001b[37m+use File::Spec;\u001b[0m", "    \u001b[37m+use File::Basename;\u001b[0m", "    \u001b[37m+use File::Path;\u001b[0m", "    \u001b[37m+use Getopt::Long;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $quiet;\u001b[0m", "    \u001b[37m+my $force;\u001b[0m", "    \u001b[37m+my $maintmode;\u001b[0m", "    \u001b[37m+my $purge;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m", "    \u001b[37m+GetOptions(\u001b[0m", "    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m", "    \u001b[37m+    'force|f'     => \\$force,\u001b[0m", "    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m", "    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m", "    \u001b[37m+) or exit 2;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $basename = basename($0);\u001b[0m", "    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m", "    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m", "    \u001b[37m+my $act        = $1;\u001b[0m", "    \u001b[37m+my $obj        = $2;\u001b[0m", "    \u001b[37m+my $dir_suffix = $3;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m", "    \u001b[37m+    || (\u001b[0m", "    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m", "    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m", "    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m", "    \u001b[37m+    );\u001b[0m", "    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m", "    \u001b[37m+read_env_file($env_file);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$act .= 'able';\u001b[0m", "    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m", "    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'module';\u001b[0m", "    \u001b[37m+    $dir    = 'mods';\u001b[0m", "    \u001b[37m+    $sffx   = '.load';\u001b[0m", "    \u001b[37m+    $reload = 'restart';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'conf';\u001b[0m", "    \u001b[37m+    $dir    = 'conf';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+else {\u001b[0m", "    \u001b[37m+    $dir    = 'sites';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+$name = ucfirst($obj);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m", "    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m", "    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m", "    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m", "    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m", "    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $request_reload = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $rc = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m", "    \u001b[37m+    my @choices = myglob('*');\u001b[0m", "    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m", "    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m", "    \u001b[37m+    my $input = <>;\u001b[0m", "    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my @objs;\u001b[0m", "    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m", "    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m", "    \u001b[37m+    my @glob = myglob($arg);\u001b[0m", "    \u001b[37m+    if ( !@glob ) {\u001b[0m", "    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m", "    \u001b[37m+        $rc = 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        push @objs, @glob;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+foreach my $acton (@objs) {\u001b[0m", "    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+info(\u001b[0m", "    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m", "    \u001b[37m+) if $request_reload;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+exit($rc);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+##############################################################################\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub myglob {\u001b[0m", "    \u001b[37m+    my $arg = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my @glob = map {\u001b[0m", "    \u001b[37m+        s{^$choicedir/}{};\u001b[0m", "    \u001b[37m+        s{$sffx$}{};\u001b[0m", "    \u001b[37m+        $_\u001b[0m", "    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return @glob;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub doit {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m+            print\u001b[0m", "    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m", "    \u001b[37m+            $acton = 'cgid';\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m", "    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m", "    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m", "    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m", "    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m", "    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m", "    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m", "    \u001b[37m+                unlink($link);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m", "    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m", "    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m", "    \u001b[37m+                    unlink($conflink);\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        if ( $purge ) {\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # handle module dependencies\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m", "    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m", "    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m", "    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m", "    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m", "    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            my @depending;\u001b[0m", "    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m", "    \u001b[37m+                my @deps = get_deps($d);\u001b[0m", "    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m", "    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m", "    \u001b[37m+                    push @depending, $1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            if ( scalar @depending ) {\u001b[0m", "    \u001b[37m+                if ($force) {\u001b[0m", "    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m", "    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m", "    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                    return 1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m", "    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m", "    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m", "    \u001b[37m+                );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m", "    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m", "    \u001b[37m+            remove_link($link);\u001b[0m", "    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+                remove_link($conflink);\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+            remove_link($conflink);\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m", "    \u001b[37m+            if ( $purge ) {\u001b[0m", "    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub get_deps {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $fd;\u001b[0m", "    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m", "    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m", "    \u001b[37m+        return;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    my $line;\u001b[0m", "    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m", "    \u001b[37m+        chomp $line;\u001b[0m", "    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m", "    \u001b[37m+            my $deps = $1;\u001b[0m", "    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m", "    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub do_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !doit($d) ) {\u001b[0m", "    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warn_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m", "    \u001b[37m+            warning(\u001b[0m", "    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_conflicts {\u001b[0m", "    \u001b[37m+    my $acton    = shift;\u001b[0m", "    \u001b[37m+    my $haderror = 0;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m", "    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+            error(\u001b[0m", "    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m", "    \u001b[37m+            $haderror++;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ($haderror) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub add_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # create relative link\u001b[0m", "    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m", "    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $link ) {\u001b[0m", "    \u001b[37m+        if ( -l $link ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # points to nowhere\u001b[0m", "    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m", "    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 'missing';\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m", "    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m", "    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 'ok';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub remove_link {\u001b[0m", "    \u001b[37m+    my ($link) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -l $link ) {\u001b[0m", "    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( -e $link ) {\u001b[0m", "    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub threaded {\u001b[0m", "    \u001b[37m+    my $result = \"\";\u001b[0m", "    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m", "    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m", "    \u001b[37m+    if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # config doesn't work\u001b[0m", "    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m", "    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # do what user requested\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub info {\u001b[0m", "    \u001b[37m+    print @_ if !$quiet;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub error {\u001b[0m", "    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warning {\u001b[0m", "    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub is_in {\u001b[0m", "    \u001b[37m+    my $needle = shift;\u001b[0m", "    \u001b[37m+    foreach my $e (@_) {\u001b[0m", "    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 0;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub read_env_file {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    -r $file or return;\u001b[0m", "    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m", "    \u001b[37m+    if ($?) {\u001b[0m", "    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    foreach my $l (@lines) {\u001b[0m", "    \u001b[37m+        chomp $l;\u001b[0m", "    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m", "    \u001b[37m+        $ENV{$1} = $2;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub switch_marker {\u001b[0m", "    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m", "    \u001b[37m+        if @_ != 3;\u001b[0m", "    \u001b[37m+    my $which = shift;\u001b[0m", "    \u001b[37m+    my $what  = shift;\u001b[0m", "    \u001b[37m+    my $name  = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $mode = \"admin\";\u001b[0m", "    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m", "    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m", "    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m", "    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m", "    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m", "    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m", "    \u001b[37m+            || error(\u001b[0m", "    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m", "    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m", "    \u001b[37m+    chomp(@markers);\u001b[0m", "    \u001b[37m+    foreach (@markers) {\u001b[0m", "    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    unless ($purge) {\u001b[0m", "    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m", "    \u001b[37m+        if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * link[/usr/sbin/a2enconf] action delete", "    \u001b[32m- delete link to file at /usr/sbin/a2enconf\u001b[0m", "\u001b[0m  * template[/usr/sbin/a2enconf] action create", "    \u001b[32m- create new file /usr/sbin/a2enconf\u001b[0m", "    \u001b[32m- update content in file /usr/sbin/a2enconf from none to ce53f4\u001b[0m", "    \u001b[37m--- /usr/sbin/a2enconf\t2019-04-23 15:42:46.735504320 +0000\u001b[0m", "    \u001b[37m+++ /usr/sbin/.chef-a2enconf20190423-11189-1ux4d4h\t2019-04-23 15:42:46.735504320 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,533 @@\u001b[0m", "    \u001b[37m+#!/usr/bin/perl -w\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m", "    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+use strict;\u001b[0m", "    \u001b[37m+use Cwd 'realpath';\u001b[0m", "    \u001b[37m+use File::Spec;\u001b[0m", "    \u001b[37m+use File::Basename;\u001b[0m", "    \u001b[37m+use File::Path;\u001b[0m", "    \u001b[37m+use Getopt::Long;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $quiet;\u001b[0m", "    \u001b[37m+my $force;\u001b[0m", "    \u001b[37m+my $maintmode;\u001b[0m", "    \u001b[37m+my $purge;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m", "    \u001b[37m+GetOptions(\u001b[0m", "    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m", "    \u001b[37m+    'force|f'     => \\$force,\u001b[0m", "    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m", "    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m", "    \u001b[37m+) or exit 2;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $basename = basename($0);\u001b[0m", "    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m", "    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m", "    \u001b[37m+my $act        = $1;\u001b[0m", "    \u001b[37m+my $obj        = $2;\u001b[0m", "    \u001b[37m+my $dir_suffix = $3;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m", "    \u001b[37m+    || (\u001b[0m", "    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m", "    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m", "    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m", "    \u001b[37m+    );\u001b[0m", "    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m", "    \u001b[37m+read_env_file($env_file);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$act .= 'able';\u001b[0m", "    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m", "    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'module';\u001b[0m", "    \u001b[37m+    $dir    = 'mods';\u001b[0m", "    \u001b[37m+    $sffx   = '.load';\u001b[0m", "    \u001b[37m+    $reload = 'restart';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'conf';\u001b[0m", "    \u001b[37m+    $dir    = 'conf';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+else {\u001b[0m", "    \u001b[37m+    $dir    = 'sites';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+$name = ucfirst($obj);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m", "    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m", "    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m", "    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m", "    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m", "    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $request_reload = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $rc = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m", "    \u001b[37m+    my @choices = myglob('*');\u001b[0m", "    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m", "    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m", "    \u001b[37m+    my $input = <>;\u001b[0m", "    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my @objs;\u001b[0m", "    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m", "    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m", "    \u001b[37m+    my @glob = myglob($arg);\u001b[0m", "    \u001b[37m+    if ( !@glob ) {\u001b[0m", "    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m", "    \u001b[37m+        $rc = 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        push @objs, @glob;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+foreach my $acton (@objs) {\u001b[0m", "    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+info(\u001b[0m", "    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m", "    \u001b[37m+) if $request_reload;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+exit($rc);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+##############################################################################\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub myglob {\u001b[0m", "    \u001b[37m+    my $arg = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my @glob = map {\u001b[0m", "    \u001b[37m+        s{^$choicedir/}{};\u001b[0m", "    \u001b[37m+        s{$sffx$}{};\u001b[0m", "    \u001b[37m+        $_\u001b[0m", "    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return @glob;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub doit {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m+            print\u001b[0m", "    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m", "    \u001b[37m+            $acton = 'cgid';\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m", "    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m", "    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m", "    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m", "    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m", "    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m", "    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m", "    \u001b[37m+                unlink($link);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m", "    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m", "    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m", "    \u001b[37m+                    unlink($conflink);\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        if ( $purge ) {\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # handle module dependencies\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m", "    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m", "    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m", "    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m", "    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m", "    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            my @depending;\u001b[0m", "    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m", "    \u001b[37m+                my @deps = get_deps($d);\u001b[0m", "    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m", "    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m", "    \u001b[37m+                    push @depending, $1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            if ( scalar @depending ) {\u001b[0m", "    \u001b[37m+                if ($force) {\u001b[0m", "    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m", "    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m", "    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                    return 1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m", "    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m", "    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m", "    \u001b[37m+                );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m", "    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m", "    \u001b[37m+            remove_link($link);\u001b[0m", "    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+                remove_link($conflink);\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+            remove_link($conflink);\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m", "    \u001b[37m+            if ( $purge ) {\u001b[0m", "    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub get_deps {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $fd;\u001b[0m", "    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m", "    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m", "    \u001b[37m+        return;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    my $line;\u001b[0m", "    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m", "    \u001b[37m+        chomp $line;\u001b[0m", "    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m", "    \u001b[37m+            my $deps = $1;\u001b[0m", "    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m", "    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub do_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !doit($d) ) {\u001b[0m", "    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warn_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m", "    \u001b[37m+            warning(\u001b[0m", "    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_conflicts {\u001b[0m", "    \u001b[37m+    my $acton    = shift;\u001b[0m", "    \u001b[37m+    my $haderror = 0;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m", "    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+            error(\u001b[0m", "    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m", "    \u001b[37m+            $haderror++;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ($haderror) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub add_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # create relative link\u001b[0m", "    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m", "    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $link ) {\u001b[0m", "    \u001b[37m+        if ( -l $link ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # points to nowhere\u001b[0m", "    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m", "    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 'missing';\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m", "    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m", "    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 'ok';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub remove_link {\u001b[0m", "    \u001b[37m+    my ($link) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -l $link ) {\u001b[0m", "    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( -e $link ) {\u001b[0m", "    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub threaded {\u001b[0m", "    \u001b[37m+    my $result = \"\";\u001b[0m", "    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m", "    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m", "    \u001b[37m+    if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # config doesn't work\u001b[0m", "    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m", "    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # do what user requested\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub info {\u001b[0m", "    \u001b[37m+    print @_ if !$quiet;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub error {\u001b[0m", "    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warning {\u001b[0m", "    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub is_in {\u001b[0m", "    \u001b[37m+    my $needle = shift;\u001b[0m", "    \u001b[37m+    foreach my $e (@_) {\u001b[0m", "    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 0;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub read_env_file {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    -r $file or return;\u001b[0m", "    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m", "    \u001b[37m+    if ($?) {\u001b[0m", "    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    foreach my $l (@lines) {\u001b[0m", "    \u001b[37m+        chomp $l;\u001b[0m", "    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m", "    \u001b[37m+        $ENV{$1} = $2;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub switch_marker {\u001b[0m", "    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m", "    \u001b[37m+        if @_ != 3;\u001b[0m", "    \u001b[37m+    my $which = shift;\u001b[0m", "    \u001b[37m+    my $what  = shift;\u001b[0m", "    \u001b[37m+    my $name  = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $mode = \"admin\";\u001b[0m", "    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m", "    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m", "    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m", "    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m", "    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m", "    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m", "    \u001b[37m+            || error(\u001b[0m", "    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m", "    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m", "    \u001b[37m+    chomp(@markers);\u001b[0m", "    \u001b[37m+    foreach (@markers) {\u001b[0m", "    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    unless ($purge) {\u001b[0m", "    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m", "    \u001b[37m+        if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * link[/usr/sbin/a2disconf] action delete", "    \u001b[32m- delete link to file at /usr/sbin/a2disconf\u001b[0m", "\u001b[0m  * template[/usr/sbin/a2disconf] action create", "    \u001b[32m- create new file /usr/sbin/a2disconf\u001b[0m", "    \u001b[32m- update content in file /usr/sbin/a2disconf from none to ce53f4\u001b[0m", "    \u001b[37m--- /usr/sbin/a2disconf\t2019-04-23 15:42:46.755506065 +0000\u001b[0m", "    \u001b[37m+++ /usr/sbin/.chef-a2disconf20190423-11189-8kmjbl\t2019-04-23 15:42:46.755506065 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,533 @@\u001b[0m", "    \u001b[37m+#!/usr/bin/perl -w\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# a2enmod by Stefan Fritsch <sf@debian.org>\u001b[0m", "    \u001b[37m+# Licensed under Apache License 2.0\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# The coding style is \"perltidy -pbp\"\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+use strict;\u001b[0m", "    \u001b[37m+use Cwd 'realpath';\u001b[0m", "    \u001b[37m+use File::Spec;\u001b[0m", "    \u001b[37m+use File::Basename;\u001b[0m", "    \u001b[37m+use File::Path;\u001b[0m", "    \u001b[37m+use Getopt::Long;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $quiet;\u001b[0m", "    \u001b[37m+my $force;\u001b[0m", "    \u001b[37m+my $maintmode;\u001b[0m", "    \u001b[37m+my $purge;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+Getopt::Long::Configure('bundling');\u001b[0m", "    \u001b[37m+GetOptions(\u001b[0m", "    \u001b[37m+    'quiet|q'     => \\$quiet,\u001b[0m", "    \u001b[37m+    'force|f'     => \\$force,\u001b[0m", "    \u001b[37m+    'maintmode|m' => \\$maintmode,\u001b[0m", "    \u001b[37m+    'purge|p'     => \\$purge\u001b[0m", "    \u001b[37m+) or exit 2;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $basename = basename($0);\u001b[0m", "    \u001b[37m+$basename =~ /^a2(en|dis)(mod|site|conf)((?:-.+)?)$/\u001b[0m", "    \u001b[37m+    or die \"$basename call name unknown\
\";\u001b[0m", "    \u001b[37m+my $act        = $1;\u001b[0m", "    \u001b[37m+my $obj        = $2;\u001b[0m", "    \u001b[37m+my $dir_suffix = $3;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $env_file = $ENV{APACHE_ENVVARS}\u001b[0m", "    \u001b[37m+    || (\u001b[0m", "    \u001b[37m+    $ENV{APACHE_CONFDIR}\u001b[0m", "    \u001b[37m+    ? \"$ENV{APACHE_CONFDIR}/envvars\"\u001b[0m", "    \u001b[37m+    : \"/etc/apache2$dir_suffix/envvars\"\u001b[0m", "    \u001b[37m+    );\u001b[0m", "    \u001b[37m+$ENV{LANG} = 'C';\u001b[0m", "    \u001b[37m+read_env_file($env_file);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$act .= 'able';\u001b[0m", "    \u001b[37m+my ( $name, $dir, $sffx, $reload );\u001b[0m", "    \u001b[37m+if ( $obj eq 'mod' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'module';\u001b[0m", "    \u001b[37m+    $dir    = 'mods';\u001b[0m", "    \u001b[37m+    $sffx   = '.load';\u001b[0m", "    \u001b[37m+    $reload = 'restart';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+elsif ( $obj eq 'conf' ) {\u001b[0m", "    \u001b[37m+    $obj    = 'conf';\u001b[0m", "    \u001b[37m+    $dir    = 'conf';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+else {\u001b[0m", "    \u001b[37m+    $dir    = 'sites';\u001b[0m", "    \u001b[37m+    $sffx   = '.conf';\u001b[0m", "    \u001b[37m+    $reload = 'reload';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+$name = ucfirst($obj);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $confdir = $ENV{APACHE_CONFDIR} || \"/etc/apache2$dir_suffix\";\u001b[0m", "    \u001b[37m+my $availdir = $ENV{ uc(\"APACHE_${dir}_AVAILABLE\") }\u001b[0m", "    \u001b[37m+    || \"$confdir/$dir-available\";\u001b[0m", "    \u001b[37m+my $enabldir = $ENV{ uc(\"APACHE_${dir}_ENABLED\") } || \"$confdir/$dir-enabled\";\u001b[0m", "    \u001b[37m+my $statedir = $ENV{ uc(\"APACHE_STATE_DIRECTORY\") } || \"/usr/lib/apache2\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+$statedir .= \"/$obj\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $choicedir = $act eq 'enable' ? $availdir : $enabldir;\u001b[0m", "    \u001b[37m+my $linkdir = File::Spec->abs2rel( $availdir, $enabldir );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $request_reload = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my $rc = 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+if ( !scalar @ARGV ) {\u001b[0m", "    \u001b[37m+    my @choices = myglob('*');\u001b[0m", "    \u001b[37m+    print \"Your choices are: @choices\
\";\u001b[0m", "    \u001b[37m+    print \"Which ${obj}(s) do you want to $act (wildcards ok)?\
\";\u001b[0m", "    \u001b[37m+    my $input = <>;\u001b[0m", "    \u001b[37m+    @ARGV = split /\\s+/, $input;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+my @objs;\u001b[0m", "    \u001b[37m+foreach my $arg (@ARGV) {\u001b[0m", "    \u001b[37m+    $arg =~ s/${sffx}$//;\u001b[0m", "    \u001b[37m+    my @glob = myglob($arg);\u001b[0m", "    \u001b[37m+    if ( !@glob ) {\u001b[0m", "    \u001b[37m+        error(\"No $obj found matching $arg!\
\");\u001b[0m", "    \u001b[37m+        $rc = 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        push @objs, @glob;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+foreach my $acton (@objs) {\u001b[0m", "    \u001b[37m+    doit($acton) or $rc = 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+info(\u001b[0m", "    \u001b[37m+    \"To activate the new configuration, you need to run:\
  service apache2 $reload\
\"\u001b[0m", "    \u001b[37m+) if $request_reload;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+exit($rc);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+##############################################################################\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub myglob {\u001b[0m", "    \u001b[37m+    my $arg = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my @glob = map {\u001b[0m", "    \u001b[37m+        s{^$choicedir/}{};\u001b[0m", "    \u001b[37m+        s{$sffx$}{};\u001b[0m", "    \u001b[37m+        $_\u001b[0m", "    \u001b[37m+    } glob(\"$choicedir/$arg$sffx\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return @glob;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub doit {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my ( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $acton eq 'cgi' && threaded() ) {\u001b[0m", "    \u001b[37m+            print\u001b[0m", "    \u001b[37m+                \"Your MPM seems to be threaded. Selecting cgid instead of cgi.\
\";\u001b[0m", "    \u001b[37m+            $acton = 'cgid';\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        $conftgt = \"$availdir/$acton.conf\";\u001b[0m", "    \u001b[37m+        if ( -e $conftgt ) {\u001b[0m", "    \u001b[37m+            $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $tgt  = \"$availdir/$acton$sffx\";\u001b[0m", "    \u001b[37m+    my $link = \"$enabldir/$acton$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $tgt ) {\u001b[0m", "    \u001b[37m+        if ( -l $link && !-e $link ) {\u001b[0m", "    \u001b[37m+            if ( $act eq 'disable' ) {\u001b[0m", "    \u001b[37m+                info(\"removing dangling symlink $link\
\");\u001b[0m", "    \u001b[37m+                unlink($link);\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # force a .conf path. It may exist as dangling link, too\u001b[0m", "    \u001b[37m+                $conflink = \"$enabldir/$acton.conf\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                if ( -l $conflink && !-e $conflink ) {\u001b[0m", "    \u001b[37m+                    info(\"removing dangling symlink $conflink\
\");\u001b[0m", "    \u001b[37m+                    unlink($conflink);\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                error(\"$link is a dangling symlink!\
\");\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        if ( $purge ) {\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            # exit silently, we are purging anyway\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        error(\"$name $acton does not exist!\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # handle module dependencies\u001b[0m", "    \u001b[37m+    if ( $obj eq 'module' ) {\u001b[0m", "    \u001b[37m+        if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+            if ( $acton eq 'mpm_itk' ) {\u001b[0m", "    \u001b[37m+                warning(  \"MPM_ITK is a third party module that is not part \"\u001b[0m", "    \u001b[37m+                        . \"of the official Apache HTTPD. It has seen less \"\u001b[0m", "    \u001b[37m+                        . \"testing than the official MPM modules.\" );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            my @depends = get_deps(\"$availdir/$acton.load\");\u001b[0m", "    \u001b[37m+            do_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            my @conflicts = get_deps( \"$availdir/$acton.load\", \"Conflicts\" );\u001b[0m", "    \u001b[37m+            check_conflicts( $acton, @conflicts ) or return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            my @depending;\u001b[0m", "    \u001b[37m+            foreach my $d ( glob(\"$enabldir/*.load\") ) {\u001b[0m", "    \u001b[37m+                my @deps = get_deps($d);\u001b[0m", "    \u001b[37m+                if ( is_in( $acton, @deps ) ) {\u001b[0m", "    \u001b[37m+                    $d =~ m,/([^/]+).load$,;\u001b[0m", "    \u001b[37m+                    push @depending, $1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            if ( scalar @depending ) {\u001b[0m", "    \u001b[37m+                if ($force) {\u001b[0m", "    \u001b[37m+                    do_deps( $acton, @depending ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"The following modules depend on $acton \",\u001b[0m", "    \u001b[37m+                        \"and need to be disabled first: @depending\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my @depends = get_deps(\"$availdir/$acton$sffx\");\u001b[0m", "    \u001b[37m+        warn_deps( $acton, @depends ) or return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( $act eq 'enable' ) {\u001b[0m", "    \u001b[37m+        my $check = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $check eq 'ok' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+                    info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                    return 1;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    print \"Enabling config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                else {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            else {\u001b[0m", "    \u001b[37m+                info(\"$name $acton already enabled\
\");\u001b[0m", "    \u001b[37m+                return 1;\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $check eq 'missing' ) {\u001b[0m", "    \u001b[37m+            if ($conflink) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+                # handle .conf file\u001b[0m", "    \u001b[37m+                my $confcheck = check_link( $conftgt, $conflink );\u001b[0m", "    \u001b[37m+                if ( $confcheck eq 'missing' ) {\u001b[0m", "    \u001b[37m+                    add_link( $conftgt, $conflink ) or return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+                elsif ( $confcheck ne 'ok' ) {\u001b[0m", "    \u001b[37m+                    error(\u001b[0m", "    \u001b[37m+                        \"Config file $acton.conf not properly enabled: $confcheck\
\"\u001b[0m", "    \u001b[37m+                    );\u001b[0m", "    \u001b[37m+                    return 0;\u001b[0m", "    \u001b[37m+                }\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            print \"Enabling $obj $acton.\
\";\u001b[0m", "    \u001b[37m+            if ( $acton eq 'ssl' ) {\u001b[0m", "    \u001b[37m+                info(     \"See /usr/share/doc/apache2/README.Debian.gz on \"\u001b[0m", "    \u001b[37m+                        . \"how to configure SSL and create self-signed certificates.\
\"\u001b[0m", "    \u001b[37m+                );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return add_link( $tgt, $link )\u001b[0m", "    \u001b[37m+                && switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"$name $acton not properly enabled: $check\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        if ( -e $link || -l $link ) {\u001b[0m", "    \u001b[37m+            remove_link($link);\u001b[0m", "    \u001b[37m+            if ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+                remove_link($conflink);\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            print \"$name $acton disabled.\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif ( $conflink && -e $conflink ) {\u001b[0m", "    \u001b[37m+            print \"Disabling stale config file $acton.conf.\
\";\u001b[0m", "    \u001b[37m+            remove_link($conflink);\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            info(\"$name $acton already disabled\
\");\u001b[0m", "    \u001b[37m+            if ( $purge ) {\u001b[0m", "    \u001b[37m+                switch_marker( $obj, $act, $acton );\u001b[0m", "    \u001b[37m+            }\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub get_deps {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+    my $type = shift || \"Depends\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $fd;\u001b[0m", "    \u001b[37m+    if ( !open( $fd, '<', $file ) ) {\u001b[0m", "    \u001b[37m+        error(\"Can't open $file: $!\");\u001b[0m", "    \u001b[37m+        return;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    my $line;\u001b[0m", "    \u001b[37m+    while ( defined( $line = <$fd> ) ) {\u001b[0m", "    \u001b[37m+        chomp $line;\u001b[0m", "    \u001b[37m+        if ( $line =~ /^# $type:\\s+(.*?)\\s*$/ ) {\u001b[0m", "    \u001b[37m+            my $deps = $1;\u001b[0m", "    \u001b[37m+            return split( /[\
\\s]+/, $deps );\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # only check until the first non-empty non-comment line\u001b[0m", "    \u001b[37m+        last if ( $line !~ /^\\s*(?:#.*)?$/ );\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub do_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !doit($d) ) {\u001b[0m", "    \u001b[37m+            error(\"Could not $act dependency $d for $acton, aborting\
\");\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warn_deps {\u001b[0m", "    \u001b[37m+    my $acton = shift;\u001b[0m", "    \u001b[37m+    my $modsenabldir = $ENV{APACHE_MODS_ENABLED} || \"$confdir/mods-enabled\";\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Checking dependency $d for $acton:\
\");\u001b[0m", "    \u001b[37m+        if ( !-e \"$modsenabldir/$d.load\" ) {\u001b[0m", "    \u001b[37m+            warning(\u001b[0m", "    \u001b[37m+                \"Module $d is not enabled, but $acton depends on it, aborting\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_conflicts {\u001b[0m", "    \u001b[37m+    my $acton    = shift;\u001b[0m", "    \u001b[37m+    my $haderror = 0;\u001b[0m", "    \u001b[37m+    foreach my $d (@_) {\u001b[0m", "    \u001b[37m+        info(\"Considering conflict $d for $acton:\
\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $tgt  = \"$availdir/$d$sffx\";\u001b[0m", "    \u001b[37m+        my $link = \"$enabldir/$d$sffx\";\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        my $confcheck = check_link( $tgt, $link );\u001b[0m", "    \u001b[37m+        if ( $confcheck eq 'ok' ) {\u001b[0m", "    \u001b[37m+            error(\u001b[0m", "    \u001b[37m+                \"Module $d is enabled - cannot proceed due to conflicts. It needs to be disabled first!\
\"\u001b[0m", "    \u001b[37m+            );\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # Don't return immediately, there could be several conflicts\u001b[0m", "    \u001b[37m+            $haderror++;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ($haderror) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub add_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # create relative link\u001b[0m", "    \u001b[37m+    if ( !symlink( File::Spec->abs2rel( $tgt, dirname($link) ), $link ) ) {\u001b[0m", "    \u001b[37m+        die(\"Could not create $link: $!\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub check_link {\u001b[0m", "    \u001b[37m+    my ( $tgt, $link ) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( !-e $link ) {\u001b[0m", "    \u001b[37m+        if ( -l $link ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # points to nowhere\u001b[0m", "    \u001b[37m+            info(\"Removing dangling link $link\");\u001b[0m", "    \u001b[37m+            unlink($link) or die \"Could not remove $link\
\";\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 'missing';\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -e $link && !-l $link ) {\u001b[0m", "    \u001b[37m+        return \"$link is a real file, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( realpath($link) ne realpath($tgt) ) {\u001b[0m", "    \u001b[37m+        return \"$link exists but does not point to $tgt, not touching it\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 'ok';\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub remove_link {\u001b[0m", "    \u001b[37m+    my ($link) = @_;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    if ( -l $link ) {\u001b[0m", "    \u001b[37m+        unlink($link) or die \"Could not remove $link: $!\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( -e $link ) {\u001b[0m", "    \u001b[37m+        error(\"$link is not a symbolic link, not deleting\
\");\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    $request_reload = 1;\u001b[0m", "    \u001b[37m+    return 1;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub threaded {\u001b[0m", "    \u001b[37m+    my $result = \"\";\u001b[0m", "    \u001b[37m+    $result = qx{/usr/sbin/apache2ctl -V | grep 'threaded'}\u001b[0m", "    \u001b[37m+        if -x '/usr/sbin/apache2ctl';\u001b[0m", "    \u001b[37m+    if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+        # config doesn't work\u001b[0m", "    \u001b[37m+        if ( -e \"$enabldir/mpm_prefork.load\" || -e \"$enabldir/mpm_itk.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        elsif (-e \"$enabldir/mpm_worker.load\"\u001b[0m", "    \u001b[37m+            || -e \"$enabldir/mpm_event.load\" )\u001b[0m", "    \u001b[37m+        {\u001b[0m", "    \u001b[37m+            return 1;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        else {\u001b[0m", "    \u001b[37m+            error(\"Can't determine enabled MPM\");\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+            # do what user requested\u001b[0m", "    \u001b[37m+            return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    if ( $result =~ / no/ ) {\u001b[0m", "    \u001b[37m+        return 0;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    elsif ( $result =~ / yes/ ) {\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    else {\u001b[0m", "    \u001b[37m+        die(\"Can't parse output from apache2ctl -V:\
$result\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub info {\u001b[0m", "    \u001b[37m+    print @_ if !$quiet;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub error {\u001b[0m", "    \u001b[37m+    print STDERR 'ERROR: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub warning {\u001b[0m", "    \u001b[37m+    print STDERR 'WARNING: ', @_;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub is_in {\u001b[0m", "    \u001b[37m+    my $needle = shift;\u001b[0m", "    \u001b[37m+    foreach my $e (@_) {\u001b[0m", "    \u001b[37m+        return 1 if $needle eq $e;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    return 0;\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub read_env_file {\u001b[0m", "    \u001b[37m+    my $file = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    -r $file or return;\u001b[0m", "    \u001b[37m+    my @lines = qx{env - sh -c '. $file && env'};\u001b[0m", "    \u001b[37m+    if ($?) {\u001b[0m", "    \u001b[37m+        die \"Could not read $file\
\";\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    foreach my $l (@lines) {\u001b[0m", "    \u001b[37m+        chomp $l;\u001b[0m", "    \u001b[37m+        $l =~ /^(.*)?=(.*)$/ or die \"Could not parse $file\
\";\u001b[0m", "    \u001b[37m+        $ENV{$1} = $2;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+sub switch_marker {\u001b[0m", "    \u001b[37m+    die('usage: switch_marker([module|site|conf], [enable|disable], $name)')\u001b[0m", "    \u001b[37m+        if @_ != 3;\u001b[0m", "    \u001b[37m+    my $which = shift;\u001b[0m", "    \u001b[37m+    my $what  = shift;\u001b[0m", "    \u001b[37m+    my $name  = shift;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    my $mode = \"admin\";\u001b[0m", "    \u001b[37m+    $mode = \"maint\" if $maintmode;\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    #print(\"switch_marker $which $what $name\
\");\u001b[0m", "    \u001b[37m+    # TODO: get rid of the magic string(s)\u001b[0m", "    \u001b[37m+    my $state_marker_dir = \"$statedir/$what\" . \"d\" . \"_by_$mode\";\u001b[0m", "    \u001b[37m+    my $state_marker     = \"$state_marker_dir/$name\";\u001b[0m", "    \u001b[37m+    if ( !-d $state_marker_dir ) {\u001b[0m", "    \u001b[37m+        File::Path::mkpath(\"$state_marker_dir\")\u001b[0m", "    \u001b[37m+            || error(\u001b[0m", "    \u001b[37m+            \"Failed to create marker directory: '$state_marker_dir'\
\");\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    # XXX: swap find with perl alternative\u001b[0m", "    \u001b[37m+    my @markers = qx{find \"$statedir\" -type f -a -name \"$name\"};\u001b[0m", "    \u001b[37m+    chomp(@markers);\u001b[0m", "    \u001b[37m+    foreach (@markers) {\u001b[0m", "    \u001b[37m+        unless ( unlink $_ ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to remove old marker '$_'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+    unless ($purge) {\u001b[0m", "    \u001b[37m+        qx{touch \"$state_marker\"};\u001b[0m", "    \u001b[37m+        if ( $? != 0 ) {\u001b[0m", "    \u001b[37m+            error(\"Failed to create marker '$state_marker'!\
\") && return 0;\u001b[0m", "    \u001b[37m+        }\u001b[0m", "    \u001b[37m+        return 1;\u001b[0m", "    \u001b[37m+    }\u001b[0m", "    \u001b[37m+}\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# vim: syntax=perl sw=4 sts=4 sr et\u001b[0m", "    \u001b[32m- change mode from '' to '0700'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * directory[/etc/apache2/ssl] action create", "    \u001b[32m- create new directory /etc/apache2/ssl\u001b[0m", "    \u001b[32m- change mode from '' to '0755'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * directory[/var/cache/apache2] action create (up to date)", "  * directory[/var/lock/apache2] action create (up to date)", "  * template[/etc/sysconfig/apache2] action create (skipped due to only_if)", "  * template[/etc/apache2/envvars] action create", "    \u001b[32m- update content in file /etc/apache2/envvars from dfc55c to 9962b1\u001b[0m", "    \u001b[37m--- /etc/apache2/envvars\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/.chef-envvars20190423-11189-zbsopg\t2019-04-23 15:42:46.775507810 +0000\u001b[0m", "    \u001b[37m@@ -3,31 +3,21 @@\u001b[0m", "    \u001b[37m # this won't be correct after changing uid\u001b[0m", "    \u001b[37m unset HOME\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# for supporting multiple apache2 instances\u001b[0m", "    \u001b[37m-if [ \"${APACHE_CONFDIR##/etc/apache2-}\" != \"${APACHE_CONFDIR}\" ] ; then\u001b[0m", "    \u001b[37m-\tSUFFIX=\"-${APACHE_CONFDIR##/etc/apache2-}\"\u001b[0m", "    \u001b[37m-else\u001b[0m", "    \u001b[37m-\tSUFFIX=\u001b[0m", "    \u001b[37m-fi\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m # Since there is no sane way to get the parsed apache2 config in scripts, some\u001b[0m", "    \u001b[37m # settings are defined via environment variables and then used in apache2ctl,\u001b[0m", "    \u001b[37m # /etc/init.d/apache2, /etc/logrotate.d/apache2, etc.\u001b[0m", "    \u001b[37m export APACHE_RUN_USER=www-data\u001b[0m", "    \u001b[37m export APACHE_RUN_GROUP=www-data\u001b[0m", "    \u001b[37m # temporary state file location. This might be changed to /run in Wheezy+1\u001b[0m", "    \u001b[37m-export APACHE_PID_FILE=/var/run/apache2/apache2$SUFFIX.pid\u001b[0m", "    \u001b[37m-export APACHE_RUN_DIR=/var/run/apache2$SUFFIX\u001b[0m", "    \u001b[37m-export APACHE_LOCK_DIR=/var/lock/apache2$SUFFIX\u001b[0m", "    \u001b[37m-# Only /var/log/apache2 is handled by /etc/logrotate.d/apache2.\u001b[0m", "    \u001b[37m-export APACHE_LOG_DIR=/var/log/apache2$SUFFIX\u001b[0m", "    \u001b[37m+export APACHE_PID_FILE=/var/run/apache2/apache2.pid\u001b[0m", "    \u001b[37m+export APACHE_RUN_DIR=/var/run/apache2\u001b[0m", "    \u001b[37m+export APACHE_LOCK_DIR=/var/lock/apache2\u001b[0m", "    \u001b[37m+export APACHE_LOG_DIR=/var/log/apache2\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m ## The locale used by some modules like mod_dav\u001b[0m", "    \u001b[37m export LANG=C\u001b[0m", "    \u001b[37m-## Uncomment the following line to use the system default locale instead:\u001b[0m", "    \u001b[37m-#. /etc/default/locale\u001b[0m", "    \u001b[37m+export LC_ALL=C\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-export LANG\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m ## The command to get the status for 'apache2ctl status'.\u001b[0m", "    \u001b[37m ## Some packages providing 'www-browser' need '--dump' instead of '-dump'.\u001b[0m", "    \u001b[37m@@ -45,4 +35,6 @@\u001b[0m", "    \u001b[37m ## This will produce a verbose output on package installations of web server modules and web application\u001b[0m", "    \u001b[37m ## installations which interact with Apache\u001b[0m", "    \u001b[37m #export APACHE2_MAINTSCRIPT_DEBUG=1\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+APACHE_STATUSURL=http://localhost:80/server-status\u001b[0m", "\u001b[0m  * template[apache2.conf] action create", "    \u001b[32m- update content in file /etc/apache2/apache2.conf from 17b80a to d11711\u001b[0m", "    \u001b[37m--- /etc/apache2/apache2.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/.chef-apache220190423-11189-etc5nu.conf\t2019-04-23 15:42:46.779508158 +0000\u001b[0m", "    \u001b[37m@@ -1,84 +1,20 @@\u001b[0m", "    \u001b[37m-# This is the main Apache server configuration file.  It contains the\u001b[0m", "    \u001b[37m-# configuration directives that give the server its instructions.\u001b[0m", "    \u001b[37m-# See http://httpd.apache.org/docs/2.4/ for detailed information about\u001b[0m", "    \u001b[37m-# the directives and /usr/share/doc/apache2/README.Debian about Debian specific\u001b[0m", "    \u001b[37m-# hints.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m+# Generated by Chef\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-# Summary of how the Apache 2 configuration works in Debian:\u001b[0m", "    \u001b[37m-# The Apache 2 web server configuration in Debian is quite different to\u001b[0m", "    \u001b[37m-# upstream's suggested way to configure the web server. This is because Debian's\u001b[0m", "    \u001b[37m-# default Apache2 installation attempts to make adding and removing modules,\u001b[0m", "    \u001b[37m-# virtual hosts, and extra configuration directives as flexible as possible, in\u001b[0m", "    \u001b[37m-# order to make automating the changes and administering the server as easy as\u001b[0m", "    \u001b[37m-# possible.\u001b[0m", "    \u001b[37m+# Based on the Ubuntu apache2.conf\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# It is split into several files forming the configuration hierarchy outlined\u001b[0m", "    \u001b[37m-# below, all located in the /etc/apache2/ directory:\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#\t/etc/apache2/\u001b[0m", "    \u001b[37m-#\t|-- apache2.conf\u001b[0m", "    \u001b[37m-#\t|\t`--  ports.conf\u001b[0m", "    \u001b[37m-#\t|-- mods-enabled\u001b[0m", "    \u001b[37m-#\t|\t|-- *.load\u001b[0m", "    \u001b[37m-#\t|\t`-- *.conf\u001b[0m", "    \u001b[37m-#\t|-- conf-enabled\u001b[0m", "    \u001b[37m-#\t|\t`-- *.conf\u001b[0m", "    \u001b[37m-# \t`-- sites-enabled\u001b[0m", "    \u001b[37m-#\t \t`-- *.conf\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# * apache2.conf is the main configuration file (this file). It puts the pieces\u001b[0m", "    \u001b[37m-#   together by including all remaining configuration files when starting up the\u001b[0m", "    \u001b[37m-#   web server.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# * ports.conf is always included from the main configuration file. It is\u001b[0m", "    \u001b[37m-#   supposed to determine listening ports for incoming connections which can be\u001b[0m", "    \u001b[37m-#   customized anytime.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# * Configuration files in the mods-enabled/, conf-enabled/ and sites-enabled/\u001b[0m", "    \u001b[37m-#   directories contain particular configuration snippets which manage modules,\u001b[0m", "    \u001b[37m-#   global configuration fragments, or virtual host configurations,\u001b[0m", "    \u001b[37m-#   respectively.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#   They are activated by symlinking available configuration files from their\u001b[0m", "    \u001b[37m-#   respective *-available/ counterparts. These should be managed by using our\u001b[0m", "    \u001b[37m-#   helpers a2enmod/a2dismod, a2ensite/a2dissite and a2enconf/a2disconf. See\u001b[0m", "    \u001b[37m-#   their respective man pages for detailed information.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# * The binary is called apache2. Due to the use of environment variables, in\u001b[0m", "    \u001b[37m-#   the default configuration, apache2 needs to be started/stopped with\u001b[0m", "    \u001b[37m-#   /etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not\u001b[0m", "    \u001b[37m-#   work with the default configuration.\u001b[0m", "    \u001b[37m+ServerRoot \"/etc/apache2\"\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# Global configuration\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# ServerRoot: The top of the directory tree under which the server's\u001b[0m", "    \u001b[37m-# configuration, error, and log files are kept.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# NOTE!  If you intend to place this on an NFS (or otherwise network)\u001b[0m", "    \u001b[37m-# mounted filesystem then please read the Mutex documentation (available\u001b[0m", "    \u001b[37m-# at <URL:http://httpd.apache.org/docs/2.4/mod/core.html#mutex>);\u001b[0m", "    \u001b[37m-# you will save yourself a lot of trouble.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# Do NOT add a slash at the end of the directory path.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#ServerRoot \"/etc/apache2\"\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m # The accept serialization lock file MUST BE STORED ON A LOCAL DISK.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-Mutex file:${APACHE_LOCK_DIR} default\u001b[0m", "    \u001b[37m+Mutex file:/var/lock/apache2 default\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # PidFile: The file in which the server should record its process\u001b[0m", "    \u001b[37m # identification number when it starts.\u001b[0m", "    \u001b[37m-# This needs to be set in /etc/apache2/envvars\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-PidFile ${APACHE_PID_FILE}\u001b[0m", "    \u001b[37m+PidFile /var/run/apache2/apache2.pid\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # Timeout: The number of seconds before receives and sends time out.\u001b[0m", "    \u001b[37m@@ -104,12 +40,56 @@\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m KeepAliveTimeout 5\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+#<IfModule unixd_module>\u001b[0m", "    \u001b[37m+User www-data\u001b[0m", "    \u001b[37m+Group www-data\u001b[0m", "    \u001b[37m+#</IfModule>\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# These need to be set in /etc/apache2/envvars\u001b[0m", "    \u001b[37m-User ${APACHE_RUN_USER}\u001b[0m", "    \u001b[37m-Group ${APACHE_RUN_GROUP}\u001b[0m", "    \u001b[37m+# Sets the default security model of the Apache2 HTTPD server. It does\u001b[0m", "    \u001b[37m+# not allow access to the root filesystem outside of /usr/share and /var/www/html.\u001b[0m", "    \u001b[37m+# If your system is serving content from a sub-directory in /srv you must allow\u001b[0m", "    \u001b[37m+# access in conf-enabled, or in any related virtual host. e.g.\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+#  <Directory /srv/>\u001b[0m", "    \u001b[37m+#    Options Indexes FollowSymLinks\u001b[0m", "    \u001b[37m+#    AllowOverride None\u001b[0m", "    \u001b[37m+#    Require all granted\u001b[0m", "    \u001b[37m+#  </Directory>\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+<Directory />\u001b[0m", "    \u001b[37m+        Options FollowSymLinks\u001b[0m", "    \u001b[37m+        AllowOverride None\u001b[0m", "    \u001b[37m+        Require all denied\u001b[0m", "    \u001b[37m+</Directory>\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+<Directory /usr/share>\u001b[0m", "    \u001b[37m+        AllowOverride None\u001b[0m", "    \u001b[37m+        Require all granted\u001b[0m", "    \u001b[37m+</Directory>\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+<Directory /var/www/html>\u001b[0m", "    \u001b[37m+        Options Indexes FollowSymLinks\u001b[0m", "    \u001b[37m+        AllowOverride None\u001b[0m", "    \u001b[37m+        Require all granted\u001b[0m", "    \u001b[37m+</Directory>\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m+# AccessFileName: The name of the file to look for in each directory\u001b[0m", "    \u001b[37m+# for additional configuration directives.  See also the AllowOverride\u001b[0m", "    \u001b[37m+# directive.\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+AccessFileName .htaccess\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+# The following lines prevent .htaccess and .htpasswd files from being\u001b[0m", "    \u001b[37m+# viewed by Web clients.\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+<Files ~ \"^\\.ht\">\u001b[0m", "    \u001b[37m+    Require all denied\u001b[0m", "    \u001b[37m+</Files>\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m # HostnameLookups: Log the names of clients or just their IP addresses\u001b[0m", "    \u001b[37m # e.g., www.apache.org (on) or 204.62.129.132 (off).\u001b[0m", "    \u001b[37m # The default is off because it'd be overall better for the net if people\u001b[0m", "    \u001b[37m@@ -125,98 +105,40 @@\u001b[0m", "    \u001b[37m # logged here.  If you *do* define an error logfile for a <VirtualHost>\u001b[0m", "    \u001b[37m # container, that host's errors will be logged there and not here.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-ErrorLog ${APACHE_LOG_DIR}/error.log\u001b[0m", "    \u001b[37m+ErrorLog /var/log/apache2/error.log\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-# LogLevel: Control the severity of messages logged to the error_log.\u001b[0m", "    \u001b[37m-# Available values: trace8, ..., trace1, debug, info, notice, warn,\u001b[0m", "    \u001b[37m-# error, crit, alert, emerg.\u001b[0m", "    \u001b[37m-# It is also possible to configure the log level for particular modules, e.g.\u001b[0m", "    \u001b[37m-# \"LogLevel info ssl:warn\"\u001b[0m", "    \u001b[37m+# LogLevel: Control the number of messages logged to the error_log.\u001b[0m", "    \u001b[37m+# Possible values include: debug, info, notice, warn, error, crit,\u001b[0m", "    \u001b[37m+# alert, emerg.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m LogLevel warn\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+# COOK-1021: Dummy LoadModule directive to aid module installations\u001b[0m", "    \u001b[37m+#LoadModule dummy_module modules/mod_dummy.so\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m # Include module configuration:\u001b[0m", "    \u001b[37m-IncludeOptional mods-enabled/*.load\u001b[0m", "    \u001b[37m-IncludeOptional mods-enabled/*.conf\u001b[0m", "    \u001b[37m+IncludeOptional /etc/apache2/mods-enabled/*.load\u001b[0m", "    \u001b[37m+IncludeOptional /etc/apache2/mods-enabled/*.conf\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Include list of ports to listen on\u001b[0m", "    \u001b[37m-Include ports.conf\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m+# Include ports listing\u001b[0m", "    \u001b[37m+Include /etc/apache2/ports.conf\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Sets the default security model of the Apache2 HTTPD server. It does\u001b[0m", "    \u001b[37m-# not allow access to the root filesystem outside of /usr/share and /var/www.\u001b[0m", "    \u001b[37m-# The former is used by web applications packaged in Debian,\u001b[0m", "    \u001b[37m-# the latter may be used for local directories served by the web server. If\u001b[0m", "    \u001b[37m-# your system is serving content from a sub-directory in /srv you must allow\u001b[0m", "    \u001b[37m-# access here, or in any related virtual host.\u001b[0m", "    \u001b[37m-<Directory />\u001b[0m", "    \u001b[37m-\tOptions FollowSymLinks\u001b[0m", "    \u001b[37m-\tAllowOverride None\u001b[0m", "    \u001b[37m-\tRequire all denied\u001b[0m", "    \u001b[37m-</Directory>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-<Directory /usr/share>\u001b[0m", "    \u001b[37m-\tAllowOverride None\u001b[0m", "    \u001b[37m-\tRequire all granted\u001b[0m", "    \u001b[37m-</Directory>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-<Directory /var/www/>\u001b[0m", "    \u001b[37m-\tOptions Indexes FollowSymLinks\u001b[0m", "    \u001b[37m-\tAllowOverride None\u001b[0m", "    \u001b[37m-\tRequire all granted\u001b[0m", "    \u001b[37m-</Directory>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#<Directory /srv/>\u001b[0m", "    \u001b[37m-#\tOptions Indexes FollowSymLinks\u001b[0m", "    \u001b[37m-#\tAllowOverride None\u001b[0m", "    \u001b[37m-#\tRequire all granted\u001b[0m", "    \u001b[37m-#</Directory>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# AccessFileName: The name of the file to look for in each directory\u001b[0m", "    \u001b[37m-# for additional configuration directives.  See also the AllowOverride\u001b[0m", "    \u001b[37m-# directive.\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-AccessFileName .htaccess\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# The following lines prevent .htaccess and .htpasswd files from being\u001b[0m", "    \u001b[37m-# viewed by Web clients.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-<FilesMatch \"^\\.ht\">\u001b[0m", "    \u001b[37m-\tRequire all denied\u001b[0m", "    \u001b[37m-</FilesMatch>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m # The following directives define some format nicknames for use with\u001b[0m", "    \u001b[37m-# a CustomLog directive.\u001b[0m", "    \u001b[37m+# a CustomLog directive (see below).\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-# These deviate from the Common Log Format definitions in that they use %O\u001b[0m", "    \u001b[37m-# (the actual bytes sent including headers) instead of %b (the size of the\u001b[0m", "    \u001b[37m-# requested file), because the latter makes it impossible to detect partial\u001b[0m", "    \u001b[37m-# requests.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# Note that the use of %{X-Forwarded-For}i instead of %h is not recommended.\u001b[0m", "    \u001b[37m-# Use mod_remoteip instead.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m LogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\u001b[0m", "    \u001b[37m-LogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\u001b[0m", "    \u001b[37m-LogFormat \"%h %l %u %t \\\"%r\\\" %>s %O\" common\u001b[0m", "    \u001b[37m+LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\u001b[0m", "    \u001b[37m+LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\u001b[0m", "    \u001b[37m LogFormat \"%{Referer}i -> %U\" referer\u001b[0m", "    \u001b[37m LogFormat \"%{User-agent}i\" agent\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-# Include of directories ignores editors' and dpkg's backup files,\u001b[0m", "    \u001b[37m-# see README.Debian for details.\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m # Include generic snippets of statements\u001b[0m", "    \u001b[37m-IncludeOptional conf-enabled/*.conf\u001b[0m", "    \u001b[37m+IncludeOptional /etc/apache2/conf-enabled/*.conf\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m # Include the virtual host configurations:\u001b[0m", "    \u001b[37m-IncludeOptional sites-enabled/*.conf\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "    \u001b[37m+IncludeOptional /etc/apache2/sites-enabled/*.conf\u001b[0m", "\u001b[0m  * file[/etc/apache2/conf-available/security] action delete (up to date)", "  * template[/etc/apache2/conf-available/security.conf] action create", "    \u001b[32m- update content in file /etc/apache2/conf-available/security.conf from fc9c6e to b8213b\u001b[0m", "    \u001b[37m--- /etc/apache2/conf-available/security.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/conf-available/.chef-security20190423-11189-18tw25a.conf\t2019-04-23 15:42:46.791509205 +0000\u001b[0m", "    \u001b[37m@@ -1,16 +1,3 @@\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# Disable access to the entire file system except for the directories that\u001b[0m", "    \u001b[37m-# are explicitly allowed later.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# This currently breaks the configurations that come with some web application\u001b[0m", "    \u001b[37m-# Debian packages.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#<Directory />\u001b[0m", "    \u001b[37m-#   AllowOverride None\u001b[0m", "    \u001b[37m-#   Require all denied\u001b[0m", "    \u001b[37m-#</Directory>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m # Changing the following options will not really affect the security of the\u001b[0m", "    \u001b[37m # server, but might make attacks slightly more difficult in some cases.\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m@@ -21,9 +8,8 @@\u001b[0m", "    \u001b[37m # and compiled in modules.\u001b[0m", "    \u001b[37m # Set to one of:  Full | OS | Minimal | Minor | Major | Prod\u001b[0m", "    \u001b[37m # where Full conveys the most information, and Prod the least.\u001b[0m", "    \u001b[37m-#ServerTokens Minimal\u001b[0m", "    \u001b[37m-ServerTokens OS\u001b[0m", "    \u001b[37m-#ServerTokens Full\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m+ServerTokens Prod\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # Optionally add a line containing the server version and virtual host\u001b[0m", "    \u001b[37m@@ -32,7 +18,7 @@\u001b[0m", "    \u001b[37m # documents or custom error documents).\u001b[0m", "    \u001b[37m # Set to \"EMail\" to also include a mailto: link to the ServerAdmin.\u001b[0m", "    \u001b[37m # Set to one of:  On | Off | EMail\u001b[0m", "    \u001b[37m-#ServerSignature Off\u001b[0m", "    \u001b[37m+#\u001b[0m", "    \u001b[37m ServerSignature On\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m@@ -42,33 +28,6 @@\u001b[0m", "    \u001b[37m # diagnostic purposes).\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m # Set to one of:  On | Off | extended\u001b[0m", "    \u001b[37m-TraceEnable Off\u001b[0m", "    \u001b[37m-#TraceEnable On\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m #\u001b[0m", "    \u001b[37m-# Forbid access to version control directories\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# If you use version control systems in your document root, you should\u001b[0m", "    \u001b[37m-# probably deny access to their directories. For example, for subversion:\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#<DirectoryMatch \"/\\.svn\">\u001b[0m", "    \u001b[37m-#   Require all denied\u001b[0m", "    \u001b[37m-#</DirectoryMatch>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# Setting this header will prevent MSIE from interpreting files as something\u001b[0m", "    \u001b[37m-# else than declared by the content type in the HTTP headers.\u001b[0m", "    \u001b[37m-# Requires mod_headers to be enabled.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#Header set X-Content-Type-Options: \"nosniff\"\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-# Setting this header will prevent other sites from embedding pages from this\u001b[0m", "    \u001b[37m-# site as frames. This defends against clickjacking attacks.\u001b[0m", "    \u001b[37m-# Requires mod_headers to be enabled.\u001b[0m", "    \u001b[37m-#\u001b[0m", "    \u001b[37m-#Header set X-Frame-Options: \"sameorigin\"\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "    \u001b[37m+TraceEnable Off\u001b[0m", "\u001b[0m  * execute[a2enconf security.conf] action run (skipped due to not_if)", "  * file[/etc/apache2/conf-available/charset] action delete (up to date)", "  * template[/etc/apache2/conf-available/charset.conf] action create", "    \u001b[32m- update content in file /etc/apache2/conf-available/charset.conf from 1b4173 to 543c6c\u001b[0m", "    \u001b[37m--- /etc/apache2/conf-available/charset.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/conf-available/.chef-charset20190423-11189-g65mqf.conf\t2019-04-23 15:42:46.795509554 +0000\u001b[0m", "    \u001b[37m@@ -4,6 +4,4 @@\u001b[0m", "    \u001b[37m # in meta http-equiv or xml encoding tags.\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m #AddDefaultCharset UTF-8\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * execute[a2enconf charset.conf] action run (skipped due to not_if)", "  * file[/etc/apache2/ports] action delete (up to date)", "  * template[/etc/apache2/ports.conf] action create", "    \u001b[32m- update content in file /etc/apache2/ports.conf from 9d2d53 to 4d2f2b\u001b[0m", "    \u001b[37m--- /etc/apache2/ports.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/.chef-ports20190423-11189-bau2gz.conf\t2019-04-23 15:42:46.799509903 +0000\u001b[0m", "    \u001b[37m@@ -1,16 +1,7 @@\u001b[0m", "    \u001b[37m-# If you just change the port or add more ports here, you will likely also\u001b[0m", "    \u001b[37m-# have to change the VirtualHost statement in\u001b[0m", "    \u001b[37m-# /etc/apache2/sites-enabled/000-default.conf\u001b[0m", "    \u001b[37m+# This file was generated by Chef for localhost.\u001b[0m", "    \u001b[37m+# Do NOT modify this file by hand!\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-Listen 80\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-<IfModule ssl_module>\u001b[0m", "    \u001b[37m-\tListen 443\u001b[0m", "    \u001b[37m-</IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-<IfModule mod_gnutls.c>\u001b[0m", "    \u001b[37m-\tListen 443\u001b[0m", "    \u001b[37m-</IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "    \u001b[37m+Listen 139.178.70.138:5000\u001b[0m", "    \u001b[37m+Listen 0.0.0.0:80\u001b[0m", "    \u001b[37m+Listen 0.0.0.0:443\u001b[0m", "\u001b[0mRecipe: apache2::mpm_event\u001b[0m", "  * file[/etc/apache2/mods-available/mpm_prefork.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_prefork.load from 827c3b to 0d8639\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/mpm_prefork.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_prefork20190423-11189-ldb63.load\t2019-04-23 15:42:46.803510252 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Conflicts: mpm_event mpm_worker\u001b[0m", "    \u001b[37m LoadModule mpm_prefork_module /usr/lib/apache2/modules/mod_mpm_prefork.so\u001b[0m", "\u001b[0m  * execute[a2dismod mpm_prefork] action run (skipped due to only_if)", "  * file[/etc/apache2/mods-available/mpm_worker.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_worker.load from 48ba3d to 24badb\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/mpm_worker.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_worker20190423-11189-1dnb2oe.load\t2019-04-23 15:42:46.807510601 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Conflicts: mpm_event mpm_prefork\u001b[0m", "    \u001b[37m LoadModule mpm_worker_module /usr/lib/apache2/modules/mod_mpm_worker.so\u001b[0m", "\u001b[0m  * execute[a2dismod mpm_worker] action run (skipped due to only_if)", "  * template[/etc/apache2/mods-available/mpm_event.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_event.conf from 4318a0 to 7be572\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/mpm_event.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_event20190423-11189-n3nqfh.conf\t2019-04-23 15:42:46.811510950 +0000\u001b[0m", "    \u001b[37m@@ -1,19 +1,18 @@\u001b[0m", "    \u001b[37m # event MPM\u001b[0m", "    \u001b[37m-# StartServers: initial number of server processes to start\u001b[0m", "    \u001b[37m-# MinSpareThreads: minimum number of worker threads which are kept spare\u001b[0m", "    \u001b[37m-# MaxSpareThreads: maximum number of worker threads which are kept spare\u001b[0m", "    \u001b[37m-# ThreadsPerChild: constant number of worker threads in each server process\u001b[0m", "    \u001b[37m-# MaxRequestWorkers: maximum number of worker threads\u001b[0m", "    \u001b[37m-# MaxConnectionsPerChild: maximum number of requests a server process serves\u001b[0m", "    \u001b[37m <IfModule mpm_event_module>\u001b[0m", "    \u001b[37m-\tStartServers\t\t\t 2\u001b[0m", "    \u001b[37m-\tMinSpareThreads\t\t 25\u001b[0m", "    \u001b[37m-\tMaxSpareThreads\t\t 75\u001b[0m", "    \u001b[37m-\tThreadLimit\t\t\t 64\u001b[0m", "    \u001b[37m-\tThreadsPerChild\t\t 25\u001b[0m", "    \u001b[37m-\tMaxRequestWorkers\t  150\u001b[0m", "    \u001b[37m-\tMaxConnectionsPerChild   0\u001b[0m", "    \u001b[37m+  # StartServers: initial number of server processes to start\u001b[0m", "    \u001b[37m+  # MinSpareThreads: minimum number of worker threads which are kept spare\u001b[0m", "    \u001b[37m+  # MaxSpareThreads: maximum number of worker threads which are kept spare\u001b[0m", "    \u001b[37m+  # ThreadsPerChild: constant number of worker threads in each server process\u001b[0m", "    \u001b[37m+  # MaxRequestWorkers: maximum number of worker threads\u001b[0m", "    \u001b[37m+  # MaxConnectionsPerChild: maximum number of requests a server process serves\u001b[0m", "    \u001b[37m+  StartServers           4\u001b[0m", "    \u001b[37m+  MinSpareThreads        64\u001b[0m", "    \u001b[37m+  MaxSpareThreads        192\u001b[0m", "    \u001b[37m+  ThreadsPerChild        64\u001b[0m", "    \u001b[37m+  MaxRequestWorkers      1024\u001b[0m", "    \u001b[37m+  MaxConnectionsPerChild 0\u001b[0m", "    \u001b[37m+  ThreadLimit            192\u001b[0m", "    \u001b[37m+  ServerLimit            16\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/mpm_event.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/mpm_event.load from 744e65 to 466e14\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/mpm_event.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-mpm_event20190423-11189-1bxtlja.load\t2019-04-23 15:42:46.815511298 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Conflicts: mpm_worker mpm_prefork\u001b[0m", "    \u001b[37m LoadModule mpm_event_module /usr/lib/apache2/modules/mod_mpm_event.so\u001b[0m", "\u001b[0m  * execute[a2enmod mpm_event] action run (skipped due to not_if)", "Recipe: apache2::mod_status\u001b[0m", "  * template[/etc/apache2/mods-available/status.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/status.conf from 662455 to ed62d0\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/status.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-status20190423-11189-1a7g3nr.conf\t2019-04-23 15:42:46.815511298 +0000\u001b[0m", "    \u001b[37m@@ -1,30 +1,31 @@\u001b[0m", "    \u001b[37m <IfModule mod_status.c>\u001b[0m", "    \u001b[37m-\t# Allow server status reports generated by mod_status,\u001b[0m", "    \u001b[37m-\t# with the URL of http://servername/server-status\u001b[0m", "    \u001b[37m-\t# Uncomment and change the \"192.0.2.0/24\" to allow access from other hosts.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Allow server status reports generated by mod_status,\u001b[0m", "    \u001b[37m+  # with the URL of http://servername/server-status\u001b[0m", "    \u001b[37m+  # Uncomment and change the \".example.com\" to allow\u001b[0m", "    \u001b[37m+  # access from other hosts.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  <Location /server-status>\u001b[0m", "    \u001b[37m+    SetHandler server-status\u001b[0m", "    \u001b[37m+    Require local\u001b[0m", "    \u001b[37m+    Require ip 127.0.0.1 ::1\u001b[0m", "    \u001b[37m+  </Location>\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t<Location /server-status>\u001b[0m", "    \u001b[37m-\t\tSetHandler server-status\u001b[0m", "    \u001b[37m-\t\tRequire local\u001b[0m", "    \u001b[37m-\t\t#Require ip 192.0.2.0/24\u001b[0m", "    \u001b[37m-\t</Location>\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # ExtendedStatus controls whether Apache will generate \"full\" status\u001b[0m", "    \u001b[37m+  # information (ExtendedStatus On) or just basic information (ExtendedStatus\u001b[0m", "    \u001b[37m+  # Off) when the \"server-status\" handler is called. The default is Off.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  ExtendedStatus Off\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t# Keep track of extended status information for each request\u001b[0m", "    \u001b[37m-\tExtendedStatus On\u001b[0m", "    \u001b[37m+  # Determine if mod_status displays the first 63 characters of a request or\u001b[0m", "    \u001b[37m+  # the last 63, assuming the request itself is greater than 63 chars.\u001b[0m", "    \u001b[37m+  # Default: Off\u001b[0m", "    \u001b[37m+  #SeeRequestTail On\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t# Determine if mod_status displays the first 63 characters of a request or\u001b[0m", "    \u001b[37m-\t# the last 63, assuming the request itself is greater than 63 chars.\u001b[0m", "    \u001b[37m-\t# Default: Off\u001b[0m", "    \u001b[37m-\t#SeeRequestTail On\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\t<IfModule mod_proxy.c>\u001b[0m", "    \u001b[37m-\t\t# Show Proxy LoadBalancer status in mod_status\u001b[0m", "    \u001b[37m-\t\tProxyStatus On\u001b[0m", "    \u001b[37m-\t</IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m+  <IfModule mod_proxy.c>\u001b[0m", "    \u001b[37m+     # Show Proxy LoadBalancer status in mod_status\u001b[0m", "    \u001b[37m+     ProxyStatus On\u001b[0m", "    \u001b[37m+  </IfModule>\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/status.load] action create (up to date)", "  * execute[a2enmod status] action run (skipped due to not_if)", "Recipe: apache2::mod_alias\u001b[0m", "  * template[/etc/apache2/mods-available/alias.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/alias.conf from 51f6f3 to 167573\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/alias.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-alias20190423-11189-1kzl1iq.conf\t2019-04-23 15:42:46.823511997 +0000\u001b[0m", "    \u001b[37m@@ -1,25 +1,23 @@\u001b[0m", "    \u001b[37m <IfModule alias_module>\u001b[0m", "    \u001b[37m-\t# Aliases: Add here as many aliases as you need (with no limit). The format is\u001b[0m", "    \u001b[37m-\t# Alias fakename realname\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Note that if you include a trailing / on fakename then the server will\u001b[0m", "    \u001b[37m-\t# require it to be present in the URL.  So \"/icons\" isn't aliased in this\u001b[0m", "    \u001b[37m-\t# example, only \"/icons/\".  If the fakename is slash-terminated, then the\u001b[0m", "    \u001b[37m-\t# realname must also be slash terminated, and if the fakename omits the\u001b[0m", "    \u001b[37m-\t# trailing slash, the realname must also omit it.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# We include the /icons/ alias for FancyIndexed directory listings.  If\u001b[0m", "    \u001b[37m-\t# you do not use FancyIndexing, you may comment this out.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Aliases: Add here as many aliases as you need (with no limit). The format is\u001b[0m", "    \u001b[37m+  # Alias fakename realname\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Note that if you include a trailing / on fakename then the server will\u001b[0m", "    \u001b[37m+  # require it to be present in the URL.  So \"/icons\" isn't aliased in this\u001b[0m", "    \u001b[37m+  # example, only \"/icons/\".  If the fakename is slash-terminated, then the\u001b[0m", "    \u001b[37m+  # realname must also be slash terminated, and if the fakename omits the\u001b[0m", "    \u001b[37m+  # trailing slash, the realname must also omit it.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # We include the /icons/ alias for FancyIndexed directory listings.  If\u001b[0m", "    \u001b[37m+  # you do not use FancyIndexing, you may comment this out.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  Alias /icons/ \"/usr/share/apache2/icons/\"\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\tAlias /icons/ \"/usr/share/apache2/icons/\"\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\t<Directory \"/usr/share/apache2/icons\">\u001b[0m", "    \u001b[37m-\t\tOptions FollowSymlinks\u001b[0m", "    \u001b[37m-\t\tAllowOverride None\u001b[0m", "    \u001b[37m-\t\tRequire all granted\u001b[0m", "    \u001b[37m-\t</Directory>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m+  <Directory \"/usr/share/apache2/icons\">\u001b[0m", "    \u001b[37m+    Options Indexes MultiViews\u001b[0m", "    \u001b[37m+    AllowOverride None\u001b[0m", "    \u001b[37m+    Require all granted\u001b[0m", "    \u001b[37m+  </Directory>\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/alias.load] action create (up to date)", "  * execute[a2enmod alias] action run (skipped due to not_if)", "Recipe: apache2::mod_auth_basic\u001b[0m", "  * file[/etc/apache2/mods-available/auth_basic.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/auth_basic.load from a4b933 to 0d1116\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/auth_basic.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-auth_basic20190423-11189-1bufd6.load\t2019-04-23 15:42:46.827512346 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Depends: authn_core\u001b[0m", "    \u001b[37m LoadModule auth_basic_module /usr/lib/apache2/modules/mod_auth_basic.so\u001b[0m", "\u001b[0m  * execute[a2enmod auth_basic] action run (skipped due to not_if)", "Recipe: apache2::mod_authn_core\u001b[0m", "  * file[/etc/apache2/mods-available/authn_core.load] action create (up to date)", "  * execute[a2enmod authn_core] action run (skipped due to not_if)", "Recipe: apache2::mod_authn_file\u001b[0m", "  * file[/etc/apache2/mods-available/authn_file.load] action create (up to date)", "  * execute[a2enmod authn_file] action run (skipped due to not_if)", "Recipe: apache2::mod_authz_core\u001b[0m", "  * file[/etc/apache2/mods-available/authz_core.load] action create (up to date)", "  * execute[a2enmod authz_core] action run (skipped due to not_if)", "Recipe: apache2::mod_authz_groupfile\u001b[0m", "  * file[/etc/apache2/mods-available/authz_groupfile.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/authz_groupfile.load from 8bc67b to 214f51\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/authz_groupfile.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-authz_groupfile20190423-11189-nm8cdb.load\t2019-04-23 15:42:46.835513044 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Depends: authz_core\u001b[0m", "    \u001b[37m LoadModule authz_groupfile_module /usr/lib/apache2/modules/mod_authz_groupfile.so\u001b[0m", "\u001b[0m  * execute[a2enmod authz_groupfile] action run", "    \u001b[32m- execute /usr/sbin/a2enmod authz_groupfile\u001b[0m", "\u001b[0mRecipe: apache2::mod_authz_host\u001b[0m", "  * file[/etc/apache2/mods-available/authz_host.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/authz_host.load from 66e656 to a6f9be\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/authz_host.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-authz_host20190423-11189-nzfw2d.load\t2019-04-23 15:42:46.883517231 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Depends: authz_core\u001b[0m", "    \u001b[37m LoadModule authz_host_module /usr/lib/apache2/modules/mod_authz_host.so\u001b[0m", "\u001b[0m  * execute[a2enmod authz_host] action run (skipped due to not_if)", "Recipe: apache2::mod_authz_user\u001b[0m", "  * file[/etc/apache2/mods-available/authz_user.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/authz_user.load from d219d3 to 854c87\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/authz_user.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-authz_user20190423-11189-lvuqhl.load\t2019-04-23 15:42:46.887517579 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Depends: authz_core\u001b[0m", "    \u001b[37m LoadModule authz_user_module /usr/lib/apache2/modules/mod_authz_user.so\u001b[0m", "\u001b[0m  * execute[a2enmod authz_user] action run (skipped due to not_if)", "Recipe: apache2::mod_autoindex\u001b[0m", "  * template[/etc/apache2/mods-available/autoindex.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/autoindex.conf from 727807 to 8e7e44\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/autoindex.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-autoindex20190423-11189-1l3omtk.conf\t2019-04-23 15:42:46.895518278 +0000\u001b[0m", "    \u001b[37m@@ -1,97 +1,101 @@\u001b[0m", "    \u001b[37m <IfModule mod_autoindex.c>\u001b[0m", "    \u001b[37m-\t# Directives controlling the display of server-generated directory listings.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Directives controlling the display of server-generated directory listings.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# IndexOptions: Controls the appearance of server-generated directory\u001b[0m", "    \u001b[37m-\t# listings.\u001b[0m", "    \u001b[37m-\t# Remove/replace the \"Charset=UTF-8\" if you don't use UTF-8 for your filenames.\u001b[0m", "    \u001b[37m-\tIndexOptions FancyIndexing VersionSort HTMLTable NameWidth=* DescriptionWidth=* Charset=UTF-8\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # IndexOptions: Controls the appearance of server-generated directory\u001b[0m", "    \u001b[37m+  # listings.\u001b[0m", "    \u001b[37m+  # Remove/replace the \"Charset=UTF-8\" if you don't use UTF-8 for your filenames.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  IndexOptions FancyIndexing VersionSort HTMLTable NameWidth=* DescriptionWidth=* Charset=UTF-8\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# AddIcon* directives tell the server which icon to show for different\u001b[0m", "    \u001b[37m-\t# files or filename extensions.  These are only displayed for\u001b[0m", "    \u001b[37m-\t# FancyIndexed directories.\u001b[0m", "    \u001b[37m-\tAddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip x-bzip2\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # AddIcon* directives tell the server which icon to show for different\u001b[0m", "    \u001b[37m+  # files or filename extensions.  These are only displayed for\u001b[0m", "    \u001b[37m+  # FancyIndexed directories.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip x-bzip2\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\tAddIconByType (TXT,/icons/text.gif) text/*\u001b[0m", "    \u001b[37m-\tAddIconByType (IMG,/icons/image2.gif) image/*\u001b[0m", "    \u001b[37m-\tAddIconByType (SND,/icons/sound2.gif) audio/*\u001b[0m", "    \u001b[37m-\tAddIconByType (VID,/icons/movie.gif) video/*\u001b[0m", "    \u001b[37m+  AddIconByType (TXT,/icons/text.gif) text/*\u001b[0m", "    \u001b[37m+  AddIconByType (IMG,/icons/image2.gif) image/*\u001b[0m", "    \u001b[37m+  AddIconByType (SND,/icons/sound2.gif) audio/*\u001b[0m", "    \u001b[37m+  AddIconByType (VID,/icons/movie.gif) video/*\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\tAddIcon /icons/binary.gif .bin .exe\u001b[0m", "    \u001b[37m-\tAddIcon /icons/binhex.gif .hqx\u001b[0m", "    \u001b[37m-\tAddIcon /icons/tar.gif .tar\u001b[0m", "    \u001b[37m-\tAddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv\u001b[0m", "    \u001b[37m-\tAddIcon /icons/compressed.gif .Z .z .tgz .gz .zip\u001b[0m", "    \u001b[37m-\tAddIcon /icons/a.gif .ps .ai .eps\u001b[0m", "    \u001b[37m-\tAddIcon /icons/layout.gif .html .shtml .htm .pdf\u001b[0m", "    \u001b[37m-\tAddIcon /icons/text.gif .txt\u001b[0m", "    \u001b[37m-\tAddIcon /icons/c.gif .c\u001b[0m", "    \u001b[37m-\tAddIcon /icons/p.gif .pl .py\u001b[0m", "    \u001b[37m-\tAddIcon /icons/f.gif .for\u001b[0m", "    \u001b[37m-\tAddIcon /icons/dvi.gif .dvi\u001b[0m", "    \u001b[37m-\tAddIcon /icons/uuencoded.gif .uu\u001b[0m", "    \u001b[37m-\tAddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl\u001b[0m", "    \u001b[37m-\tAddIcon /icons/tex.gif .tex\u001b[0m", "    \u001b[37m-\t# It's a suffix rule, so simply matching \"core\" matches \"score\" as well !\u001b[0m", "    \u001b[37m-\tAddIcon /icons/bomb.gif /core\u001b[0m", "    \u001b[37m-\tAddIcon (SND,/icons/sound2.gif) .ogg\u001b[0m", "    \u001b[37m-\tAddIcon (VID,/icons/movie.gif) .ogm\u001b[0m", "    \u001b[37m+  AddIcon /icons/binary.gif .bin .exe\u001b[0m", "    \u001b[37m+  AddIcon /icons/binhex.gif .hqx\u001b[0m", "    \u001b[37m+  AddIcon /icons/tar.gif .tar\u001b[0m", "    \u001b[37m+  AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv\u001b[0m", "    \u001b[37m+  AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip\u001b[0m", "    \u001b[37m+  AddIcon /icons/a.gif .ps .ai .eps\u001b[0m", "    \u001b[37m+  AddIcon /icons/layout.gif .html .shtml .htm .pdf\u001b[0m", "    \u001b[37m+  AddIcon /icons/text.gif .txt\u001b[0m", "    \u001b[37m+  AddIcon /icons/c.gif .c\u001b[0m", "    \u001b[37m+  AddIcon /icons/p.gif .pl .py\u001b[0m", "    \u001b[37m+  AddIcon /icons/f.gif .for\u001b[0m", "    \u001b[37m+  AddIcon /icons/dvi.gif .dvi\u001b[0m", "    \u001b[37m+  AddIcon /icons/uuencoded.gif .uu\u001b[0m", "    \u001b[37m+  AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl\u001b[0m", "    \u001b[37m+  AddIcon /icons/tex.gif .tex\u001b[0m", "    \u001b[37m+  # It's a suffix rule, so simply matching \"core\" matches \"score\" as well !\u001b[0m", "    \u001b[37m+  AddIcon /icons/bomb.gif /core\u001b[0m", "    \u001b[37m+  AddIcon (SND,/icons/sound2.gif) .ogg\u001b[0m", "    \u001b[37m+  AddIcon (VID,/icons/movie.gif) .ogm\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\tAddIcon /icons/back.gif ..\u001b[0m", "    \u001b[37m-\tAddIcon /icons/hand.right.gif README\u001b[0m", "    \u001b[37m-\tAddIcon /icons/folder.gif ^^DIRECTORY^^\u001b[0m", "    \u001b[37m-\tAddIcon /icons/blank.gif ^^BLANKICON^^\u001b[0m", "    \u001b[37m+  AddIcon /icons/back.gif ..\u001b[0m", "    \u001b[37m+  AddIcon /icons/hand.right.gif README\u001b[0m", "    \u001b[37m+  AddIcon /icons/folder.gif ^^DIRECTORY^^\u001b[0m", "    \u001b[37m+  AddIcon /icons/blank.gif ^^BLANKICON^^\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t# Default icons for OpenDocument format\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odt-20x22.png .odt\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6ods-20x22.png .ods\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odp-20x22.png .odp\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odg-20x22.png .odg\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odc-20x22.png .odc\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odf-20x22.png .odf\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odb-20x22.png .odb\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odi-20x22.png .odi\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6odm-20x22.png .odm\u001b[0m", "    \u001b[37m+  # Default icons for OpenDocument format\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odt-20x22.png .odt\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6ods-20x22.png .ods\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odp-20x22.png .odp\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odg-20x22.png .odg\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odc-20x22.png .odc\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odf-20x22.png .odf\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odb-20x22.png .odb\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odi-20x22.png .odi\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6odm-20x22.png .odm\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6ott-20x22.png .ott\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6ots-20x22.png .ots\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6otp-20x22.png .otp\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6otg-20x22.png .otg\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6otc-20x22.png .otc\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6otf-20x22.png .otf\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6oti-20x22.png .oti\u001b[0m", "    \u001b[37m-\tAddIcon /icons/odf6oth-20x22.png .oth\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6ott-20x22.png .ott\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6ots-20x22.png .ots\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6otp-20x22.png .otp\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6otg-20x22.png .otg\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6otc-20x22.png .otc\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6otf-20x22.png .otf\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6oti-20x22.png .oti\u001b[0m", "    \u001b[37m+  AddIcon /icons/odf6oth-20x22.png .oth\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# DefaultIcon is which icon to show for files which do not have an icon\u001b[0m", "    \u001b[37m-\t# explicitly set.\u001b[0m", "    \u001b[37m-\tDefaultIcon /icons/unknown.gif\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # DefaultIcon is which icon to show for files which do not have an icon\u001b[0m", "    \u001b[37m+  # explicitly set.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  DefaultIcon /icons/unknown.gif\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# AddDescription allows you to place a short description after a file in\u001b[0m", "    \u001b[37m-\t# server-generated indexes.  These are only displayed for FancyIndexed\u001b[0m", "    \u001b[37m-\t# directories.\u001b[0m", "    \u001b[37m-\t# Format: AddDescription \"description\" filename\u001b[0m", "    \u001b[37m-\t#AddDescription \"GZIP compressed document\" .gz\u001b[0m", "    \u001b[37m-\t#AddDescription \"tar archive\" .tar\u001b[0m", "    \u001b[37m-\t#AddDescription \"GZIP compressed tar archive\" .tgz\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # AddDescription allows you to place a short description after a file in\u001b[0m", "    \u001b[37m+  # server-generated indexes.  These are only displayed for FancyIndexed\u001b[0m", "    \u001b[37m+  # directories.\u001b[0m", "    \u001b[37m+  # Format: AddDescription \"description\" filename\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  #AddDescription \"GZIP compressed document\" .gz\u001b[0m", "    \u001b[37m+  #AddDescription \"tar archive\" .tar\u001b[0m", "    \u001b[37m+  #AddDescription \"GZIP compressed tar archive\" .tgz\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# ReadmeName is the name of the README file the server will look for by\u001b[0m", "    \u001b[37m-\t# default, and append to directory listings.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# HeaderName is the name of a file which should be prepended to\u001b[0m", "    \u001b[37m-\t# directory indexes\u001b[0m", "    \u001b[37m-\tReadmeName README.html\u001b[0m", "    \u001b[37m-\tHeaderName HEADER.html\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # ReadmeName is the name of the README file the server will look for by\u001b[0m", "    \u001b[37m+  # default, and append to directory listings.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # HeaderName is the name of a file which should be prepended to\u001b[0m", "    \u001b[37m+  # directory indexes.\u001b[0m", "    \u001b[37m+  ReadmeName README.html\u001b[0m", "    \u001b[37m+  HeaderName HEADER.html\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# IndexIgnore is a set of filenames which directory indexing should ignore\u001b[0m", "    \u001b[37m-\t# and not include in the listing.  Shell-style wildcarding is permitted.\u001b[0m", "    \u001b[37m-\tIndexIgnore .??* *~ *# RCS CVS *,v *,t\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # IndexIgnore is a set of filenames which directory indexing should ignore\u001b[0m", "    \u001b[37m+  # and not include in the listing.  Shell-style wildcarding is permitted.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  IndexIgnore .??* *~ *# RCS CVS *,v *,t\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/autoindex.load] action create (up to date)", "  * execute[a2enmod autoindex] action run (skipped due to not_if)", "Recipe: apache2::mod_deflate\u001b[0m", "  * template[/etc/apache2/mods-available/deflate.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/deflate.conf from 7c5c22 to c8749f\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/deflate.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-deflate20190423-11189-1i9nbnz.conf\t2019-04-23 15:42:46.911519673 +0000\u001b[0m", "    \u001b[37m@@ -1,15 +1,19 @@\u001b[0m", "    \u001b[37m <IfModule mod_deflate.c>\u001b[0m", "    \u001b[37m-\t<IfModule mod_filter.c>\u001b[0m", "    \u001b[37m-\t\t# these are known to be safe with MSIE 6\u001b[0m", "    \u001b[37m-\t\tAddOutputFilterByType DEFLATE text/html text/plain text/xml\u001b[0m", "    \u001b[37m+  <IfModule mod_filter.c>\u001b[0m", "    \u001b[37m+     # these are known to be safe with MSIE 6\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE text/html text/plain text/xml\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t\t# everything else may cause problems with MSIE 6\u001b[0m", "    \u001b[37m-\t\tAddOutputFilterByType DEFLATE text/css\u001b[0m", "    \u001b[37m-\t\tAddOutputFilterByType DEFLATE application/x-javascript application/javascript application/ecmascript\u001b[0m", "    \u001b[37m-\t\tAddOutputFilterByType DEFLATE application/rss+xml\u001b[0m", "    \u001b[37m-\t\tAddOutputFilterByType DEFLATE application/xml\u001b[0m", "    \u001b[37m-\t</IfModule>\u001b[0m", "    \u001b[37m+     # everything else may cause problems with MSIE 6\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE text/css\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-javascript application/javascript application/ecmascript\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/rss+xml\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/xml\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/xhtml+xml\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE image/svg+xml\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/atom_xml\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-httpd-php\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-httpd-fastphp\u001b[0m", "    \u001b[37m+     AddOutputFilterByType DEFLATE application/x-httpd-eruby\u001b[0m", "    \u001b[37m+  </IfModule>\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/deflate.load] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/deflate.load from 82ba90 to a9a45c\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/deflate.load\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-deflate20190423-11189-1ovx2l7.load\t2019-04-23 15:42:46.911519673 +0000\u001b[0m", "    \u001b[37m@@ -1,3 +1,2 @@\u001b[0m", "    \u001b[37m-# Depends: filter\u001b[0m", "    \u001b[37m LoadModule deflate_module /usr/lib/apache2/modules/mod_deflate.so\u001b[0m", "\u001b[0m  * execute[a2enmod deflate] action run (skipped due to not_if)", "Recipe: apache2::mod_dir\u001b[0m", "  * template[/etc/apache2/mods-available/dir.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/dir.conf from f02232 to 5d2651\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/dir.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-dir20190423-11189-1l8u9i6.conf\t2019-04-23 15:42:46.915520023 +0000\u001b[0m", "    \u001b[37m@@ -1,6 +1,4 @@\u001b[0m", "    \u001b[37m <IfModule mod_dir.c>\u001b[0m", "    \u001b[37m-\tDirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm\u001b[0m", "    \u001b[37m+  DirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/dir.load] action create (up to date)", "  * execute[a2enmod dir] action run (skipped due to not_if)", "Recipe: apache2::mod_env\u001b[0m", "  * file[/etc/apache2/mods-available/env.load] action create (up to date)", "  * execute[a2enmod env] action run (skipped due to not_if)", "Recipe: apache2::mod_mime\u001b[0m", "  * template[/etc/apache2/mods-available/mime.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/mime.conf from 967722 to 76e7d0\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/mime.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-mime20190423-11189-16sv3ai.conf\t2019-04-23 15:42:46.923520721 +0000\u001b[0m", "    \u001b[37m@@ -1,250 +1,193 @@\u001b[0m", "    \u001b[37m <IfModule mod_mime.c>\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # TypesConfig points to the file containing the list of mappings from\u001b[0m", "    \u001b[37m+  # filename extension to MIME-type.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  TypesConfig /etc/mime.types\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# TypesConfig points to the file containing the list of mappings from\u001b[0m", "    \u001b[37m-\t# filename extension to MIME-type.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tTypesConfig /etc/mime.types\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # AddType allows you to add to or override the MIME configuration\u001b[0m", "    \u001b[37m+  # file mime.types for specific file types.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  #AddType application/x-gzip .tgz\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # AddEncoding allows you to have certain browsers uncompress\u001b[0m", "    \u001b[37m+  # information on the fly. Note: Not all browsers support this.\u001b[0m", "    \u001b[37m+  # Despite the name similarity, the following Add* directives have\u001b[0m", "    \u001b[37m+  # nothing to do with the FancyIndexing customization directives above.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  #AddEncoding x-compress .Z\u001b[0m", "    \u001b[37m+  #AddEncoding x-gzip .gz .tgz\u001b[0m", "    \u001b[37m+  #AddEncoding x-bzip2 .bz2\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # If the AddEncoding directives above are commented-out, then you\u001b[0m", "    \u001b[37m+  # probably should define those extensions to indicate media types:\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  AddType application/x-compress .Z\u001b[0m", "    \u001b[37m+  AddType application/x-gzip .gz .tgz\u001b[0m", "    \u001b[37m+  AddType application/x-bzip2 .bz2\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# AddType allows you to add to or override the MIME configuration\u001b[0m", "    \u001b[37m-\t# file mime.types for specific file types.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t#AddType application/x-gzip .tgz\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# AddEncoding allows you to have certain browsers uncompress\u001b[0m", "    \u001b[37m-\t# information on the fly. Note: Not all browsers support this.\u001b[0m", "    \u001b[37m-\t# Despite the name similarity, the following Add* directives have\u001b[0m", "    \u001b[37m-\t# nothing to do with the FancyIndexing customization directives above.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t#AddEncoding x-compress .Z\u001b[0m", "    \u001b[37m-\t#AddEncoding x-gzip .gz .tgz\u001b[0m", "    \u001b[37m-\t#AddEncoding x-bzip2 .bz2\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# If the AddEncoding directives above are commented-out, then you\u001b[0m", "    \u001b[37m-\t# probably should define those extensions to indicate media types:\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tAddType application/x-compress .Z\u001b[0m", "    \u001b[37m-\tAddType application/x-gzip .gz .tgz\u001b[0m", "    \u001b[37m-\tAddType application/x-bzip2 .bz2\u001b[0m", "    \u001b[37m+  AddType image/svg+xml svg svgz\u001b[0m", "    \u001b[37m+  AddEncoding gzip svgz\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# DefaultLanguage and AddLanguage allows you to specify the language of \u001b[0m", "    \u001b[37m-\t# a document. You can then use content negotiation to give a browser a \u001b[0m", "    \u001b[37m-\t# file in a language the user can understand.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Specify a default language. This means that all data\u001b[0m", "    \u001b[37m-\t# going out without a specific language tag (see below) will \u001b[0m", "    \u001b[37m-\t# be marked with this one. You probably do NOT want to set\u001b[0m", "    \u001b[37m-\t# this unless you are sure it is correct for all cases.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# * It is generally better to not mark a page as \u001b[0m", "    \u001b[37m-\t# * being a certain language than marking it with the wrong\u001b[0m", "    \u001b[37m-\t# * language!\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# DefaultLanguage nl\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Note 1: The suffix does not have to be the same as the language\u001b[0m", "    \u001b[37m-\t# keyword --- those with documents in Polish (whose net-standard\u001b[0m", "    \u001b[37m-\t# language code is pl) may wish to use \"AddLanguage pl .po\" to\u001b[0m", "    \u001b[37m-\t# avoid the ambiguity with the common suffix for perl scripts.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Note 2: The example entries below illustrate that in some cases \u001b[0m", "    \u001b[37m-\t# the two character 'Language' abbreviation is not identical to \u001b[0m", "    \u001b[37m-\t# the two character 'Country' code for its country,\u001b[0m", "    \u001b[37m-\t# E.g. 'Danmark/dk' versus 'Danish/da'.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Note 3: In the case of 'ltz' we violate the RFC by using a three char\u001b[0m", "    \u001b[37m-\t# specifier. There is 'work in progress' to fix this and get\u001b[0m", "    \u001b[37m-\t# the reference data for rfc1766 cleaned up.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Catalan (ca) - Croatian (hr) - Czech (cs) - Danish (da) - Dutch (nl)\u001b[0m", "    \u001b[37m-\t# English (en) - Esperanto (eo) - Estonian (et) - French (fr) - German (de)\u001b[0m", "    \u001b[37m-\t# Greek-Modern (el) - Hebrew (he) - Italian (it) - Japanese (ja)\u001b[0m", "    \u001b[37m-\t# Korean (ko) - Luxembourgeois* (ltz) - Norwegian Nynorsk (nn)\u001b[0m", "    \u001b[37m-\t# Norwegian (no) - Polish (pl) - Portugese (pt)\u001b[0m", "    \u001b[37m-\t# Brazilian Portuguese (pt-BR) - Russian (ru) - Swedish (sv)\u001b[0m", "    \u001b[37m-\t# Simplified Chinese (zh-CN) - Spanish (es) - Traditional Chinese (zh-TW)\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tAddLanguage am .amh\u001b[0m", "    \u001b[37m-\tAddLanguage ar .ara\u001b[0m", "    \u001b[37m-\tAddLanguage be .be\u001b[0m", "    \u001b[37m-\tAddLanguage bg .bg\u001b[0m", "    \u001b[37m-\tAddLanguage bn .bn\u001b[0m", "    \u001b[37m-\tAddLanguage br .br\u001b[0m", "    \u001b[37m-\tAddLanguage bs .bs\u001b[0m", "    \u001b[37m-\tAddLanguage ca .ca\u001b[0m", "    \u001b[37m-\tAddLanguage cs .cz .cs\u001b[0m", "    \u001b[37m-\tAddLanguage cy .cy\u001b[0m", "    \u001b[37m-\tAddLanguage da .dk\u001b[0m", "    \u001b[37m-\tAddLanguage de .de\u001b[0m", "    \u001b[37m-\tAddLanguage dz .dz\u001b[0m", "    \u001b[37m-\tAddLanguage el .el\u001b[0m", "    \u001b[37m-\tAddLanguage en .en\u001b[0m", "    \u001b[37m-\tAddLanguage eo .eo\u001b[0m", "    \u001b[37m-\t# es is ecmascript in /etc/mime.types\u001b[0m", "    \u001b[37m-\tRemoveType  es\u001b[0m", "    \u001b[37m-\tAddLanguage es .es\u001b[0m", "    \u001b[37m-\tAddLanguage et .et\u001b[0m", "    \u001b[37m-\tAddLanguage eu .eu\u001b[0m", "    \u001b[37m-\tAddLanguage fa .fa\u001b[0m", "    \u001b[37m-\tAddLanguage fi .fi\u001b[0m", "    \u001b[37m-\tAddLanguage fr .fr\u001b[0m", "    \u001b[37m-\tAddLanguage ga .ga\u001b[0m", "    \u001b[37m-\tAddLanguage gl .glg\u001b[0m", "    \u001b[37m-\tAddLanguage gu .gu\u001b[0m", "    \u001b[37m-\tAddLanguage he .he\u001b[0m", "    \u001b[37m-\tAddLanguage hi .hi\u001b[0m", "    \u001b[37m-\tAddLanguage hr .hr\u001b[0m", "    \u001b[37m-\tAddLanguage hu .hu\u001b[0m", "    \u001b[37m-\tAddLanguage hy .hy\u001b[0m", "    \u001b[37m-\tAddLanguage id .id\u001b[0m", "    \u001b[37m-\tAddLanguage is .is\u001b[0m", "    \u001b[37m-\tAddLanguage it .it\u001b[0m", "    \u001b[37m-\tAddLanguage ja .ja\u001b[0m", "    \u001b[37m-\tAddLanguage ka .ka\u001b[0m", "    \u001b[37m-\tAddLanguage kk .kk\u001b[0m", "    \u001b[37m-\tAddLanguage km .km\u001b[0m", "    \u001b[37m-\tAddLanguage kn .kn\u001b[0m", "    \u001b[37m-\tAddLanguage ko .ko\u001b[0m", "    \u001b[37m-\tAddLanguage ku .ku\u001b[0m", "    \u001b[37m-\tAddLanguage lo .lo\u001b[0m", "    \u001b[37m-\tAddLanguage lt .lt\u001b[0m", "    \u001b[37m-\tAddLanguage ltz .ltz\u001b[0m", "    \u001b[37m-\tAddLanguage lv .lv\u001b[0m", "    \u001b[37m-\tAddLanguage mg .mg\u001b[0m", "    \u001b[37m-\tAddLanguage mk .mk\u001b[0m", "    \u001b[37m-\tAddLanguage ml .ml\u001b[0m", "    \u001b[37m-\tAddLanguage mr .mr\u001b[0m", "    \u001b[37m-\tAddLanguage ms .msa\u001b[0m", "    \u001b[37m-\tAddLanguage nb .nob\u001b[0m", "    \u001b[37m-\tAddLanguage ne .ne\u001b[0m", "    \u001b[37m-\tAddLanguage nl .nl\u001b[0m", "    \u001b[37m-\tAddLanguage nn .nn\u001b[0m", "    \u001b[37m-\tAddLanguage no .no\u001b[0m", "    \u001b[37m-\tAddLanguage pa .pa\u001b[0m", "    \u001b[37m-\tAddLanguage pl .po\u001b[0m", "    \u001b[37m-\tAddLanguage pt-BR .pt-br\u001b[0m", "    \u001b[37m-\tAddLanguage pt .pt\u001b[0m", "    \u001b[37m-\tAddLanguage ro .ro\u001b[0m", "    \u001b[37m-\tAddLanguage ru .ru\u001b[0m", "    \u001b[37m-\tAddLanguage sa .sa\u001b[0m", "    \u001b[37m-\tAddLanguage se .se\u001b[0m", "    \u001b[37m-\tAddLanguage si .si\u001b[0m", "    \u001b[37m-\tAddLanguage sk .sk\u001b[0m", "    \u001b[37m-\tAddLanguage sl .sl\u001b[0m", "    \u001b[37m-\tAddLanguage sq .sq\u001b[0m", "    \u001b[37m-\tAddLanguage sr .sr\u001b[0m", "    \u001b[37m-\tAddLanguage sv .sv\u001b[0m", "    \u001b[37m-\tAddLanguage ta .ta\u001b[0m", "    \u001b[37m-\tAddLanguage te .te\u001b[0m", "    \u001b[37m-\tAddLanguage th .th\u001b[0m", "    \u001b[37m-\tAddLanguage tl .tl\u001b[0m", "    \u001b[37m-\tRemoveType  tr\u001b[0m", "    \u001b[37m-\t# tr is troff in /etc/mime.types\u001b[0m", "    \u001b[37m-\tAddLanguage tr .tr\u001b[0m", "    \u001b[37m-\tAddLanguage uk .uk\u001b[0m", "    \u001b[37m-\tAddLanguage ur .ur\u001b[0m", "    \u001b[37m-\tAddLanguage vi .vi\u001b[0m", "    \u001b[37m-\tAddLanguage wo .wo\u001b[0m", "    \u001b[37m-\tAddLanguage xh .xh\u001b[0m", "    \u001b[37m-\tAddLanguage zh-CN .zh-cn\u001b[0m", "    \u001b[37m-\tAddLanguage zh-TW .zh-tw\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # DefaultLanguage and AddLanguage allows you to specify the language of\u001b[0m", "    \u001b[37m+  # a document. You can then use content negotiation to give a browser a\u001b[0m", "    \u001b[37m+  # file in a language the user can understand.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Specify a default language. This means that all data\u001b[0m", "    \u001b[37m+  # going out without a specific language tag (see below) will\u001b[0m", "    \u001b[37m+  # be marked with this one. You probably do NOT want to set\u001b[0m", "    \u001b[37m+  # this unless you are sure it is correct for all cases.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # * It is generally better to not mark a page as\u001b[0m", "    \u001b[37m+  # * being a certain language than marking it with the wrong\u001b[0m", "    \u001b[37m+  # * language!\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # DefaultLanguage nl\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Note 1: The suffix does not have to be the same as the language\u001b[0m", "    \u001b[37m+  # keyword --- those with documents in Polish (whose net-standard\u001b[0m", "    \u001b[37m+  # language code is pl) may wish to use \"AddLanguage pl .po\" to\u001b[0m", "    \u001b[37m+  # avoid the ambiguity with the common suffix for perl scripts.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Note 2: The example entries below illustrate that in some cases\u001b[0m", "    \u001b[37m+  # the two character 'Language' abbreviation is not identical to\u001b[0m", "    \u001b[37m+  # the two character 'Country' code for its country,\u001b[0m", "    \u001b[37m+  # E.g. 'Danmark/dk' versus 'Danish/da'.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Note 3: In the case of 'ltz' we violate the RFC by using a three char\u001b[0m", "    \u001b[37m+  # specifier. There is 'work in progress' to fix this and get\u001b[0m", "    \u001b[37m+  # the reference data for rfc1766 cleaned up.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Catalan (ca) - Croatian (hr) - Czech (cs) - Danish (da) - Dutch (nl)\u001b[0m", "    \u001b[37m+  # English (en) - Esperanto (eo) - Estonian (et) - French (fr) - German (de)\u001b[0m", "    \u001b[37m+  # Greek-Modern (el) - Hebrew (he) - Italian (it) - Japanese (ja)\u001b[0m", "    \u001b[37m+  # Korean (ko) - Luxembourgeois* (ltz) - Norwegian Nynorsk (nn)\u001b[0m", "    \u001b[37m+  # Norwegian (no) - Polish (pl) - Portugese (pt)\u001b[0m", "    \u001b[37m+  # Brazilian Portuguese (pt-BR) - Russian (ru) - Swedish (sv)\u001b[0m", "    \u001b[37m+  # Simplified Chinese (zh-CN) - Spanish (es) - Traditional Chinese (zh-TW)\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  AddLanguage ca .ca\u001b[0m", "    \u001b[37m+  AddLanguage cs .cz .cs\u001b[0m", "    \u001b[37m+  AddLanguage da .dk\u001b[0m", "    \u001b[37m+  AddLanguage de .de\u001b[0m", "    \u001b[37m+  AddLanguage el .el\u001b[0m", "    \u001b[37m+  AddLanguage en .en\u001b[0m", "    \u001b[37m+  AddLanguage eo .eo\u001b[0m", "    \u001b[37m+  # See README.Debian for Spanish\u001b[0m", "    \u001b[37m+  AddLanguage es .es\u001b[0m", "    \u001b[37m+  AddLanguage et .et\u001b[0m", "    \u001b[37m+  AddLanguage fr .fr\u001b[0m", "    \u001b[37m+  AddLanguage he .he\u001b[0m", "    \u001b[37m+  AddLanguage hr .hr\u001b[0m", "    \u001b[37m+  AddLanguage it .it\u001b[0m", "    \u001b[37m+  AddLanguage ja .ja\u001b[0m", "    \u001b[37m+  AddLanguage ko .ko\u001b[0m", "    \u001b[37m+  AddLanguage ltz .ltz\u001b[0m", "    \u001b[37m+  AddLanguage nl .nl\u001b[0m", "    \u001b[37m+  AddLanguage nn .nn\u001b[0m", "    \u001b[37m+  AddLanguage no .no\u001b[0m", "    \u001b[37m+  AddLanguage pl .po\u001b[0m", "    \u001b[37m+  AddLanguage pt .pt\u001b[0m", "    \u001b[37m+  AddLanguage pt-BR .pt-br\u001b[0m", "    \u001b[37m+  AddLanguage ru .ru\u001b[0m", "    \u001b[37m+  AddLanguage sv .sv\u001b[0m", "    \u001b[37m+  # See README.Debian for Turkish\u001b[0m", "    \u001b[37m+  AddLanguage tr .tr\u001b[0m", "    \u001b[37m+  AddLanguage zh-CN .zh-cn\u001b[0m", "    \u001b[37m+  AddLanguage zh-TW .zh-tw\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Commonly used filename extensions to character sets. You probably\u001b[0m", "    \u001b[37m-\t# want to avoid clashes with the language extensions, unless you\u001b[0m", "    \u001b[37m-\t# are good at carefully testing your setup after each change.\u001b[0m", "    \u001b[37m-\t# See http://www.iana.org/assignments/character-sets for the\u001b[0m", "    \u001b[37m-\t# official list of charset names and their respective RFCs.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tAddCharset us-ascii\t.ascii .us-ascii\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-1  .iso8859-1  .latin1\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-2  .iso8859-2  .latin2 .cen\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-3  .iso8859-3  .latin3\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-4  .iso8859-4  .latin4\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-5  .iso8859-5  .cyr .iso-ru\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-6  .iso8859-6  .arb .arabic\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-7  .iso8859-7  .grk .greek\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-8  .iso8859-8  .heb .hebrew\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-9  .iso8859-9  .latin5 .trk\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-10  .iso8859-10  .latin6\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-13  .iso8859-13\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-14  .iso8859-14  .latin8\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-15  .iso8859-15  .latin9\u001b[0m", "    \u001b[37m-\tAddCharset ISO-8859-16  .iso8859-16  .latin10\u001b[0m", "    \u001b[37m-\tAddCharset ISO-2022-JP .iso2022-jp .jis\u001b[0m", "    \u001b[37m-\tAddCharset ISO-2022-KR .iso2022-kr .kis\u001b[0m", "    \u001b[37m-\tAddCharset ISO-2022-CN .iso2022-cn .cis\u001b[0m", "    \u001b[37m-\tAddCharset Big5\t\t.Big5\t   .big5 .b5\u001b[0m", "    \u001b[37m-\tAddCharset cn-Big5\t .cn-big5\u001b[0m", "    \u001b[37m-\t# For russian, more than one charset is used (depends on client, mostly):\u001b[0m", "    \u001b[37m-\tAddCharset WINDOWS-1251 .cp-1251   .win-1251\u001b[0m", "    \u001b[37m-\tAddCharset CP866\t   .cp866\u001b[0m", "    \u001b[37m-\tAddCharset KOI8\t  .koi8\u001b[0m", "    \u001b[37m-\tAddCharset KOI8-E\t  .koi8-e\u001b[0m", "    \u001b[37m-\tAddCharset KOI8-r\t  .koi8-r .koi8-ru\u001b[0m", "    \u001b[37m-\tAddCharset KOI8-U\t  .koi8-u\u001b[0m", "    \u001b[37m-\tAddCharset KOI8-ru\t .koi8-uk .ua\u001b[0m", "    \u001b[37m-\tAddCharset ISO-10646-UCS-2 .ucs2\u001b[0m", "    \u001b[37m-\tAddCharset ISO-10646-UCS-4 .ucs4\u001b[0m", "    \u001b[37m-\tAddCharset UTF-7\t   .utf7\u001b[0m", "    \u001b[37m-\tAddCharset UTF-8\t   .utf8\u001b[0m", "    \u001b[37m-\tAddCharset UTF-16\t  .utf16\u001b[0m", "    \u001b[37m-\tAddCharset UTF-16BE\t.utf16be\u001b[0m", "    \u001b[37m-\tAddCharset UTF-16LE\t.utf16le\u001b[0m", "    \u001b[37m-\tAddCharset UTF-32\t  .utf32\u001b[0m", "    \u001b[37m-\tAddCharset UTF-32BE\t.utf32be\u001b[0m", "    \u001b[37m-\tAddCharset UTF-32LE\t.utf32le\u001b[0m", "    \u001b[37m-\tAddCharset euc-cn\t  .euc-cn\u001b[0m", "    \u001b[37m-\tAddCharset euc-gb\t  .euc-gb\u001b[0m", "    \u001b[37m-\tAddCharset euc-jp\t  .euc-jp\u001b[0m", "    \u001b[37m-\tAddCharset euc-kr\t  .euc-kr\u001b[0m", "    \u001b[37m-\t#Not sure how euc-tw got in - IANA doesn't list it???\u001b[0m", "    \u001b[37m-\tAddCharset EUC-TW\t  .euc-tw\u001b[0m", "    \u001b[37m-\tAddCharset gb2312\t  .gb2312 .gb\u001b[0m", "    \u001b[37m-\tAddCharset iso-10646-ucs-2 .ucs-2 .iso-10646-ucs-2\u001b[0m", "    \u001b[37m-\tAddCharset iso-10646-ucs-4 .ucs-4 .iso-10646-ucs-4\u001b[0m", "    \u001b[37m-\tAddCharset shift_jis   .shift_jis .sjis\u001b[0m", "    \u001b[37m-\tAddCharset BRF\t\t .brf\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Commonly used filename extensions to character sets. You probably\u001b[0m", "    \u001b[37m+  # want to avoid clashes with the language extensions, unless you\u001b[0m", "    \u001b[37m+  # are good at carefully testing your setup after each change.\u001b[0m", "    \u001b[37m+  # See http://www.iana.org/assignments/character-sets for the\u001b[0m", "    \u001b[37m+  # official list of charset names and their respective RFCs.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  AddCharset us-ascii    .ascii .us-ascii\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-1  .iso8859-1  .latin1\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-3  .iso8859-3  .latin3\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-4  .iso8859-4  .latin4\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-5  .iso8859-5  .cyr .iso-ru\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-6  .iso8859-6  .arb .arabic\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-7  .iso8859-7  .grk .greek\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-8  .iso8859-8  .heb .hebrew\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-9  .iso8859-9  .latin5 .trk\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-10  .iso8859-10  .latin6\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-13  .iso8859-13\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-14  .iso8859-14  .latin8\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-15  .iso8859-15  .latin9\u001b[0m", "    \u001b[37m+  AddCharset ISO-8859-16  .iso8859-16  .latin10\u001b[0m", "    \u001b[37m+  AddCharset ISO-2022-JP .iso2022-jp .jis\u001b[0m", "    \u001b[37m+  AddCharset ISO-2022-KR .iso2022-kr .kis\u001b[0m", "    \u001b[37m+  AddCharset ISO-2022-CN .iso2022-cn .cis\u001b[0m", "    \u001b[37m+  AddCharset Big5        .Big5       .big5 .b5\u001b[0m", "    \u001b[37m+  AddCharset cn-Big5     .cn-big5\u001b[0m", "    \u001b[37m+  # For russian, more than one charset is used (depends on client, mostly):\u001b[0m", "    \u001b[37m+  AddCharset WINDOWS-1251 .cp-1251   .win-1251\u001b[0m", "    \u001b[37m+  AddCharset CP866       .cp866\u001b[0m", "    \u001b[37m+  AddCharset KOI8      .koi8\u001b[0m", "    \u001b[37m+  AddCharset KOI8-E      .koi8-e\u001b[0m", "    \u001b[37m+  AddCharset KOI8-r      .koi8-r .koi8-ru\u001b[0m", "    \u001b[37m+  AddCharset KOI8-U      .koi8-u\u001b[0m", "    \u001b[37m+  AddCharset KOI8-ru     .koi8-uk .ua\u001b[0m", "    \u001b[37m+  AddCharset ISO-10646-UCS-2 .ucs2\u001b[0m", "    \u001b[37m+  AddCharset ISO-10646-UCS-4 .ucs4\u001b[0m", "    \u001b[37m+  AddCharset UTF-7       .utf7\u001b[0m", "    \u001b[37m+  AddCharset UTF-8       .utf8\u001b[0m", "    \u001b[37m+  AddCharset UTF-16      .utf16\u001b[0m", "    \u001b[37m+  AddCharset UTF-16BE    .utf16be\u001b[0m", "    \u001b[37m+  AddCharset UTF-16LE    .utf16le\u001b[0m", "    \u001b[37m+  AddCharset UTF-32      .utf32\u001b[0m", "    \u001b[37m+  AddCharset UTF-32BE    .utf32be\u001b[0m", "    \u001b[37m+  AddCharset UTF-32LE    .utf32le\u001b[0m", "    \u001b[37m+  AddCharset euc-cn      .euc-cn\u001b[0m", "    \u001b[37m+  AddCharset euc-gb      .euc-gb\u001b[0m", "    \u001b[37m+  AddCharset euc-jp      .euc-jp\u001b[0m", "    \u001b[37m+  AddCharset euc-kr      .euc-kr\u001b[0m", "    \u001b[37m+  #Not sure how euc-tw got in - IANA doesn't list it???\u001b[0m", "    \u001b[37m+  AddCharset EUC-TW      .euc-tw\u001b[0m", "    \u001b[37m+  AddCharset gb2312      .gb2312 .gb\u001b[0m", "    \u001b[37m+  AddCharset iso-10646-ucs-2 .ucs-2 .iso-10646-ucs-2\u001b[0m", "    \u001b[37m+  AddCharset iso-10646-ucs-4 .ucs-4 .iso-10646-ucs-4\u001b[0m", "    \u001b[37m+  AddCharset shift_jis   .shift_jis .sjis\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# AddHandler allows you to map certain file extensions to \"handlers\":\u001b[0m", "    \u001b[37m-\t# actions unrelated to filetype. These can be either built into the server\u001b[0m", "    \u001b[37m-\t# or added with the Action directive (see below)\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# To use CGI scripts outside of ScriptAliased directories:\u001b[0m", "    \u001b[37m-\t# (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t#AddHandler cgi-script .cgi\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # AddHandler allows you to map certain file extensions to \"handlers\":\u001b[0m", "    \u001b[37m+  # actions unrelated to filetype. These can be either built into the server\u001b[0m", "    \u001b[37m+  # or added with the Action directive (see below)\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # To use CGI scripts outside of ScriptAliased directories:\u001b[0m", "    \u001b[37m+  # (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  #AddHandler cgi-script .cgi\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# For files that include their own HTTP headers:\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t#AddHandler send-as-is asis\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # For files that include their own HTTP headers:\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  #AddHandler send-as-is asis\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# For server-parsed imagemap files:\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t#AddHandler imap-file map\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # For server-parsed imagemap files:\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  #AddHandler imap-file map\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# For type maps (negotiated resources):\u001b[0m", "    \u001b[37m-\t# (This is enabled by default to allow the Apache \"It Worked\" page\u001b[0m", "    \u001b[37m-\t#  to be distributed in multiple languages.)\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tAddHandler type-map var\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # For type maps (negotiated resources):\u001b[0m", "    \u001b[37m+  # (This is enabled by default to allow the Apache \"It Worked\" page\u001b[0m", "    \u001b[37m+  #  to be distributed in multiple languages.)\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  AddHandler type-map var\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Filters allow you to process content before it is sent to the client.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# To parse .shtml files for server-side includes (SSI):\u001b[0m", "    \u001b[37m-\t# (You will also need to add \"Includes\" to the \"Options\" directive.)\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tAddType text/html .shtml\u001b[0m", "    \u001b[37m-\tAddOutputFilter INCLUDES .shtml\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Filters allow you to process content before it is sent to the client.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # To parse .shtml files for server-side includes (SSI):\u001b[0m", "    \u001b[37m+  # (You will also need to add \"Includes\" to the \"Options\" directive.)\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  AddType text/html .shtml\u001b[0m", "    \u001b[37m+  AddOutputFilter INCLUDES .shtml\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/mime.load] action create (up to date)", "  * execute[a2enmod mime] action run (skipped due to not_if)", "Recipe: apache2::mod_negotiation\u001b[0m", "  * template[/etc/apache2/mods-available/negotiation.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/negotiation.conf from 0649b6 to 3ad8fd\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/negotiation.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-negotiation20190423-11189-1aur8ta.conf\t2019-04-23 15:42:46.939522117 +0000\u001b[0m", "    \u001b[37m@@ -1,21 +1,18 @@\u001b[0m", "    \u001b[37m <IfModule mod_negotiation.c>\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # LanguagePriority allows you to give precedence to some languages\u001b[0m", "    \u001b[37m+  # in case of a tie during content negotiation.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # Just list the languages in decreasing order of preference. We have\u001b[0m", "    \u001b[37m+  # more or less alphabetized them here. You probably want to change this.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv tr zh-CN zh-TW\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t# LanguagePriority allows you to give precedence to some languages\u001b[0m", "    \u001b[37m-\t# in case of a tie during content negotiation.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# Just list the languages in decreasing order of preference. We have\u001b[0m", "    \u001b[37m-\t# more or less alphabetized them here. You probably want to change this.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tLanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv tr zh-CN zh-TW\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# ForceLanguagePriority allows you to serve a result page rather than\u001b[0m", "    \u001b[37m-\t# MULTIPLE CHOICES (Prefer) [in case of a tie] or NOT ACCEPTABLE (Fallback)\u001b[0m", "    \u001b[37m-\t# [in case no accepted languages matched the available variants]\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tForceLanguagePriority Prefer Fallback\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # ForceLanguagePriority allows you to serve a result page rather than\u001b[0m", "    \u001b[37m+  # MULTIPLE CHOICES (Prefer) [in case of a tie] or NOT ACCEPTABLE (Fallback)\u001b[0m", "    \u001b[37m+  # [in case no accepted languages matched the available variants]\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  ForceLanguagePriority Prefer Fallback\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/negotiation.load] action create (up to date)", "  * execute[a2enmod negotiation] action run (skipped due to not_if)", "Recipe: apache2::mod_setenvif\u001b[0m", "  * template[/etc/apache2/mods-available/setenvif.conf] action create", "    \u001b[32m- update content in file /etc/apache2/mods-available/setenvif.conf from 56aca4 to fb5a27\u001b[0m", "    \u001b[37m--- /etc/apache2/mods-available/setenvif.conf\t2018-06-11 14:24:32.000000000 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/mods-available/.chef-setenvif20190423-11189-1c9pdut.conf\t2019-04-23 15:42:46.947522814 +0000\u001b[0m", "    \u001b[37m@@ -1,33 +1,29 @@\u001b[0m", "    \u001b[37m <IfModule mod_setenvif.c>\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # The following directives modify normal HTTP response behavior to\u001b[0m", "    \u001b[37m+  # handle known problems with browser implementations.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  BrowserMatch \"Mozilla/2\" nokeepalive\u001b[0m", "    \u001b[37m+  BrowserMatch \"MSIE 4\\.0b2;\" nokeepalive downgrade-1.0 force-response-1.0\u001b[0m", "    \u001b[37m+  BrowserMatch \"RealPlayer 4\\.0\" force-response-1.0\u001b[0m", "    \u001b[37m+  BrowserMatch \"Java/1\\.0\" force-response-1.0\u001b[0m", "    \u001b[37m+  BrowserMatch \"JDK/1\\.0\" force-response-1.0\u001b[0m", "    \u001b[37m \u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# The following directives modify normal HTTP response behavior to\u001b[0m", "    \u001b[37m-\t# handle known problems with browser implementations.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tBrowserMatch \"Mozilla/2\" nokeepalive\u001b[0m", "    \u001b[37m-\tBrowserMatch \"MSIE 4\\.0b2;\" nokeepalive downgrade-1.0 force-response-1.0\u001b[0m", "    \u001b[37m-\tBrowserMatch \"RealPlayer 4\\.0\" force-response-1.0\u001b[0m", "    \u001b[37m-\tBrowserMatch \"Java/1\\.0\" force-response-1.0\u001b[0m", "    \u001b[37m-\tBrowserMatch \"JDK/1\\.0\" force-response-1.0\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\t# The following directive disables redirects on non-GET requests for\u001b[0m", "    \u001b[37m-\t# a directory that does not include the trailing slash.  This fixes a\u001b[0m", "    \u001b[37m-\t# problem with Microsoft WebFolders which does not appropriately handle\u001b[0m", "    \u001b[37m-\t# redirects for folders with DAV methods.\u001b[0m", "    \u001b[37m-\t# Same deal with Apple's DAV filesystem and Gnome VFS support for DAV.\u001b[0m", "    \u001b[37m-\t#\u001b[0m", "    \u001b[37m-\tBrowserMatch \"Microsoft Data Access Internet Publishing Provider\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"MS FrontPage\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"^WebDrive\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"^WebDAVFS/1.[012]\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"^gnome-vfs/1.0\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"^gvfs/1\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"^XML Spy\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \"^Dreamweaver-WebDAV-SCM1\" redirect-carefully\u001b[0m", "    \u001b[37m-\tBrowserMatch \" Konqueror/4\" redirect-carefully\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  # The following directive disables redirects on non-GET requests for\u001b[0m", "    \u001b[37m+  # a directory that does not include the trailing slash.  This fixes a\u001b[0m", "    \u001b[37m+  # problem with Microsoft WebFolders which does not appropriately handle\u001b[0m", "    \u001b[37m+  # redirects for folders with DAV methods.\u001b[0m", "    \u001b[37m+  # Same deal with Apple's DAV filesystem and Gnome VFS support for DAV.\u001b[0m", "    \u001b[37m+  #\u001b[0m", "    \u001b[37m+  BrowserMatch \"Microsoft Data Access Internet Publishing Provider\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"MS FrontPage\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"^WebDrive\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"^WebDAVFS/1.[012]\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"^gnome-vfs/1.0\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"^gvfs/1\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"^XML Spy\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \"^Dreamweaver-WebDAV-SCM1\" redirect-carefully\u001b[0m", "    \u001b[37m+  BrowserMatch \" Konqueror/4\" redirect-carefully\u001b[0m", "    \u001b[37m </IfModule>\u001b[0m", "    \u001b[37m-\u001b[0m", "    \u001b[37m-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\u001b[0m", "\u001b[0m  * file[/etc/apache2/mods-available/setenvif.load] action create (up to date)", "  * execute[a2enmod setenvif] action run (skipped due to not_if)", "Recipe: apache2::default\u001b[0m", "  * service[apache2] action enable (up to date)", "  * service[apache2] action start (up to date)", "Recipe: apache2::mod_wsgi\u001b[0m", "  * apt_package[libapache2-mod-wsgi] action install", "    \u001b[32m- install version 4.3.0-1.1build1 of package libapache2-mod-wsgi\u001b[0m", "\u001b[0m  * file[/etc/apache2/conf.d/wsgi.conf] action create (skipped due to only_if)", "  * file[/etc/apache2/mods-available/wsgi.load] action create (up to date)", "  * execute[a2enmod wsgi] action run (skipped due to not_if)", "Recipe: openstack-identity::server-apache\u001b[0m", "  * directory[/var/www/html/keystone] action create", "    \u001b[32m- create new directory /var/www/html/keystone\u001b[0m", "    \u001b[32m- change mode from '' to '0755'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0mRecipe: apache2::mod_rewrite\u001b[0m", "  * file[/etc/apache2/mods-available/rewrite.load] action create (up to date)", "  * execute[a2enmod rewrite] action run", "    \u001b[32m- execute /usr/sbin/a2enmod rewrite\u001b[0m", "\u001b[0mRecipe: apache2::mod_headers\u001b[0m", "  * file[/etc/apache2/mods-available/headers.load] action create (up to date)", "  * execute[a2enmod headers] action run", "    \u001b[32m- execute /usr/sbin/a2enmod headers\u001b[0m", "\u001b[0mRecipe: openstack-identity::server-apache\u001b[0m", "  * template[/etc/apache2/sites-available/identity.conf] action create", "    \u001b[32m- create new file /etc/apache2/sites-available/identity.conf\u001b[0m", "    \u001b[32m- update content in file /etc/apache2/sites-available/identity.conf from none to d0fe55\u001b[0m", "    \u001b[37m--- /etc/apache2/sites-available/identity.conf\t2019-04-23 15:42:53.176064889 +0000\u001b[0m", "    \u001b[37m+++ /etc/apache2/sites-available/.chef-identity20190423-11189-waowio.conf\t2019-04-23 15:42:53.176064889 +0000\u001b[0m", "    \u001b[37m@@ -1 +1,22 @@\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+# This file is automatically generated by Chef\u001b[0m", "    \u001b[37m+# Any changes will be overwritten\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+<VirtualHost 139.178.70.138:5000>\u001b[0m", "    \u001b[37m+    WSGIDaemonProcess identity processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}\u001b[0m", "    \u001b[37m+    WSGIProcessGroup identity\u001b[0m", "    \u001b[37m+    WSGIScriptAlias / /usr/bin/keystone-wsgi-public\u001b[0m", "    \u001b[37m+    WSGIApplicationGroup %{GLOBAL}\u001b[0m", "    \u001b[37m+    WSGIPassAuthorization On\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    ErrorLogFormat \"%{cu}t %M\"\u001b[0m", "    \u001b[37m+    ErrorLog /var/log/apache2/identity.log\u001b[0m", "    \u001b[37m+    CustomLog /var/log/apache2/identity_access.log combined\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+    <Directory /usr/bin>\u001b[0m", "    \u001b[37m+        Require all granted\u001b[0m", "    \u001b[37m+    </Directory>\u001b[0m", "    \u001b[37m+\u001b[0m", "    \u001b[37m+</VirtualHost>\u001b[0m", "    \u001b[32m- change mode from '' to '0644'\u001b[0m", "    \u001b[32m- change owner from '' to 'root'\u001b[0m", "    \u001b[32m- change group from '' to 'root'\u001b[0m", "\u001b[0m  * execute[a2ensite identity.conf] action run", "    \u001b[32m- execute /usr/sbin/a2ensite identity.conf\u001b[0m", "\u001b[0m  * execute[a2dissite keystone.conf] action run (skipped due to only_if)", "  * execute[Keystone apache restart] action run", "    \u001b[32m- execute uname\u001b[0m", "\u001b[0mRecipe: openstack-dashboard::apache2-server\u001b[0m", "  * execute[restore-selinux-context] action run (skipped due to only_if)", "Recipe: apache2::default\u001b[0m", "  * service[apache2] action restart", "    \u001b[32m- restart service service[apache2]\u001b[0m", "\u001b[0mRecipe: openstack-dashboard::horizon\u001b[0m", "  * file[/usr/share/openstack-dashboard/openstack_dashboard/local/.secret_key_store] action create (skipped due to only_if)", "Recipe: openstack-identity::server-apache\u001b[0m", "  * execute[restore-selinux-context] action nothing (skipped due to action :nothing)", "Recipe: openstack-identity::registration\u001b[0m", "  * ruby_block[wait for identity endpoint] action run", "    \u001b[0m", "    ================================================================================\u001b[0m", "    \u001b[31mError executing action `run` on resource 'ruby_block[wait for identity endpoint]'\u001b[0m", "    ================================================================================\u001b[0m", "    ", "\u001b[0m    RuntimeError\u001b[0m", "    ------------\u001b[0m", "    Waited 60 seconds for identity endpoint to become ready and will not wait any longer\u001b[0m", "    ", "\u001b[0m    Cookbook Trace:\u001b[0m", "    ---------------\u001b[0m", "    /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:62:in `rescue in block (2 levels) in from_file'", "\u001b[0m    /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:54:in `block (2 levels) in from_file'\u001b[0m", "    ", "\u001b[0m    Resource Declaration:\u001b[0m", "    ---------------------\u001b[0m", "    # In /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb", "\u001b[0m    ", "\u001b[0m     52: ruby_block 'wait for identity endpoint' do", "\u001b[0m     53:   block do", "\u001b[0m     54:     begin", "\u001b[0m     55:       Timeout.timeout(60) do", "\u001b[0m     56:         until Net::HTTP.get_response(URI(auth_url)).message == 'OK'", "\u001b[0m     57:           Chef::Log.info 'waiting for identity endpoint to be up...'", "\u001b[0m     58:           sleep 1", "\u001b[0m     59:         end", "\u001b[0m     60:       end", "\u001b[0m     61:     rescue Timeout::Error", "\u001b[0m     62:       raise 'Waited 60 seconds for identity endpoint to become ready'\\", "\u001b[0m     63:         ' and will not wait any longer'", "\u001b[0m     64:     end", "\u001b[0m     65:   end", "\u001b[0m    ", "\u001b[0m    Compiled Resource:\u001b[0m", "    ------------------\u001b[0m", "    # Declared in /root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:52:in `from_file'", "\u001b[0m    ", "\u001b[0m    ruby_block(\"wait for identity endpoint\") do", "\u001b[0m      action [:run]", "\u001b[0m      default_guard_interpreter :default", "\u001b[0m      declared_type :ruby_block", "\u001b[0m      cookbook_name \"openstack-identity\"", "\u001b[0m      recipe_name \"registration\"", "\u001b[0m      block #<Proc:0x00000000058a3c48@/root/.chef/local-mode-cache/cache/cookbooks/openstack-identity/recipes/registration.rb:53>", "\u001b[0m      block_name \"wait for identity endpoint\"", "\u001b[0m    end", "\u001b[0m    ", "\u001b[0m    System Info:\u001b[0m", "    ------------\u001b[0m", "    chef_version=14.4.56", "\u001b[0m    platform=ubuntu", "\u001b[0m    platform_version=16.04", "\u001b[0m    ruby=ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]", "\u001b[0m    program_name=/usr/bin/chef-client", "\u001b[0m    executable=/opt/chefdk/bin/chef-client\u001b[0m", "    ", "\u001b[0mRecipe: mariadb::server\u001b[0m", "  * service[mysql] action restart", "    \u001b[32m- restart service service[mysql]\u001b[0m", "\u001b[0mRecipe: rabbitmq::default\u001b[0m", "  * service[rabbitmq-server] action restart", "    \u001b[32m- restart service service[rabbitmq-server]\u001b[0m", "\u001b[0mRecipe: apache2::default\u001b[0m", "  * service[apache2] action reload", "    \u001b[32m- reload service service[apache2]\u001b[0m", "\u001b[0mRecipe: openstack-dashboard::horizon\u001b[0m", "  * file[/usr/share/openstack-dashboard/openstack_dashboard/local/.secret_key_store] action create (skipped due to only_if)", "Recipe: apache2::default\u001b[0m", "  * service[apache2] action restart", "    \u001b[32m- restart service service[apache2]\u001b[0m", "\u001b[0mRecipe: openstack-dashboard::horizon\u001b[0m", "  * file[/usr/share/openstack-dashboard/openstack_dashboard/local/.secret_key_store] action create (skipped due to only_if)", "\u001b[0m", "Running handlers:\u001b[0m", "[2019-04-23T15:44:04+00:00] ERROR: Running exception handlers", "Running handlers complete", "\u001b[0m[2019-04-23T15:44:04+00:00] ERROR: Exception handlers complete", "Chef Client failed. 202 resources updated in 05 minutes 39 seconds\u001b[0m", "[2019-04-23T15:44:04+00:00] FATAL: Stacktrace dumped to /root/.chef/local-mode-cache/cache/chef-stacktrace.out", "[2019-04-23T15:44:04+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report", "[2019-04-23T15:44:04+00:00] FATAL: RuntimeError: ruby_block[wait for identity endpoint] (openstack-identity::registration line 52) had an error: RuntimeError: Waited 60 seconds for identity endpoint to become ready and will not wait any longer"]}